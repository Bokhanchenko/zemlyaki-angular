"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e(t["@uirouter/angularjs"]={},t.angular)}(void 0,function(t,e){function r(t){function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}var r=[].slice.apply(arguments,[1]),n=t.length;return e(r)}function n(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(null,[].slice.call(arguments).reverse())}function o(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.apply(null,r)&&e.apply(null,r)}}function a(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.apply(null,r)||e.apply(null,r)}}function u(t,e){return function(r){return r[t].apply(r,e)}}function s(t){return function(e){for(var r=0;r<t.length;r++)if(t[r][0](e))return t[r][1](e)}}function c(t){if(ne(t)&&t.length){var e=t.slice(0,-1),r=t.slice(-1);return!(e.filter(Ft(ee)).length||r.filter(Ft(Xt)).length)}return Xt(t)}function f(t){return t}function l(){}function p(t,e,r,n,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(r())},a=function(t){return function(){return e[t]=o(t),e[t].apply(null,arguments)}};return n=n||Object.keys(t()),n.reduce(function(t,e){return t[e]=i?a(e):o(e),t},e)}function h(t,e){return t.indexOf(e)!==-1}function d(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),t}function v(t,e){return t.push(e),e}function y(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.concat({}).reverse(),i=ve.apply(null,n);return ve({},i,g(t||{},Object.keys(i)))}function m(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function g(t,e){var r={};for(var n in t)e.indexOf(n)!==-1&&(r[n]=t[n]);return r}function _(t,e){return Object.keys(t).filter(Ft(ge(e))).reduce(function(e,r){return e[r]=t[r],e},{})}function w(t,e){return $(t,Ht(e))}function b(t,e){var r=ne(t),n=r?[]:{},i=r?function(t){return n.push(t)}:function(t,e){return n[e]=t};return de(t,function(t,r){e(t,r)&&i(t,r)}),n}function S(t,e){var r;return de(t,function(t,n){r||e(t,n)&&(r=t)}),r}function $(t,e){var r=ne(t)?[]:{};return de(t,function(t,n){return r[n]=e(t,n)}),r}function R(t,e){return t.push(e),t}function E(t,e){return void 0===e&&(e="assert failure"),function(r){var n=t(r);if(!n)throw new Error(Xt(e)?e(r):e);return n}}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];var r,n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),i=[];for(r=0;r<n;r++)switch(t.length){case 1:i.push([t[0][r]]);break;case 2:i.push([t[0][r],t[1][r]]);break;case 3:i.push([t[0][r],t[1][r],t[2][r]]);break;case 4:i.push([t[0][r],t[1][r],t[2][r],t[3][r]]);break;default:i.push(t.map(function(t){return t[r]}))}return i}function C(t,e){var r,n;if(ne(e)&&(r=e[0],n=e[1]),!ee(r))throw new Error("invalid parameters to applyPairs");return t[r]=n,t}function P(t){return t.length&&t[t.length-1]||void 0}function k(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),ve(e,t)}function O(t,e,r){return ne(t)?t.forEach(e,r):void Object.keys(t).forEach(function(r){return e(t[r],r)})}function x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n=Object.keys(r),i=0;i<n.length;i++)t[n[i]]=r[n[i]]}return t}function j(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r="undefined"==typeof t?"undefined":_typeof(t),n="undefined"==typeof e?"undefined":_typeof(e);if(r!==n||"object"!==r)return!1;var i=[t,e];if(Nt(ne)(i))return I(t,e);if(Nt(ie)(i))return t.getTime()===e.getTime();if(Nt(oe)(i))return t.toString()===e.toString();if(Nt(Xt)(i))return!0;var o=[Xt,ne,ie,oe];if(o.map(Ut).reduce(function(t,e){return t||!!e(i)},!1))return!1;var a,u={};for(a in t){if(!j(t[a],e[a]))return!1;u[a]=!0}for(a in e)if(!u[a])return!1;return!0}function I(t,e){return t.length===e.length&&T(t,e).reduce(function(t,e){return t&&j(e[0],e[1])},!0)}function V(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function A(e){return te(e)?t.Category[e]:t.Category[t.Category[e]]}function H(t,e){function r(t){for(var e=n,r=0;r<e.length;r++){var i=new Gt(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1}var n=ee(e)?[e]:e,i=Xt(n)?n:r;return!!i(t)}function q(t,e,r){function n(t,n,i){void 0===i&&(i={});var u=new Ye(e,r,n,t,a,i);return o.push(u),u.deregister.bind(u)}var i=t._registeredHooks=t._registeredHooks||{},o=i[r.name]=[],a=_e(o);return t[r.name]=n,n}function D(t){return void 0===t&&(t=!1),function(e,r){var n=t?-1:1,i=(e.node.state.path.length-r.node.state.path.length)*n;return 0!==i?i:r.hook.priority-e.hook.priority}}function F(t,e){function r(t){return ne(t)?t:Kt(t)?[t]:[]}function n(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}function i(t,e){return function(i){if(ne(i)&&0===i.length)return i;var o=r(i),a=$(o,t);return e===!0?0===b(a,function(t){return!t}).length:n(a)}}function o(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}var a=this;["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),n="equals"===e?o:i;a[e]=n(r)}),ve(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,is:i(t.is.bind(t),!0),$arrayMode:e})}function N(t){function e(){return t.value}return t=er(t)&&{value:t}||t,e.__cacheable=!0,ve(t,{$$fn:c(t.value)?t.value:e})}function U(e,r,n,i,o){if(e.type&&r&&"string"!==r.name)throw new Error("Param '"+i+"' has two type configurations.");if(e.type&&r&&"string"===r.name&&o.type(e.type))return o.type(e.type);if(r)return r;if(!e.type){var a=n===t.DefType.CONFIG?"any":n===t.DefType.PATH?"path":n===t.DefType.SEARCH?"query":"string";return o.type(a)}return e.type instanceof Xe?e.type:o.type(e.type)}function L(t,e,r){var n=t.squash;if(!e||n===!1)return!1;if(!Kt(n)||null==n)return r;if(n===!0||ee(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function M(t,e,r,n){var i,o,a=[{from:"",to:r||e?void 0:""},{from:null,to:r||e?void 0:""}];return i=ne(t.replace)?t.replace:[],ee(n)&&i.push({from:n,to:void 0}),o=$(i,Ht("from")),b(a,function(t){return o.indexOf(t.from)===-1}).concat(i)}function B(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function G(t,e){for(;e.length<t;)e+=" ";return e}function W(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function z(t){var e=J(t),r=e.match(/^(function [^ ]+\([^)]*\))/),n=r?r[1]:e,i=t.name||"";return i&&n.match(/function \(/)?"function "+i+n.substr(9):n}function J(t){var e=ne(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}function Q(t){function e(t){if(re(t)){if(r.indexOf(t)!==-1)return"[circular ref]";r.push(t)}return mr(t)}var r=[];return JSON.stringify(t,function(t,r){return e(r)}).replace(/\\"/g,'"')}function K(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(f)}}function Y(t,e){return ee(P(t))&&ee(e)?t.slice(0,-1).concat(P(t)+e):R(t,e)}function Z(){var t=function(t){var e=function(t){return null!=t?t.toString():t},r={encode:e,decode:e,is:Lt(String),pattern:/.*/,equals:function(t,e){return t==e}};return ve({},r,t)};ve(Er.prototype,{string:t({}),path:t({pattern:/[^\/]*/}),query:t({}),hash:t({inherit:!1}),"int":t({decode:function(t){return parseInt(t,10)},is:function(t){return!Zt(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:t({encode:function(t){return t&&1||0},decode:function(t){return 0!==parseInt(t,10)},is:Lt(Boolean),pattern:/0|1/}),date:t({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(r,n){return r&&t[n]()===e[n]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:t({encode:he,decode:pe,is:Lt(Object),equals:ye,pattern:/[^\/]*/}),any:t({encode:f,decode:f,is:function(){return!0},equals:ye})})}function X(t){return t.name}function tt(t){return t.self.$$state=function(){return t},t.self}function et(t){return t.parent&&t.parent.data&&(t.data=t.self.data=me(t.parent.data,t.data)),t.data}function rt(t){return t.parent?t.parent.path.concat(t):[t]}function nt(t){var e=t.parent?ve({},t.parent.includes):{};return e[t.name]=!0,e}function it(t){var e=function(t,e){return Object.keys(t||{}).map(function(r){return{token:r,val:t[r],deps:void 0,policy:e[r]}})},r=function(t){var e=ce.$injector;return t.$inject||e&&e.annotate(t,e.strictDi)||"deferred"},n=function(t){return!(!t.token||!t.resolveFn)},o=function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},a=function(t){return!!(t&&t.val&&(ee(t.val)||ne(t.val)||Xt(t.val)))},u=function(t){return t.provide||t.token},c=s([[Ht("resolveFn"),function(t){return new ar(u(t),t.resolveFn,t.deps,t.policy)}],[Ht("useFactory"),function(t){return new ar(u(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[Ht("useClass"),function(t){return new ar(u(t),function(){return new t.useClass},[],t.policy)}],[Ht("useValue"),function(t){return new ar(u(t),function(){return t.useValue},[],t.policy,t.useValue)}],[Ht("useExisting"),function(t){return new ar(u(t),f,[t.useExisting],t.policy)}]]),l=s([[i(Ht("val"),ee),function(t){return new ar(t.token,f,[t.val],t.policy)}],[i(Ht("val"),ne),function(t){return new ar(t.token,P(t.val),t.val.slice(0,-1),t.policy)}],[i(Ht("val"),Xt),function(t){return new ar(t.token,t.val,r(t.val),t.policy)}]]),p=s([[Lt(ar),function(t){return t}],[n,c],[o,c],[a,l],[Bt(!0),function(t){throw new Error("Invalid resolve value: "+Q(t))}]]),h=t.resolve,d=ne(h)?h:e(h,t.resolvePolicy||{});return d.map(p)}function ot(t,e){var r=["",""],n=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return n;switch(e.squash){case!1:r=["(",")"+(e.isOptional?"?":"")];break;case!0:n=n.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+e.squash+"|",")?"]}return n+r[0]+e.type.pattern.source+r[1]}function at(t,e,r,n){return"/"===n?t:e?wr(n)+t:r?n.slice(1)+t:t}function ut(t){if(!(Xt(t)||ee(t)||Lt(Je)(t)||Je.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Xt(t)?t:Bt(t)}function st(t){t.addResolvable({token:nn,deps:[],resolveFn:function(){return t.router},data:t.router},""),t.addResolvable({token:vr,deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return t},data:t},""),t.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return t.params()},data:t.params()},""),t.entering().forEach(function(e){t.addResolvable({token:"$state$",deps:[],resolveFn:function(){return e},data:e},e)})}function ct(t){return function(e,r){var n=r.$$state(),i=n[t];return i(e,r)}}function ft(t,e){function r(e){return e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)}),e}var n=e.$$state().lazyLoad,i=n._promise;if(!i){var o=function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},a=function(t){return delete n._promise,ce.$q.reject(t)};i=n._promise=ce.$q.when(n(t,e)).then(r).then(o,a)}return i}function lt(t){var e=t._ignoredReason();if(e){ze.traceTransitionIgnored(t);var r=t.router.globals.transition;return"SameAsCurrent"===e&&r&&r.abort(),Fe.ignored().toPromise()}}function pt(t){if(!t.valid())throw new Error(t.error())}function ht(t){var e=function(t){return t||""},r=br(t).map(e),n=r[0],i=r[1],o=Sr(n).map(e),a=o[0],u=o[1];return{path:a,search:u,hash:i,url:t}}function dt(t,e,r,n){return function(i){function o(t){t.dispose(a),t.dispose(u)}var a=i.locationService=new r(i),u=i.locationConfig=new n(i,e);return{name:t,service:a,configuration:u,dispose:o}}}function vt(t){return ce.$injector=Dn,ce.$q=Vn,{name:"vanilla.services",$q:Vn,$injector:Dn,dispose:function(){return null}}}function yt(){var t=null;return function(e,r){return t=t||ce.$injector.get("$templateFactory"),[new ii(e,r,t)]}}function mt(t){if(!t.parent)return{};var e=["templateProvider","templateUrl","template","notify","async"],r=["controller","controllerProvider","controllerAs","resolveAs"],n=["component","bindings","componentProvider"],i=e.concat(r),o=n.concat(i);if(Kt(t.views)&&ri(o,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+o.filter(function(e){return Kt(t[e])}).join(", "));var a={},u=t.views||{$default:g(t,o)};return de(u,function(e,r){if(r=r||"$default",ee(e)&&(e={component:e}),e=ve({},e),ri(n,e)&&ri(i,e))throw new Error("Cannot combine: "+n.join("|")+" with: "+i.join("|")+" in stateview: '"+r+"@"+t.name+"'");e.resolveAs=e.resolveAs||"$resolve",e.$type="ng1",e.$context=t,e.$name=r;var o=zr.normalizeUIViewTarget(e.$context,e.$name);e.$uiViewName=o.uiViewName,e.$uiViewContextAnchor=o.uiViewContextAnchor,a[r]=e}),a}function gt(t){var e=ce.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(ai).reduce(Ce,[])}function _t(t){function e(t,e,n,i,o,a){return r._runtimeServices(i,t,n,e),delete mi.router,delete mi.$get,mi}mi=this.router=new nn,mi.stateProvider=new si(mi.stateRegistry,mi.stateService),mi.stateRegistry.decorator("views",mt),mi.stateRegistry.decorator("onExit",ci("onExit")),mi.stateRegistry.decorator("onRetain",ci("onRetain")),mi.stateRegistry.decorator("onEnter",ci("onEnter")),mi.viewService._pluginapi._viewConfigFactory("ng1",yt());var r=mi.locationService=mi.locationConfig=new fi(t);return fi.monkeyPatchPathParameterType(mi),mi.router=mi,mi.$get=e,e.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],mi}function wt(t,e,r){ce.$injector=t,ce.$q=e,r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(Ce,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}function bt(t){t.$watch(function(){ze.approximateDigests++})}function St(t){var e,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t="("+r[1]+")"),e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/),!e||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function $t(t){var e=t.parent().inheritedData("$uiView"),r=Dt("$cfg.path")(e);return r?P(r).state.name:void 0}function Rt(t,e,r){var n=r.uiState||t.current.name,i=ve(Ct(e,t),r.uiStateOpts||{}),o=t.href(n,r.uiStateParams,i);return{uiState:n,uiStateParams:r.uiStateParams,uiStateOpts:i,href:o}}function Et(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function Tt(t,e,r,n,i){return function(o){var a=o.which||o.button,u=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var s=r(function(){e.go(u.uiState,u.uiStateParams,u.uiStateOpts)});o.preventDefault();var c=n.isAnchor&&!u.href?1:0;o.preventDefault=function(){c--<=0&&r.cancel(s)}}}}function Ct(t,e){return{relative:$t(t)||e.$current,inherit:!0,source:"sref"}}function Pt(t,e,r,n){var i;n&&(i=n.events),ne(i)||(i=["click"]);for(var o=t.on?"on":"bind",a=0,u=i;a<u.length;a++){var s=u[a];t[o](s,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,o=i;n<o.length;n++){var a=o[n];t[e](a,r)}})}function kt(t){var e=function(e,r,n){return t.is(e,r,n)};return e.$stateful=!0,e}function Ot(t){var e=function(e,r,n){return t.includes(e,r,n)};return e.$stateful=!0,e}function xt(t,r,n,i,o,a){var u=Dt("viewDecl.controllerAs"),s=Dt("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return i.empty(),function(i,c){var f=c.data("$uiView");if(!f)return c.html(a),void t(c.contents())(i);var l=f.$cfg||{viewDecl:{},getTemplate:e.noop},p=l.path&&new pr(l.path);c.html(l.getTemplate(c,p)||a),ze.traceUIViewFill(f.$uiView,c.html());var h=t(c.contents()),d=l.controller,v=u(l),y=s(l),m=p&&Si(p);if(i[y]=m,d){var g=r(d,ve({},m,{$scope:i,$element:c}));v&&(i[v]=g,i[v][y]=m),c.data("$ngControllerController",g),c.children().data("$ngControllerController",g),jt(o,n,g,i,l)}if(ee(l.viewDecl.component))var _=l.viewDecl.component,w=W(_),b=new RegExp("^(x-|data-)?"+w+"$","i"),S=function(){var t=[].slice.call(c[0].children).filter(function(t){return t&&t.tagName&&b.exec(t.tagName)});return t&&At.element(t).data("$"+_+"Controller")},$=i.$watch(S,function(t){t&&(jt(o,n,t,i,l),$())});h(i)}}}}function jt(t,e,r,n,i){!Xt(r.$onInit)||i.viewDecl.component&&Ti||r.$onInit();var o=P(i.path).state.self,a={bind:r};if(Xt(r.uiOnParamsChanged)){var u=new pr(i.path),s=u.getResolvable("$transition$").data,c=function(t){if(t!==s&&t.exiting().indexOf(o)===-1){var e=t.params("to"),n=t.params("from"),i=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce(Ce,[]),a=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce(Ce,[]),u=i.filter(function(t){var r=a.indexOf(t);return r===-1||!a[r].type.equals(e[t.id],n[t.id])});if(u.length){var c=u.map(function(t){return t.id}),f=b(e,function(t,e){return c.indexOf(e)!==-1});r.uiOnParamsChanged(f,t)}}};n.$on("$destroy",e.onSuccess({},c,a))}if(Xt(r.uiCanExit)){var f=Ci++,l="_uiCanExitIds",p=function v(t){return!!t&&(t[l]&&t[l][f]===!0||v(t.redirectedFrom()))},h=function(e){var n,i=e[l]=e[l]||{};return p(e)||(n=t.when(r.uiCanExit(e)),n.then(function(t){return i[f]=t!==!1})),n},d={exiting:o.name};n.$on("$destroy",e.onBefore(d,h,a))}}function It(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,r){return t?e:function(t){return r(function(){t[0].scrollIntoView()},0,!1)}}]}var Vt=angular,At=e&&e.module?e:Vt,Ht=function(t){return function(e){return e&&e[t]}},qt=r(function(t,e,r){return r&&r[t]===e}),Dt=function(t){return i.apply(null,t.split(".").map(Ht))},Ft=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(null,e)}},Nt=function(t){return function(e){return e.reduce(function(e,r){return e&&!!t(r)},!0)}},Ut=function(t){return function(e){return e.reduce(function(e,r){return e||!!t(r)},!1)}},Lt=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},Mt=function(t){return function(e){return t===e}},Bt=function(t){return function(){return t}},Gt=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.prototype.matches=function(t){return this.regexp.test("."+t)},t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t}(),Wt=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var r=me(me(e,t.prototype));return e.$$state=function(){return r},r.self=e,r.__stateObjectCache={nameGlob:Gt.fromString(r.name)},r},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){t=y(t,{inherit:!0,matchingKeys:null});var e=t.inherit&&this.parent&&this.parent.parameters()||[];return e.concat(Re(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||S(Re(this.params),qt("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return Xt(t)&&t.__uiRouterState===!0},t.isState=function(t){return re(t.__stateObjectCache)},t}(),zt=Object.prototype.toString,Jt=function(t){return function(e){return("undefined"==typeof e?"undefined":_typeof(e))===t}},Qt=Jt("undefined"),Kt=Ft(Qt),Yt=function(t){return null===t},Zt=a(Yt,Qt),Xt=Jt("function"),te=Jt("number"),ee=Jt("string"),re=function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))},ne=Array.isArray,ie=function(t){return"[object Date]"===zt.call(t)},oe=function(t){return"[object RegExp]"===zt.call(t)},ae=Wt.isState,ue=o(re,i(Ht("then"),Xt)),se=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},ce={$q:void 0,$injector:void 0},fe="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||void 0,le=fe.angular||{},pe=le.fromJson||JSON.parse.bind(JSON),he=le.toJson||JSON.stringify.bind(JSON),de=le.forEach||O,ve=Object.assign||x,ye=le.equals||j,me=function(t,e){return ve(Object.create(t),e)},ge=r(h),_e=r(d),we=r(v),be=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),_e(t,e)})},Se=function(t,e){return ve(t,e)},$e=$,Re=function(t){return Object.keys(t).map(function(e){return t[e]})},Ee=function(t,e){return t&&e},Te=function(t,e){return t||e},Ce=function(t,e){return t.concat(e)},Pe=function ki(t,e){return ne(e)?t.concat(e.reduce(ki,[])):R(t,e)},ke=function(t,e){return ge(t,e)?t:R(t,e)},Oe=function(t){return t.reduce(Ce,[])},xe=function(t){return t.reduce(Pe,[])},je=E,Ie=E,Ve=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},Ae=function(t){return t["catch"](function(t){return 0})&&t},He=function(t){return Ae(ce.$q.reject(t))},qe=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&e.shift(),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(t.RejectType||(t.RejectType={}));var De=0,Fe=function(){function e(t,e,r){this.$id=De++,this.type=t,this.message=e,this.detail=r}return e.prototype.toString=function(){var t=function(t){return t&&t.toString!==Object.prototype.toString?t.toString():Q(t)},e=t(this.detail),r=this,n=r.$id,i=r.type,o=r.message;return"Transition Rejection($id: "+n+" type: "+i+", message: "+o+", detail: "+e+")"},e.prototype.toPromise=function(){return ve(He(this),{_transitionRejection:this})},e.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&Lt(e)(t._transitionRejection)},e.superseded=function(r,n){var i="The transition has been superseded by a different transition",o=new e(t.RejectType.SUPERSEDED,i,r);return n&&n.redirected&&(o.redirected=!0),o},e.redirected=function(t){return e.superseded(t,{redirected:!0})},e.invalid=function(r){var n="This transition is invalid";return new e(t.RejectType.INVALID,n,r)},e.ignored=function(r){var n="The transition was ignored";return new e(t.RejectType.IGNORED,n,r)},e.aborted=function(r){var n="The transition has been aborted";return new e(t.RejectType.ABORTED,n,r)},e.errored=function(r){var n="The transition errored";return new e(t.RejectType.ERROR,n,r)},e.normalize=function(t){return Lt(e)(t)?t:e.errored(t)},e}(),Ne=function(t){var e=t.viewDecl,r=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+r+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"},Ue=Function.prototype.bind.call(console.log,console),Le=Xt(console.table)?console.table.bind(console):Ue.bind(console);!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(t.Category||(t.Category={}));var Me=Dt("$id"),Be=Dt("router.$id"),Ge=function(t){return"Transition #"+Me(t)+"-"+Be(t)},We=function(){function e(){this._enabled={},this.approximateDigests=0}return e.prototype._set=function(e,r){var n=this;r.length||(r=Object.keys(t.Category).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(e){return t.Category[e]})),r.map(A).forEach(function(t){return n._enabled[t]=e})},e.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},e.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},e.prototype.enabled=function(t){return!!this._enabled[A(t)]},e.prototype.traceTransitionStart=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Ge(e)+": Started  -> "+Q(e))},e.prototype.traceTransitionIgnored=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Ge(e)+": Ignored  <> "+Q(e))},e.prototype.traceHookInvocation=function(e,r,n){if(this.enabled(t.Category.HOOK)){var i=Dt("traceData.hookType")(n)||"internal",o=Dt("traceData.context.state.name")(n)||Dt("traceData.context")(n)||"unknown",a=z(e.registeredHook.callback);console.log(Ge(r)+":   Hook -> "+i+" context: "+o+", "+B(200,a))}},e.prototype.traceHookResult=function(e,r,n){this.enabled(t.Category.HOOK)&&console.log(Ge(r)+":   <- Hook returned: "+B(200,Q(e)))},e.prototype.traceResolvePath=function(e,r,n){this.enabled(t.Category.RESOLVE)&&console.log(Ge(n)+":         Resolving "+e+" ("+r+")")},e.prototype.traceResolvableResolved=function(e,r){this.enabled(t.Category.RESOLVE)&&console.log(Ge(r)+":               <- Resolved  "+e+" to: "+B(200,Q(e.data)))},e.prototype.traceError=function(e,r){this.enabled(t.Category.TRANSITION)&&console.log(Ge(r)+": <- Rejected "+Q(r)+", reason: "+e)},e.prototype.traceSuccess=function(e,r){this.enabled(t.Category.TRANSITION)&&console.log(Ge(r)+": <- Success  "+Q(r)+", final state: "+e.name)},e.prototype.traceUIViewEvent=function(e,r,n){void 0===n&&(n=""),this.enabled(t.Category.UIVIEW)&&console.log("ui-view: "+G(30,e)+" "+V(r)+n)},e.prototype.traceUIViewConfigUpdated=function(e,r){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Updating",e," with ViewConfig from context='"+r+"'")},e.prototype.traceUIViewFill=function(e,r){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Fill",e," with: "+B(200,r))},e.prototype.traceViewSync=function(e){if(this.enabled(t.Category.VIEWCONFIG)){var r=e.map(function(t){var e=t[0],r=t[1],n=e.$type+":"+e.fqn,i=r&&r.viewDecl.$context.name+": "+r.viewDecl.$name+" ("+r.viewDecl.$type+")";return{"ui-view fqn":n,"state: view name":i}}).sort(function(t,e){return t["ui-view fqn"].localeCompare(e["ui-view fqn"])});Le(r)}},e.prototype.traceViewServiceEvent=function(e,r){this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+Ne(r))},e.prototype.traceViewServiceUIViewEvent=function(e,r){this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+V(r))},e}(),ze=new We;!function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(t.TransitionHookPhase||(t.TransitionHookPhase={})),function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(t.TransitionHookScope||(t.TransitionHookScope={}));var Je=function(){function t(t,e,r,n){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=ve({},r||{}),this._options=ve({},n||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+Q(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,r){void 0===r&&(r=!1);var n=r?e:ve({},this._params,e);return new t(this._stateRegistry,this._identifier,n,this._options)},t.prototype.withOptions=function(e,r){void 0===r&&(r=!1);var n=r?e:ve({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,n)},t.isDef=function(t){return t&&t.state&&(ee(t.state)||ee(t.state.name))},t}(),Qe={current:l,transition:null,traceData:{},bind:null},Ke=function(){function e(e,r,n,i){var o=this;this.transition=e,this.stateContext=r,this.registeredHook=n,this.options=i,this.isSuperseded=function(){return o.type.hookPhase===t.TransitionHookPhase.RUN&&!o.options.transition.isActive()},this.options=y(i,Qe),this.type=n.eventType}return e.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},e.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var r=this.getNotCurrentRejection();if(r)return r;var n=this.options;ze.traceHookInvocation(this,this.transition,n);var i=function(){return e.callback.call(n.bind,t.transition,t.stateContext)},o=function(t){return Fe.normalize(t).toPromise()},a=function(r){return e.eventType.getErrorHandler(t)(r)},u=function(r){return e.eventType.getResultHandler(t)(r)};try{var s=i();return!this.type.synchronous&&ue(s)?s["catch"](o).then(u,a):u(s)}catch(c){return a(Fe.normalize(c))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},e.prototype.handleHookResult=function(t){var e=this,r=this.getNotCurrentRejection();if(r)return r;if(ue(t))return t.then(function(t){return e.handleHookResult(t)});if(ze.traceHookResult(t,this.transition,this.options),t===!1)return Fe.aborted("Hook aborted transition").toPromise();var n=Lt(Je);return n(t)?Fe.redirected(t).toPromise():void 0},e.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?Fe.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Fe.aborted().toPromise():this.isSuperseded()?Fe.superseded(this.options.current()).toPromise():void 0},e.prototype.toString=function(){var t=this,e=t.options,r=t.registeredHook,n=Dt("traceData.hookType")(e)||"internal",i=Dt("traceData.context.state.name")(e)||Dt("traceData.context")(e)||"unknown",o=J(r.callback);
return n+" context: "+i+", "+B(200,o)},e.chain=function(t,e){var r=function(t,e){return t.then(function(){return e.invokeHook()})};return t.reduce(r,e||ce.$q.when())},e.invokeHooks=function(t,r){for(var n=0;n<t.length;n++){var i=t[n].invokeHook();if(ue(i)){var o=t.slice(n+1);return e.chain(o,i).then(r)}}return r()},e.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},e.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},e.LOG_REJECTED_RESULT=function(t){return function(e){ue(e)&&e["catch"](function(e){return t.logError(Fe.normalize(e))})}},e.LOG_ERROR=function(t){return function(e){return t.logError(e)}},e.REJECT_ERROR=function(t){return function(t){return He(t)}},e.THROW_ERROR=function(t){return function(t){throw t}},e}(),Ye=function(){function e(t,e,r,n,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=r,this.matchCriteria=n,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return e.prototype._matchingNodes=function(t,e){if(e===!0)return t;var r=t.filter(function(t){return H(t.state,e)});return r.length?r:null},e.prototype._getDefaultMatchCriteria=function(){return $(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},e.prototype._getMatchingNodes=function(e){var r=this,n=ve(this._getDefaultMatchCriteria(),this.matchCriteria),i=Re(this.tranSvc._pluginapi._getPathTypes());return i.reduce(function(i,o){var a=o.scope===t.TransitionHookScope.STATE,u=e[o.name]||[],s=a?u:[P(u)];return i[o.name]=r._matchingNodes(s,n[o.name]),i},{})},e.prototype.matches=function(t){var e=this._getMatchingNodes(t),r=Re(e).every(f);return r?e:null},e.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},e}(),Ze=function(){function e(t){this.transition=t}return e.prototype.buildHooksForPhase=function(t){var e=this,r=this.transition.router.transitionService;return r._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(Ce,[]).filter(f)},e.prototype.buildHooks=function(e){var r=this.transition,n=r.treeChanges(),i=this.getMatchingHooks(e,n);if(!i)return[];var o={transition:r,current:r.options().current},a=function(i){var a=i.matches(n),u=a[e.criteriaMatchPath.name];return u.map(function(n){var a=ve({bind:i.bind,traceData:{hookType:e.name,context:n}},o),u=e.criteriaMatchPath.scope===t.TransitionHookScope.STATE?n.state.self:null,s=new Ke(r,u,i,a);return{hook:i,node:n,transitionHook:s}})};return i.map(a).reduce(Ce,[]).sort(D(e.reverseSort)).map(function(t){return t.transitionHook})},e.prototype.getMatchingHooks=function(e,r){var n=e.hookPhase===t.TransitionHookPhase.CREATE,i=this.transition.router.transitionService,o=n?[i]:[this.transition,i];return o.map(function(t){return t.getHooks(e.name)}).filter(je(ne,"broken event named: "+e.name)).reduce(Ce,[]).filter(function(t){return t.matches(r)})},e}(),Xe=function(){function t(t){this.pattern=/.*/,this.inherit=!0,ve(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new F(this,t)},t}(),tr=Object.prototype.hasOwnProperty,er=function(t){return 0===["value","type","squash","array","dynamic"].filter(tr.bind(t||{})).length};!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(t.DefType||(t.DefType={}));var rr=function(){function e(e,r,n,i,o){function a(){var r={array:i===t.DefType.SEARCH&&"auto"},o=e.match(/\[\]$/)?{array:!0}:{};return ve(r,o,n).array}n=N(n),r=U(n,r,i,e,o.paramTypes);var u=a();r=u?r.$asArray(u,i===t.DefType.SEARCH):r;var s=void 0!==n.value||i===t.DefType.SEARCH,c=Kt(n.dynamic)?!!n.dynamic:!!r.dynamic,f=Kt(n.raw)?!!n.raw:!!r.raw,l=L(n,s,o.defaultSquashPolicy()),p=M(n,u,s,l),h=Kt(n.inherit)?!!n.inherit:!!r.inherit;ve(this,{id:e,type:r,location:i,isOptional:s,dynamic:c,raw:f,squash:l,replace:p,inherit:h,array:u,config:n})}return e.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},e.prototype.value=function(t){var e=this,r=function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!ce.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=ce.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t},n=function(t){for(var r=0,n=e.replace;r<n.length;r++){var i=n[r];if(i.from===t)return i.to}return t};return t=n(t),Qt(t)?r():this.type.$normalize(t)},e.prototype.isSearch=function(){return this.location===t.DefType.SEARCH},e.prototype.validates=function(t){if((Qt(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var r=this.type.encode(e);return!(ee(r)&&!this.type.pattern.exec(r))},e.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},e.values=function(t,e){void 0===e&&(e={});for(var r={},n=0,i=t;n<i.length;n++){var o=i[n];r[o.id]=o.value(e[o.id])}return r},e.changed=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),t.filter(function(t){return!t.type.equals(e[t.id],r[t.id])})},e.equals=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),0===e.changed(t,r,n).length},e.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(Ee,!0)},e}(),nr=function(){function t(e){if(e instanceof t){var r=e;this.state=r.state,this.paramSchema=r.paramSchema.slice(),this.paramValues=ve({},r.paramValues),this.resolvables=r.resolvables.slice(),this.views=r.views&&r.views.slice()}else{var n=e;this.state=n,this.paramSchema=n.parameters({inherit:!1}),this.paramValues={},this.resolvables=n.resolvables.map(function(t){return t.clone()})}}return t.prototype.applyRawParams=function(t){var e=function(e){return[e.id,e.value(t[e.id])]};return this.paramValues=this.paramSchema.reduce(function(t,r){return C(t,e(r))},{}),this},t.prototype.parameter=function(t){return S(this.paramSchema,qt("id",t))},t.prototype.equals=function(t,e){var r=this.diff(t,e);return r&&0===r.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var r=e?e(this):this.paramSchema;return rr.changed(r,this.paramValues,t.paramValues)},t.clone=function(e){return new t(e)},t}(),ir=function(){function t(){}return t.makeTargetState=function(t,e){var r=P(e).state;return new Je(t,r,e.map(Ht("paramValues")).reduce(Se,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new nr(t).applyRawParams(e)})},t.buildToPath=function(e,r){var n=t.buildPath(r);return r.options().inherit?t.inheritParams(e,n,Object.keys(r.params())):n},t.applyViewConfigs=function(e,r,n){r.filter(function(t){return ge(n,t.state)}).forEach(function(n){var i=Re(n.state.views||{}),o=t.subPath(r,function(t){return t===n}),a=i.map(function(t){return e.createViewConfig(o,t)});n.views=a.reduce(Ce,[])})},t.inheritParams=function(t,e,r){function n(t,e){var r=S(t,qt("state",e));return ve({},r&&r.paramValues)}function i(e){var i=ve({},e&&e.paramValues),a=g(i,r);i=_(i,r);var u=_(n(t,e.state)||{},o),s=ve(i,u,a);return new nr(e.state).applyRawParams(s)}void 0===r&&(r=[]);var o=t.map(function(t){return t.paramSchema}).reduce(Ce,[]).filter(function(t){return!t.inherit}).map(Ht("id"));return e.map(i)},t.treeChanges=function(e,r,n){function i(t,e){var n=nr.clone(t);return n.paramValues=r[e].paramValues,n}for(var o=0,a=Math.min(e.length,r.length),u=function(e,r){return e.equals(r,t.nonDynamicParams)};o<a&&e[o].state!==n&&u(e[o],r[o]);)o++;var s,c,f,l,p;s=e,c=s.slice(0,o),f=s.slice(o);var h=c.map(i);return l=r.slice(o),p=h.concat(l),{from:s,to:p,retained:c,exiting:f,entering:l}},t.matching=function(t,e,r){var n=!1,i=T(t,e);return i.reduce(function(t,e){var i=e[0],o=e[1];return n=n||!i.equals(o,r),n?t:t.concat(i)},[])},t.equals=function(e,r,n){return e.length===r.length&&t.matching(e,r,n).length===e.length},t.subPath=function(t,e){var r=S(t,e),n=t.indexOf(r);return n===-1?void 0:t.slice(0,n+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return ve(t,e.paramValues)},{})},t}(),or={when:"LAZY",async:"WAIT"},ar=function(){function t(e,r,n,i,o){if(this.resolved=!1,this.promise=void 0,e instanceof t)ve(this,e);else if(Xt(r)){if(Zt(e))throw new Error("new Resolvable(): token argument is required");if(!Xt(r))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=i,this.resolveFn=r,this.deps=n||[],this.data=o,this.resolved=void 0!==o,this.promise=this.resolved?ce.$q.when(this.data):void 0}else if(re(e)&&e.token&&Xt(e.resolveFn)){var a=e;return new t(a.token,a.resolveFn,a.deps,a.policy,a.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},r=t&&t.resolvePolicy||{};return{when:e.when||r.when||or.when,async:e.async||r.async||or.async}},t.prototype.resolve=function(t,e){var r=this,n=ce.$q,i=function(){return n.all(t.getDependencies(r).map(function(r){return r.get(t,e)}))},o=function(t){return r.resolveFn.apply(null,t)},a=function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})},u=t.findNode(this),s=u&&u.state,c="RXWAIT"===this.getPolicy(s).async?a:f,l=function(t){return r.data=t,r.resolved=!0,ze.traceResolvableResolved(r,e),r.data};return this.promise=n.when().then(i).then(o).then(c).then(l)},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+Q(this.token)+", requires: ["+this.deps.map(Q)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,r){return new t(e,function(){return r},null,null,r)},t}(),ur={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},sr=ur.when,cr=[sr.EAGER,sr.LAZY],fr=[sr.EAGER],lr="Native Injector",pr=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(ke,[])},t.prototype.getResolvable=function(t){var e=this._path.map(function(t){return t.resolvables}).reduce(Ce,[]).filter(function(e){return e.token===t});return P(e)},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(ir.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var r=S(this._path,qt("state",e)),n=t.map(function(t){return t.token});r.resolvables=r.resolvables.filter(function(t){return n.indexOf(t.token)===-1}).concat(t)},t.prototype.resolvePath=function(t,e){var r=this;void 0===t&&(t="LAZY");var n=ge(cr,t)?t:"LAZY",i=n===ur.when.EAGER?fr:cr;ze.traceResolvePath(this._path,t,e);var o=function(t,e){return function(n){return ge(t,r.getPolicy(n)[e])}},a=this._path.reduce(function(t,n){var a=n.resolvables.filter(o(i,"when")),u=a.filter(o(["NOWAIT"],"async")),s=a.filter(Ft(o(["NOWAIT"],"async"))),c=r.subContext(n.state),f=function(t){return t.get(c,e).then(function(e){return{token:t.token,value:e}})};return u.forEach(f),t.concat(s.map(f))},[]);return ce.$q.all(a)},t.prototype.injector=function(){return this._injector||(this._injector=new hr(this))},t.prototype.findNode=function(t){return S(this._path,function(e){return ge(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,r=this.findNode(t),n=ir.subPath(this._path,function(t){return t===r})||this._path,i=n.reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t}),o=function(t){var r=i.filter(function(e){return e.token===t});if(r.length)return P(r);var n=e.injector().getNative(t);if(Qt(n))throw new Error("Could not find Dependency Injection token: "+Q(t));return new ar(t,function(){return n},[],n)};return t.deps.map(o)},t}(),hr=function(){function t(t){this.context=t,this["native"]=this.get(lr)||ce.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+Q(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):ce.$q.when(this["native"].get(t))},t.prototype.getNative=function(t){return this["native"]&&this["native"].get(t)},t}(),dr=Ht("self"),vr=function(){function e(e,r,n){var i=this;if(this._deferred=ce.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Ze(this),this.isActive=function(){return i.router.globals.transition===i},this.router=n,this._targetState=r,!r.valid())throw new Error(r.error());this._options=ve({current:Bt(this)},r.options()),this.$id=n.transitionService._transitionCount++;var o=ir.buildToPath(e,r);this._treeChanges=ir.treeChanges(e,o,this._options.reloadState),this.createTransitionHookRegFns();var a=this._hookBuilder.buildHooksForPhase(t.TransitionHookPhase.CREATE);Ke.invokeHooks(a,function(){return null}),this.applyViewConfigs(n)}return e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(e){return e.hookPhase!==t.TransitionHookPhase.CREATE}).forEach(function(t){return q(e,e.router.transitionService,t)})},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});ir.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},e.prototype.$from=function(){return P(this._treeChanges.from).state},e.prototype.$to=function(){return P(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!H(this.$to(),t.to)||t.from&&!H(this.$from(),t.from))},e.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(Ht("paramValues")).reduce(Se,{}))},e.prototype.injector=function(t,e){void 0===e&&(e="to");var r=this._treeChanges[e];return t&&(r=ir.subPath(r,function(e){return e.state===t||e.state.name===t})),new pr(r).injector()},e.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new pr(this._treeChanges[t]).getTokens()},e.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=Lt(ar)(t)?t:new ar(t);var r="string"==typeof e?e:e.name,n=this._treeChanges.to,i=S(n,function(t){return t.state.name===r}),o=new pr(n);o.addResolvables([t],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return $(this._treeChanges.entering,Ht("state")).map(dr)},e.prototype.exiting=function(){return $(this._treeChanges.exiting,Ht("state")).map(dr).reverse()},e.prototype.retained=function(){return $(this._treeChanges.retained,Ht("state")).map(dr)},e.prototype.views=function(t,e){void 0===t&&(t="entering");var r=this._treeChanges[t];return r=e?r.filter(qt("state",e)):r,r.map(Ht("views")).filter(f).reduce(Ce,[])},e.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},e.prototype.redirect=function(t){for(var e=1,r=this;null!=(r=r.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var n={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&t.options().location!==!1&&(n.location="replace");var i=ve({},this.options(),t.options(),n);t=t.withOptions(i,!0);var o=this.router.transitionService.create(this._treeChanges.from,t),a=this._treeChanges.entering,u=o._treeChanges.entering,s=function(t){return function(e){return t&&e.state.includes[t.name]}},c=ir.matching(u,a,ir.nonDynamicParams).filter(Ft(s(t.options().reloadState)));return c.forEach(function(t,e){t.resolvables=a[e].resolvables}),o},e.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length){var e=T(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(Te,!1);if(!e){var r=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),i=n[0],o=n[1],a=T(r,i,o);return a.map(function(t){var e=t[0],r=t[1],n=t[2];return rr.changed(e,r,n)}).reduce(Ce,[])}}},e.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(Te,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,r=function(t,r){if(t.length!==r.length)return!1;var n=ir.matching(t,r);return t.length===n.filter(function(t){return!e||!t.state.includes[e.name]}).length},n=this.treeChanges(),i=t&&t.treeChanges();return i&&r(i.to,n.to)&&r(i.exiting,n.exiting)?"SameAsPending":0===n.exiting.length&&0===n.entering.length&&r(n.from,n.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,r=Ke.runAllHooks,n=function(t){return e._hookBuilder.buildHooksForPhase(t)},i=function(){ze.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),r(n(t.TransitionHookPhase.SUCCESS))},o=function(i){ze.traceError(i,e),e.success=!1,e._deferred.reject(i),e._error=i,r(n(t.TransitionHookPhase.ERROR))},a=function(){var e=n(t.TransitionHookPhase.RUN),r=function(){return ce.$q.when(void 0)};return Ke.invokeHooks(e,r)},u=function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),ze.traceTransitionStart(e),ce.$q.when(void 0)},s=n(t.TransitionHookPhase.BEFORE);return Ke.invokeHooks(s,u).then(a).then(i,o),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){Qt(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var t=this.$to();if(t.self["abstract"])return"Cannot transition to abstract state '"+t.name+"'";var e=t.parameters(),r=this.params(),n=e.filter(function(t){return!t.validates(r[t.id])});return n.length?"Param values not valid for state '"+t.name+"'. Invalid params: [ "+n.map(function(t){return t.id}).join(", ")+" ]":this.success===!1?this._error:void 0},e.prototype.toString=function(){var t=this.from(),e=this.to(),r=function(t){return null!==t["#"]&&void 0!==t["#"]?t:_(t,["#"])},n=this.$id,i=re(t)?t.name:t,o=Q(r(this._treeChanges.from.map(Ht("paramValues")).reduce(Se,{}))),a=this.valid()?"":"(X) ",u=re(e)?e.name:e,s=Q(r(this.params()));return"Transition#"+n+"( '"+i+"'"+o+" -> "+a+"'"+u+"'"+s+" )"},e.diToken=e,e}(),yr=null,mr=function(t){var e=Fe.isRejectionPromise;return(yr=yr||s([[Ft(Kt),Bt("undefined")],[Yt,Bt("null")],[ue,Bt("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[Lt(Fe),u("toString")],[Lt(vr),u("toString")],[Lt(ar),u("toString")],[c,z],[Bt(!0),f]]))(t)},gr=function(t){return function(e){if(!e)return["",""];var r=e.indexOf(t);return r===-1?[e,""]:[e.substr(0,r),e.substr(r+1)]}},_r=new RegExp("^(?:[a-z]+:)?//[^/]+/"),wr=function(t){return t.replace(/\/[^\/]*$/,"")},br=gr("#"),Sr=gr("?"),$r=gr("="),Rr=function(t){return t?t.replace(/^#/,""):""},Er=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=g(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);var e=function(t,e){return new Xe(ve({name:e},t))};this.types=me($(this.defaultTypes,e),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,r){if(!Kt(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new Xe(ve({name:t},e)),r&&(this.typeQueue.push({name:t,def:r}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");ve(this.types[t.name],ce.$injector.invoke(t.def))}},t}();Z();var Tr,Cr=function(){function t(t){void 0===t&&(t={}),ve(this,t)}return t.prototype.$inherit=function(t,e,r){var n,i=m(e,r),o={},a=[];for(var u in i)if(i[u]&&i[u].params&&(n=Object.keys(i[u].params),n.length))for(var s in n)a.indexOf(n[s])>=0||(a.push(n[s]),o[n[s]]=this[n[s]]);return ve({},o,t)},t}(),Pr=function(t){if(!ee(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}},kr=function(t,e){return function(r){var n=r;n&&n.url&&n.name&&n.name.match(/\.\*\*$/)&&(n.url+="{remainder:any}");var i=Pr(n.url),o=r.parent,a=i?t.compile(i.val,{params:r.params||{},paramMap:function(t,e){return n.reloadOnSearch===!1&&e&&(t=ve(t||{},{dynamic:!0})),t}}):n.url;if(!a)return null;if(!t.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+r+"'");return i&&i.root?a:(o&&o.navigable||e()).url.append(a)}},Or=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},xr=function(t){return function(e){var r=function(e,r){return t.fromConfig(r,null,e)},n=e.url&&e.url.parameters({inherit:!1})||[],i=Re($e(_(e.params||{},n.map(Ht("id"))),r));return n.concat(i).map(function(t){return[t.id,t]}).reduce(C,{})}},jr=function(){function t(t,e){function r(e){return o(e)?null:t.find(n.parentName(e))||i()}this.matcher=t;var n=this,i=function(){return t.find("")},o=function(t){return""===t.name};this.builders={name:[X],self:[tt],parent:[r],data:[et],url:[kr(e,i)],navigable:[Or(o)],params:[xr(e.paramFactory)],views:[],path:[rt],includes:[nt],resolvables:[it]}}return t.prototype.builder=function(t,e){var r=this.builders,n=r[t]||[];return ee(t)&&!Kt(e)?n.length>1?n:n[0]:ee(t)&&Xt(e)?(r[t]=n,r[t].push(e),function(){return r[t].splice(r[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this,r=e.matcher,n=e.builders,i=this.parentName(t);if(i&&!r.find(i,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(t,e){return function(r){return e(r,t)}},l);t[o]=a(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",r=e.split("."),n=r.pop();if("**"===n&&r.pop(),r.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return r.join(".")}return t.parent?ee(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(e.indexOf(".")!==-1||!t.parent)return e;var r=ee(t.parent)?t.parent:t.parent.name;return r?r+"."+e:e},t}(),Ir=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return t=t||"",0===t.indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,r){if(void 0===r&&(r=!0),t||""===t){var n=ee(t),i=n?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(n||!(n||o!==t&&o.self!==t)))return o;if(n&&r){var a=Re(this._states),u=a.filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var r=this.find(e),n=t.split("."),i=0,o=n.length,a=r;i<o;i++)if(""!==n[i]||0!==i){if("^"!==n[i])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+r.name+"'");a=a.parent}else a=r;var u=n.slice(i).join(".");return a.name+(a.name&&u?".":"")+u},t}(),Vr=function(){function t(t,e,r,n,i){this.$registry=t,this.$urlRouter=e,this.states=r,this.builder=n,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,r=Wt.create(t),n=r.name;if(!ee(n))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(n)||ge(e.map(Ht("name")),n))throw new Error("State '"+n+"' is already defined");return e.push(r),this.flush(),r},t.prototype.flush=function(){for(var t=this,e=this,r=e.queue,n=e.states,i=e.builder,o=[],a=[],u={},s=function(e){return t.states.hasOwnProperty(e)&&t.states[e]};r.length>0;){var c=r.shift(),f=c.name,l=i.build(c),p=a.indexOf(c);if(l){var h=s(f);if(h&&h.name===f)throw new Error("State '"+f+"' is already defined");var d=s(f+".**");d&&this.$registry.deregister(d),n[f]=c,this.attachRoute(c),p>=0&&a.splice(p,1),o.push(c)}else{var v=u[f];if(u[f]=r.length,p>=0&&v===r.length)return r.push(c),n;p<0&&a.push(c),r.push(c)}}return o.length&&this.listeners.forEach(function(t){return t("registered",o.map(function(t){return t.self}))}),n},t.prototype.attachRoute=function(t){!t["abstract"]&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),Ar=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new Ir(this.states),this.builder=new jr(this.matcher,t.urlMatcherFactory),this.stateQueue=new Vr(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){var t={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},"abstract":!0},e=this._root=this.stateQueue.register(t);e.navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){_e(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,r=this.get().map(function(t){return t.$$state()}),n=function a(t){var e=r.filter(function(e){return t.indexOf(e.parent)!==-1});return 0===e.length?e:e.concat(a(e))},i=n([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var r=e._router.urlRouter;r.rules().filter(qt("state",t)).forEach(r.removeRule.bind(r)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var r=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",r.map(function(t){return t.self}))}),r},t.prototype.get=function(t,e){var r=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return r.states[t].self});var n=this.matcher.find(t,e);return n&&n.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}(),Hr=function(t,e,r){return t[e]=t[e]||r()},qr=K("/"),Dr=function(){function e(t,r,n,i){var o=this;this.config=i,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=t,this.config=y(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:f});for(var a,u,s,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=0,h=[],d=function(r){if(!e.nameValidator.test(r))throw new Error("Invalid parameter name '"+r+"' in pattern '"+t+"'");if(S(o._params,qt("id",r)))throw new Error("Duplicate parameter name '"+r+"' in pattern '"+t+"'")},v=function(e,n){var i=e[2]||e[3],a=n?e[4]:e[4]||("*"===e[1]?"[\\s\\S]*":null),u=function(t){return me(r.type(n?"query":"path"),{pattern:new RegExp(t,o.config.caseInsensitive?"i":void 0)})};return{id:i,regexp:a,cfg:o.config.params[i],segment:t.substring(p,e.index),type:a?r.type(a)||u(a):null}};(a=c.exec(t))&&(u=v(a,!1),!(u.segment.indexOf("?")>=0));)d(u.id),this._params.push(n.fromPath(u.id,u.type,this.config.paramMap(u.cfg,!1))),this._segments.push(u.segment),h.push([u.segment,P(this._params)]),p=c.lastIndex;s=t.substring(p);var m=s.indexOf("?");if(m>=0){var g=s.substring(m);if(s=s.substring(0,m),g.length>0)for(p=0;a=l.exec(g);)u=v(a,!0),d(u.id),this._params.push(n.fromSearch(u.id,u.type,this.config.paramMap(u.cfg,!0))),p=c.lastIndex}this._segments.push(s),this._compiled=h.map(function(t){return ot.apply(null,t)}).concat(ot(s))}return e.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},e.prototype.isRoot=function(){return this._cache.path[0]===this},e.prototype.toString=function(){return this.pattern},e.prototype.exec=function(t,e,r,n){function i(t){var e=function(t){return t.split("").reverse().join("")},r=function(t){return t.replace(/\\-/g,"-")},n=e(t).split(/-(?!\\)/),i=$(n,e);return $(i,r).reverse()}var o=this;void 0===e&&(e={}),void 0===n&&(n={});var a=Hr(this._cache,"pattern",function(){return new RegExp(["^",Oe(o._cache.path.map(Ht("_compiled"))).join(""),o.config.strict===!1?"/?":"","$"].join(""),o.config.caseInsensitive?"i":void 0)}).exec(t);if(!a)return null;var u=this.parameters(),s=u.filter(function(t){return!t.isSearch()}),c=u.filter(function(t){return t.isSearch()}),f=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),l={};if(f!==a.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var p=0;p<f;p++){for(var h=s[p],d=a[p+1],v=0;v<h.replace.length;v++)h.replace[v].from===d&&(d=h.replace[v].to);d&&h.array===!0&&(d=i(d)),Kt(d)&&(d=h.type.decode(d)),l[h.id]=h.value(d)}return c.forEach(function(t){for(var r=e[t.id],n=0;n<t.replace.length;n++)t.replace[n].from===r&&(r=t.replace[n].to);Kt(r)&&(r=t.type.decode(r)),l[t.id]=t.value(r)}),r&&(l["#"]=r),l},e.prototype.parameters=function(t){return void 0===t&&(t={}),t.inherit===!1?this._params:Oe(this._cache.path.map(function(t){return t._params}))},e.prototype.parameter=function(t,e){var r=this;void 0===e&&(e={});var n=function(){for(var e=0,n=r._params;e<n.length;e++){var i=n[e];if(i.id===t)return i}},i=this._cache.parent;return n()||e.inherit!==!1&&i&&i.parameter(t,e)||null},e.prototype.validates=function(t){var e=function(t,e){return!t||t.validates(e)};t=t||{};var r=this.parameters().filter(function(e){return t.hasOwnProperty(e.id)});return r.map(function(r){return e(r,t[r.id])}).reduce(Ee,!0)},e.prototype.format=function(t){function r(e){var r=e.value(t[e.id]),n=e.validates(r),i=e.isDefaultValue(r),o=!!i&&e.squash,a=e.type.encode(r);return{param:e,value:r,isValid:n,isDefaultValue:i,squash:o,encoded:a}}void 0===t&&(t={});var n=this._cache.path,i=n.map(e.pathSegmentsAndParams).reduce(Ce,[]).map(function(t){return ee(t)?t:r(t)}),o=n.map(e.queryParams).reduce(Ce,[]).map(r),a=function(t){return t.isValid===!1};if(i.concat(o).filter(a).length)return null;var u=i.reduce(function(t,r){if(ee(r))return t+r;var n=r.squash,i=r.encoded,o=r.param;return n===!0?t.match(/\/$/)?t.slice(0,-1):t:ee(n)?t+n:n!==!1?t:null==i?t:ne(i)?t+$(i,e.encodeDashes).join("-"):o.raw?t+i:t+encodeURIComponent(i);
},""),s=o.map(function(t){var e=t.param,r=t.squash,n=t.encoded,i=t.isDefaultValue;if(!(null==n||i&&r!==!1)&&(ne(n)||(n=[n]),0!==n.length))return e.raw||(n=$(n,encodeURIComponent)),n.map(function(t){return e.id+"="+t})}).filter(f).reduce(Ce,[]).join("&");return u+(s?"?"+s:"")+(t["#"]?"#"+t["#"]:"")},e.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},e.pathSegmentsAndParams=function(e){var r=e._segments,n=e._params.filter(function(e){return e.location===t.DefType.PATH});return T(r,n.concat(void 0)).reduce(Ce,[]).filter(function(t){return""!==t&&Kt(t)})},e.queryParams=function(e){return e._params.filter(function(e){return e.location===t.DefType.SEARCH})},e.compare=function(t,r){var n=function(t){return t._cache.segments=t._cache.segments||t._cache.path.map(e.pathSegmentsAndParams).reduce(Ce,[]).reduce(Y,[]).map(function(t){return ee(t)?qr(t):t}).reduce(Ce,[])},i=function(t){return t._cache.weights=t._cache.weights||n(t).map(function(t){return"/"===t?1:ee(t)?2:t instanceof rr?3:void 0})},o=function(t,e,r){for(var n=Math.max(t.length,e.length);t.length<n;)t.push(r);for(;e.length<n;)e.push(r)},a=i(t),u=i(r);o(a,u,0);var s,c,f=T(a,u);for(c=0;c<f.length;c++)if(s=f[c][0]-f[c][1],0!==s)return s;return 0},e.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,e}(),Fr=function(){function e(){var e=this;this.paramTypes=new Er,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(t){return ve({strict:e._isStrictMode,caseInsensitive:e._isCaseInsensitive},t)},this.paramFactory={fromConfig:function(r,n,i){return new rr(r,n,i,t.DefType.CONFIG,e)},fromPath:function(r,n,i){return new rr(r,n,i,t.DefType.PATH,e)},fromSearch:function(r,n,i){return new rr(r,n,i,t.DefType.SEARCH,e)}},ve(this,{UrlMatcher:Dr,Param:rr})}return e.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=Kt(t)?t:this._isCaseInsensitive},e.prototype.strictMode=function(t){return this._isStrictMode=Kt(t)?t:this._isStrictMode},e.prototype.defaultSquashPolicy=function(t){if(Kt(t)&&t!==!0&&t!==!1&&!ee(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Kt(t)?t:this._defaultSquashPolicy},e.prototype.compile=function(t,e){return new Dr(t,this.paramTypes,this.paramFactory,this._getConfig(e))},e.prototype.isMatcher=function(t){if(!re(t))return!1;var e=!0;return de(Dr.prototype,function(r,n){Xt(r)&&(e=e&&Kt(t[n])&&Xt(t[n]))}),e},e.prototype.type=function(t,e,r){var n=this.paramTypes.type(t,e,r);return Kt(e)?this:n},e.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},e.prototype.dispose=function(){this.paramTypes.dispose()},e}(),Nr=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var r=this,n=s([[ee,function(t){return n(r.compile(t))}],[Lt(Dr),function(t){return r.fromUrlMatcher(t,e)}],[ae,function(t){return r.fromState(t,r.router)}],[Lt(RegExp),function(t){return r.fromRegExp(t,e)}],[Xt,function(t){return new Ur(t,e)}]]),i=n(t);if(!i)throw new Error("invalid 'what' in when()");return i},t.prototype.fromUrlMatcher=function(t,e){function r(e){var r=t.exec(e.path,e.search,e.hash);return t.validates(r)&&r}function n(e){var r=t.parameters().filter(function(t){return t.isOptional});if(!r.length)return 1e-6;var n=r.filter(function(t){return e[t.id]});return n.length/r.length}var i=e;ee(e)&&(e=this.router.urlMatcherFactory.compile(e)),Lt(Dr)(e)&&(i=function(t){return e.format(t)});var o={urlMatcher:t,matchPriority:n,type:"URLMATCHER"};return ve(new Ur(r,i),o)},t.prototype.fromState=function(t,e){var r=function(r){var n=e.stateService,i=e.globals;n.href(t,r)!==n.href(i.current,i.params)&&n.transitionTo(t,r,{inherit:!0,source:"url"})},n={state:t,type:"STATE"};return ve(this.fromUrlMatcher(t.url,r),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var r=function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})},n=ee(e)?r:e,i=function(e){return t.exec(e.path)},o={regexp:t,type:"REGEXP"};return ve(new Ur(i,n),o)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return Kt(t[e])})},t}(),Ur=function(){function t(t,e){var r=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-r.$id},this.handler=e||f}return t}(),Lr=function(t,e){return(e.priority||0)-(t.priority||0)},Mr=function(t,e){var r={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(r[t.type]||0)-(r[e.type]||0)},Br=function(t,e){return t.urlMatcher&&e.urlMatcher?Dr.compare(t.urlMatcher,e.urlMatcher):0},Gr=function(t,e){var r={STATE:!0,URLMATCHER:!0},n=r[t.type]&&r[e.type];return n?0:(t.$id||0)-(e.$id||0)};Tr=function(t,e){var r=Lr(t,e);return 0!==r?r:(r=Mr(t,e),0!==r?r:(r=Br(t,e),0!==r?r:Gr(t,e)))};var Wr=function(){function t(e){this._sortFn=Tr,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new Nr(e),p(Bt(t.prototype),this,Bt(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var r=t.map(function(t,e){return{elem:t,idx:e}});return r.sort(function(t,r){var n=e(t.elem,r.elem);return 0===n?t.idx-r.idx:n}),r.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=ve({path:"",search:{},hash:""},t);var r=this.rules();this._otherwiseFn&&r.push(this._otherwiseFn);for(var n,i=function(r){var n=r.match(t,e._router);return n&&{match:n,rule:r,weight:r.matchPriority(n)}},o=0;o<r.length&&(!n||0===this._sortFn(r[o],n.rule));o++){var a=i(r[o]);n=!n||a&&a.weight>n.weight?a:n}return n},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,r=e.urlService,n=e.stateService,i={path:r.path(),search:r.search(),hash:r.hash()},o=this.match(i),a=s([[ee,function(t){return r.url(t,!0)}],[Je.isDef,function(t){return n.go(t.state,t.params,t.options)}],[Lt(Je),function(t){return n.go(t.state(),t.params(),t.options())}]]);a(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;return t!==!1?this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)}):(this._stopFn&&this._stopFn(),void delete this._stopFn)},t.prototype.update=function(t){var e=this._router.locationService;return t?void(this.location=e.path()):void(e.path()!==this.location&&e.url(this.location,!0))},t.prototype.push=function(t,e,r){var n=r&&!!r.replace;this._router.urlService.url(t.format(e||{}),n)},t.prototype.href=function(t,e,r){var n=t.format(e);if(null==n)return null;r=r||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===n||(n="#"+i.hashPrefix()+n),n=at(n,o,r.absolute,i.baseHref()),!r.absolute||!n)return n;var a=!o&&n?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,a,n].join("")},t.prototype.rule=function(t){var e=this;if(!Nr.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){_e(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=ut(t);this._otherwiseFn=this.urlRuleFactory.create(Bt(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=ut(t),r=function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)};this.rule(this.urlRuleFactory.create(r,e))},t.prototype.when=function(t,e,r){var n=this.urlRuleFactory.create(t,e);return Kt(r&&r.priority)&&(n.priority=r.priority),this.rule(n),n},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}(),zr=function(){function t(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs}}}return t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var r=this._viewConfigFactories[e.$type];if(!r)throw new Error("ViewService: No view config factory registered for type "+e.$type);var n=r(t,e);return ne(n)?n:[n]},t.prototype.deactivateViewConfig=function(t){ze.traceViewServiceEvent("<- Removing",t),_e(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){ze.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){function e(t){var e=function r(t){return t&&t.parent?r(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)}function n(t){for(var e=t.viewDecl.$context,r=0;++r&&e.parent;)e=e.parent;return r}var i=this,o=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(C,{}),a=r(function(t,e,r,n){return e*(t(r)-t(n))}),u=function(e){var r=i._viewConfigs.filter(t.matches(o,e));return r.length>1&&r.sort(a(n,-1)),[e,r[0]]},s=function(t){var e=t[0],r=t[1];i._uiViews.indexOf(e)!==-1&&e.configUpdated(r)},c=this._uiViews.sort(a(e,1)).map(u);ze.traceViewSync(c),c.forEach(s)},t.prototype.registerUIView=function(t){ze.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews,r=function(e){return e.fqn===t.fqn&&e.$type===t.$type};return e.filter(r).length&&ze.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){var r=e.indexOf(t);return r===-1?void ze.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t):(ze.traceViewServiceUIViewEvent("<- Deregistering",t),void _e(e)(t))}},t.prototype.available=function(){return this._uiViews.map(Ht("fqn"))},t.prototype.active=function(){return this._uiViews.filter(Ht("$config")).map(Ht("name"))},t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var r=e.split("@"),n=r[0]||"$default",i=ee(r[1])?r[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(n);o&&(i=o[1],n=o[2]),"!"===n.charAt(0)&&(n=n.substr(1),i="");var a=/^(\^(?:\.\^)*)$/;if(a.exec(i)){var u=i.split(".").reduce(function(t,e){return t.parent},t);i=u.name}else"."===i&&(i=t.name);return{uiViewName:n,uiViewContextAnchor:i}},t.matches=function(t,e){return function(r){if(e.$type!==r.viewDecl.$type)return!1;var n=r.viewDecl,i=n.$uiViewName.split("."),o=e.fqn.split(".");if(!ye(i,o.slice(0-i.length)))return!1;var a=1-i.length||void 0,u=o.slice(0,a).join("."),s=t[u].creationContext;return n.$uiViewContextAnchor===(s&&s.name)}},t}(),Jr=function(){function t(){this.params=new Cr,this.lastStartedTransitionId=-1,this.transitionHistory=new qe([],1),this.successfulTransitions=new qe([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),Qr=function(t){return t.reduce(function(t,e){return t[e]=se(e),t},{dispose:l})},Kr=["url","path","search","hash","onChange"],Yr=["port","protocol","host","baseHref","html5Mode","hashPrefix"],Zr=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Xr=["sort","when","initial","otherwise","rules","rule","removeRule"],tn=["deferIntercept","listen","sync","match"],en=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var r=function(){return t.locationService};p(r,this,r,Kr,e);var n=function(){return t.locationConfig};p(n,this.config,n,Yr,e);var i=function(){return t.urlMatcherFactory};p(i,this.config,i,Zr);var o=function(){return t.urlRouter};p(o,this.rules,o,Xr),p(o,this,o,tn)}return t.prototype.url=function(t,e,r){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=Qr(Kr),t.locationConfigStub=Qr(Yr),t}(),rn=0,nn=function(){function t(t,e){void 0===t&&(t=en.locationServiceStub),void 0===e&&(e=en.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=rn++,this._disposed=!1,this._disposables=[],this.trace=ze,this.viewService=new zr,this.transitionService=new jn(this),this.globals=new Jr,this.urlMatcherFactory=new Fr,this.urlRouter=new Wr(this),this.stateRegistry=new Ar(this),this.stateService=new In(this),this.urlService=new en(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;return t&&Xt(t.dispose)?void t.dispose(this):(this._disposed=!0,void this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),_e(e._disposables,t)}catch(r){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var r=new t(this,e);if(!r.name)throw new Error("Required property `name` missing on plugin: "+r);return this._disposables.push(r),this._plugins[r.name]=r},t.prototype.getPlugin=function(t){return t?this._plugins[t]:Re(this._plugins)},t}(),on=function(t){return t.onCreate({},st)},an=function(t){function e(e){if(e)return e instanceof Je?e:ee(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}var r=t.to().redirectTo;if(r){var n=t.router.stateService;return Xt(r)?ce.$q.when(r(t)).then(e):e(r)}},un=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},an)},sn=ct("onExit"),cn=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},sn)},fn=ct("onRetain"),ln=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},fn)},pn=ct("onEnter"),hn=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},pn)},dn=function(t){return new pr(t.treeChanges().to).resolvePath("EAGER",t).then(l)},vn=function(t){return t.onStart({},dn,{priority:1e3})},yn=function(t,e){return new pr(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(l)},mn=function(t){return t.onEnter({entering:Bt(!0)},yn,{priority:1e3})},gn=function(t){var e=ce.$q,r=t.views("entering");if(r.length)return e.all(r.map(function(t){return e.when(t.load())})).then(l)},_n=function(t){return t.onFinish({},gn)},wn=function(t){var e=t.views("entering"),r=t.views("exiting");if(e.length||r.length){var n=t.router.viewService;r.forEach(function(t){return n.deactivateViewConfig(t)}),e.forEach(function(t){return n.activateViewConfig(t)}),n.sync()}},bn=function(t){return t.onSuccess({},wn)},Sn=function(t){var e=t.router.globals,r=function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,k(t.params(),e.params)},n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},r,{priority:1e4}),t.promise.then(n,n)},$n=function(t){return t.onCreate({},Sn)},Rn=function(t){var e=t.options(),r=t.router.stateService,n=t.router.urlRouter;if("url"!==e.source&&e.location&&r.$current.navigable){var i={replace:"replace"===e.location};n.push(r.$current.navigable.url,r.params,i)}n.update(!0)},En=function(t){return t.onSuccess({},Rn,{priority:9999})},Tn=function(t){function e(){if("url"!==t.originalTransition().options().source){var e=t.targetState();return r.stateService.target(e.identifier(),e.params(),e.options())}var n=r.urlService,i=n.match(n.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,u=i.match;return r.stateService.target(a,u,t.options())}r.urlService.sync()}var r=t.router,n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return ft(t,e)});return ce.$q.all(n).then(e)},Cn=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},Tn)},Pn=function(){function t(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Ke.HANDLE_RESULT),void 0===a&&(a=Ke.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=r,this.criteriaMatchPath=n,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u}return t}(),kn=function(t){return t.onBefore({},lt,{priority:-9999})},On=function(t){return t.onBefore({},pt,{priority:-1e4})},xn={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},jn=function(){function e(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=p(Bt(this),{},Bt(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return e.prototype.onCreate=function(t,e,r){},e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.dispose=function(t){Re(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,_e(t,e)})})},e.prototype.create=function(t,e){return new vr(t,e,this._router)},e.prototype._defineCoreEvents=function(){var e=t.TransitionHookPhase,r=Ke,n=this._criteriaPaths,i=!1,o=!0,a=!0;this._defineEvent("onCreate",e.CREATE,0,n.to,i,r.LOG_REJECTED_RESULT,r.THROW_ERROR,a),this._defineEvent("onBefore",e.BEFORE,0,n.to),this._defineEvent("onStart",e.RUN,0,n.to),this._defineEvent("onExit",e.RUN,100,n.exiting,o),this._defineEvent("onRetain",e.RUN,200,n.retained),this._defineEvent("onEnter",e.RUN,300,n.entering),this._defineEvent("onFinish",e.RUN,400,n.to),this._defineEvent("onSuccess",e.SUCCESS,0,n.to,i,r.LOG_REJECTED_RESULT,r.LOG_ERROR,a),this._defineEvent("onError",e.ERROR,0,n.to,i,r.LOG_REJECTED_RESULT,r.LOG_ERROR,a)},e.prototype._defineCorePaths=function(){var e=t.TransitionHookScope.STATE,r=t.TransitionHookScope.TRANSITION;this._definePathType("to",r),this._definePathType("from",r),this._definePathType("exiting",e),this._definePathType("retained",e),this._definePathType("entering",e)},e.prototype._defineEvent=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=Ke.HANDLE_RESULT),void 0===a&&(a=Ke.REJECT_ERROR),void 0===u&&(u=!1);var s=new Pn(t,e,r,n,i,o,a,u);this._eventTypes.push(s),q(this,this,s)},e.prototype._getEvents=function(t){var e=Kt(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice();return e.sort(function(t,e){var r=t.hookPhase-e.hookPhase;return 0===r?t.hookOrder-e.hookOrder:r})},e.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},e.prototype._getPathTypes=function(){return this._criteriaPaths},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=on(this),t.ignored=kn(this),t.invalid=On(this),t.redirectTo=un(this),t.onExit=cn(this),t.onRetain=ln(this),t.onEnter=hn(this),t.eagerResolve=vn(this),t.lazyResolve=mn(this),t.loadViews=_n(this),t.activateViews=bn(this),t.updateGlobals=$n(this),t.updateUrl=En(this),t.lazyLoad=Cn(this)},e}(),In=function(){function e(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof Fe?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var r=["current","$current","params","transition"],n=Object.keys(e.prototype).filter(Ft(ge(r)));p(Bt(e.prototype),this,Bt(this),n)}return Object.defineProperty(e.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.defaultErrorHandler(l),this.invalidCallbacks=[]},e.prototype._handleInvalidTargetState=function(t,e){function r(){var t=s.dequeue();if(void 0===t)return Fe.invalid(e.error()).toPromise();var n=ce.$q.when(t(e,i,c));return n.then(f).then(function(t){return t||r()})}var n=this,i=ir.makeTargetState(this.router.stateRegistry,t),o=this.router.globals,a=function(){return o.transitionHistory.peekTail()},u=a(),s=new qe(this.invalidCallbacks.slice()),c=new pr(t).injector(),f=function(t){if(t instanceof Je){var e=t;return e=n.target(e.identifier(),e.params(),e.options()),e.valid()?a()!==u?Fe.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):Fe.invalid(e.error()).toPromise()}};return r()},e.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){_e(this.invalidCallbacks)(t)}.bind(this)},e.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!Kt(t)||t,inherit:!1,notify:!1})},e.prototype.go=function(t,e,r){var n={relative:this.$current,inherit:!0},i=y(r,n,xn);return this.transitionTo(t,e,i)},e.prototype.target=function(t,e,r){if(void 0===r&&(r={}),re(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var n=this.router.stateRegistry;if(r.reloadState=r.reload===!0?n.root():n.matcher.find(r.reload,r.relative),r.reload&&!r.reloadState)throw new Error("No such reload state '"+(ee(r.reload)?r.reload:r.reload.name)+"'");return new Je(this.router.stateRegistry,t,e,r)},e.prototype.getCurrentPath=function(){var t=this,e=this.router.globals,r=e.successfulTransitions.peekTail(),n=function(){return[new nr(t.router.stateRegistry.root())]};return r?r.treeChanges().to:n()},e.prototype.transitionTo=function(e,r,n){var i=this;void 0===r&&(r={}),void 0===n&&(n={});var o=this.router,a=o.globals;n=y(n,xn);var u=function(){return a.transition};n=ve(n,{current:u});var s=this.target(e,r,n),c=this.getCurrentPath();if(!s.exists())return this._handleInvalidTargetState(c,s);if(!s.valid())return He(s.error());var f=function h(e){return function(r){if(r instanceof Fe){var n=o.globals.lastStartedTransitionId===e.$id;if(r.type===t.RejectType.IGNORED)return n&&o.urlRouter.update(),ce.$q.when(a.current);var u=r.detail;if(r.type===t.RejectType.SUPERSEDED&&r.redirected&&u instanceof Je){var s=e.redirect(u);return s.run()["catch"](h(s))}if(r.type===t.RejectType.ABORTED)return n&&o.urlRouter.update(),ce.$q.reject(r)}var c=i.defaultErrorHandler();return c(r),ce.$q.reject(r)}},l=this.router.transitionService.create(c,s),p=l.run()["catch"](f(l));return Ae(p),ve(p,{transition:l})},e.prototype.is=function(t,e,r){r=y(r,{relative:this.$current});var n=this.router.stateRegistry.matcher.find(t,r.relative);if(Kt(n)){if(this.$current!==n)return!1;if(!e)return!0;var i=n.parameters({inherit:!0,matchingKeys:e});return rr.equals(i,rr.values(i,e),this.params)}},e.prototype.includes=function(t,e,r){r=y(r,{relative:this.$current});var n=ee(t)&&Gt.fromString(t);if(n){if(!n.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,r.relative),o=this.$current.includes;if(Kt(i)){if(!Kt(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return rr.equals(a,rr.values(a,e),this.params)}},e.prototype.href=function(t,e,r){var n={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};r=y(r,n),e=e||{};var i=this.router.stateRegistry.matcher.find(t,r.relative);if(!Kt(i))return null;r.inherit&&(e=this.params.$inherit(e,this.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&void 0!==o.url&&null!==o.url?this.router.urlRouter.href(o.url,e,{absolute:r.absolute}):null},e.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},e.prototype.get=function(t,e){var r=this.router.stateRegistry;return 0===arguments.length?r.get():r.get(t,e||this.$current)},e.prototype.lazyLoad=function(t,e){var r=this.get(t);if(!r||!r.lazyLoad)throw new Error("Can not lazy load "+t);var n=this.getCurrentPath(),i=ir.makeTargetState(this.router.stateRegistry,n);return e=e||this.router.transitionService.create(n,i),ft(e,r)},e}(),Vn={when:function(t){return new Promise(function(e,r){return e(t)})},reject:function(t){return new Promise(function(e,r){r(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t},all:function(t){if(ne(t))return Promise.all(t);if(re(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return Vn.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},An={},Hn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,qn=/([^\s,]+)/g,Dn={get:function(t){return An[t]},has:function(t){return null!=Dn.get(t)},invoke:function(t,e,r){var n=ve({},An,r||{}),i=Dn.annotate(t),o=je(function(t){return n.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return n[t]});return Xt(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!c(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(ne(t))return t.slice(0,-1);var e=t.toString().replace(Hn,""),r=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(qn);return r||[]}},Fn=function(t,e){var r=e[0],n=e[1];return t.hasOwnProperty(r)?ne(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n,t},Nn=function(t){return t.split("&").filter(f).map($r).reduce(Fn,{})},Un=function(t){var e=t.path(),r=t.search(),n=t.hash(),i=Object.keys(r).map(function(t){var e=r[t],n=ne(e)?e:[e];return n.map(function(e){return t+"="+e})}).reduce(Ce,[]).join("&");return e+(i?"?"+i:"")+(n?"#"+n:"")},Ln=function(){function t(t,e){var r=this;this.fireAfterUpdate=e,this._listener=function(t){return r._listeners.forEach(function(e){return e(t)})},this._listeners=[],this.hash=function(){return ht(r._get()).hash},this.path=function(){return ht(r._get()).path},this.search=function(){return Nn(ht(r._get()).search)},this._location=fe.location,this._history=fe.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),Kt(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),Un(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return _e(e._listeners,t)}},t.prototype.dispose=function(t){be(this._listeners)},t}(),Mn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){function e(e){var r=t.call(this,e,!1)||this;return fe.addEventListener("hashchange",r._listener,!1),r}return Mn(e,t),e.prototype._get=function(){return Rr(this._location.hash)},e.prototype._set=function(t,e,r,n){this._location.hash=r},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),fe.removeEventListener("hashchange",this._listener)},e}(Ln),Gn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wn=function(t){function e(e){return t.call(this,e,!0)||this}return Gn(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,r,n){this._url=r},e}(Ln),zn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jn=function(t){function e(e){var r=t.call(this,e,!0)||this;return r._config=e.urlService.config,fe.addEventListener("popstate",r._listener,!1),r}return zn(e,t),e.prototype._getBasePrefix=function(){return wr(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,r=t.hash,n=t.search;n=Sr(n)[1],r=br(r)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.startsWith(i);return e=o?"/":a?e.substring(i.length):e,e+(n?"?"+n:"")+(r?"#"+r:"")},e.prototype._set=function(t,e,r,n){var i=this._getBasePrefix()+r;n?this._history.replaceState(t,e,i):this._history.pushState(t,e,i)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),fe.removeEventListener("popstate",this._listener)},e}(Ln),Qn=function(){function t(){var t=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return Kt(e)?t._hashPrefix=e:t._hashPrefix},this.dispose=l}return t}(),Kn=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return Kt(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return Kt(t)?this._baseHref=t:Kt(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base")[0];return this._baseHref=t?t.href.substr(location.origin.length):""},t.prototype.dispose=function(){},t}(),Yn=dt("vanilla.hashBangLocation",!1,Bn,Kn),Zn=dt("vanilla.pushStateLocation",!0,Jn,Kn),Xn=dt("vanilla.memoryLocation",!1,Wn,Qn),ti=function(){function t(){}return t.prototype.dispose=function(t){},t}(),ei=Object.freeze({root:fe,fromJson:pe,toJson:he,forEach:de,extend:ve,equals:ye,identity:f,noop:l,createProxyFunctions:p,inherit:me,inArray:ge,_inArray:h,removeFrom:_e,_removeFrom:d,pushTo:we,_pushTo:v,deregAll:be,defaults:y,mergeR:Se,ancestors:m,pick:g,omit:_,pluck:w,filter:b,find:S,mapObj:$e,map:$,values:Re,allTrueR:Ee,anyTrueR:Te,unnestR:Ce,flattenR:Pe,pushR:R,uniqR:ke,unnest:Oe,flatten:xe,assertPredicate:je,assertMap:Ie,assertFn:E,pairs:Ve,arrayTuples:T,applyPairs:C,tail:P,copy:k,_extend:x,silenceUncaughtInPromise:Ae,silentRejection:He,notImplemented:se,services:ce,Glob:Gt,curry:r,compose:n,pipe:i,prop:Ht,propEq:qt,parse:Dt,not:Ft,and:o,or:a,all:Nt,any:Ut,is:Lt,eq:Mt,val:Bt,invoke:u,pattern:s,isUndefined:Qt,isDefined:Kt,isNull:Yt,isNullOrUndefined:Zt,isFunction:Xt,isNumber:te,isString:ee,isObject:re,isArray:ne,isDate:ie,isRegExp:oe,isState:ae,isInjectable:c,isPromise:ue,Queue:qe,maxLength:B,padString:G,kebobString:W,functionToString:z,fnToString:J,stringify:Q,
beforeAfterSubstr:gr,hostRegex:_r,stripFile:wr,splitHash:br,splitQuery:Sr,splitEqual:$r,trimHashVal:Rr,splitOnDelim:K,joinNeighborsR:Y,get Category(){return t.Category},Trace:We,trace:ze,get DefType(){return t.DefType},Param:rr,ParamTypes:Er,StateParams:Cr,ParamType:Xe,PathNode:nr,PathUtils:ir,resolvePolicies:ur,defaultResolvePolicy:or,Resolvable:ar,NATIVE_INJECTOR_TOKEN:lr,ResolveContext:pr,resolvablesBuilder:it,StateBuilder:jr,StateObject:Wt,StateMatcher:Ir,StateQueueManager:Vr,StateRegistry:Ar,StateService:In,TargetState:Je,get TransitionHookPhase(){return t.TransitionHookPhase},get TransitionHookScope(){return t.TransitionHookScope},HookBuilder:Ze,matchState:H,RegisteredHook:Ye,makeEvent:q,get RejectType(){return t.RejectType},Rejection:Fe,Transition:vr,TransitionHook:Ke,TransitionEventType:Pn,defaultTransOpts:xn,TransitionService:jn,UrlMatcher:Dr,UrlMatcherFactory:Fr,UrlRouter:Wr,UrlRuleFactory:Nr,BaseUrlRule:Ur,UrlService:en,ViewService:zr,UIRouterGlobals:Jr,UIRouter:nn,$q:Vn,$injector:Dn,BaseLocationServices:Ln,HashLocationService:Bn,MemoryLocationService:Wn,PushStateLocationService:Jn,MemoryLocationConfig:Qn,BrowserLocationConfig:Kn,keyValsToObjectR:Fn,getParams:Nn,parseUrl:ht,buildUrl:Un,locationPluginFactory:dt,servicesPlugin:vt,hashLocationPlugin:Yn,pushStateLocationPlugin:Zn,memoryLocationPlugin:Xn,UIRouterPluginBase:ti}),ri=function(t,e){return t.reduce(function(t,r){return t||Kt(e[r])},!1)},ni=0,ii=function(){function t(t,e,r){var n=this;this.path=t,this.viewDecl=e,this.factory=r,this.$id=ni++,this.loaded=!1,this.getTemplate=function(t,e){return n.component?n.factory.makeComponentTemplate(t,e,n.component,n.viewDecl.bindings):n.template}}return t.prototype.load=function(){var t=this,e=ce.$q,r=new pr(this.path),n=this.path.reduce(function(t,e){return ve(t,e.paramValues)},{}),i={template:e.when(this.factory.fromConfig(this.viewDecl,n,r)),controller:e.when(this.getController(r))};return e.all(i).then(function(e){return ze.traceViewServiceEvent("Loaded",t),t.controller=e.controller,ve(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!c(e))return this.viewDecl.controller;var r=ce.$injector.annotate(e),n=ne(e)?P(e):e,i=new ar("",n,r);return i.get(t)},t}(),oi=function(){function t(){var t=this;this._useHttp=At.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,r,n){return t.$templateRequest=n.has&&n.has("$templateRequest")&&n.get("$templateRequest"),t.$http=e,t.$templateCache=r,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var n="<ui-view></ui-view>",i=function(t){return ce.$q.when(t).then(function(t){return{template:t}})},o=function(t){return ce.$q.when(t).then(function(t){return{component:t}})};return Kt(t.template)?i(this.fromString(t.template,e)):Kt(t.templateUrl)?i(this.fromUrl(t.templateUrl,e)):Kt(t.templateProvider)?i(this.fromProvider(t.templateProvider,e,r)):Kt(t.component)?o(t.component):Kt(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,r)):i(n)},t.prototype.fromString=function(t,e){return Xt(t)?t(e):t},t.prototype.fromUrl=function(t,e){return Xt(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var n=ce.$injector.annotate(t),i=ne(t)?P(t):t,o=new ar("",i,n);return o.get(r)},t.prototype.fromComponentProvider=function(t,e,r){var n=ce.$injector.annotate(t),i=ne(t)?P(t):t,o=new ar("",i,n);return o.get(r)},t.prototype.makeComponentTemplate=function(t,e,r,n){n=n||{};var i=At.version.minor>=3?"::":"",o=function(t){var e=W(t);return/^(x|data)-/.exec(e)?"x-"+e:e},a=function(r){var a=r.name,u=r.type,s=o(a);if(t.attr(s)&&!n[a])return s+"='"+t.attr(s)+"'";var c=n[a]||a;if("@"===u)return s+"='{{"+i+"$resolve."+c+"}}'";if("&"===u){var f=e.getResolvable(c),l=f&&f.data,p=l&&ce.$injector.annotate(l)||[],h=ne(l)?"["+(l.length-1)+"]":"";return s+"='$resolve."+c+h+"("+p.join(",")+")'"}return s+"='"+i+"$resolve."+c+"'"},u=gt(r).map(a).join(" "),s=o(r);return"<"+s+" "+u+"></"+s+">"},t}(),ai=function(t){return ui(re(t.bindToController)?t.bindToController:t.scope)},ui=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return Kt(t)&&ne(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},si=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,p(Bt(t.prototype),this,Bt(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return re(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),ci=function(t){return function(e,r){function n(t,e){var r=new pr(t.treeChanges(o)),n=ve(Si(r),{$state$:e,$transition$:t});return ce.$injector.invoke(i,this,n)}var i=e[t],o="onExit"===t?"from":"to";return i?n:void 0}},fi=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=Bt(t);p(e,this,e,["hashPrefix"])}return t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return _e(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return t=re(t)?t.enabled:t,t&&this.$sniffer.history},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),t&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,n){var i=this;this.$location=e,this.$sniffer=r,t.$on("$locationChangeSuccess",function(t){return i._urlListeners.forEach(function(e){return e(t)})});var o=Bt(e),a=Bt(n);p(o,this,o,["replace","path","search","hash"]),p(o,this,o,["port","protocol","host"]),p(a,this,a,["baseHref"])},t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t}(),li=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!Xt(t))throw new Error("'rule' must be a function");var r=function(){return t(ce.$injector,e._router.locationService)},n=new Ur(r,f);return this._urlRouter.rule(n),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(ee(t))r.otherwise(t);else{if(!Xt(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(ce.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(ne(r)||Xt(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.injectableHandler=function(t,e){return function(r){return ce.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();At.module("ui.router.angular1",[]);var pi=At.module("ui.router.init",[]),hi=At.module("ui.router.util",["ng","ui.router.init"]),di=At.module("ui.router.router",["ui.router.util"]),vi=At.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),yi=At.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),mi=(At.module("ui.router.compat",["ui.router"]),null);_t.$inject=["$locationProvider"];var gi=function(t){return["$uiRouterProvider",function(e){var r=e.router[t];return r.$get=function(){return r},r}]};wt.$inject=["$injector","$q","$uiRouter"];var _i=function(t){return t.urlRouterProvider=new li(t)},wi=function(){return ve(mi.stateProvider,{$get:function(){return mi.stateService}})};bt.$inject=["$rootScope"],pi.provider("$uiRouter",_t),di.provider("$urlRouter",["$uiRouterProvider",_i]),hi.provider("$urlService",gi("urlService")),hi.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return mi.urlMatcherFactory}]),hi.provider("$templateFactory",function(){return new oi}),vi.provider("$stateRegistry",gi("stateRegistry")),vi.provider("$uiRouterGlobals",gi("globals")),vi.provider("$transitions",gi("transitionService")),vi.provider("$state",["$uiRouterProvider",wi]),vi.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),yi.factory("$view",function(){return mi.viewService}),yi.service("$trace",function(){return ze}),yi.run(bt),hi.run(["$urlMatcherFactory",function(t){}]),vi.run(["$state",function(t){}]),di.run(["$urlRouter",function(t){}]),pi.run(wt);var bi,Si=function(t){var e=t.getTokens().filter(ee),r=e.map(function(e){var r=t.getResolvable(e),n=t.getPolicy(r).async;return[e,"NOWAIT"===n?r.promise:r.data]});return r.reduce(C,{})};bi=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){function u(){var t=h();l&&l(),f&&(l=f.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(c.attr,t.href)}var s,c=Et(i),f=a[1]||a[0],l=null,p={},h=function(){return Rt(r,i,p)},d=St(o.uiSref);p.uiState=d.state,p.uiStateOpts=o.uiSrefOpts?n.$eval(o.uiSrefOpts):{},d.paramExpr&&(n.$watch(d.paramExpr,function(t){p.uiStateParams=ve({},t),u()},!0),p.uiStateParams=ve({},n.$eval(d.paramExpr))),u(),n.$on("$destroy",t.stateRegistry.onStatesChanged(u)),n.$on("$destroy",t.transitionService.onSuccess({},u)),c.clickable&&(s=Tt(i,r,e,c,h),Pt(i,n,s,p.uiStateOpts))}}}];var $i;$i=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){function u(){var t=d();p&&p(),f&&(p=f.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(c.attr,t.href)}var s,c=Et(i),f=a[1]||a[0],p=null,h={},d=function(){return Rt(r,i,h)},v=["uiState","uiStateParams","uiStateOpts"],y=v.reduce(function(t,e){return t[e]=l,t},{});v.forEach(function(t){h[t]=o[t]?n.$eval(o[t]):null,o.$observe(t,function(e){y[t](),y[t]=n.$watch(e,function(e){h[t]=e,u()},!0)})}),u(),n.$on("$destroy",t.stateRegistry.onStatesChanged(u)),n.$on("$destroy",t.transitionService.onSuccess({},u)),c.clickable&&(s=Tt(i,r,e,c,d),Pt(i,n,s,h.uiStateOpts))}}}];var Ri;Ri=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,i,o){function a(t){t.promise.then(s,l)}function u(e,r,n){var o=t.get(e,$t(i)),a={state:o||{name:e},params:r,activeClass:n};return h.push(a),function(){_e(h)(a)}}function s(){var r=function(t){return t.split(/\s/).filter(f)},n=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(Ce,[])},o=n(h).concat(r(c)).reduce(ke,[]),a=n(h.filter(function(e){return t.includes(e.state.name,e.params)})),u=!!h.filter(function(e){return t.is(e.state.name,e.params)}).length,s=u?r(c):[],l=a.concat(s).reduce(ke,[]),p=o.filter(function(t){return!ge(l,t)});e.$evalAsync(function(){l.forEach(function(t){return i.addClass(t)}),p.forEach(function(t){return i.removeClass(t)})})}var c,p,h=[];c=r(o.uiSrefActiveEq||"",!1)(e);try{p=e.$eval(o.uiSrefActive)}catch(d){}p=p||r(o.uiSrefActive||"",!1)(e),re(p)&&de(p,function(t,r){if(ee(t)){var n=St(t);u(n.state,e.$eval(n.paramExpr),r)}}),this.$$addStateInfo=function(t,e){if(!(re(p)&&h.length>0)){var r=u(t,e,p);return s(),r}},e.$on("$stateChangeSuccess",s),e.$on("$destroy",n.transitionService.onStart({},a)),n.globals.transition&&a(n.globals.transition),s()}]}}],At.module("ui.router.state").directive("uiSref",bi).directive("uiSrefActive",Ri).directive("uiSrefActiveEq",Ri).directive("uiState",$i),kt.$inject=["$state"],Ot.$inject=["$state"],At.module("ui.router.state").filter("isState",kt).filter("includedByState",Ot);var Ei;Ei=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,n,i){function o(t,r){return{enter:function(t,r,n){At.version.minor>2?e.enter(t,null,r).then(n):e.enter(t,null,r,n)},leave:function(t,r){At.version.minor>2?e.leave(t).then(r):e.leave(t,r)}}}function a(t,e){return t===e}var u={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(e,c,f){return function(e,c,l){function p(t){(!t||t instanceof ii)&&(a(S,t)||(ze.traceUIViewConfigUpdated(E,t&&t.viewDecl&&t.viewDecl.$context),S=t,d(t)))}function h(){if(v&&(ze.traceUIViewEvent("Removing (previous) el",v.data("$uiView")),v.remove(),v=null),m&&(ze.traceUIViewEvent("Destroying scope",E),m.$destroy(),m=null),y){var t=y.data("$uiViewAnim");ze.traceUIViewEvent("Animate out",t),b.leave(y,function(){t.$$animLeave.resolve(),v=null}),v=y,y=null}}function d(t){var n=e.$new(),o=i.defer(),a=i.defer(),u={$cfg:t,$uiView:E},s={$animEnter:o.promise,$animLeave:a.promise,$$animLeave:a};n.$emit("$viewContentLoading",R);var l=f(n,function(t){t.data("$uiViewAnim",s),t.data("$uiView",u),b.enter(t,c,function(){o.resolve(),m&&m.$emit("$viewContentAnimationEnded"),(Kt(w)&&!w||e.$eval(w))&&r(t)}),h()});y=l,m=n,m.$emit("$viewContentLoaded",t||S),m.$eval(_)}var v,y,m,g,_=l.onload||"",w=l.autoscroll,b=o(l,e),S=void 0,$=c.inheritedData("$uiView")||u,R=n(l.uiView||l.name||"")(e)||"$default",E={$type:"ng1",id:s.count++,name:R,fqn:$.$uiView.fqn?$.$uiView.fqn+"."+R:R,config:null,configUpdated:p,get creationContext(){var t=Dt("$cfg.viewDecl.$context")($),e=Dt("$uiView.creationContext")($);return t||e}};ze.traceUIViewEvent("Linking",E),c.data("$uiView",{$uiView:E}),d(),g=t.registerUIView(E),e.$on("$destroy",function(){ze.traceUIViewEvent("Destroying/Unregistering",E),g()})}}};return s}],xt.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var Ti="function"==typeof At.module("ui.router").component,Ci=0;At.module("ui.router.state").directive("uiView",Ei),At.module("ui.router.state").directive("uiView",xt),At.module("ui.router.state").provider("$uiViewScroll",It);var Pi="ui.router";t["default"]=Pi,t.core=ei,t.watchDigests=bt,t.getLocals=Si,t.getNg1ViewConfigFactory=yt,t.ng1ViewsBuilder=mt,t.Ng1ViewConfig=ii,t.StateProvider=si,t.UrlRouterProvider=li,t.root=fe,t.fromJson=pe,t.toJson=he,t.forEach=de,t.extend=ve,t.equals=ye,t.identity=f,t.noop=l,t.createProxyFunctions=p,t.inherit=me,t.inArray=ge,t._inArray=h,t.removeFrom=_e,t._removeFrom=d,t.pushTo=we,t._pushTo=v,t.deregAll=be,t.defaults=y,t.mergeR=Se,t.ancestors=m,t.pick=g,t.omit=_,t.pluck=w,t.filter=b,t.find=S,t.mapObj=$e,t.map=$,t.values=Re,t.allTrueR=Ee,t.anyTrueR=Te,t.unnestR=Ce,t.flattenR=Pe,t.pushR=R,t.uniqR=ke,t.unnest=Oe,t.flatten=xe,t.assertPredicate=je,t.assertMap=Ie,t.assertFn=E,t.pairs=Ve,t.arrayTuples=T,t.applyPairs=C,t.tail=P,t.copy=k,t._extend=x,t.silenceUncaughtInPromise=Ae,t.silentRejection=He,t.notImplemented=se,t.services=ce,t.Glob=Gt,t.curry=r,t.compose=n,t.pipe=i,t.prop=Ht,t.propEq=qt,t.parse=Dt,t.not=Ft,t.and=o,t.or=a,t.all=Nt,t.any=Ut,t.is=Lt,t.eq=Mt,t.val=Bt,t.invoke=u,t.pattern=s,t.isUndefined=Qt,t.isDefined=Kt,t.isNull=Yt,t.isNullOrUndefined=Zt,t.isFunction=Xt,t.isNumber=te,t.isString=ee,t.isObject=re,t.isArray=ne,t.isDate=ie,t.isRegExp=oe,t.isState=ae,t.isInjectable=c,t.isPromise=ue,t.Queue=qe,t.maxLength=B,t.padString=G,t.kebobString=W,t.functionToString=z,t.fnToString=J,t.stringify=Q,t.beforeAfterSubstr=gr,t.hostRegex=_r,t.stripFile=wr,t.splitHash=br,t.splitQuery=Sr,t.splitEqual=$r,t.trimHashVal=Rr,t.splitOnDelim=K,t.joinNeighborsR=Y,t.Trace=We,t.trace=ze,t.Param=rr,t.ParamTypes=Er,t.StateParams=Cr,t.ParamType=Xe,t.PathNode=nr,t.PathUtils=ir,t.resolvePolicies=ur,t.defaultResolvePolicy=or,t.Resolvable=ar,t.NATIVE_INJECTOR_TOKEN=lr,t.ResolveContext=pr,t.resolvablesBuilder=it,t.StateBuilder=jr,t.StateObject=Wt,t.StateMatcher=Ir,t.StateQueueManager=Vr,t.StateRegistry=Ar,t.StateService=In,t.TargetState=Je,t.HookBuilder=Ze,t.matchState=H,t.RegisteredHook=Ye,t.makeEvent=q,t.Rejection=Fe,t.Transition=vr,t.TransitionHook=Ke,t.TransitionEventType=Pn,t.defaultTransOpts=xn,t.TransitionService=jn,t.UrlMatcher=Dr,t.UrlMatcherFactory=Fr,t.UrlRouter=Wr,t.UrlRuleFactory=Nr,t.BaseUrlRule=Ur,t.UrlService=en,t.ViewService=zr,t.UIRouterGlobals=Jr,t.UIRouter=nn,t.$q=Vn,t.$injector=Dn,t.BaseLocationServices=Ln,t.HashLocationService=Bn,t.MemoryLocationService=Wn,t.PushStateLocationService=Jn,t.MemoryLocationConfig=Qn,t.BrowserLocationConfig=Kn,t.keyValsToObjectR=Fn,t.getParams=Nn,t.parseUrl=ht,t.buildUrl=Un,t.locationPluginFactory=dt,t.servicesPlugin=vt,t.hashLocationPlugin=Yn,t.pushStateLocationPlugin=Zn,t.memoryLocationPlugin=Xn,t.UIRouterPluginBase=ti,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNvZnQvYW5ndWxhci11aS1yb3V0ZXIuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJhbmd1bGFyIiwidW5kZWZpbmVkIiwibmdfZnJvbV9pbXBvcnQiLCJjdXJyeSIsImZuIiwiY3VycmllZCIsImFyZ3MiLCJsZW5ndGgiLCJmdW5jX2FyZ3NfbGVuZ3RoIiwiYXBwbHkiLCJjb25jYXQiLCJzbGljZSIsImFyZ3VtZW50cyIsImluaXRpYWxfYXJncyIsImNvbXBvc2UiLCJzdGFydCIsImkiLCJyZXN1bHQiLCJ0aGlzIiwiY2FsbCIsInBpcGUiLCJmdW5jcyIsIl9pIiwicmV2ZXJzZSIsImFuZCIsImZuMSIsImZuMiIsIm9yIiwiaW52b2tlIiwiZm5OYW1lIiwicGF0dGVybiIsInN0cnVjdCIsIngiLCJpc0luamVjdGFibGUiLCJ2YWwkJDEiLCJpc0FycmF5IiwiaGVhZCIsInRhaWwiLCJmaWx0ZXIiLCJub3QiLCJpc1N0cmluZyIsImlzRnVuY3Rpb24iLCJpZGVudGl0eSIsIm5vb3AkMSIsImNyZWF0ZVByb3h5RnVuY3Rpb25zIiwic291cmNlIiwidGFyZ2V0IiwiYmluZCIsImZuTmFtZXMiLCJsYXRlYmluZCIsImJpbmRGdW5jdGlvbiIsIm1ha2VMYXRlUmViaW5kRm4iLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwibmFtZSIsIl9pbkFycmF5IiwiYXJyYXkiLCJpbmRleE9mIiwiX3JlbW92ZUZyb20iLCJpZHgiLCJzcGxpY2UiLCJfcHVzaFRvIiwiYXJyIiwicHVzaCIsImRlZmF1bHRzIiwib3B0cyIsImRlZmF1bHRzTGlzdCIsIl9kZWZhdWx0c0xpc3QiLCJkZWZhdWx0VmFscyIsImV4dGVuZCIsInBpY2siLCJhbmNlc3RvcnMiLCJmaXJzdCIsInNlY29uZCIsInBhdGgiLCJuIiwicHJvcE5hbWVzIiwib2JqQ29weSIsInByb3BfMSIsIm9taXQiLCJpbkFycmF5Iiwia2V5IiwicGx1Y2siLCJjb2xsZWN0aW9uIiwicHJvcE5hbWUiLCJtYXAiLCJwcm9wIiwiY2FsbGJhY2siLCJhY2NlcHQiLCJmb3JFYWNoIiwiaXRlbSIsImZpbmQiLCJwdXNoUiIsImFzc2VydEZuIiwicHJlZGljYXRlT3JNYXAiLCJlcnJNc2ciLCJFcnJvciIsImFycmF5VHVwbGVzIiwibWF4QXJyYXlMZW4iLCJtaW4iLCJNYXRoIiwiYXBwbHlQYWlycyIsIm1lbW8iLCJrZXlWYWxUdXBsZSIsInZhbHVlIiwiY29weSIsInNyYyIsImRlc3QiLCJfZm9yRWFjaCIsImNiIiwiX3RoaXMiLCJfZXh0ZW5kIiwidG9PYmoiLCJqIiwiX2VxdWFscyIsIm8xIiwibzIiLCJ0MSIsInQyIiwidHVwIiwiYWxsIiwiX2FycmF5c0VxIiwiaXNEYXRlIiwiZ2V0VGltZSIsImlzUmVnRXhwIiwidG9TdHJpbmciLCJwcmVkaWNhdGVzIiwiYW55IiwiYiIsImExIiwiYTIiLCJ0IiwidWlWaWV3U3RyaW5nIiwidWl2aWV3Iiwic3RhdGUiLCJjcmVhdGlvbkNvbnRleHQiLCJpZCIsIiR0eXBlIiwiZnFuIiwibm9ybWFsaXplZENhdCIsImlucHV0IiwiaXNOdW1iZXIiLCJDYXRlZ29yeSIsIm1hdGNoU3RhdGUiLCJjcml0ZXJpb24iLCJtYXRjaEdsb2JzIiwiX3N0YXRlIiwiZ2xvYlN0cmluZ3MiLCJ0b01hdGNoIiwiZ2xvYiIsIkdsb2IiLCJtYXRjaGVzIiwibWF0Y2hGbiIsIm1ha2VFdmVudCIsInJlZ2lzdHJ5IiwidHJhbnNpdGlvblNlcnZpY2UiLCJldmVudFR5cGUiLCJob29rUmVnaXN0cmF0aW9uRm4iLCJtYXRjaE9iamVjdCIsIm9wdGlvbnMiLCJyZWdpc3RlcmVkSG9vayIsIlJlZ2lzdGVyZWRIb29rIiwicmVtb3ZlSG9va0ZuIiwiaG9va3MiLCJkZXJlZ2lzdGVyIiwiX3JlZ2lzdGVyZWRIb29rcyIsInJlbW92ZUZyb20iLCJ0dXBsZVNvcnQiLCJyZXZlcnNlRGVwdGhTb3J0IiwibCIsInIiLCJmYWN0b3IiLCJkZXB0aERlbHRhIiwibm9kZSIsImhvb2siLCJwcmlvcml0eSIsIkFycmF5VHlwZSIsInR5cGUiLCJtb2RlIiwiYXJyYXlXcmFwIiwidmFsIiwiaXNEZWZpbmVkIiwiYXJyYXlVbndyYXAiLCJhcnJheUhhbmRsZXIiLCJhbGxUcnV0aHlNb2RlIiwiYXJyYXlFcXVhbHNIYW5kbGVyIiwidmFsMSIsInZhbDIiLCJsZWZ0IiwicmlnaHQiLCJwYXJhbVR5cGVGbiIsIndyYXBwZXJGbiIsImR5bmFtaWMiLCJpbmhlcml0IiwiaXMiLCIkYXJyYXlNb2RlIiwidW53cmFwU2hvcnRoYW5kIiwiY2ZnIiwiZ2V0U3RhdGljRGVmYXVsdFZhbHVlIiwiaXNTaG9ydGhhbmQiLCIkJGZuIiwiZ2V0VHlwZSIsInVybFR5cGUiLCJsb2NhdGlvbiIsInBhcmFtVHlwZXMiLCJEZWZUeXBlIiwiQ09ORklHIiwiUEFUSCIsIlNFQVJDSCIsIlBhcmFtVHlwZSIsImdldFNxdWFzaFBvbGljeSIsImNvbmZpZyIsImlzT3B0aW9uYWwiLCJkZWZhdWx0UG9saWN5Iiwic3F1YXNoIiwiZ2V0UmVwbGFjZSIsImFycmF5TW9kZSIsInJlcGxhY2UiLCJjb25maWd1cmVkS2V5cyIsImZyb20iLCJ0byIsIm1heExlbmd0aCIsIm1heCIsInN0ciIsInN1YnN0ciIsInBhZFN0cmluZyIsImtlYm9iU3RyaW5nIiwiY2FtZWxDYXNlIiwiJDEiLCJ0b0xvd2VyQ2FzZSIsImZ1bmN0aW9uVG9TdHJpbmciLCJmblN0ciIsImZuVG9TdHJpbmciLCJuYW1lZEZ1bmN0aW9uTWF0Y2giLCJtYXRjaCIsInRvU3RyIiwiX2ZuIiwic3RyaW5naWZ5IiwibyIsImZvcm1hdCIsImlzT2JqZWN0Iiwic2VlbiIsInN0cmluZ2lmeVBhdHRlcm4iLCJKU09OIiwic3BsaXRPbkRlbGltIiwiZGVsaW0iLCJyZSIsIlJlZ0V4cCIsInNwbGl0Iiwiam9pbk5laWdoYm9yc1IiLCJpbml0RGVmYXVsdFR5cGVzIiwibWFrZURlZmF1bHRUeXBlIiwiZGVmIiwidmFsVG9TdHJpbmciLCJkZWZhdWx0VHlwZUJhc2UiLCJlbmNvZGUiLCJkZWNvZGUiLCJTdHJpbmciLCJlcXVhbHMiLCJhIiwiUGFyYW1UeXBlcyIsInN0cmluZyIsInF1ZXJ5IiwiaGFzaCIsImludCIsInBhcnNlSW50IiwiaXNOdWxsT3JVbmRlZmluZWQiLCJib29sIiwiQm9vbGVhbiIsImRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImpvaW4iLCJjYXB0dXJlIiwiZXhlYyIsIkRhdGUiLCJpc05hTiIsInZhbHVlT2YiLCJqc29uIiwidG9Kc29uIiwiZnJvbUpzb24iLCJuYW1lQnVpbGRlciIsInNlbGZCdWlsZGVyIiwic2VsZiIsIiQkc3RhdGUiLCJkYXRhQnVpbGRlciIsInBhcmVudCIsImRhdGEiLCJwYXRoQnVpbGRlciIsImluY2x1ZGVzQnVpbGRlciIsImluY2x1ZGVzIiwicmVzb2x2YWJsZXNCdWlsZGVyIiwib2JqZWN0czJUdXBsZXMiLCJyZXNvbHZlT2JqIiwicmVzb2x2ZVBvbGljaWVzIiwidG9rZW4iLCJkZXBzIiwicG9saWN5IiwiYW5ub3RhdGUiLCIkaW5qZWN0b3IiLCJzZXJ2aWNlcyIsInN0cmljdERpIiwiaXNSZXNvbHZlTGl0ZXJhbCIsInJlc29sdmVGbiIsImlzTGlrZU5nMlByb3ZpZGVyIiwicHJvdmlkZSIsInVzZVZhbHVlIiwidXNlRmFjdG9yeSIsInVzZUV4aXN0aW5nIiwidXNlQ2xhc3MiLCJpc1R1cGxlRnJvbU9iaiIsInAiLCJsaXRlcmFsMlJlc29sdmFibGUiLCJSZXNvbHZhYmxlIiwiZGVwZW5kZW5jaWVzIiwidHVwbGUyUmVzb2x2YWJsZSIsInR1cGxlIiwiaXRlbTJSZXNvbHZhYmxlIiwiZGVjbCIsInJlc29sdmUiLCJpdGVtcyIsInJlc29sdmVQb2xpY3kiLCJxdW90ZVJlZ0V4cCIsInBhcmFtIiwic3Vycm91bmRQYXR0ZXJuIiwiYXBwZW5kQmFzZVBhdGgiLCJ1cmwiLCJpc0h0bWw1IiwiYWJzb2x1dGUiLCJiYXNlSHJlZiIsInN0cmlwRmlsZSIsImdldEhhbmRsZXJGbiIsImhhbmRsZXIiLCJUYXJnZXRTdGF0ZSIsImlzRGVmIiwiYWRkQ29yZVJlc29sdmFibGVzIiwidHJhbnMiLCJhZGRSZXNvbHZhYmxlIiwiVUlSb3V0ZXIiLCJyb3V0ZXIiLCJUcmFuc2l0aW9uIiwicGFyYW1zIiwiZW50ZXJpbmciLCJtYWtlRW50ZXJFeGl0UmV0YWluSG9vayIsImhvb2tOYW1lIiwidHJhbnNpdGlvbiIsImhvb2tGbiIsImxhenlMb2FkU3RhdGUiLCJ1cGRhdGVTdGF0ZVJlZ2lzdHJ5IiwiQXJyYXkiLCJzdGF0ZXMiLCJzdGF0ZVJlZ2lzdHJ5IiwicmVnaXN0ZXIiLCJsYXp5TG9hZEZuIiwibGF6eUxvYWQiLCJwcm9taXNlIiwic3VjY2VzcyIsImVycm9yIiwiZXJyIiwiJHEiLCJyZWplY3QiLCJ3aGVuIiwidGhlbiIsImlnbm9yZWRIb29rIiwiaWdub3JlZFJlYXNvbiIsIl9pZ25vcmVkUmVhc29uIiwidHJhY2UiLCJ0cmFjZVRyYW5zaXRpb25JZ25vcmVkIiwicGVuZGluZyIsImdsb2JhbHMiLCJhYm9ydCIsIlJlamVjdGlvbiIsImlnbm9yZWQiLCJ0b1Byb21pc2UiLCJpbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJ2YWxpZCIsInBhcnNlVXJsJDEiLCJvckVtcHR5U3RyaW5nIiwiX2EiLCJzcGxpdEhhc2giLCJiZWZvcmVoYXNoIiwiX2IiLCJzcGxpdFF1ZXJ5Iiwic2VhcmNoIiwibG9jYXRpb25QbHVnaW5GYWN0b3J5Iiwic2VydmljZUNsYXNzIiwiY29uZmlndXJhdGlvbkNsYXNzIiwiZGlzcG9zZSIsInNlcnZpY2UiLCJjb25maWd1cmF0aW9uIiwibG9jYXRpb25TZXJ2aWNlIiwibG9jYXRpb25Db25maWciLCJzZXJ2aWNlc1BsdWdpbiIsImdldE5nMVZpZXdDb25maWdGYWN0b3J5IiwidGVtcGxhdGVGYWN0b3J5IiwidmlldyIsImdldCIsIk5nMVZpZXdDb25maWciLCJuZzFWaWV3c0J1aWxkZXIiLCJ0cGxLZXlzIiwiY3RybEtleXMiLCJjb21wS2V5cyIsIm5vbkNvbXBLZXlzIiwiYWxsVmlld0tleXMiLCJ2aWV3cyIsImhhc0FueUtleSIsInZpZXdzT2JqZWN0IiwiJGRlZmF1bHQiLCJjb21wb25lbnQiLCJyZXNvbHZlQXMiLCIkY29udGV4dCIsIiRuYW1lIiwibm9ybWFsaXplZCIsIlZpZXdTZXJ2aWNlIiwibm9ybWFsaXplVUlWaWV3VGFyZ2V0IiwiJHVpVmlld05hbWUiLCJ1aVZpZXdOYW1lIiwiJHVpVmlld0NvbnRleHRBbmNob3IiLCJ1aVZpZXdDb250ZXh0QW5jaG9yIiwiZ2V0Q29tcG9uZW50QmluZGluZ3MiLCJjbXBEZWZzIiwiZ2V0QmluZGluZ3MiLCJ1bm5lc3RSIiwiJHVpUm91dGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkZ2V0IiwiJGxvY2F0aW9uIiwiJGJyb3dzZXIiLCIkc25pZmZlciIsIiRyb290U2NvcGUiLCIkaHR0cCIsIiR0ZW1wbGF0ZUNhY2hlIiwibmcxTG9jYXRpb25TZXJ2aWNlIiwiX3J1bnRpbWVTZXJ2aWNlcyIsInN0YXRlUHJvdmlkZXIiLCJTdGF0ZVByb3ZpZGVyIiwic3RhdGVTZXJ2aWNlIiwiZGVjb3JhdG9yIiwiZ2V0U3RhdGVIb29rQnVpbGRlciIsInZpZXdTZXJ2aWNlIiwiX3BsdWdpbmFwaSIsIl92aWV3Q29uZmlnRmFjdG9yeSIsIk5nMUxvY2F0aW9uU2VydmljZXMiLCJtb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlIiwiJGluamVjdCIsInJ1bkJsb2NrIiwicmVzb2x2YWJsZXMiLCJyZXNvbHZhYmxlIiwid2F0Y2hEaWdlc3RzIiwiJHdhdGNoIiwiYXBwcm94aW1hdGVEaWdlc3RzIiwicGFyc2VTdGF0ZVJlZiIsInJlZiIsInBhcnNlZCIsInBhcmFtc09ubHkiLCJwYXJhbUV4cHIiLCJzdGF0ZUNvbnRleHQiLCJlbCIsIiR1aVZpZXciLCJpbmhlcml0ZWREYXRhIiwicGFyc2UiLCJwcm9jZXNzZWREZWYiLCIkc3RhdGUiLCIkZWxlbWVudCIsInVpU3RhdGUiLCJjdXJyZW50IiwidWlTdGF0ZU9wdHMiLCJkZWZhdWx0T3B0cyIsImhyZWYiLCJ1aVN0YXRlUGFyYW1zIiwiZ2V0VHlwZUluZm8iLCJpc1N2ZyIsImlzRm9ybSIsIm5vZGVOYW1lIiwiYXR0ciIsImlzQW5jaG9yIiwidG9VcHBlckNhc2UiLCJjbGlja2FibGUiLCJjbGlja0hvb2siLCIkdGltZW91dCIsImdldERlZiIsImUiLCJidXR0b24iLCJ3aGljaCIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJnbyIsInByZXZlbnREZWZhdWx0IiwiaWdub3JlUHJldmVudERlZmF1bHRDb3VudCIsImNhbmNlbCIsInJlbGF0aXZlIiwiJGN1cnJlbnQiLCJiaW5kRXZlbnRzIiwiZWxlbWVudCIsInNjb3BlIiwiZXZlbnRzIiwib24iLCJldmVudHNfMSIsImV2ZW50XzEiLCIkb24iLCJvZmYiLCJldmVudHNfMiIsImV2ZW50XzIiLCIkSXNTdGF0ZUZpbHRlciIsImlzRmlsdGVyIiwiJHN0YXRlZnVsIiwiJEluY2x1ZGVkQnlTdGF0ZUZpbHRlciIsImluY2x1ZGVzRmlsdGVyIiwiJFZpZXdEaXJlY3RpdmVGaWxsIiwiJGNvbXBpbGUiLCIkY29udHJvbGxlciIsIiR0cmFuc2l0aW9ucyIsIiR2aWV3IiwiZ2V0Q29udHJvbGxlckFzIiwiZ2V0UmVzb2x2ZUFzIiwicmVzdHJpY3QiLCJjb21waWxlIiwidEVsZW1lbnQiLCJpbml0aWFsIiwiaHRtbCIsImVtcHR5IiwiY29udGVudHMiLCIkY2ZnIiwidmlld0RlY2wiLCJnZXRUZW1wbGF0ZSIsIm5vb3AiLCJyZXNvbHZlQ3R4IiwiUmVzb2x2ZUNvbnRleHQiLCJ0cmFjZVVJVmlld0ZpbGwiLCJsaW5rIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImxvY2FscyIsImdldExvY2FscyIsImNvbnRyb2xsZXJJbnN0YW5jZSIsIiRzY29wZSIsImNoaWxkcmVuIiwicmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzIiwiY21wXzEiLCJrZWJvYk5hbWUiLCJ0YWdSZWdleHBfMSIsImdldENvbXBvbmVudENvbnRyb2xsZXIiLCJkaXJlY3RpdmVFbCIsInRhZ05hbWUiLCJuZyIsImRlcmVnaXN0ZXJXYXRjaF8xIiwiY3RybEluc3RhbmNlIiwiJG9uSW5pdCIsImhhc0NvbXBvbmVudEltcGwiLCJ2aWV3U3RhdGUiLCJob29rT3B0aW9ucyIsInVpT25QYXJhbXNDaGFuZ2VkIiwicmVzb2x2ZUNvbnRleHQiLCJ2aWV3Q3JlYXRpb25UcmFuc18xIiwiZ2V0UmVzb2x2YWJsZSIsInBhcmFtc1VwZGF0ZWQiLCIkdHJhbnNpdGlvbiQiLCJleGl0aW5nIiwidG9QYXJhbXMiLCJmcm9tUGFyYW1zIiwidG9TY2hlbWEiLCJ0cmVlQ2hhbmdlcyIsInBhcmFtU2NoZW1hIiwiZnJvbVNjaGVtYSIsImNoYW5nZWRUb1BhcmFtcyIsImNoYW5nZWRLZXlzXzEiLCJuZXdWYWx1ZXMiLCJvblN1Y2Nlc3MiLCJ1aUNhbkV4aXQiLCJpZF8xIiwiX3VpQ2FuRXhpdElkIiwiY2FjaGVQcm9wXzEiLCJwcmV2VHJ1dGh5QW5zd2VyXzEiLCJyZWRpcmVjdGVkRnJvbSIsIndyYXBwZWRIb29rIiwiaWRzIiwiY3JpdGVyaWEiLCJvbkJlZm9yZSIsIiRWaWV3U2Nyb2xsUHJvdmlkZXIiLCJ1c2VBbmNob3JTY3JvbGwiLCIkYW5jaG9yU2Nyb2xsIiwic2Nyb2xsSW50b1ZpZXciLCJuZ19mcm9tX2dsb2JhbCIsInByb3BFcSIsImN0b3IiLCJlcSIsIm90aGVyIiwidiIsInRleHQiLCJyZWdleHBTdHJpbmciLCJzZWciLCJyZWdleHAiLCJ0ZXN0IiwiZnJvbVN0cmluZyIsIlN0YXRlT2JqZWN0IiwiY3JlYXRlIiwic3RhdGVEZWNsIiwiaXNTdGF0ZUNsYXNzIiwiX19zdGF0ZU9iamVjdENhY2hlIiwibmFtZUdsb2IiLCJyb290IiwicGFyYW1ldGVycyIsIm1hdGNoaW5nS2V5cyIsImluaGVyaXRlZCIsInZhbHVlcyIsImhhc093blByb3BlcnR5IiwicGFyYW1ldGVyIiwiaXNTdGF0ZSIsInRpcyIsImlzVW5kZWZpbmVkIiwiaXNOdWxsIiwiaXNQcm9taXNlIiwibm90SW1wbGVtZW50ZWQiLCJmbm5hbWUiLCJhbmd1bGFyJDEiLCJhc3NpZ24iLCJleHRyYSIsInB1c2hUbyIsImRlcmVnQWxsIiwiZnVuY3Rpb25zIiwibWVyZ2VSIiwibWFwT2JqIiwiYWxsVHJ1ZVIiLCJlbGVtIiwiYW55VHJ1ZVIiLCJmbGF0dGVuUiIsInVuaXFSIiwidW5uZXN0IiwiZmxhdHRlbiIsImFzc2VydFByZWRpY2F0ZSIsImFzc2VydE1hcCIsInBhaXJzIiwic2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlIiwic2lsZW50UmVqZWN0aW9uIiwiUXVldWUiLCJfaXRlbXMiLCJfbGltaXQiLCJlbnF1ZXVlIiwic2hpZnQiLCJkZXF1ZXVlIiwic2l6ZSIsImNsZWFyIiwicmVtb3ZlIiwicGVla1RhaWwiLCJwZWVrSGVhZCIsIlJlamVjdFR5cGUiLCJtZXNzYWdlIiwiZGV0YWlsIiwiJGlkIiwiZGV0YWlsU3RyaW5nIiwiZCIsIl90cmFuc2l0aW9uUmVqZWN0aW9uIiwiaXNSZWplY3Rpb25Qcm9taXNlIiwic3VwZXJzZWRlZCIsInJlamVjdGlvbiIsIlNVUEVSU0VERUQiLCJyZWRpcmVjdGVkIiwiaW52YWxpZCIsIklOVkFMSUQiLCJJR05PUkVEIiwiYWJvcnRlZCIsIkFCT1JURUQiLCJlcnJvcmVkIiwiRVJST1IiLCJub3JtYWxpemUiLCJ2aWV3Q29uZmlnU3RyaW5nIiwidmlld0NvbmZpZyIsImNvbnNvbGVMb2ciLCJGdW5jdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJjb25zb2xldGFibGUiLCJ0YWJsZSIsIl90aWQiLCJfcmlkIiwidHJhbnNMYmwiLCJUcmFjZSIsIl9lbmFibGVkIiwiX3NldCIsImVuYWJsZWQiLCJjYXRlZ29yaWVzIiwiayIsImNhdGVnb3J5IiwiZW5hYmxlIiwiZGlzYWJsZSIsInRyYWNlVHJhbnNpdGlvblN0YXJ0IiwiVFJBTlNJVElPTiIsInRyYWNlSG9va0ludm9jYXRpb24iLCJzdGVwIiwiSE9PSyIsImV2ZW50IiwiY29udGV4dCIsInRyYWNlSG9va1Jlc3VsdCIsImhvb2tSZXN1bHQiLCJ0cmFuc2l0aW9uT3B0aW9ucyIsInRyYWNlUmVzb2x2ZVBhdGgiLCJSRVNPTFZFIiwidHJhY2VSZXNvbHZhYmxlUmVzb2x2ZWQiLCJ0cmFjZUVycm9yIiwicmVhc29uIiwidHJhY2VTdWNjZXNzIiwiZmluYWxTdGF0ZSIsInRyYWNlVUlWaWV3RXZlbnQiLCJ2aWV3RGF0YSIsIlVJVklFVyIsInRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZCIsInRyYWNlVmlld1N5bmMiLCJWSUVXQ09ORklHIiwibWFwcGluZyIsInVpVmlld0RhdGEiLCJ1aVZpZXciLCJ1aS12aWV3IGZxbiIsInN0YXRlOiB2aWV3IG5hbWUiLCJzb3J0IiwibG9jYWxlQ29tcGFyZSIsInRyYWNlVmlld1NlcnZpY2VFdmVudCIsInRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCIsIlRyYW5zaXRpb25Ib29rUGhhc2UiLCJUcmFuc2l0aW9uSG9va1Njb3BlIiwiX3N0YXRlUmVnaXN0cnkiLCJfaWRlbnRpZmllciIsIl9wYXJhbXMiLCJfb3B0aW9ucyIsIl9kZWZpbml0aW9uIiwibWF0Y2hlciIsImlkZW50aWZpZXIiLCJleGlzdHMiLCJiYXNlIiwic3RhdGVOYW1lIiwid2l0aFN0YXRlIiwid2l0aFBhcmFtcyIsIm5ld1BhcmFtcyIsIndpdGhPcHRpb25zIiwibmV3T3B0cyIsImRlZmF1bHRPcHRpb25zIiwidHJhY2VEYXRhIiwiVHJhbnNpdGlvbkhvb2siLCJpc1N1cGVyc2VkZWQiLCJob29rUGhhc2UiLCJSVU4iLCJpc0FjdGl2ZSIsImxvZ0Vycm9yIiwiZGVmYXVsdEVycm9ySGFuZGxlciIsImludm9rZUhvb2siLCJfZGVyZWdpc3RlcmVkIiwibm90Q3VycmVudCIsImdldE5vdEN1cnJlbnRSZWplY3Rpb24iLCJpbnZva2VDYWxsYmFjayIsIm5vcm1hbGl6ZUVyciIsImhhbmRsZUVycm9yIiwiZ2V0RXJyb3JIYW5kbGVyIiwiaGFuZGxlUmVzdWx0IiwiZ2V0UmVzdWx0SGFuZGxlciIsInN5bmNocm9ub3VzIiwiaW52b2tlTGltaXQiLCJpbnZva2VDb3VudCIsImhhbmRsZUhvb2tSZXN1bHQiLCJpc1RhcmdldFN0YXRlIiwiX2Rpc3Bvc2VkIiwiX2Fib3J0ZWQiLCJjaGFpbiIsIndhaXRGb3IiLCJjcmVhdGVIb29rQ2hhaW5SIiwicHJldiIsIm5leHRIb29rIiwiaW52b2tlSG9va3MiLCJkb25lQ2FsbGJhY2siLCJyZW1haW5pbmdIb29rcyIsInJ1bkFsbEhvb2tzIiwiSEFORExFX1JFU1VMVCIsIkxPR19SRUpFQ1RFRF9SRVNVTFQiLCJMT0dfRVJST1IiLCJSRUpFQ1RfRVJST1IiLCJUSFJPV19FUlJPUiIsInRyYW5TdmMiLCJtYXRjaENyaXRlcmlhIiwicmVtb3ZlSG9va0Zyb21SZWdpc3RyeSIsIl9tYXRjaGluZ05vZGVzIiwibm9kZXMiLCJtYXRjaGluZyIsIl9nZXREZWZhdWx0TWF0Y2hDcml0ZXJpYSIsIl9nZXRQYXRoVHlwZXMiLCJfZ2V0TWF0Y2hpbmdOb2RlcyIsInBhdGhzIiwibW4iLCJwYXRodHlwZSIsImlzU3RhdGVIb29rIiwiU1RBVEUiLCJhbGxNYXRjaGVkIiwiZXZlcnkiLCJIb29rQnVpbGRlciIsImJ1aWxkSG9va3NGb3JQaGFzZSIsInBoYXNlIiwiX2dldEV2ZW50cyIsImJ1aWxkSG9va3MiLCJob29rVHlwZSIsIm1hdGNoaW5nSG9va3MiLCJnZXRNYXRjaGluZ0hvb2tzIiwiYmFzZUhvb2tPcHRpb25zIiwibWFrZVRyYW5zaXRpb25Ib29rcyIsIm1hdGNoaW5nTm9kZXMiLCJjcml0ZXJpYU1hdGNoUGF0aCIsInRyYW5zaXRpb25Ib29rIiwicmV2ZXJzZVNvcnQiLCJpc0NyZWF0ZSIsIkNSRUFURSIsInJlZ2lzdHJpZXMiLCJyZWciLCJnZXRIb29rcyIsIiRzdWJQYXR0ZXJuIiwic3ViIiwiJG5vcm1hbGl6ZSIsIiRhc0FycmF5IiwiaXNTZWFyY2giLCJoYXNPd24iLCJQYXJhbSIsInVybE1hdGNoZXJGYWN0b3J5IiwiZ2V0QXJyYXlNb2RlIiwiYXJyYXlEZWZhdWx0cyIsImFycmF5UGFyYW1Ob21lbmNsYXR1cmUiLCJyYXciLCJkZWZhdWx0U3F1YXNoUG9saWN5IiwiaW5oZXJpdCQkMSIsImlzRGVmYXVsdFZhbHVlIiwiZ2V0RGVmYXVsdFZhbHVlIiwiX2RlZmF1bHRWYWx1ZUNhY2hlIiwiZGVmYXVsdFZhbHVlIiwicmVwbGFjZVNwZWNpYWxWYWx1ZXMiLCJ2YWxpZGF0ZXMiLCJlbmNvZGVkIiwidmFsdWVzJCQxIiwicGFyYW1WYWx1ZXMiLCJwYXJhbXNfMSIsImNoYW5nZWQiLCJ2YWx1ZXMxIiwidmFsdWVzMiIsIlBhdGhOb2RlIiwic3RhdGVPck5vZGUiLCJyZXMiLCJjbG9uZSIsImFwcGx5UmF3UGFyYW1zIiwiZ2V0UGFyYW1WYWwiLCJwYXJhbURlZiIsInBEZWYiLCJwYXJhbXNGbiIsImRpZmYiLCJQYXRoVXRpbHMiLCJtYWtlVGFyZ2V0U3RhdGUiLCJidWlsZFBhdGgiLCJ0YXJnZXRTdGF0ZSIsImJ1aWxkVG9QYXRoIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJpbmhlcml0UGFyYW1zIiwiYXBwbHlWaWV3Q29uZmlncyIsInZpZXdEZWNscyIsInN1YlBhdGgiLCJ2aWV3Q29uZmlncyIsImNyZWF0ZVZpZXdDb25maWciLCJ0b0tleXMiLCJub2RlUGFyYW1WYWxzIiwibWFrZUluaGVyaXRlZFBhcmFtc05vZGUiLCJ0b05vZGUiLCJ0b1BhcmFtVmFscyIsImluY29taW5nUGFyYW1WYWxzIiwiZnJvbVBhcmFtVmFscyIsIm5vSW5oZXJpdCIsIm93blBhcmFtVmFscyIsInJlbG9hZFN0YXRlIiwiYXBwbHlUb1BhcmFtcyIsInJldGFpbmVkTm9kZSIsImNsb25lZCIsImtlZXAiLCJub2Rlc01hdGNoIiwibm9kZTEiLCJub2RlMiIsIm5vbkR5bmFtaWNQYXJhbXMiLCJyZXRhaW5lZCIsInJldGFpbmVkV2l0aFRvUGFyYW1zIiwicGF0aEEiLCJwYXRoQiIsImRvbmUiLCJ0dXBsZXMiLCJub2RlQSIsIm5vZGVCIiwicHJlZGljYXRlIiwiZWxlbWVudElkeCIsImRlZmF1bHRSZXNvbHZlUG9saWN5IiwiYXN5bmMiLCJhcmcxIiwicmVzb2x2ZWQiLCJsaXRlcmFsIiwiZ2V0UG9saWN5IiwidGhpc1BvbGljeSIsInN0YXRlUG9saWN5IiwiZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcyIsImdldERlcGVuZGVuY2llcyIsImludm9rZVJlc29sdmVGbiIsInJlc29sdmVkRGVwcyIsIndhaXRGb3JSeCIsIm9ic2VydmFibGUkIiwiY2FjaGVkIiwiY2FjaGUiLCJ0YWtlIiwiZmluZE5vZGUiLCJtYXliZVdhaXRGb3JSeCIsImFwcGx5UmVzb2x2ZWRWYWx1ZSIsInJlc29sdmVkVmFsdWUiLCJmcm9tRGF0YSIsIkxBWlkiLCJFQUdFUiIsIldBSVQiLCJOT1dBSVQiLCJSWFdBSVQiLCJ3aGVucyIsIkFMTF9XSEVOUyIsIkVBR0VSX1dIRU5TIiwiTkFUSVZFX0lOSkVDVE9SX1RPS0VOIiwiX3BhdGgiLCJnZXRUb2tlbnMiLCJzdWJDb250ZXh0IiwiYWRkUmVzb2x2YWJsZXMiLCJuZXdSZXNvbHZhYmxlcyIsInJlc29sdmVQYXRoIiwid2hlbk9wdGlvbiIsIm1hdGNoZWRXaGVucyIsIm1hdGNoZXNQb2xpY3kiLCJhY2NlcHRlZFZhbHMiLCJ3aGVuT3JBc3luYyIsInByb21pc2VzIiwibm9kZVJlc29sdmFibGVzIiwibm93YWl0Iiwid2FpdCIsImdldFJlc3VsdCIsImluamVjdG9yIiwiX2luamVjdG9yIiwiVUlJbmplY3RvckltcGwiLCJhdmFpbGFibGVSZXNvbHZhYmxlcyIsIl9ub2RlIiwiZ2V0RGVwZW5kZW5jeSIsImZyb21JbmplY3RvciIsImdldE5hdGl2ZSIsImdldEFzeW5jIiwic3RhdGVTZWxmIiwiX2RlZmVycmVkIiwiZGVmZXIiLCJfaG9va0J1aWxkZXIiLCJfdGFyZ2V0U3RhdGUiLCJfdHJhbnNpdGlvbkNvdW50IiwiX3RyZWVDaGFuZ2VzIiwiY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMiLCJvbkNyZWF0ZUhvb2tzIiwib25TdGFydCIsIm9uRXhpdCIsIm9uUmV0YWluIiwib25FbnRlciIsIm9uRmluaXNoIiwib25FcnJvciIsImVudGVyaW5nU3RhdGVzIiwiJGZyb20iLCIkdG8iLCJjb21wYXJlIiwicGF0aG5hbWUiLCJmcmVlemUiLCJwYXRoTmFtZSIsImdldFJlc29sdmVUb2tlbnMiLCJ0b3BhdGgiLCJ0YXJnZXROb2RlIiwib3JpZ2luYWxUcmFuc2l0aW9uIiwicmYiLCJyZWRpcmVjdCIsInJlZGlyZWN0cyIsInJlZGlyZWN0T3B0cyIsIm5ld09wdGlvbnMiLCJuZXdUcmFuc2l0aW9uIiwib3JpZ2luYWxFbnRlcmluZ05vZGVzIiwicmVkaXJlY3RFbnRlcmluZ05vZGVzIiwibm9kZUlzUmVsb2FkaW5nIiwibWF0Y2hpbmdFbnRlcmluZ05vZGVzIiwiX2NoYW5nZWRQYXJhbXMiLCJ0YyIsInJlbG9hZCIsInBhdGhzRGlmZmVyIiwibm9kZVNjaGVtYXMiLCJ0b1ZhbHVlcyIsImZyb21WYWx1ZXMiLCJzY2hlbWEiLCJ0b1ZhbHMiLCJmcm9tVmFscyIsImNoYW5nZXMiLCJzYW1lIiwibmV3VEMiLCJwZW5kVEMiLCJydW4iLCJnZXRIb29rc0ZvciIsInRyYW5zaXRpb25TdWNjZXNzIiwiU1VDQ0VTUyIsInRyYW5zaXRpb25FcnJvciIsIl9lcnJvciIsInJ1blRyYW5zaXRpb24iLCJhbGxSdW5Ib29rcyIsInN0YXJ0VHJhbnNpdGlvbiIsImxhc3RTdGFydGVkVHJhbnNpdGlvbklkIiwidHJhbnNpdGlvbkhpc3RvcnkiLCJhbGxCZWZvcmVIb29rcyIsIkJFRk9SRSIsInBhcmFtRGVmcyIsImludmFsaWRQYXJhbXMiLCJmcm9tU3RhdGVPck5hbWUiLCJ0b1N0YXRlT3JOYW1lIiwiYXZvaWRFbXB0eUhhc2giLCJ0b1ZhbGlkIiwiZGlUb2tlbiIsInN0cmluZ2lmeVBhdHRlcm5GbiIsImlzUmVqZWN0aW9uIiwiYmVmb3JlQWZ0ZXJTdWJzdHIiLCJjaGFyIiwiaG9zdFJlZ2V4Iiwic3BsaXRFcXVhbCIsInRyaW1IYXNoVmFsIiwidHlwZVF1ZXVlIiwiZGVmYXVsdFR5cGVzIiwibWFrZVR5cGUiLCJkZWZpbml0aW9uIiwidHlwZXMiLCJkZWZpbml0aW9uRm4iLCJfZmx1c2hUeXBlUXVldWUiLCJkZWZhdWx0UnVsZVNvcnRGbiIsIlN0YXRlUGFyYW1zIiwiJGluaGVyaXQiLCJwYXJlbnRQYXJhbXMiLCJwYXJlbnRzIiwiaW5oZXJpdExpc3QiLCJwYXJzZVVybCIsInJvb3QkJDEiLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJnZXRVcmxCdWlsZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiLCJzdGF0ZURlYyIsInBhcmFtTWFwIiwicGFyYW1Db25maWciLCJyZWxvYWRPblNlYXJjaCIsImlzTWF0Y2hlciIsIm5hdmlnYWJsZSIsImFwcGVuZCIsImdldE5hdmlnYWJsZUJ1aWxkZXIiLCJpc1Jvb3QiLCJnZXRQYXJhbXNCdWlsZGVyIiwicGFyYW1GYWN0b3J5IiwibWFrZUNvbmZpZ1BhcmFtIiwiZnJvbUNvbmZpZyIsInVybFBhcmFtcyIsIm5vblVybFBhcmFtcyIsIlN0YXRlQnVpbGRlciIsInBhcmVudEJ1aWxkZXIiLCJwYXJlbnROYW1lIiwiYnVpbGRlcnMiLCJidWlsZGVyIiwiYnVpbGQiLCJwYXJlbnRGbiIsInNlZ21lbnRzIiwibGFzdFNlZ21lbnQiLCJwb3AiLCJTdGF0ZU1hdGNoZXIiLCJfc3RhdGVzIiwiaXNSZWxhdGl2ZSIsInN0YXRlT3JOYW1lIiwibWF0Y2hHbG9iIiwiaXNTdHIiLCJiYXNlU3RhdGUiLCJzcGxpdE5hbWUiLCJwYXRoTGVuZ3RoIiwicmVsTmFtZSIsIlN0YXRlUXVldWVNYW5hZ2VyIiwiJHJlZ2lzdHJ5IiwiJHVybFJvdXRlciIsImxpc3RlbmVycyIsInF1ZXVlIiwiZmx1c2giLCJyZWdpc3RlcmVkIiwib3JwaGFucyIsInByZXZpb3VzUXVldWVMZW5ndGgiLCJnZXRTdGF0ZSIsIm5hbWVfMSIsIm9ycGhhbklkeCIsImV4aXN0aW5nU3RhdGUiLCJleGlzdGluZ0Z1dHVyZVN0YXRlIiwiYXR0YWNoUm91dGUiLCJsaXN0ZW5lciIsInMiLCJydWxlIiwidXJsUnVsZUZhY3RvcnkiLCJTdGF0ZVJlZ2lzdHJ5IiwiX3JvdXRlciIsInN0YXRlUXVldWUiLCJ1cmxSb3V0ZXIiLCJfcmVnaXN0ZXJSb290Iiwicm9vdFN0YXRlRGVmIiwiIyIsImFic3RyYWN0IiwiX3Jvb3QiLCJvblN0YXRlc0NoYW5nZWQiLCJzdGF0ZURlZmluaXRpb24iLCJfZGVyZWdpc3RlclRyZWUiLCJhbGwkJDEiLCJnZXRDaGlsZHJlbiIsImRlcmVnaXN0ZXJlZCIsIiR1ciIsInJ1bGVzIiwicmVtb3ZlUnVsZSIsImRlcmVnaXN0ZXJlZFN0YXRlcyIsImZvdW5kIiwiZnVuYyIsIm1lbW9pemVUbyIsInByb3AkJDEiLCJzcGxpdE9uU2xhc2giLCJVcmxNYXRjaGVyIiwicGF0dGVybiQkMSIsIl9jYWNoZSIsIl9jaGlsZHJlbiIsIl9zZWdtZW50cyIsIl9jb21waWxlZCIsInN0cmljdCIsImNhc2VJbnNlbnNpdGl2ZSIsIm0iLCJzZWdtZW50IiwicGxhY2Vob2xkZXIiLCJzZWFyY2hQbGFjZWhvbGRlciIsImxhc3QiLCJwYXR0ZXJucyIsImNoZWNrUGFyYW1FcnJvcnMiLCJuYW1lVmFsaWRhdG9yIiwibWF0Y2hEZXRhaWxzIiwibWFrZVJlZ2V4cFR5cGUiLCJpbmRleCIsImxhc3RJbmRleCIsImZyb21TZWFyY2giLCJkZWNvZGVQYXRoQXJyYXkiLCJyZXZlcnNlU3RyaW5nIiwidW5xdW90ZURhc2hlcyIsImFsbFJldmVyc2VkIiwiYWxsUGFyYW1zIiwicGF0aFBhcmFtcyIsInNlYXJjaFBhcmFtcyIsIm5QYXRoU2VnbWVudHMiLCJ1cmxtIiwiZmluZFBhcmFtIiwidmFsaWRQYXJhbVZhbCIsImdldERldGFpbHMiLCJpc1ZhbGlkIiwidXJsTWF0Y2hlcnMiLCJwYXRoU2VnbWVudHNBbmRQYXJhbXMiLCJxdWVyeVBhcmFtcyIsImlzSW52YWxpZCIsInBhdGhTdHJpbmciLCJlbmNvZGVEYXNoZXMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJxdWVyeVN0cmluZyIsInBhcmFtRGV0YWlscyIsImMiLCJjaGFyQ29kZUF0Iiwic3RhdGljU2VnbWVudHMiLCJ3ZWlnaHRzIiwicGFkQXJyYXlzIiwicGFkVmFsIiwibGVuIiwid2VpZ2h0c0EiLCJ3ZWlnaHRzQiIsImNtcCIsInBhaXJzJCQxIiwiVXJsTWF0Y2hlckZhY3RvcnkiLCJfaXNDYXNlSW5zZW5zaXRpdmUiLCJfaXNTdHJpY3RNb2RlIiwiX2RlZmF1bHRTcXVhc2hQb2xpY3kiLCJfZ2V0Q29uZmlnIiwic3RyaWN0TW9kZSIsIm9iamVjdCIsIlVybFJ1bGVGYWN0b3J5Iiwid2hhdCIsIm1ha2VSdWxlIiwiX3doYXQiLCJmcm9tVXJsTWF0Y2hlciIsImZyb21TdGF0ZSIsImZyb21SZWdFeHAiLCJCYXNlVXJsUnVsZSIsInVybE1hdGNoZXIiLCJtYXRjaFByaW9yaXR5Iiwib3B0aW9uYWwiLCJtYXRjaGVkIiwiX2hhbmRsZXIiLCJkZXRhaWxzIiwidHJhbnNpdGlvblRvIiwic3RpY2t5IiwicmVkaXJlY3RVcmxUbyIsIk51bWJlciIsImlzVXJsUnVsZSIsInByaW9yaXR5U29ydCIsInR5cGVTb3J0IiwiVVJMTUFUQ0hFUiIsIlJFR0VYUCIsIlJBVyIsIk9USEVSIiwidXJsTWF0Y2hlclNvcnQiLCJpZFNvcnQiLCJ1c2VNYXRjaFByaW9yaXR5IiwiZXF1YWwiLCJVcmxSb3V0ZXIiLCJfc29ydEZuIiwiX3J1bGVzIiwiaW50ZXJjZXB0RGVmZXJyZWQiLCJfaWQiLCJfc29ydGVkIiwibGlzdGVuIiwiX290aGVyd2lzZUZuIiwiY29tcGFyZUZuIiwic3RhYmxlU29ydCIsImVuc3VyZVNvcnRlZCIsImFyck9mV3JhcHBlciIsIndyYXBwZXJBIiwid3JhcHBlckIiLCJjbXBEaWZmIiwid3JhcHBlciIsImJlc3QiLCJjaGVja1J1bGUiLCJ3ZWlnaHQiLCJzeW5jIiwiZXZ0IiwiZGVmYXVsdFByZXZlbnRlZCIsIiR1cmwiLCJ1cmxTZXJ2aWNlIiwiYXBwbHlSZXN1bHQiLCJuZXd1cmwiLCJfc3RvcEZuIiwib25DaGFuZ2UiLCJ1cGRhdGUiLCJyZWFkIiwiaHRtbDVNb2RlIiwiaGFzaFByZWZpeCIsInNsYXNoIiwicG9ydCIsInByb3RvY29sIiwiaG9zdCIsIm90aGVyd2lzZSIsImhhbmRsZXJGbiIsInVybFBhcnRzIiwiZGVmZXJJbnRlcmNlcHQiLCJfdWlWaWV3cyIsIl92aWV3Q29uZmlncyIsIl92aWV3Q29uZmlnRmFjdG9yaWVzIiwiX3Jvb3RWaWV3Q29udGV4dCIsIl9yZWdpc3RlcmVkVUlWaWV3cyIsIl9hY3RpdmVWaWV3Q29uZmlncyIsIl9yb290Q29udGV4dCIsInZpZXdUeXBlIiwiY2ZnRmFjdG9yeSIsImNmZ3MiLCJkZWFjdGl2YXRlVmlld0NvbmZpZyIsImFjdGl2YXRlVmlld0NvbmZpZyIsInVpVmlld0RlcHRoIiwic3RhdGVEZXB0aCIsInZpZXdDb25maWdEZXB0aCIsImNvdW50IiwidWlWaWV3c0J5RnFuIiwidWl2IiwiZGVwdGhDb21wYXJlIiwiZGVwdGhGbiIsInBvc05lZyIsIm1hdGNoaW5nQ29uZmlnUGFpciIsIm1hdGNoaW5nQ29uZmlncyIsImNvbmZpZ3VyZVVJVmlldyIsImNvbmZpZ1VwZGF0ZWQiLCJyZWdpc3RlclVJVmlldyIsInVpVmlld3MiLCJmcW5BbmRUeXBlTWF0Y2hlcyIsImF2YWlsYWJsZSIsImFjdGl2ZSIsInJhd1ZpZXdOYW1lIiwidmlld0F0Q29udGV4dCIsInJlbGF0aXZlVmlld05hbWVTdWdhciIsInJlbGF0aXZlTWF0Y2giLCJhbmNob3IiLCJ2YyIsInZjU2VnbWVudHMiLCJ1aXZTZWdtZW50cyIsIm5lZ09mZnNldCIsImZxblRvRmlyc3RTZWdtZW50IiwidWlWaWV3Q29udGV4dCIsIlVJUm91dGVyR2xvYmFscyIsInN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyIsIm1ha2VTdHViIiwibG9jYXRpb25TZXJ2aWNlc0ZucyIsImxvY2F0aW9uQ29uZmlnRm5zIiwidW1mRm5zIiwicnVsZXNGbnMiLCJzeW5jRm5zIiwiVXJsU2VydmljZSIsImxhdGVCaW5kIiwibG9jYXRpb25TZXJ2aWNlcyIsInVtZiIsInBhcnRzIiwibG9jYXRpb25TZXJ2aWNlU3R1YiIsImxvY2F0aW9uQ29uZmlnU3R1YiIsIl9yb3V0ZXJJbnN0YW5jZSIsIl9kaXNwb3NhYmxlcyIsIlRyYW5zaXRpb25TZXJ2aWNlIiwiU3RhdGVTZXJ2aWNlIiwiX3BsdWdpbnMiLCJkaXNwb3NhYmxlIiwicGx1Z2luIiwicGx1Z2luSW5zdGFuY2UiLCJnZXRQbHVnaW4iLCJwbHVnaW5OYW1lIiwicmVnaXN0ZXJBZGRDb3JlUmVzb2x2YWJsZXMiLCJvbkNyZWF0ZSIsInJlZGlyZWN0VG9Ib29rIiwicmVkaXJlY3RUbyIsInJlZ2lzdGVyUmVkaXJlY3RUb0hvb2siLCJvbkV4aXRIb29rIiwicmVnaXN0ZXJPbkV4aXRIb29rIiwib25SZXRhaW5Ib29rIiwicmVnaXN0ZXJPblJldGFpbkhvb2siLCJvbkVudGVySG9vayIsInJlZ2lzdGVyT25FbnRlckhvb2siLCJlYWdlclJlc29sdmVQYXRoIiwicmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmVTdGF0ZSIsInJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSIsImxvYWRFbnRlcmluZ1ZpZXdzIiwiZW50ZXJpbmdWaWV3cyIsImxvYWQiLCJyZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzIiwiYWN0aXZhdGVWaWV3cyIsImV4aXRpbmdWaWV3cyIsInJlZ2lzdGVyQWN0aXZhdGVWaWV3cyIsInVwZGF0ZUdsb2JhbFN0YXRlIiwidHJhbnNpdGlvblN1Y2Nlc3NmdWwiLCJjbGVhckN1cnJlbnRUcmFuc2l0aW9uIiwicmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSIsInVwZGF0ZVVybCIsInVybE9wdGlvbnMiLCJyZWdpc3RlclVwZGF0ZVVybCIsImxhenlMb2FkSG9vayIsInJldHJ5VHJhbnNpdGlvbiIsIm9yaWciLCJyZWdpc3RlckxhenlMb2FkSG9vayIsIlRyYW5zaXRpb25FdmVudFR5cGUiLCJob29rT3JkZXIiLCJyZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayIsInJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rIiwiZGVmYXVsdFRyYW5zT3B0cyIsIm5vdGlmeSIsImN1c3RvbSIsIl9ldmVudFR5cGVzIiwiX2NyaXRlcmlhUGF0aHMiLCJfZGVyZWdpc3Rlckhvb2tGbnMiLCJfZGVmaW5lQ29yZVBhdGhzIiwiX2RlZmluZUNvcmVFdmVudHMiLCJfcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzIiwiaG9va3NBcnJheSIsIlBoYXNlIiwiVEgiLCJOT1JNQUxfU09SVCIsIlJFVkVSU0VfU09SVCIsIlNZTkNIUk9OT1VTIiwiX2RlZmluZUV2ZW50IiwiX2RlZmluZVBhdGhUeXBlIiwidHJhbnNpdGlvbkhvb2tUeXBlcyIsImNtcEJ5UGhhc2UiLCJob29rU2NvcGUiLCJmbnMiLCJhZGRDb3JlUmVzb2x2ZXMiLCJlYWdlclJlc29sdmUiLCJsYXp5UmVzb2x2ZSIsImxvYWRWaWV3cyIsInVwZGF0ZUdsb2JhbHMiLCJpbnZhbGlkQ2FsbGJhY2tzIiwiX2RlZmF1bHRFcnJvckhhbmRsZXIiLCIkZXJyb3IkIiwic3RhY2siLCJnZXR0ZXJzIiwiYm91bmRGbnMiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJfaGFuZGxlSW52YWxpZFRhcmdldFN0YXRlIiwidG9TdGF0ZSIsImludm9rZU5leHRDYWxsYmFjayIsIm5leHRDYWxsYmFjayIsImNhbGxiYWNrUXVldWUiLCJjYWxsYmFja1Jlc3VsdCIsImNoZWNrRm9yUmVkaXJlY3QiLCJsYXRlc3RUaGluZyIsImxhdGVzdCIsIm9uSW52YWxpZCIsImRlZmF1dEdvT3B0cyIsInRyYW5zT3B0cyIsImdldEN1cnJlbnRQYXRoIiwibGF0ZXN0U3VjY2VzcyIsInJvb3RQYXRoIiwiZ2V0Q3VycmVudCIsImN1cnJlbnRQYXRoIiwicmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciIsImlzTGF0ZXN0IiwiZXJyb3JIYW5kbGVyIiwidHJhbnNpdGlvblRvUHJvbWlzZSIsImluY2x1ZGUiLCJkZWZhdWx0SHJlZk9wdHMiLCJsb3NzeSIsIm5hdiIsIlByb21pc2UiLCJkZWZlcnJlZCIsIlNUUklQX0NPTU1FTlRTIiwiQVJHVU1FTlRfTkFNRVMiLCJoYXMiLCJlbnN1cmVFeGlzdCIsImtleVZhbHNUb09iamVjdFIiLCJhY2N1bSIsImdldFBhcmFtcyIsImJ1aWxkVXJsIiwibG9jIiwic2VhcmNoT2JqZWN0IiwidmFscyIsIkJhc2VMb2NhdGlvblNlcnZpY2VzIiwiZmlyZUFmdGVyVXBkYXRlIiwiX2xpc3RlbmVyIiwiX2xpc3RlbmVycyIsIl9nZXQiLCJfbG9jYXRpb24iLCJfaGlzdG9yeSIsImhpc3RvcnkiLCJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfXyIsIkhhc2hMb2NhdGlvblNlcnZpY2UiLCJfc3VwZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidGl0bGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX19leHRlbmRzJDEiLCJNZW1vcnlMb2NhdGlvblNlcnZpY2UiLCJfdXJsIiwiX19leHRlbmRzJDIiLCJQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJfY29uZmlnIiwiX2dldEJhc2VQcmVmaXgiLCJiYXNlUHJlZml4IiwiZXhhY3RNYXRjaCIsInN0YXJ0c1dpdGgiLCJmdWxsVXJsIiwicmVwbGFjZVN0YXRlIiwicHVzaFN0YXRlIiwiTWVtb3J5TG9jYXRpb25Db25maWciLCJfYmFzZUhyZWYiLCJfcG9ydCIsIl9wcm90b2NvbCIsIl9ob3N0IiwiX2hhc2hQcmVmaXgiLCJuZXd2YWwiLCJCcm93c2VyTG9jYXRpb25Db25maWciLCJfaXNIdG1sNSIsImhvc3RuYW1lIiwibmV3cHJlZml4IiwiYXBwbHlEb2N1bWVudEJhc2VIcmVmIiwiYmFzZVRhZyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJvcmlnaW4iLCJoYXNoTG9jYXRpb25QbHVnaW4iLCJwdXNoU3RhdGVMb2NhdGlvblBsdWdpbiIsIm1lbW9yeUxvY2F0aW9uUGx1Z2luIiwiVUlSb3V0ZXJQbHVnaW5CYXNlIiwiaW5kZXgkMSIsImlkJDEiLCJsb2FkZWQiLCJtYWtlQ29tcG9uZW50VGVtcGxhdGUiLCJiaW5kaW5ncyIsInRlbXBsYXRlIiwiZ2V0Q29udHJvbGxlciIsInJlc3VsdHMiLCJwcm92aWRlciIsImNvbnRyb2xsZXJQcm92aWRlciIsInByb3ZpZGVyRm4iLCJUZW1wbGF0ZUZhY3RvcnkiLCJfdXNlSHR0cCIsInZlcnNpb24iLCJtaW5vciIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCJ1c2VIdHRwU2VydmljZSIsImRlZmF1bHRUZW1wbGF0ZSIsImFzVGVtcGxhdGUiLCJhc0NvbXBvbmVudCIsInRlbXBsYXRlVXJsIiwiZnJvbVVybCIsInRlbXBsYXRlUHJvdmlkZXIiLCJmcm9tUHJvdmlkZXIiLCJjb21wb25lbnRQcm92aWRlciIsImZyb21Db21wb25lbnRQcm92aWRlciIsImhlYWRlcnMiLCJBY2NlcHQiLCJyZXNwb25zZSIsInByZWZpeCIsImtlYm9iIiwia2Vib2JlZCIsImF0dHJpYnV0ZVRwbCIsImF0dHJOYW1lIiwicmVzb2x2ZU5hbWUiLCJhcnJheUlkeFN0ciIsImF0dHJzIiwic2NvcGVCaW5kaW5ncyIsImJpbmRUb0NvbnRyb2xsZXIiLCJiaW5kaW5nc09iaiIsImRlY29yYXRlZE5nMUhvb2siLCIkc3RhdGUkIiwiX3VybExpc3RlbmVycyIsIl9scCIsIm5ld1VybCIsIl9sb2MiLCJfYnJvd3NlciIsInBhdGhUeXBlIiwifiIsIi8iLCJ+fiIsIn4yRiIsIlVybFJvdXRlclByb3ZpZGVyIiwiX3VybFJvdXRlciIsInJ1bGVGbiIsImluamVjdGFibGVIYW5kbGVyIiwiJG1hdGNoIiwiJHN0YXRlUGFyYW1zIiwibW9kX2luaXQiLCJtb2RfdXRpbCIsIm1vZF9ydHIiLCJtb2Rfc3RhdGUiLCJtb2RfbWFpbiIsImdldFByb3ZpZGVyRm9yIiwic2VydmljZU5hbWUiLCIkdXJwIiwiZ2V0VXJsUm91dGVyUHJvdmlkZXIiLCJ1aVJvdXRlciIsInVybFJvdXRlclByb3ZpZGVyIiwiZ2V0U3RhdGVQcm92aWRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeSIsInVpU3JlZiIsImN0eCIsInRva2VucyIsIndhaXRQb2xpY3kiLCJ1aVNyZWZBY3RpdmUiLCJ1bmxpbmtJbmZvRm4iLCIkJGFkZFN0YXRlSW5mbyIsIiRzZXQiLCJyYXdEZWYiLCJ1aVNyZWZPcHRzIiwiJGV2YWwiLCJpbnB1dEF0dHJzIiwid2F0Y2hEZXJlZ0ZucyIsImZpZWxkIiwiJG9ic2VydmUiLCJleHByIiwiJGludGVycG9sYXRlIiwiJGF0dHJzIiwidXBkYXRlQWZ0ZXJUcmFuc2l0aW9uIiwiYWRkU3RhdGUiLCJzdGF0ZVBhcmFtcyIsImFjdGl2ZUNsYXNzIiwic3RhdGVJbmZvIiwic3BsaXRDbGFzc2VzIiwiZ2V0Q2xhc3NlcyIsInN0YXRlTGlzdCIsImFsbENsYXNzZXMiLCJhY3RpdmVFcUNsYXNzIiwiZnV6enlDbGFzc2VzIiwiZXhhY3RseU1hdGNoZXNBbnkiLCJleGFjdENsYXNzZXMiLCJhZGRDbGFzc2VzIiwicmVtb3ZlQ2xhc3NlcyIsImNscyIsIiRldmFsQXN5bmMiLCJjbGFzc05hbWUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidWlTcmVmQWN0aXZlRXEiLCJuZXdTdGF0ZSIsImRpcmVjdGl2ZSIsIiRhbmltYXRlIiwiJHVpVmlld1Njcm9sbCIsImdldFJlbmRlcmVyIiwiZW50ZXIiLCJsZWF2ZSIsImNvbmZpZ3NFcXVhbCIsImNvbmZpZzEiLCJjb25maWcyIiwicm9vdERhdGEiLCJ0ZXJtaW5hbCIsInRyYW5zY2x1ZGUiLCJ0QXR0cnMiLCIkdHJhbnNjbHVkZSIsImNvbmZpZ1VwZGF0ZWRDYWxsYmFjayIsImFjdGl2ZVVJVmlldyIsInVwZGF0ZVZpZXciLCJjbGVhbnVwTGFzdFZpZXciLCJwcmV2aW91c0VsIiwiY3VycmVudFNjb3BlIiwiJGRlc3Ryb3kiLCJjdXJyZW50RWwiLCJfdmlld0RhdGFfMSIsInJlbmRlcmVyIiwiJCRhbmltTGVhdmUiLCJuZXdTY29wZSIsIiRuZXciLCJhbmltRW50ZXIiLCJhbmltTGVhdmUiLCIkdWlWaWV3RGF0YSIsIiR1aVZpZXdBbmltIiwiJGFuaW1FbnRlciIsIiRhbmltTGVhdmUiLCIkZW1pdCIsImF1dG9TY3JvbGxFeHAiLCJvbmxvYWRFeHAiLCJ1bnJlZ2lzdGVyIiwiZnJvbVBhcmVudFRhZ0NvbmZpZyIsImZyb21QYXJlbnRUYWciLCJjb3JlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBLElBQUlBLFNBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVVDLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYRixTQUF5QkUsRUFBSUMsY0FBZ0JILFFBQVVFLElBQVFGLE9BQU9JLFVBQVksZUFBa0JGLEtBWXRRLFNBQVdHLEVBQVFDLEdBQ3VELFlBQWxELG1CQUFaQyxTQUEwQixZQUFjUixRQUFRUSxXQUE0QyxtQkFBWEMsUUFBeUJGLEVBQVFDLFFBQVNFLFFBQVEsWUFBZ0Msa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUFNRCxRQUFRLFVBQVcsV0FBWUosR0FBV0EsRUFBUUQsRUFBTywwQkFBNkJBLEVBQU9PLFVBQ3BTQyxPQUFXLFNBQVVOLEVBQVNPLEdBd0Q3QixRQUFTQyxHQUFNQyxHQUdYLFFBQVNDLEdBQVFDLEdBQ2IsTUFBSUEsR0FBS0MsUUFBVUMsRUFBeUJKLEVBQUdLLE1BQU0sS0FBTUgsR0FDcEQsV0FDSCxNQUFPRCxHQUFRQyxFQUFLSSxVQUFVQyxNQUFNRixNQUFNRyxjQUxsRCxHQUFJQyxNQUFrQkYsTUFBTUYsTUFBTUcsV0FBWSxJQUMxQ0osRUFBbUJKLEVBQUdHLE1BTzFCLE9BQU9GLEdBQVFRLEdBUW5CLFFBQVNDLEtBQ0wsR0FBSVIsR0FBT00sVUFDUEcsRUFBUVQsRUFBS0MsT0FBUyxDQUMxQixPQUFPLFlBR0gsSUFGQSxHQUFJUyxHQUFJRCxFQUNKRSxFQUFTWCxFQUFLUyxHQUFPTixNQUFNUyxLQUFNTixXQUM5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LEVBQVFreUMsa0JBQW9CQSxHQUM1Qmx5QyxFQUFRc21DLFdBQWFBLEdBQ3JCdG1DLEVBQVE0cEMsa0JBQW9CQSxHQUM1QjVwQyxFQUFRZ3NDLFVBQVlBLEdBQ3BCaHNDLEVBQVFtcUMsZUFBaUJBLEdBQ3pCbnFDLEVBQVEwcUMsWUFBY0EsR0FDdEIxcUMsRUFBUXl4QyxXQUFhQSxHQUNyQnp4QyxFQUFRcWEsWUFBY0EsR0FDdEJyYSxFQUFRaXhDLGdCQUFrQkEsR0FDMUJqeEMsRUFBUTBWLFNBQVdBLEdBQ25CMVYsRUFBUStXLEdBQUtBLEdBQ2IvVyxFQUFRbVQsVUFBWUEsR0FDcEJuVCxFQUFRdzVDLHFCQUF1QkEsR0FDL0J4NUMsRUFBUXE2QyxvQkFBc0JBLEdBQzlCcjZDLEVBQVEyNkMsc0JBQXdCQSxHQUNoQzM2QyxFQUFRODZDLHlCQUEyQkEsR0FDbkM5NkMsRUFBUXU3QyxxQkFBdUJBLEdBQy9CdjdDLEVBQVE4N0Msc0JBQXdCQSxHQUNoQzk3QyxFQUFRaTVDLGlCQUFtQkEsR0FDM0JqNUMsRUFBUW01QyxVQUFZQSxHQUNwQm41QyxFQUFRa2hDLFNBQVdscEIsR0FDbkJoWSxFQUFRbzVDLFNBQVdBLEdBQ25CcDVDLEVBQVF3WSxzQkFBd0JBLEdBQ2hDeFksRUFBUWdaLGVBQWlCQSxHQUN6QmhaLEVBQVF1OEMsbUJBQXFCQSxHQUM3QnY4QyxFQUFRdzhDLHdCQUEwQkEsR0FDbEN4OEMsRUFBUXk4QyxxQkFBdUJBLEdBQy9CejhDLEVBQVEwOEMsbUJBQXFCQSxHQUU3Qmo1QyxPQUFPc3pDLGVBQWUvMkMsRUFBUyxjQUFnQitHLE9BQU8iLCJmaWxlIjoic29mdC9hbmd1bGFyLXVpLXJvdXRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcclxuXHJcbi8qKlxyXG4gKiBTdGF0ZS1iYXNlZCByb3V0aW5nIGZvciBBbmd1bGFySlMgMS54XHJcbiAqIE5PVElDRTogVGhpcyBtb25vbGl0aGljIGJ1bmRsZSBhbHNvIGJ1bmRsZXMgdGhlIEB1aXJvdXRlci9jb3JlIGNvZGUuXHJcbiAqICAgICAgICAgVGhpcyBjYXVzZXMgaXQgdG8gYmUgaW5jb21wYXRpYmxlIHdpdGggcGx1Z2lucyB0aGF0IGRlcGVuZCBvbiBAdWlyb3V0ZXIvY29yZS5cclxuICogICAgICAgICBXZSByZWNvbW1lbmQgc3dpdGNoaW5nIHRvIHRoZSB1aS1yb3V0ZXItY29yZS5qcyBhbmQgdWktcm91dGVyLWFuZ3VsYXJqcy5qcyBidW5kbGVzIGluc3RlYWQuXHJcbiAqICAgICAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSBodHRwczovL3VpLXJvdXRlci5naXRodWIuaW8vYmxvZy91aXJvdXRlci1mb3ItYW5ndWxhcmpzLXVtZC1idW5kbGVzXHJcbiAqIEB2ZXJzaW9uIHYxLjAuMTBcclxuICogQGxpbmsgaHR0cHM6Ly91aS1yb3V0ZXIuZ2l0aHViLmlvXHJcbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxyXG4gKi9cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICAgICh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZXhwb3J0cykpID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnYW5ndWxhcicpKSA6IHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAnYW5ndWxhciddLCBmYWN0b3J5KSA6IGZhY3RvcnkoZ2xvYmFsWydAdWlyb3V0ZXIvYW5ndWxhcmpzJ10gPSB7fSwgZ2xvYmFsLmFuZ3VsYXIpO1xyXG59KSh1bmRlZmluZWQsIGZ1bmN0aW9uIChleHBvcnRzLCBuZ19mcm9tX2ltcG9ydCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBuZ19mcm9tX2dsb2JhbCA9IGFuZ3VsYXI7XHJcbiAgICB2YXIgbmcgPSBuZ19mcm9tX2ltcG9ydCAmJiBuZ19mcm9tX2ltcG9ydC5tb2R1bGUgPyBuZ19mcm9tX2ltcG9ydCA6IG5nX2Zyb21fZ2xvYmFsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlnaGVyIG9yZGVyIGZ1bmN0aW9uc1xyXG4gICAgICpcclxuICAgICAqIFRoZXNlIHV0aWxpdHkgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgYnV0IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cclxuICAgICAqXHJcbiAgICAgKiBAbW9kdWxlIGNvbW1vbl9ob2ZcclxuICAgICAqLyAvKiogKi9cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiBmb3IgW1BhcnRpYWwgQXBwbGljYXRpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24pIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBHaXZlbiBhIGZ1bmN0aW9uIHdpdGggTiBwYXJhbWV0ZXJzLCByZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQgc3VwcG9ydHMgcGFydGlhbCBhcHBsaWNhdGlvbi5cclxuICAgICAqIFRoZSBuZXcgZnVuY3Rpb24gYWNjZXB0cyBhbnl3aGVyZSBmcm9tIDEgdG8gTiBwYXJhbWV0ZXJzLiAgV2hlbiB0aGF0IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIE0gcGFyYW1ldGVycyxcclxuICAgICAqIHdoZXJlIE0gaXMgbGVzcyB0aGFuIE4sIGl0IHJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHRoZSByZW1haW5pbmcgcGFyYW1ldGVycy4gIEl0IGNvbnRpbnVlcyB0b1xyXG4gICAgICogYWNjZXB0IG1vcmUgcGFyYW1ldGVycyB1bnRpbCBhbGwgTiBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBzdXBwbGllZC5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBjb250cml2ZWQgZXhhbXBsZSB1c2VzIGEgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24gYXMgYW4gcHJlZGljYXRlLCB3aGljaCByZXR1cm5zIHRydWVcclxuICAgICAqIGlmIGFuIG9iamVjdCBpcyBmb3VuZCBpbiBib3RoIGFycmF5cy5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqIC8vIHJldHVybnMgdHJ1ZSBpZiBhbiBvYmplY3QgaXMgaW4gYm90aCBvZiB0aGUgdHdvIGFycmF5c1xyXG4gICAgICogZnVuY3Rpb24gaW5Cb3RoKGFycmF5MSwgYXJyYXkyLCBvYmplY3QpIHtcclxuICAgICAqICAgcmV0dXJuIGFycmF5MS5pbmRleE9mKG9iamVjdCkgIT09IC0xICYmXHJcbiAgICAgKiAgICAgICAgICBhcnJheTIuaW5kZXhPZihvYmplY3QpICE9PSAxO1xyXG4gICAgICogfVxyXG4gICAgICogbGV0IG9iajEsIG9iajIsIG9iajMsIG9iajQsIG9iajUsIG9iajYsIG9iajdcclxuICAgICAqIGxldCBmb29zID0gW29iajEsIG9iajNdXHJcbiAgICAgKiBsZXQgYmFycyA9IFtvYmozLCBvYmo0LCBvYmo1XVxyXG4gICAgICpcclxuICAgICAqIC8vIEEgY3VycmllZCBcImNvcHlcIiBvZiBpbkJvdGhcclxuICAgICAqIGxldCBjdXJyaWVkSW5Cb3RoID0gY3VycnkoaW5Cb3RoKTtcclxuICAgICAqIC8vIFBhcnRpYWxseSBhcHBseSBib3RoIHRoZSBhcnJheTEgYW5kIGFycmF5MlxyXG4gICAgICogbGV0IGluRm9vc0FuZEJhcnMgPSBjdXJyaWVkSW5Cb3RoKGZvb3MsIGJhcnMpO1xyXG4gICAgICpcclxuICAgICAqIC8vIFN1cHBseSB0aGUgZmluYWwgYXJndW1lbnQ7IHNpbmNlIGFsbCBhcmd1bWVudHMgYXJlXHJcbiAgICAgKiAvLyBzdXBwbGllZCwgdGhlIG9yaWdpbmFsIGluQm90aCBmdW5jdGlvbiBpcyB0aGVuIGNhbGxlZC5cclxuICAgICAqIGxldCBvYmoxSW5Cb3RoID0gaW5Gb29zQW5kQmFycyhvYmoxKTsgLy8gZmFsc2VcclxuICAgICAqXHJcbiAgICAgKiAvLyBVc2UgdGhlIGluRm9vc0FuZEJhcnMgYXMgYSBwcmVkaWNhdGUuXHJcbiAgICAgKiAvLyBGaWx0ZXIsIG9uIGVhY2ggaXRlcmF0aW9uLCBzdXBwbGllcyB0aGUgZmluYWwgYXJndW1lbnRcclxuICAgICAqIGxldCBhbGxPYmpzID0gWyBvYmoxLCBvYmoyLCBvYmozLCBvYmo0LCBvYmo1LCBvYmo2LCBvYmo3IF07XHJcbiAgICAgKiBsZXQgZm91bmRJbkJvdGggPSBhbGxPYmpzLmZpbHRlcihpbkZvb3NBbmRCYXJzKTsgLy8gWyBvYmozIF1cclxuICAgICAqXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBTdG9sZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80Mzk0NzQ3L2phdmFzY3JpcHQtY3VycnktZnVuY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZm5cclxuICAgICAqIEByZXR1cm5zIHsqfGZ1bmN0aW9uKCk6ICgqfGFueSl9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGN1cnJ5KGZuKSB7XHJcbiAgICAgICAgdmFyIGluaXRpYWxfYXJncyA9IFtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cywgWzFdKTtcclxuICAgICAgICB2YXIgZnVuY19hcmdzX2xlbmd0aCA9IGZuLmxlbmd0aDtcclxuICAgICAgICBmdW5jdGlvbiBjdXJyaWVkKGFyZ3MpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID49IGZ1bmNfYXJnc19sZW5ndGgpIHJldHVybiBmbi5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyaWVkKGFyZ3MuY29uY2F0KFtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cnJpZWQoaW5pdGlhbF9hcmdzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCByaWdodC10by1sZWZ0XHJcbiAgICAgKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxyXG4gICAgICogbGV0IGNvbXBvc2VkID0gY29tcG9zZShmLGcsaClcclxuICAgICAqIHRoZW4sIGNvbXBvc2VkIGlzOiBmKGcoaCh4KSkpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBvc2UoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gc3RhcnQsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcclxuICAgICAgICAgICAgfXJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCBsZWZ0LXRvLXJpZ2h0XHJcbiAgICAgKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxyXG4gICAgICogbGV0IHBpcGVkID0gcGlwZShmLGcsaCk7XHJcbiAgICAgKiB0aGVuLCBwaXBlZCBpczogaChnKGYoeCkpKVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaXBlKCkge1xyXG4gICAgICAgIHZhciBmdW5jcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZ1bmNzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb3NlLmFwcGx5KG51bGwsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5yZXZlcnNlKCkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHByb3BlcnR5IG5hbWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhhdCBwcm9wZXJ0eSBmcm9tIGFuIG9iamVjdFxyXG4gICAgICogbGV0IG9iaiA9IHsgZm9vOiAxLCBuYW1lOiBcImJsYXJnXCIgfTtcclxuICAgICAqIGxldCBnZXROYW1lID0gcHJvcChcIm5hbWVcIik7XHJcbiAgICAgKiBnZXROYW1lKG9iaikgPT09IFwiYmxhcmdcIlxyXG4gICAgICovXHJcbiAgICB2YXIgcHJvcCA9IGZ1bmN0aW9uIHByb3AobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqW25hbWVdO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHByb3BlcnR5IG5hbWUgYW5kIGEgdmFsdWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuIGJhc2VkIG9uIHdoZXRoZXJcclxuICAgICAqIHRoZSBwYXNzZWQgb2JqZWN0IGhhcyBhIHByb3BlcnR5IHRoYXQgbWF0Y2hlcyB0aGUgdmFsdWVcclxuICAgICAqIGxldCBvYmogPSB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH07XHJcbiAgICAgKiBsZXQgZ2V0TmFtZSA9IHByb3BFcShcIm5hbWVcIiwgXCJibGFyZ1wiKTtcclxuICAgICAqIGdldE5hbWUob2JqKSA9PT0gdHJ1ZVxyXG4gICAgICovXHJcbiAgICB2YXIgcHJvcEVxID0gY3VycnkoZnVuY3Rpb24gKG5hbWUsIHZhbCwgb2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmpbbmFtZV0gPT09IHZhbDtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIGRvdHRlZCBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbmVzdGVkIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0LCBvciB1bmRlZmluZWRcclxuICAgICAqIGxldCBvYmogPSB7IGlkOiAxLCBuZXN0ZWRPYmo6IHsgZm9vOiAxLCBuYW1lOiBcImJsYXJnXCIgfSwgfTtcclxuICAgICAqIGxldCBnZXROYW1lID0gcHJvcChcIm5lc3RlZE9iai5uYW1lXCIpO1xyXG4gICAgICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcclxuICAgICAqIGxldCBwcm9wTm90Rm91bmQgPSBwcm9wKFwidGhpcy5wcm9wZXJ0eS5kb2VzbnQuZXhpc3RcIik7XHJcbiAgICAgKiBwcm9wTm90Rm91bmQob2JqKSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgKi9cclxuICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gcGlwZS5hcHBseShudWxsLCBuYW1lLnNwbGl0KFwiLlwiKS5tYXAocHJvcCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlLCByZXR1cm5zIGFcclxuICAgICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgb3Bwb3NpdGUgKGZhbHNleSBvciB0cnV0aHkpIHZhbHVlIGdpdmVuIHRoZSBzYW1lIGlucHV0c1xyXG4gICAgICovXHJcbiAgICB2YXIgbm90ID0gZnVuY3Rpb24gbm90KGZuKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gIWZuLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiB0d28gZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHRydXRoeSBvciBmYWxzZXkgdmFsdWVzLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydXRoeVxyXG4gICAgICogaWYgYm90aCBmdW5jdGlvbnMgcmV0dXJuIHRydXRoeSBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50c1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhbmQoZm4xLCBmbjIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmbjEuYXBwbHkobnVsbCwgYXJncykgJiYgZm4yLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XHJcbiAgICAgKiBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIGZ1bmN0aW9ucyByZXR1cm5zIHRydXRoeSBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50c1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBvcihmbjEsIGZuMikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZuMS5hcHBseShudWxsLCBhcmdzKSB8fCBmbjIuYXBwbHkobnVsbCwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYWxsIHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSBtYXRjaCBhIHByZWRpY2F0ZSBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmbjEgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYGZuMWBcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYW4gYXJyYXkgYW5kIHJldHVybnMgdHJ1ZSBpZiBgZm4xYCBpcyB0cnVlIGZvciBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5XHJcbiAgICAgKi9cclxuICAgIHZhciBhbGwgPSBmdW5jdGlvbiBhbGwoZm4xKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGIsIHgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiICYmICEhZm4xKHgpO1xyXG4gICAgICAgICAgICB9LCB0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHZhciBhbnkgPSBmdW5jdGlvbiBhbnkoZm4xKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGIsIHgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiIHx8ICEhZm4xKHgpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKiogR2l2ZW4gYSBjbGFzcywgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIG9mIHRoYXQgY2xhc3MgKi9cclxuICAgIHZhciBpcyA9IGZ1bmN0aW9uIGlzKGN0b3IpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBjdG9yIHx8IG9iaiBpbnN0YW5jZW9mIGN0b3I7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbm90aGVyIHZhbHVlIGlzID09PSBlcXVhbCB0byB0aGUgb3JpZ2luYWwgdmFsdWUgKi9cclxuICAgIHZhciBlcSA9IGZ1bmN0aW9uIGVxKHZhbCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbCA9PT0gb3RoZXI7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHZhbHVlICovXHJcbiAgICB2YXIgdmFsID0gZnVuY3Rpb24gdmFsKHYpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIGludm9rZShmbk5hbWUsIGFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqW2ZuTmFtZV0uYXBwbHkob2JqLCBhcmdzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTb3J0YSBsaWtlIFBhdHRlcm4gTWF0Y2hpbmcgKGEgZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBjb25kaXRpb25hbCBjb25zdHJ1Y3QpXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGh0dHA6Ly9jMi5jb20vY2dpL3dpa2k/UGF0dGVybk1hdGNoaW5nXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyBhIGNvbmRpdGlvbmFsIGNvbnN0cnVjdCB3aGljaCBhbGxvd3MgYSBzZXJpZXMgb2YgcHJlZGljYXRlcyBhbmQgb3V0cHV0IGZ1bmN0aW9uc1xyXG4gICAgICogdG8gYmUgY2hlY2tlZCBhbmQgdGhlbiBhcHBsaWVkLiAgRWFjaCBwcmVkaWNhdGUgcmVjZWl2ZXMgdGhlIGlucHV0LiAgSWYgdGhlIHByZWRpY2F0ZVxyXG4gICAgICogcmV0dXJucyB0cnV0aHksIHRoZW4gaXRzIG1hdGNoaW5nIG91dHB1dCBmdW5jdGlvbiAobWFwcGluZyBmdW5jdGlvbikgaXMgcHJvdmlkZWQgd2l0aFxyXG4gICAgICogdGhlIGlucHV0IGFuZCwgdGhlbiB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxyXG4gICAgICpcclxuICAgICAqIEVhY2ggY29tYmluYXRpb24gKDItdHVwbGUpIG9mIHByZWRpY2F0ZSArIG91dHB1dCBmdW5jdGlvbiBzaG91bGQgYmUgcGxhY2VkIGluIGFuIGFycmF5XHJcbiAgICAgKiBvZiBzaXplIDI6IFsgcHJlZGljYXRlLCBtYXBGbiBdXHJcbiAgICAgKlxyXG4gICAgICogVGhlc2UgMi10dXBsZXMgc2hvdWxkIGJlIHB1dCBpbiBhbiBvdXRlciBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogLy8gSGVyZSdzIGEgMi10dXBsZSB3aGVyZSB0aGUgZmlyc3QgZWxlbWVudCBpcyB0aGUgaXNTdHJpbmcgcHJlZGljYXRlXHJcbiAgICAgKiAvLyBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZGVzY3JpcHRpb24gb2YgdGhlIGlucHV0XHJcbiAgICAgKiBsZXQgZmlyc3RUdXBsZSA9IFsgYW5ndWxhci5pc1N0cmluZywgKGlucHV0KSA9PiBgSGVyZXMgeW91ciBzdHJpbmcgJHtpbnB1dH1gIF07XHJcbiAgICAgKlxyXG4gICAgICogLy8gU2Vjb25kIHR1cGxlOiBwcmVkaWNhdGUgXCJpc051bWJlclwiLCBtYXBmbiByZXR1cm5zIGEgZGVzY3JpcHRpb25cclxuICAgICAqIGxldCBzZWNvbmRUdXBsZSA9IFsgYW5ndWxhci5pc051bWJlciwgKGlucHV0KSA9PiBgKCR7aW5wdXR9KSBUaGF0J3MgYSBudW1iZXIhYCBdO1xyXG4gICAgICpcclxuICAgICAqIGxldCB0aGlyZCA9IFsgKGlucHV0KSA9PiBpbnB1dCA9PT0gbnVsbCwgIChpbnB1dCkgPT4gYE9oLCBudWxsLi4uYCBdO1xyXG4gICAgICpcclxuICAgICAqIGxldCBmb3VydGggPSBbIChpbnB1dCkgPT4gaW5wdXQgPT09IHVuZGVmaW5lZCwgIChpbnB1dCkgPT4gYG5vdGRlZmluZWRgIF07XHJcbiAgICAgKlxyXG4gICAgICogbGV0IGRlc2NyaXB0aW9uT2YgPSBwYXR0ZXJuKFsgZmlyc3RUdXBsZSwgc2Vjb25kVHVwbGUsIHRoaXJkLCBmb3VydGggXSk7XHJcbiAgICAgKlxyXG4gICAgICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZih1bmRlZmluZWQpKTsgLy8gJ25vdGRlZmluZWQnXHJcbiAgICAgKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKDU1KSk7IC8vICcoNTUpIFRoYXQncyBhIG51bWJlciEnXHJcbiAgICAgKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKFwiZm9vXCIpKTsgLy8gJ0hlcmUncyB5b3VyIHN0cmluZyBmb28nXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RydWN0IEEgMkQgYXJyYXkuICBFYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHNob3VsZCBiZSBhbiBhcnJheSwgYSAyLXR1cGxlLFxyXG4gICAgICogd2l0aCBhIFByZWRpY2F0ZSBhbmQgYSBtYXBwaW5nL291dHB1dCBmdW5jdGlvblxyXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKGFueSk6ICp9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBhdHRlcm4oc3RydWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RydWN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RydWN0W2ldWzBdKHgpKSByZXR1cm4gc3RydWN0W2ldWzFdKHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIGNvcmVcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaGVzIHN0YXRlIG5hbWVzIHVzaW5nIGdsb2ItbGlrZSBwYXR0ZXJuIHN0cmluZ3MuXHJcbiAgICAgKlxyXG4gICAgICogR2xvYnMgY2FuIGJlIHVzZWQgaW4gc3BlY2lmaWMgQVBJcyBpbmNsdWRpbmc6XHJcbiAgICAgKlxyXG4gICAgICogLSBbW1N0YXRlU2VydmljZS5pc11dXHJcbiAgICAgKiAtIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV1cclxuICAgICAqIC0gVGhlIGZpcnN0IGFyZ3VtZW50IHRvIEhvb2sgUmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBsaWtlIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXHJcbiAgICAgKiAgICAtIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBhbmQgW1tIb29rTWF0Y2hDcml0ZXJpb25dXVxyXG4gICAgICpcclxuICAgICAqIEEgYEdsb2JgIHN0cmluZyBpcyBhIHBhdHRlcm4gd2hpY2ggbWF0Y2hlcyBzdGF0ZSBuYW1lcy5cclxuICAgICAqIE5lc3RlZCBzdGF0ZSBuYW1lcyBhcmUgc3BsaXQgaW50byBzZWdtZW50cyAoc2VwYXJhdGVkIGJ5IGEgZG90KSB3aGVuIHByb2Nlc3NpbmcuXHJcbiAgICAgKiBUaGUgc3RhdGUgbmFtZWQgYGZvby5iYXIuYmF6YCBpcyBzcGxpdCBpbnRvIHRocmVlIHNlZ21lbnRzIFsnZm9vJywgJ2JhcicsICdiYXonXVxyXG4gICAgICpcclxuICAgICAqIEdsb2JzIHdvcmsgYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgcnVsZXM6XHJcbiAgICAgKlxyXG4gICAgICogIyMjIEV4YWN0IG1hdGNoOlxyXG4gICAgICpcclxuICAgICAqIFRoZSBnbG9iIGAnQS5CJ2AgbWF0Y2hlcyB0aGUgc3RhdGUgbmFtZWQgZXhhY3RseSBgJ0EuQidgLlxyXG4gICAgICpcclxuICAgICAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkfFxyXG4gICAgICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgKiB8IGAnQSdgICAgICAgIHwgYCdBJ2AgICAgICAgICAgICAgICB8IGAnQidgICwgYCdBLkMnYCAgICAgIHxcclxuICAgICAqIHwgYCdBLkInYCAgICAgfCBgJ0EuQidgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EuQi5DJ2AgICAgfFxyXG4gICAgICogfCBgJ2ZvbydgICAgICB8IGAnZm9vJ2AgICAgICAgICAgICAgfCBgJ0ZPTydgICwgYCdmb28uYmFyJ2B8XHJcbiAgICAgKlxyXG4gICAgICogIyMjIFNpbmdsZSBzdGFyIChgKmApXHJcbiAgICAgKlxyXG4gICAgICogQSBzaW5nbGUgc3RhciAoYCpgKSBpcyBhIHdpbGRjYXJkIHRoYXQgbWF0Y2hlcyBleGFjdGx5IG9uZSBzZWdtZW50LlxyXG4gICAgICpcclxuICAgICAqIHwgR2xvYiAgICAgICAgfE1hdGNoZXMgc3RhdGVzIG5hbWVkICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgfFxyXG4gICAgICogfDotLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XHJcbiAgICAgKiB8IGAnKidgICAgICAgIHwgYCdBJ2AgLCBgJ1onYCAgICAgICAgfCBgJ0EuQidgICwgYCdaLlkuWCdgICAgICAgIHxcclxuICAgICAqIHwgYCdBLionYCAgICAgfCBgJ0EuQidgICwgYCdBLkMnYCAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgfFxyXG4gICAgICogfCBgJ0EuKi4qJ2AgICB8IGAnQS5CLkMnYCAsIGAnQS5YLlknYHwgYCdBJ2AsIGAnQS5CJ2AgLCBgJ1ouWS5YJ2B8XHJcbiAgICAgKlxyXG4gICAgICogIyMjIERvdWJsZSBzdGFyIChgKipgKVxyXG4gICAgICpcclxuICAgICAqIEEgZG91YmxlIHN0YXIgKGAnKionYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgKnplcm8gb3IgbW9yZSBzZWdtZW50cypcclxuICAgICAqXHJcbiAgICAgKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZCAgICAgICAgIHxcclxuICAgICAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxyXG4gICAgICogfCBgJyoqJ2AgICAgICB8IGAnQSdgICwgYCdBLkInYCwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICB8IChtYXRjaGVzIGFsbCBzdGF0ZXMpICAgICAgICAgICAgICB8XHJcbiAgICAgKiB8IGAnQS4qKidgICAgIHwgYCdBJ2AgLCBgJ0EuQidgICwgYCdBLkMuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAqIHwgYCcqKi5YJ2AgICAgfCBgJ1gnYCAsIGAnQS5YJ2AgLCBgJ1ouWS5YJ2AgICAgICAgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5sb2dpbi5aJ2AgICAgICAgICAgICAgfFxyXG4gICAgICogfCBgJ0EuKiouWCdgICB8IGAnQS5YJ2AgLCBgJ0EuQi5YJ2AgLCBgJ0EuQi5DLlgnYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICB2YXIgR2xvYiA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gR2xvYih0ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYiA9IHRleHQuc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgdmFyIHJlZ2V4cFN0cmluZyA9IHRoaXMudGV4dC5zcGxpdCgnLicpLm1hcChmdW5jdGlvbiAoc2VnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnID09PSAnKionKSByZXR1cm4gJyg/OnwoPzpcXFxcLlteLl0qKSopJztcclxuICAgICAgICAgICAgICAgIGlmIChzZWcgPT09ICcqJykgcmV0dXJuICdcXFxcLlteLl0qJztcclxuICAgICAgICAgICAgICAgIHJldHVybiAnXFxcXC4nICsgc2VnO1xyXG4gICAgICAgICAgICB9KS5qb2luKCcnKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKFwiXlwiICsgcmVnZXhwU3RyaW5nICsgXCIkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBHbG9iLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVnZXhwLnRlc3QoJy4nICsgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgaGFzIGdsb2ItbGlrZSBjaGFyYWN0ZXJzIGluIGl0ICovXHJcbiAgICAgICAgR2xvYi5pcyA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIS9bISwqXSsvLmV4ZWModGV4dCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyBhIGdsb2IgZnJvbSB0aGUgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBzdHJpbmcgaXNuJ3QgR2xvYi1saWtlICovXHJcbiAgICAgICAgR2xvYi5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdsb2IuaXModGV4dCkgPyBuZXcgR2xvYih0ZXh0KSA6IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gR2xvYjtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIHJlcHJlc2VudGF0aW9uIG9mIGEgVUktUm91dGVyIHN0YXRlLlxyXG4gICAgICpcclxuICAgICAqIEluc3RhbmNlcyBvZiB0aGlzIGNsYXNzIGFyZSBjcmVhdGVkIHdoZW4gYSBbW1N0YXRlRGVjbGFyYXRpb25dXSBpcyByZWdpc3RlcmVkIHdpdGggdGhlIFtbU3RhdGVSZWdpc3RyeV1dLlxyXG4gICAgICpcclxuICAgICAqIEEgcmVnaXN0ZXJlZCBbW1N0YXRlRGVjbGFyYXRpb25dXSBpcyBhdWdtZW50ZWQgd2l0aCBhIGdldHRlciAoW1tTdGF0ZURlY2xhcmF0aW9uLiQkc3RhdGVdXSkgd2hpY2ggcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgY2xhc3MgcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXHJcbiAgICAgKiBFYWNoIG9mIGl0cyBvd24gcHJvcGVydGllcyAoaS5lLiwgYGhhc093blByb3BlcnR5YCkgYXJlIGJ1aWx0IHVzaW5nIGJ1aWxkZXJzIGZyb20gdGhlIFtbU3RhdGVCdWlsZGVyXV0uXHJcbiAgICAgKi9cclxuICAgIHZhciBTdGF0ZU9iamVjdCA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBkZXByZWNhdGVkIHVzZSBTdGF0ZS5jcmVhdGUoKSAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFN0YXRlT2JqZWN0KGNvbmZpZykge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RhdGVPYmplY3QuY3JlYXRlKGNvbmZpZyB8fCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBhIHN0YXRlIG9iamVjdCB0byBwdXQgdGhlIHByaXZhdGUvaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbnRvLlxyXG4gICAgICAgICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcclxuICAgICAgICAgKiAoSW50ZXJuYWwgU3RhdGUgT2JqZWN0KSAtPiAoQ29weSBvZiBTdGF0ZS5wcm90b3R5cGUpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbiBvYmplY3QpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbidzIHByb3RvdHlwZS4uLilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cclxuICAgICAgICAgKiBAcmV0dXJucyB7U3RhdGVPYmplY3R9IGFuIGludGVybmFsIFN0YXRlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcclxuICAgICAgICAgICAgc3RhdGVEZWNsID0gU3RhdGVPYmplY3QuaXNTdGF0ZUNsYXNzKHN0YXRlRGVjbCkgPyBuZXcgc3RhdGVEZWNsKCkgOiBzdGF0ZURlY2w7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGluaGVyaXQoaW5oZXJpdChzdGF0ZURlY2wsIFN0YXRlT2JqZWN0LnByb3RvdHlwZSkpO1xyXG4gICAgICAgICAgICBzdGF0ZURlY2wuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3RhdGUuc2VsZiA9IHN0YXRlRGVjbDtcclxuICAgICAgICAgICAgc3RhdGUuX19zdGF0ZU9iamVjdENhY2hlID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZUdsb2I6IEdsb2IuZnJvbVN0cmluZyhzdGF0ZS5uYW1lKSAvLyBtaWdodCByZXR1cm4gbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIENvbXBhcmVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc3RhdGUgYWdhaW5zdCB0aGUgcGFzc2VkIHZhbHVlLCB3aGljaCBpcyBlaXRoZXIgYW4gb2JqZWN0XHJcbiAgICAgICAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xyXG4gICAgICAgICAqIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgb3IgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXHJcbiAgICAgICAgICogICAgICAgIGludG8gYCRzdGF0ZVByb3ZpZGVyLnN0YXRlKClgLCAoYykgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lIG9mIGEgc3RhdGUgYXMgYSBzdHJpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHJlZmAgbWF0Y2hlcyB0aGUgY3VycmVudCBgU3RhdGVgIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMgPT09IHJlZiB8fCB0aGlzLnNlbGYgPT09IHJlZiB8fCB0aGlzLmZxbigpID09PSByZWY7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZGVwcmVjYXRlZCB0aGlzIGRvZXMgbm90IHByb3Blcmx5IGhhbmRsZSBkb3Qgbm90YXRpb25cclxuICAgICAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUuZnFuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50IHx8ICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSkgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmVudC5mcW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5hbWUgPyBuYW1lICsgXCIuXCIgKyB0aGlzLm5hbWUgOiB0aGlzLm5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSByb290IG5vZGUgb2YgdGhpcyBzdGF0ZSdzIHRyZWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgcm9vdCBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUucm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnJvb3QoKSB8fCB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgc3RhdGUncyBgUGFyYW1gIG9iamVjdHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGxpc3Qgb2YgW1tQYXJhbV1dIG9iamVjdHMgb3duZWQgYnkgdGhlIHN0YXRlLlxyXG4gICAgICAgICAqIElmIGBvcHRzLmluaGVyaXRgIGlzIHRydWUsIGl0IGFsc28gaW5jbHVkZXMgdGhlIGFuY2VzdG9yIHN0YXRlcycgW1tQYXJhbV1dIG9iamVjdHMuXHJcbiAgICAgICAgICogSWYgYG9wdHMubWF0Y2hpbmdLZXlzYCBleGlzdHMsIHJldHVybnMgb25seSBgUGFyYW1gcyB3aG9zZSBgaWRgIGlzIGEga2V5IG9uIHRoZSBgbWF0Y2hpbmdLZXlzYCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRzIG9wdGlvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUucGFyYW1ldGVycyA9IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSBkZWZhdWx0cyhvcHRzLCB7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogbnVsbCB9KTtcclxuICAgICAgICAgICAgdmFyIGluaGVyaXRlZCA9IG9wdHMuaW5oZXJpdCAmJiB0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5wYXJhbWV0ZXJzKCkgfHwgW107XHJcbiAgICAgICAgICAgIHJldHVybiBpbmhlcml0ZWQuY29uY2F0KHZhbHVlcyh0aGlzLnBhcmFtcykpLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBzaW5nbGUgW1tQYXJhbV1dIHRoYXQgaXMgb3duZWQgYnkgdGhlIHN0YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXHJcbiAgICAgICAgICogQHBhcmFtIGlkIHRoZSBuYW1lIG9mIHRoZSBbW1BhcmFtXV0gdG8gcmV0dXJuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdHMgb3B0aW9uc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbiAoaWQsIG9wdHMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVybCAmJiB0aGlzLnVybC5wYXJhbWV0ZXIoaWQsIG9wdHMpIHx8IGZpbmQodmFsdWVzKHRoaXMucGFyYW1zKSwgcHJvcEVxKCdpZCcsIGlkKSkgfHwgb3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcihpZCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZxbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBjbGFzcyB3aXRoIEBTdGF0ZSgpIGRlY29yYXRvciAqL1xyXG4gICAgICAgIFN0YXRlT2JqZWN0LmlzU3RhdGVDbGFzcyA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oc3RhdGVEZWNsKSAmJiBzdGF0ZURlY2xbJ19fdWlSb3V0ZXJTdGF0ZSddID09PSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0ICovXHJcbiAgICAgICAgU3RhdGVPYmplY3QuaXNTdGF0ZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KG9ialsnX19zdGF0ZU9iamVjdENhY2hlJ10pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFN0YXRlT2JqZWN0O1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBQcmVkaWNhdGVzXHJcbiAgICAgKlxyXG4gICAgICogVGhlc2UgcHJlZGljYXRlcyByZXR1cm4gdHJ1ZS9mYWxzZSBiYXNlZCBvbiB0aGUgaW5wdXQuXHJcbiAgICAgKiBBbHRob3VnaCB0aGVzZSBmdW5jdGlvbnMgYXJlIGV4cG9ydGVkLCB0aGV5IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cclxuICAgICAqXHJcbiAgICAgKiBAbW9kdWxlIGNvbW1vbl9wcmVkaWNhdGVzXHJcbiAgICAgKi9cclxuICAgIC8qKiAqL1xyXG4gICAgdmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcclxuICAgIHZhciB0aXMgPSBmdW5jdGlvbiB0aXModCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih4KSkgPT09IHQ7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNVbmRlZmluZWQgPSB0aXMoJ3VuZGVmaW5lZCcpO1xyXG4gICAgdmFyIGlzRGVmaW5lZCA9IG5vdChpc1VuZGVmaW5lZCk7XHJcbiAgICB2YXIgaXNOdWxsID0gZnVuY3Rpb24gaXNOdWxsKG8pIHtcclxuICAgICAgICByZXR1cm4gbyA9PT0gbnVsbDtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOdWxsT3JVbmRlZmluZWQgPSBvcihpc051bGwsIGlzVW5kZWZpbmVkKTtcclxuICAgIHZhciBpc0Z1bmN0aW9uID0gdGlzKCdmdW5jdGlvbicpO1xyXG4gICAgdmFyIGlzTnVtYmVyID0gdGlzKCdudW1iZXInKTtcclxuICAgIHZhciBpc1N0cmluZyA9IHRpcygnc3RyaW5nJyk7XHJcbiAgICB2YXIgaXNPYmplY3QgPSBmdW5jdGlvbiBpc09iamVjdCh4KSB7XHJcbiAgICAgICAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih4KSkgPT09ICdvYmplY3QnO1xyXG4gICAgfTtcclxuICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcclxuICAgIHZhciBpc0RhdGUgPSBmdW5jdGlvbiBpc0RhdGUoeCkge1xyXG4gICAgICAgIHJldHVybiB0b1N0ci5jYWxsKHgpID09PSAnW29iamVjdCBEYXRlXSc7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzUmVnRXhwID0gZnVuY3Rpb24gaXNSZWdFeHAoeCkge1xyXG4gICAgICAgIHJldHVybiB0b1N0ci5jYWxsKHgpID09PSAnW29iamVjdCBSZWdFeHBdJztcclxuICAgIH07XHJcbiAgICB2YXIgaXNTdGF0ZSA9IFN0YXRlT2JqZWN0LmlzU3RhdGU7XHJcbiAgICAvKipcclxuICAgICAqIFByZWRpY2F0ZSB3aGljaCBjaGVja3MgaWYgYSB2YWx1ZSBpcyBpbmplY3RhYmxlXHJcbiAgICAgKlxyXG4gICAgICogQSB2YWx1ZSBpcyBcImluamVjdGFibGVcIiBpZiBpdCBpcyBhIGZ1bmN0aW9uLCBvciBpZiBpdCBpcyBhbiBuZzEgYXJyYXktbm90YXRpb24tc3R5bGUgYXJyYXlcclxuICAgICAqIHdoZXJlIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIGFycmF5IGFyZSBTdHJpbmdzLCBleGNlcHQgdGhlIGxhc3Qgb25lLCB3aGljaCBpcyBhIEZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGlzSW5qZWN0YWJsZSh2YWwkJDEpIHtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWwkJDEpICYmIHZhbCQkMS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWQgPSB2YWwkJDEuc2xpY2UoMCwgLTEpLFxyXG4gICAgICAgICAgICAgICAgdGFpbCA9IHZhbCQkMS5zbGljZSgtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiAhKGhlYWQuZmlsdGVyKG5vdChpc1N0cmluZykpLmxlbmd0aCB8fCB0YWlsLmZpbHRlcihub3QoaXNGdW5jdGlvbikpLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbCQkMSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFByZWRpY2F0ZSB3aGljaCBjaGVja3MgaWYgYSB2YWx1ZSBsb29rcyBsaWtlIGEgUHJvbWlzZVxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIHByb2JhYmx5IGEgUHJvbWlzZSBpZiBpdCdzIGFuIG9iamVjdCwgYW5kIGl0IGhhcyBhIGB0aGVuYCBwcm9wZXJ0eSB3aGljaCBpcyBhIEZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIHZhciBpc1Byb21pc2UgPSBhbmQoaXNPYmplY3QsIHBpcGUocHJvcCgndGhlbicpLCBpc0Z1bmN0aW9uKSk7XHJcblxyXG4gICAgdmFyIG5vdEltcGxlbWVudGVkID0gZnVuY3Rpb24gbm90SW1wbGVtZW50ZWQoZm5uYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZubmFtZSArIFwiKCk6IE5vIGNvcmVzZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBmb3IgVUktUm91dGVyIGlzIGxvYWRlZC5cIik7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICB2YXIgc2VydmljZXMgPSB7XHJcbiAgICAgICAgJHE6IHVuZGVmaW5lZCxcclxuICAgICAgICAkaW5qZWN0b3I6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJhbmRvbSB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBVSS1Sb3V0ZXIgY29kZVxyXG4gICAgICpcclxuICAgICAqIFRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHByZWZlcnJlZFxyXG4gICAgICogQG1vZHVsZSBjb21tb25cclxuICAgICAqL1xyXG4gICAgLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICB2YXIgcm9vdCA9ICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc2VsZikpID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZiB8fCAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZ2xvYmFsKSkgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbCAmJiBnbG9iYWwgfHwgdW5kZWZpbmVkO1xyXG4gICAgdmFyIGFuZ3VsYXIkMSA9IHJvb3QuYW5ndWxhciB8fCB7fTtcclxuICAgIHZhciBmcm9tSnNvbiA9IGFuZ3VsYXIkMS5mcm9tSnNvbiB8fCBKU09OLnBhcnNlLmJpbmQoSlNPTik7XHJcbiAgICB2YXIgdG9Kc29uID0gYW5ndWxhciQxLnRvSnNvbiB8fCBKU09OLnN0cmluZ2lmeS5iaW5kKEpTT04pO1xyXG4gICAgdmFyIGZvckVhY2ggPSBhbmd1bGFyJDEuZm9yRWFjaCB8fCBfZm9yRWFjaDtcclxuICAgIHZhciBleHRlbmQgPSBPYmplY3QuYXNzaWduIHx8IF9leHRlbmQ7XHJcbiAgICB2YXIgZXF1YWxzID0gYW5ndWxhciQxLmVxdWFscyB8fCBfZXF1YWxzO1xyXG4gICAgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xyXG4gICAgICAgIHJldHVybiB4O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbm9vcCQxKCkge31cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHByb3h5IGZ1bmN0aW9ucyBvbiB0aGUgYHRvYCBvYmplY3Qgd2hpY2ggcGFzcyB0aHJvdWdoIHRvIHRoZSBgZnJvbWAgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEZvciBlYWNoIGtleSBpbiBgZm5OYW1lc2AsIGNyZWF0ZXMgYSBwcm94eSBmdW5jdGlvbiBvbiB0aGUgYHRvYCBvYmplY3QuXHJcbiAgICAgKiBUaGUgcHJveHkgZnVuY3Rpb24gY2FsbHMgdGhlIHJlYWwgZnVuY3Rpb24gb24gdGhlIGBmcm9tYCBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIGFuIG5ldyBjbGFzcyBpbnN0YW5jZSB3aG9zZSBmdW5jdGlvbnMgYXJlIHByZWJvdW5kIHRvIHRoZSBuZXcnZCBvYmplY3QuXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY2xhc3MgRm9vIHtcclxuICAgICAqICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICogICAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBGb28ucHJvdG90eXBlIHRvICd0aGlzJyxcclxuICAgICAqICAgICAvLyB0aGVuIGNvcGllcyB0aGVtIHRvICd0aGlzJ1xyXG4gICAgICogICAgIGJpbmRGdW5jdGlvbnMoRm9vLnByb3RvdHlwZSwgdGhpcywgdGhpcyk7XHJcbiAgICAgKiAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAqICAgfVxyXG4gICAgICpcclxuICAgICAqICAgbG9nKCkge1xyXG4gICAgICogICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XHJcbiAgICAgKiAgIH1cclxuICAgICAqIH1cclxuICAgICAqXHJcbiAgICAgKiBsZXQgbXlGb28gPSBuZXcgRm9vKFsxLDIsM10pO1xyXG4gICAgICogdmFyIGxvZ2l0ID0gbXlGb28ubG9nO1xyXG4gICAgICogbG9naXQoKTsgLy8gbG9ncyBbMSwgMiwgM10gZnJvbSB0aGUgbXlGb28gJ3RoaXMnIGluc3RhbmNlXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBhIGJvdW5kIHZlcnNpb24gb2YgYSBzZXJ2aWNlIGZ1bmN0aW9uLCBhbmQgY29waWVzIGl0IHRvIGFub3RoZXIgb2JqZWN0XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiB2YXIgU29tZVNlcnZpY2UgPSB7XHJcbiAgICAgKiAgIHRoaXMuZGF0YSA9IFszLCA0LCA1XTtcclxuICAgICAqICAgdGhpcy5sb2cgPSBmdW5jdGlvbigpIHtcclxuICAgICAqICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gQ29uc3RydWN0b3IgZm5cclxuICAgICAqIGZ1bmN0aW9uIE90aGVyVGhpbmcoKSB7XHJcbiAgICAgKiAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBTb21lU2VydmljZSB0byBTb21lU2VydmljZSxcclxuICAgICAqICAgLy8gdGhlbiBjb3BpZXMgdGhlbSB0byAndGhpcydcclxuICAgICAqICAgYmluZEZ1bmN0aW9ucyhTb21lU2VydmljZSwgdGhpcywgU29tZVNlcnZpY2UpO1xyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIGxldCBteU90aGVyVGhpbmcgPSBuZXcgT3RoZXJUaGluZygpO1xyXG4gICAgICogbXlPdGhlclRoaW5nLmxvZygpOyAvLyBsb2dzIFszLCA0LCA1XSBmcm9tIFNvbWVTZXJ2aWNlJ3MgJ3RoaXMnXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc291cmNlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBzb3VyY2Ugb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBvcmlnaW5hbCBmdW5jdGlvbnMgdG8gYmUgYm91bmRcclxuICAgICAqIEBwYXJhbSB0YXJnZXQgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHRhcmdldCBvYmplY3Qgd2hpY2ggd2lsbCByZWNlaXZlIHRoZSBib3VuZCBmdW5jdGlvbnNcclxuICAgICAqIEBwYXJhbSBiaW5kIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvYmplY3Qgd2hpY2ggdGhlIGZ1bmN0aW9ucyB3aWxsIGJlIGJvdW5kIHRvXHJcbiAgICAgKiBAcGFyYW0gZm5OYW1lcyBUaGUgZnVuY3Rpb24gbmFtZXMgd2hpY2ggd2lsbCBiZSBib3VuZCAoRGVmYXVsdHMgdG8gYWxsIHRoZSBmdW5jdGlvbnMgZm91bmQgb24gdGhlICdmcm9tJyBvYmplY3QpXHJcbiAgICAgKiBAcGFyYW0gbGF0ZWJpbmQgSWYgdHJ1ZSwgdGhlIGJpbmRpbmcgb2YgdGhlIGZ1bmN0aW9uIGlzIGRlbGF5ZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgaXQncyBpbnZva2VkXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHNvdXJjZSwgdGFyZ2V0LCBiaW5kLCBmbk5hbWVzLCBsYXRlYmluZCkge1xyXG4gICAgICAgIGlmIChsYXRlYmluZCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGxhdGViaW5kID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiaW5kRnVuY3Rpb24gPSBmdW5jdGlvbiBiaW5kRnVuY3Rpb24oZm5OYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2UoKVtmbk5hbWVdLmJpbmQoYmluZCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtYWtlTGF0ZVJlYmluZEZuID0gZnVuY3Rpb24gbWFrZUxhdGVSZWJpbmRGbihmbk5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxhdGVSZWJpbmRGdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFtmbk5hbWVdID0gYmluZEZ1bmN0aW9uKGZuTmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2ZuTmFtZV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZuTmFtZXMgPSBmbk5hbWVzIHx8IE9iamVjdC5rZXlzKHNvdXJjZSgpKTtcclxuICAgICAgICByZXR1cm4gZm5OYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbmFtZSkge1xyXG4gICAgICAgICAgICBhY2NbbmFtZV0gPSBsYXRlYmluZCA/IG1ha2VMYXRlUmViaW5kRm4obmFtZSkgOiBiaW5kRnVuY3Rpb24obmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogcHJvdG90eXBhbCBpbmhlcml0YW5jZSBoZWxwZXIuXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aGljaCBoYXMgYHBhcmVudGAgb2JqZWN0IGFzIGl0cyBwcm90b3R5cGUsIGFuZCB0aGVuIGNvcGllcyB0aGUgcHJvcGVydGllcyBmcm9tIGBleHRyYWAgb250byBpdFxyXG4gICAgICovXHJcbiAgICB2YXIgaW5oZXJpdCA9IGZ1bmN0aW9uIGluaGVyaXQocGFyZW50LCBleHRyYSkge1xyXG4gICAgICAgIHJldHVybiBleHRlbmQoT2JqZWN0LmNyZWF0ZShwYXJlbnQpLCBleHRyYSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdpdmVuIGFuIGFycmF5LCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBmb3VuZCBpbiB0aGUgYXJyYXksICh1c2luZyBpbmRleE9mKSAqL1xyXG4gICAgdmFyIGluQXJyYXkgPSBjdXJyeShfaW5BcnJheSk7XHJcbiAgICBmdW5jdGlvbiBfaW5BcnJheShhcnJheSwgb2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2Yob2JqKSAhPT0gLTE7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGFuIGFycmF5LCBhbmQgYW4gaXRlbSwgaWYgdGhlIGl0ZW0gaXMgZm91bmQgaW4gdGhlIGFycmF5LCBpdCByZW1vdmVzIGl0IChpbi1wbGFjZSkuXHJcbiAgICAgKiBUaGUgc2FtZSBhcnJheSBpcyByZXR1cm5lZFxyXG4gICAgICovXHJcbiAgICB2YXIgcmVtb3ZlRnJvbSA9IGN1cnJ5KF9yZW1vdmVGcm9tKTtcclxuICAgIGZ1bmN0aW9uIF9yZW1vdmVGcm9tKGFycmF5LCBvYmopIHtcclxuICAgICAgICB2YXIgaWR4ID0gYXJyYXkuaW5kZXhPZihvYmopO1xyXG4gICAgICAgIGlmIChpZHggPj0gMCkgYXJyYXkuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG4gICAgLyoqIHB1c2hlcyBhIHZhbHVlcyB0byBhbiBhcnJheSBhbmQgcmV0dXJucyB0aGUgdmFsdWUgKi9cclxuICAgIHZhciBwdXNoVG8gPSBjdXJyeShfcHVzaFRvKTtcclxuICAgIGZ1bmN0aW9uIF9wdXNoVG8oYXJyLCB2YWwkJDEpIHtcclxuICAgICAgICByZXR1cm4gYXJyLnB1c2godmFsJCQxKSwgdmFsJCQxO1xyXG4gICAgfVxyXG4gICAgLyoqIEdpdmVuIGFuIGFycmF5IG9mIChkZXJlZ2lzdHJhdGlvbikgZnVuY3Rpb25zLCBjYWxscyBhbGwgZnVuY3Rpb25zIGFuZCByZW1vdmVzIGVhY2ggb25lIGZyb20gdGhlIHNvdXJjZSBhcnJheSAqL1xyXG4gICAgdmFyIGRlcmVnQWxsID0gZnVuY3Rpb24gZGVyZWdBbGwoZnVuY3Rpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9ucy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbigpO1xyXG4gICAgICAgICAgICByZW1vdmVGcm9tKGZ1bmN0aW9ucywgZm4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyBhIHNldCBvZiBkZWZhdWx0cyB0byBhbiBvcHRpb25zIG9iamVjdC4gIFRoZSBvcHRpb25zIG9iamVjdCBpcyBmaWx0ZXJlZFxyXG4gICAgICogdG8gb25seSB0aG9zZSBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3RzIGluIHRoZSBkZWZhdWx0c0xpc3QuXHJcbiAgICAgKiBFYXJsaWVyIG9iamVjdHMgaW4gdGhlIGRlZmF1bHRzTGlzdCB0YWtlIHByZWNlZGVuY2Ugd2hlbiBhcHBseWluZyBkZWZhdWx0cy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGVmYXVsdHMob3B0cykge1xyXG4gICAgICAgIHZhciBkZWZhdWx0c0xpc3QgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkZWZhdWx0c0xpc3RbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfZGVmYXVsdHNMaXN0ID0gZGVmYXVsdHNMaXN0LmNvbmNhdCh7fSkucmV2ZXJzZSgpO1xyXG4gICAgICAgIHZhciBkZWZhdWx0VmFscyA9IGV4dGVuZC5hcHBseShudWxsLCBfZGVmYXVsdHNMaXN0KTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBkZWZhdWx0VmFscywgcGljayhvcHRzIHx8IHt9LCBPYmplY3Qua2V5cyhkZWZhdWx0VmFscykpKTtcclxuICAgIH1cclxuICAgIC8qKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBtZXJnZXMgZWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGludG8gYSBzaW5nbGUgb2JqZWN0LCB1c2luZyBleHRlbmQgKi9cclxuICAgIHZhciBtZXJnZVIgPSBmdW5jdGlvbiBtZXJnZVIobWVtbywgaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBleHRlbmQobWVtbywgaXRlbSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgY29tbW9uIGFuY2VzdG9yIHBhdGggYmV0d2VlbiB0d28gc3RhdGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaXJzdCBUaGUgZmlyc3Qgc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2Vjb25kIFRoZSBzZWNvbmQgc3RhdGUuXHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZSBuYW1lcyBpbiBkZXNjZW5kaW5nIG9yZGVyLCBub3QgaW5jbHVkaW5nIHRoZSByb290LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhbmNlc3RvcnMoZmlyc3QsIHNlY29uZCkge1xyXG4gICAgICAgIHZhciBwYXRoID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgbiBpbiBmaXJzdC5wYXRoKSB7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdC5wYXRoW25dICE9PSBzZWNvbmQucGF0aFtuXSkgYnJlYWs7XHJcbiAgICAgICAgICAgIHBhdGgucHVzaChmaXJzdC5wYXRoW25dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBgXHJcbiAgICAgKiB2YXIgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XHJcbiAgICAgKiB2YXIgYWIgPSBwaWNrKGZvbywgWydhJywgJ2InXSk7IC8vIHsgYTogMSwgYjogMiB9XHJcbiAgICAgKiBgYGBcclxuICAgICAqIEBwYXJhbSBvYmogdGhlIHNvdXJjZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSBwcm9wTmFtZXMgYW4gQXJyYXkgb2Ygc3RyaW5ncywgd2hpY2ggYXJlIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0eSBuYW1lc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaWNrKG9iaiwgcHJvcE5hbWVzKSB7XHJcbiAgICAgICAgdmFyIG9iakNvcHkgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwcm9wXzEgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wTmFtZXMuaW5kZXhPZihwcm9wXzEpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgb2JqQ29weVtwcm9wXzFdID0gb2JqW3Byb3BfMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iakNvcHk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbWl0dGluZyB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xyXG4gICAgICogdmFyIGFiID0gb21pdChmb28sIFsnYScsICdiJ10pOyAvLyB7IGM6IDMgfVxyXG4gICAgICogYGBgXHJcbiAgICAgKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydHkgbmFtZXNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gb21pdChvYmosIHByb3BOYW1lcykge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmZpbHRlcihub3QoaW5BcnJheShwcm9wTmFtZXMpKSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjW2tleV0gPSBvYmpba2V5XSwgYWNjO1xyXG4gICAgICAgIH0sIHt9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBhbiBhcnJheSwgb3Igb2JqZWN0IHRvIGEgcHJvcGVydHkgKGJ5IG5hbWUpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb24sIHByb3BOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hcChjb2xsZWN0aW9uLCBwcm9wKHByb3BOYW1lKSk7XHJcbiAgICB9XHJcbiAgICAvKiogRmlsdGVycyBhbiBBcnJheSBvciBhbiBPYmplY3QncyBwcm9wZXJ0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlICovXHJcbiAgICBmdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgYXJyID0gaXNBcnJheShjb2xsZWN0aW9uKSxcclxuICAgICAgICAgICAgcmVzdWx0ID0gYXJyID8gW10gOiB7fTtcclxuICAgICAgICB2YXIgYWNjZXB0ID0gYXJyID8gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5wdXNoKHgpO1xyXG4gICAgICAgIH0gOiBmdW5jdGlvbiAoeCwga2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRba2V5XSA9IHg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhpdGVtLCBpKSkgYWNjZXB0KGl0ZW0sIGkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKiogRmluZHMgYW4gb2JqZWN0IGZyb20gYW4gYXJyYXksIG9yIGEgcHJvcGVydHkgb2YgYW4gb2JqZWN0LCB0aGF0IG1hdGNoZXMgYSBwcmVkaWNhdGUgKi9cclxuICAgIGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKGl0ZW0sIGkpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpIHJlc3VsdCA9IGl0ZW07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybnMgYSBuZXcgb2JqZWN0LCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIHRyYW5zZm9ybWVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbiAqL1xyXG4gICAgdmFyIG1hcE9iaiA9IG1hcDtcclxuICAgIC8qKiBNYXBzIGFuIGFycmF5IG9yIG9iamVjdCBwcm9wZXJ0aWVzIHVzaW5nIGEgY2FsbGJhY2sgZnVuY3Rpb24gKi9cclxuICAgIGZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gW10gOiB7fTtcclxuICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbaV0gPSBjYWxsYmFjayhpdGVtLCBpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybiBpdHMgZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXNcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogbGV0IGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9XHJcbiAgICAgKiBsZXQgdmFscyA9IHZhbHVlcyhmb28pOyAvLyBbIDEsIDIsIDMgXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciB2YWx1ZXMgPSBmdW5jdGlvbiB2YWx1ZXMob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVkdWNlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGFsbCBvZiB0aGUgdmFsdWVzIGFyZSB0cnV0aHkuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIGxldCB2YWxzID0gWyAxLCB0cnVlLCB7fSwgXCJoZWxsbyB3b3JsZFwiXTtcclxuICAgICAqIHZhbHMucmVkdWNlKGFsbFRydWVSLCB0cnVlKTsgLy8gdHJ1ZVxyXG4gICAgICpcclxuICAgICAqIHZhbHMucHVzaCgwKTtcclxuICAgICAqIHZhbHMucmVkdWNlKGFsbFRydWVSLCB0cnVlKTsgLy8gZmFsc2VcclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICB2YXIgYWxsVHJ1ZVIgPSBmdW5jdGlvbiBhbGxUcnVlUihtZW1vLCBlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIG1lbW8gJiYgZWxlbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxyXG4gICAgICpcclxuICAgICAqICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBsZXQgdmFscyA9IFsgMCwgbnVsbCwgdW5kZWZpbmVkIF07XHJcbiAgICAgKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXHJcbiAgICAgKlxyXG4gICAgICogdmFscy5wdXNoKFwiaGVsbG8gd29ybGRcIik7XHJcbiAgICAgKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICB2YXIgYW55VHJ1ZVIgPSBmdW5jdGlvbiBhbnlUcnVlUihtZW1vLCBlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIG1lbW8gfHwgZWxlbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCB1bi1uZXN0cyBhIHNpbmdsZSBsZXZlbCBvZiBhcnJheXNcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xyXG4gICAgICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciB1bm5lc3RSID0gZnVuY3Rpb24gdW5uZXN0UihtZW1vLCBlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIG1lbW8uY29uY2F0KGVsZW0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIHJlY3Vyc2l2ZWx5IHVuLW5lc3RzIGFsbCBhcnJheXNcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcclxuICAgICAqIGlucHV0LnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJkb3VibGUsIFwibmVzdGVkXCIgXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciBmbGF0dGVuUiA9IGZ1bmN0aW9uIGZsYXR0ZW5SKG1lbW8sIGVsZW0pIHtcclxuICAgICAgICByZXR1cm4gaXNBcnJheShlbGVtKSA/IG1lbW8uY29uY2F0KGVsZW0ucmVkdWNlKGZsYXR0ZW5SLCBbXSkpIDogcHVzaFIobWVtbywgZWxlbSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBwdXNoZXMgYW4gb2JqZWN0IHRvIGFuIGFycmF5LCB0aGVuIHJldHVybnMgdGhlIGFycmF5LlxyXG4gICAgICogTW9zdGx5IGp1c3QgZm9yIFtbZmxhdHRlblJdXSBhbmQgW1t1bmlxUl1dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHB1c2hSKGFyciwgb2JqKSB7XHJcbiAgICAgICAgYXJyLnB1c2gob2JqKTtcclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG4gICAgLyoqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgb3V0IGR1cGxpY2F0ZXMgKi9cclxuICAgIHZhciB1bmlxUiA9IGZ1bmN0aW9uIHVuaXFSKGFjYywgdG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gaW5BcnJheShhY2MsIHRva2VuKSA/IGFjYyA6IHB1c2hSKGFjYywgdG9rZW4pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgbmV3IGFycmF5IHdpdGggYSBzaW5nbGUgbGV2ZWwgb2YgYXJyYXlzIHVubmVzdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xyXG4gICAgICogdW5uZXN0KGlucHV0KSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciB1bm5lc3QgPSBmdW5jdGlvbiB1bm5lc3QoYXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyci5yZWR1Y2UodW5uZXN0UiwgW10pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgY29tcGxldGVseSBmbGF0dGVuZWQgdmVyc2lvbiBvZiBhbiBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcclxuICAgICAqIGZsYXR0ZW4oaW5wdXQpIC8vIFsgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFwiZG91YmxlLCBcIm5lc3RlZFwiIF1cclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyci5yZWR1Y2UoZmxhdHRlblIsIFtdKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgLmZpbHRlciBQcmVkaWNhdGUsIGJ1aWxkcyBhIC5maWx0ZXIgUHJlZGljYXRlIHdoaWNoIHRocm93cyBhbiBlcnJvciBpZiBhbnkgZWxlbWVudHMgZG8gbm90IHBhc3MuXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogbGV0IGlzTnVtYmVyID0gKG9iaikgPT4gdHlwZW9mKG9iaikgPT09ICdudW1iZXInO1xyXG4gICAgICogbGV0IGFsbE51bWJlcnMgPSBbIDEsIDIsIDMsIDQsIDUgXTtcclxuICAgICAqIGFsbE51bWJlcnMuZmlsdGVyKGFzc2VydFByZWRpY2F0ZShpc051bWJlcikpOyAvL09LXHJcbiAgICAgKlxyXG4gICAgICogbGV0IG9uZVN0cmluZyA9IFsgMSwgMiwgMywgNCwgXCI1XCIgXTtcclxuICAgICAqIG9uZVN0cmluZy5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzTnVtYmVyLCBcIk5vdCBhbGwgbnVtYmVyc1wiKSk7IC8vIHRocm93cyBFcnJvcihcIlwiTm90IGFsbCBudW1iZXJzXCJcIik7XHJcbiAgICAgKiBgYGBcclxuICAgICAqL1xyXG4gICAgdmFyIGFzc2VydFByZWRpY2F0ZSA9IGFzc2VydEZuO1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIC5tYXAgZnVuY3Rpb24sIGJ1aWxkcyBhIC5tYXAgZnVuY3Rpb24gd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBtYXBwZWQgZWxlbWVudHMgZG8gbm90IHBhc3MgYSB0cnV0aHluZXNzIHRlc3QuXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogdmFyIGRhdGEgPSB7IGZvbzogMSwgYmFyOiAyIH07XHJcbiAgICAgKlxyXG4gICAgICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJyBdXHJcbiAgICAgKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XHJcbiAgICAgKiAvLyB2YWx1ZXMgaXMgWzEsIDJdXHJcbiAgICAgKlxyXG4gICAgICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJywgJ2JheicgXVxyXG4gICAgICogbGV0IHZhbHVlcyA9IGtleXMubWFwKGFzc2VydE1hcChrZXkgPT4gZGF0YVtrZXldLCBcIktleSBub3QgZm91bmRcIikpO1xyXG4gICAgICogLy8gdGhyb3dzIEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciBhc3NlcnRNYXAgPSBhc3NlcnRGbjtcclxuICAgIGZ1bmN0aW9uIGFzc2VydEZuKHByZWRpY2F0ZU9yTWFwLCBlcnJNc2cpIHtcclxuICAgICAgICBpZiAoZXJyTXNnID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgZXJyTXNnID0gXCJhc3NlcnQgZmFpbHVyZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcHJlZGljYXRlT3JNYXAob2JqKTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpc0Z1bmN0aW9uKGVyck1zZykgPyBlcnJNc2cob2JqKSA6IGVyck1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBMaWtlIF8ucGFpcnM6IEdpdmVuIGFuIG9iamVjdCwgcmV0dXJucyBhbiBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnNcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogcGFpcnMoeyBmb286IFwiRk9PXCIsIGJhcjogXCJCQVIgfSkgLy8gWyBbIFwiZm9vXCIsIFwiRk9PXCIgXSwgWyBcImJhclwiOiBcIkJBUlwiIF0gXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciBwYWlycyA9IGZ1bmN0aW9uIHBhaXJzKG9iaikge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBba2V5LCBvYmpba2V5XV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiB0d28gb3IgbW9yZSBwYXJhbGxlbCBhcnJheXMsIHJldHVybnMgYW4gYXJyYXkgb2YgdHVwbGVzIHdoZXJlXHJcbiAgICAgKiBlYWNoIHR1cGxlIGlzIGNvbXBvc2VkIG9mIFsgYVtpXSwgYltpXSwgLi4uIHpbaV0gXVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBsZXQgZm9vID0gWyAwLCAyLCA0LCA2IF07XHJcbiAgICAgKiBsZXQgYmFyID0gWyAxLCAzLCA1LCA3IF07XHJcbiAgICAgKiBsZXQgYmF6ID0gWyAxMCwgMzAsIDUwLCA3MCBdO1xyXG4gICAgICogYXJyYXlUdXBsZXMoZm9vLCBiYXIpOyAgICAgICAvLyBbIFswLCAxXSwgWzIsIDNdLCBbNCwgNV0sIFs2LCA3XSBdXHJcbiAgICAgKiBhcnJheVR1cGxlcyhmb28sIGJhciwgYmF6KTsgIC8vIFsgWzAsIDEsIDEwXSwgWzIsIDMsIDMwXSwgWzQsIDUsIDUwXSwgWzYsIDcsIDcwXSBdXHJcbiAgICAgKiBgYGBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXJyYXlUdXBsZXMoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG4gICAgICAgIHZhciBtYXhBcnJheUxlbiA9IGFyZ3MucmVkdWNlKGZ1bmN0aW9uIChtaW4sIGFycikge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oYXJyLmxlbmd0aCwgbWluKTtcclxuICAgICAgICB9LCA5MDA3MTk5MjU0NzQwOTkxKTsgLy8gYWthIDJeNTMg4oiSIDEgYWthIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXHJcbiAgICAgICAgdmFyIGksXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXhBcnJheUxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBob3QgZnVuY3Rpb25cclxuICAgICAgICAgICAgLy8gVW5yb2xsIHdoZW4gdGhlcmUgYXJlIDEtNCBhcmd1bWVudHNcclxuICAgICAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV1dKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXSwgYXJnc1syXVtpXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldLCBhcmdzWzJdW2ldLCBhcmdzWzNdW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFyZ3MubWFwKGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCBidWlsZHMgYW4gb2JqZWN0IGZyb20gYW4gYXJyYXkgb2YgW2tleSwgdmFsdWVdIHBhaXJzLlxyXG4gICAgICpcclxuICAgICAqIEVhY2ggaXRlcmF0aW9uIHNldHMgdGhlIGtleS92YWwgcGFpciBvbiB0aGUgbWVtbyBvYmplY3QsIHRoZW4gcmV0dXJucyB0aGUgbWVtbyBmb3IgdGhlIG5leHQgaXRlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEVhY2gga2V5VmFsdWVUdXBsZSBzaG91bGQgYmUgYW4gYXJyYXkgd2l0aCB2YWx1ZXMgWyBrZXk6IHN0cmluZywgdmFsdWU6IGFueSBdXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIHZhciBwYWlycyA9IFsgW1wiZm9va2V5XCIsIFwiZm9vdmFsXCJdLCBbXCJiYXJrZXlcIiwgXCJiYXJ2YWxcIl0gXVxyXG4gICAgICpcclxuICAgICAqIHZhciBwYWlyc1RvT2JqID0gcGFpcnMucmVkdWNlKChtZW1vLCBwYWlyKSA9PiBhcHBseVBhaXJzKG1lbW8sIHBhaXIpLCB7fSlcclxuICAgICAqIC8vIHBhaXJzVG9PYmogPT0geyBmb29rZXk6IFwiZm9vdmFsXCIsIGJhcmtleTogXCJiYXJ2YWxcIiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gT3IsIG1vcmUgc2ltcGx5OlxyXG4gICAgICogdmFyIHBhaXJzVG9PYmogPSBwYWlycy5yZWR1Y2UoYXBwbHlQYWlycywge30pXHJcbiAgICAgKiAvLyBwYWlyc1RvT2JqID09IHsgZm9va2V5OiBcImZvb3ZhbFwiLCBiYXJrZXk6IFwiYmFydmFsXCIgfVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcGx5UGFpcnMobWVtbywga2V5VmFsVHVwbGUpIHtcclxuICAgICAgICB2YXIga2V5LCB2YWx1ZTtcclxuICAgICAgICBpZiAoaXNBcnJheShrZXlWYWxUdXBsZSkpIGtleSA9IGtleVZhbFR1cGxlWzBdLCB2YWx1ZSA9IGtleVZhbFR1cGxlWzFdO1xyXG4gICAgICAgIGlmICghaXNTdHJpbmcoa2V5KSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwYXJhbWV0ZXJzIHRvIGFwcGx5UGFpcnNcIik7XHJcbiAgICAgICAgbWVtb1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIG1lbW87XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkgKi9cclxuICAgIGZ1bmN0aW9uIHRhaWwoYXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyci5sZW5ndGggJiYgYXJyW2Fyci5sZW5ndGggLSAxXSB8fCB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHNoYWxsb3cgY29weSBmcm9tIHNyYyB0byBkZXN0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvcHkoc3JjLCBkZXN0KSB7XHJcbiAgICAgICAgaWYgKGRlc3QpIE9iamVjdC5rZXlzKGRlc3QpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlIGRlc3Rba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIWRlc3QpIGRlc3QgPSB7fTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYyk7XHJcbiAgICB9XHJcbiAgICAvKiogTmFpdmUgZm9yRWFjaCBpbXBsZW1lbnRhdGlvbiB3b3JrcyB3aXRoIE9iamVjdHMgb3IgQXJyYXlzICovXHJcbiAgICBmdW5jdGlvbiBfZm9yRWFjaChvYmosIGNiLCBfdGhpcykge1xyXG4gICAgICAgIGlmIChpc0FycmF5KG9iaikpIHJldHVybiBvYmouZm9yRWFjaChjYiwgX3RoaXMpO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYihvYmpba2V5XSwga2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIF9leHRlbmQodG9PYmopIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAoIW9iaikgY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0b09ialtrZXlzW2pdXSA9IG9ialtrZXlzW2pdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9PYmo7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBfZXF1YWxzKG8xLCBvMikge1xyXG4gICAgICAgIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChvMSA9PT0gbnVsbCB8fCBvMiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmIChvMSAhPT0gbzEgJiYgbzIgIT09IG8yKSByZXR1cm4gdHJ1ZTsgLy8gTmFOID09PSBOYU5cclxuICAgICAgICB2YXIgdDEgPSB0eXBlb2YgbzEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG8xKSxcclxuICAgICAgICAgICAgdDIgPSB0eXBlb2YgbzIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG8yKTtcclxuICAgICAgICBpZiAodDEgIT09IHQyIHx8IHQxICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHZhciB0dXAgPSBbbzEsIG8yXTtcclxuICAgICAgICBpZiAoYWxsKGlzQXJyYXkpKHR1cCkpIHJldHVybiBfYXJyYXlzRXEobzEsIG8yKTtcclxuICAgICAgICBpZiAoYWxsKGlzRGF0ZSkodHVwKSkgcmV0dXJuIG8xLmdldFRpbWUoKSA9PT0gbzIuZ2V0VGltZSgpO1xyXG4gICAgICAgIGlmIChhbGwoaXNSZWdFeHApKHR1cCkpIHJldHVybiBvMS50b1N0cmluZygpID09PSBvMi50b1N0cmluZygpO1xyXG4gICAgICAgIGlmIChhbGwoaXNGdW5jdGlvbikodHVwKSkgcmV0dXJuIHRydWU7IC8vIG1laFxyXG4gICAgICAgIHZhciBwcmVkaWNhdGVzID0gW2lzRnVuY3Rpb24sIGlzQXJyYXksIGlzRGF0ZSwgaXNSZWdFeHBdO1xyXG4gICAgICAgIGlmIChwcmVkaWNhdGVzLm1hcChhbnkpLnJlZHVjZShmdW5jdGlvbiAoYiwgZm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGIgfHwgISFmbih0dXApO1xyXG4gICAgICAgIH0sIGZhbHNlKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHZhciBrZXksXHJcbiAgICAgICAgICAgIGtleXMgPSB7fTtcclxuICAgICAgICBmb3IgKGtleSBpbiBvMSkge1xyXG4gICAgICAgICAgICBpZiAoIV9lcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAga2V5c1trZXldID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChrZXkgaW4gbzIpIHtcclxuICAgICAgICAgICAgaWYgKCFrZXlzW2tleV0pIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBfYXJyYXlzRXEoYTEsIGEyKSB7XHJcbiAgICAgICAgaWYgKGExLmxlbmd0aCAhPT0gYTIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5VHVwbGVzKGExLCBhMikucmVkdWNlKGZ1bmN0aW9uIChiLCB0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiICYmIF9lcXVhbHModFswXSwgdFsxXSk7XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyBpc3N1ZSAjMjY3NlxyXG4gICAgdmFyIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSA9IGZ1bmN0aW9uIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2UuY2F0Y2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSkgJiYgcHJvbWlzZTtcclxuICAgIH07XHJcbiAgICB2YXIgc2lsZW50UmVqZWN0aW9uID0gZnVuY3Rpb24gc2lsZW50UmVqZWN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZShzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbW9kdWxlIGNvbW1vblxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgdmFyIFF1ZXVlID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBRdWV1ZShfaXRlbXMsIF9saW1pdCkge1xyXG4gICAgICAgICAgICBpZiAoX2l0ZW1zID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIF9pdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfbGltaXQgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgX2xpbWl0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pdGVtcyA9IF9pdGVtcztcclxuICAgICAgICAgICAgdGhpcy5fbGltaXQgPSBfbGltaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbXM7XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saW1pdCAmJiBpdGVtcy5sZW5ndGggPiB0aGlzLl9saW1pdCkgaXRlbXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBRdWV1ZS5wcm90b3R5cGUuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSgpKSByZXR1cm4gdGhpcy5faXRlbXMuc3BsaWNlKDAsIDEpWzBdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2l0ZW1zO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFF1ZXVlLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUXVldWUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICByZXR1cm4gaWR4ID4gLTEgJiYgdGhpcy5faXRlbXMuc3BsaWNlKGlkeCwgMSlbMF07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBRdWV1ZS5wcm90b3R5cGUucGVla1RhaWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFF1ZXVlLnByb3RvdHlwZS5wZWVrSGVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSgpKSByZXR1cm4gdGhpcy5faXRlbXNbMF07XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUXVldWU7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB0cmFuc2l0aW9uXHJcbiAgICAgKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAoZnVuY3Rpb24gKFJlamVjdFR5cGUpIHtcclxuICAgICAgICBSZWplY3RUeXBlW1JlamVjdFR5cGVbXCJTVVBFUlNFREVEXCJdID0gMl0gPSBcIlNVUEVSU0VERURcIjtcclxuICAgICAgICBSZWplY3RUeXBlW1JlamVjdFR5cGVbXCJBQk9SVEVEXCJdID0gM10gPSBcIkFCT1JURURcIjtcclxuICAgICAgICBSZWplY3RUeXBlW1JlamVjdFR5cGVbXCJJTlZBTElEXCJdID0gNF0gPSBcIklOVkFMSURcIjtcclxuICAgICAgICBSZWplY3RUeXBlW1JlamVjdFR5cGVbXCJJR05PUkVEXCJdID0gNV0gPSBcIklHTk9SRURcIjtcclxuICAgICAgICBSZWplY3RUeXBlW1JlamVjdFR5cGVbXCJFUlJPUlwiXSA9IDZdID0gXCJFUlJPUlwiO1xyXG4gICAgfSkoZXhwb3J0cy5SZWplY3RUeXBlIHx8IChleHBvcnRzLlJlamVjdFR5cGUgPSB7fSkpO1xyXG4gICAgLyoqIEBoaWRkZW4gKi92YXIgaWQgPSAwO1xyXG4gICAgdmFyIFJlamVjdGlvbiA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gUmVqZWN0aW9uKHR5cGUsIG1lc3NhZ2UsIGRldGFpbCkge1xyXG4gICAgICAgICAgICB0aGlzLiRpZCA9IGlkKys7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsID0gZGV0YWlsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBSZWplY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlsU3RyaW5nID0gZnVuY3Rpb24gZGV0YWlsU3RyaW5nKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkICYmIGQudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPyBkLnRvU3RyaW5nKCkgOiBzdHJpbmdpZnkoZCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWwgPSBkZXRhaWxTdHJpbmcodGhpcy5kZXRhaWwpO1xyXG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgJGlkID0gX2EuJGlkLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9IF9hLnR5cGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gX2EubWVzc2FnZTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVHJhbnNpdGlvbiBSZWplY3Rpb24oJGlkOiBcIiArICRpZCArIFwiIHR5cGU6IFwiICsgdHlwZSArIFwiLCBtZXNzYWdlOiBcIiArIG1lc3NhZ2UgKyBcIiwgZGV0YWlsOiBcIiArIGRldGFpbCArIFwiKVwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUmVqZWN0aW9uLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmQoc2lsZW50UmVqZWN0aW9uKHRoaXMpLCB7IF90cmFuc2l0aW9uUmVqZWN0aW9uOiB0aGlzIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqIGlzIGEgcmVqZWN0ZWQgcHJvbWlzZSBjcmVhdGVkIGZyb20gdGhlIGBhc1Byb21pc2VgIGZhY3RvcnkgKi9cclxuICAgICAgICBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJiBpcyhSZWplY3Rpb24pKG9iai5fdHJhbnNpdGlvblJlamVjdGlvbik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gdHJhbnNpdGlvbiBzdXBlcnNlZGVkICovXHJcbiAgICAgICAgUmVqZWN0aW9uLnN1cGVyc2VkZWQgPSBmdW5jdGlvbiAoZGV0YWlsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJUaGUgdHJhbnNpdGlvbiBoYXMgYmVlbiBzdXBlcnNlZGVkIGJ5IGEgZGlmZmVyZW50IHRyYW5zaXRpb25cIjtcclxuICAgICAgICAgICAgdmFyIHJlamVjdGlvbiA9IG5ldyBSZWplY3Rpb24oZXhwb3J0cy5SZWplY3RUeXBlLlNVUEVSU0VERUQsIG1lc3NhZ2UsIGRldGFpbCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVkaXJlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0aW9uLnJlZGlyZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uICovXHJcbiAgICAgICAgUmVqZWN0aW9uLnJlZGlyZWN0ZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZChkZXRhaWwsIHsgcmVkaXJlY3RlZDogdHJ1ZSB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBpbnZhbGlkIHRyYW5zaXRpb24gKi9cclxuICAgICAgICBSZWplY3Rpb24uaW52YWxpZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlRoaXMgdHJhbnNpdGlvbiBpcyBpbnZhbGlkXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKGV4cG9ydHMuUmVqZWN0VHlwZS5JTlZBTElELCBtZXNzYWdlLCBkZXRhaWwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGlnbm9yZWQgdHJhbnNpdGlvbiAqL1xyXG4gICAgICAgIFJlamVjdGlvbi5pZ25vcmVkID0gZnVuY3Rpb24gKGRldGFpbCkge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWRcIjtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWplY3Rpb24oZXhwb3J0cy5SZWplY3RUeXBlLklHTk9SRUQsIG1lc3NhZ2UsIGRldGFpbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXHJcbiAgICAgICAgUmVqZWN0aW9uLmFib3J0ZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJUaGUgdHJhbnNpdGlvbiBoYXMgYmVlbiBhYm9ydGVkXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKGV4cG9ydHMuUmVqZWN0VHlwZS5BQk9SVEVELCBtZXNzYWdlLCBkZXRhaWwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGFib3J0ZWQgdHJhbnNpdGlvbiAqL1xyXG4gICAgICAgIFJlamVjdGlvbi5lcnJvcmVkID0gZnVuY3Rpb24gKGRldGFpbCkge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiVGhlIHRyYW5zaXRpb24gZXJyb3JlZFwiO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihleHBvcnRzLlJlamVjdFR5cGUuRVJST1IsIG1lc3NhZ2UsIGRldGFpbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGEgUmVqZWN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBSZWplY3Rpb24uXHJcbiAgICAgICAgICogSWYgdGhlIHZhbHVlIGlzIGFscmVhZHkgYSBSZWplY3Rpb24sIHJldHVybnMgaXQuXHJcbiAgICAgICAgICogT3RoZXJ3aXNlLCB3cmFwcyBhbmQgcmV0dXJucyB0aGUgdmFsdWUgYXMgYSBSZWplY3Rpb24gKFJlamVjdGlvbiB0eXBlOiBFUlJPUikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBgZGV0YWlsYCBpZiBpdCBpcyBhbHJlYWR5IGEgYFJlamVjdGlvbmAsIGVsc2UgcmV0dXJucyBhbiBFUlJPUiBSZWplY3Rpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUmVqZWN0aW9uLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzKFJlamVjdGlvbikoZGV0YWlsKSA/IGRldGFpbCA6IFJlamVjdGlvbi5lcnJvcmVkKGRldGFpbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUmVqZWN0aW9uO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIyBUcmFuc2l0aW9uIHRyYWNpbmcgKGRlYnVnKVxyXG4gICAgICpcclxuICAgICAqIEVuYWJsZSB0cmFuc2l0aW9uIHRyYWNpbmcgdG8gcHJpbnQgdHJhbnNpdGlvbiBpbmZvcm1hdGlvbiB0byB0aGUgY29uc29sZSxcclxuICAgICAqIGluIG9yZGVyIHRvIGhlbHAgZGVidWcgeW91ciBhcHBsaWNhdGlvbi5cclxuICAgICAqIFRyYWNpbmcgbG9ncyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIFRyYW5zaXRpb24gdG8geW91ciBjb25zb2xlLlxyXG4gICAgICpcclxuICAgICAqIFRvIGVuYWJsZSB0cmFjaW5nLCBpbXBvcnQgdGhlIFtbVHJhY2VdXSBzaW5nbGV0b24gYW5kIGVuYWJsZSBvbmUgb3IgbW9yZSBjYXRlZ29yaWVzLlxyXG4gICAgICpcclxuICAgICAqICMjIyBFUzZcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwidWktcm91dGVyLW5nMlwiOyAvLyBvciBcImFuZ3VsYXItdWktcm91dGVyXCJcclxuICAgICAqIHRyYWNlLmVuYWJsZSgxLCA1KTsgLy8gVFJBTlNJVElPTiBhbmQgVklFV0NPTkZJR1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIENKU1xyXG4gICAgICogYGBganNcclxuICAgICAqIGxldCB0cmFjZSA9IHJlcXVpcmUoXCJhbmd1bGFyLXVpLXJvdXRlclwiKS50cmFjZTsgLy8gb3IgXCJ1aS1yb3V0ZXItbmcyXCJcclxuICAgICAqIHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIiwgXCJWSUVXQ09ORklHXCIpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEdsb2JhbHNcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBsZXQgdHJhY2UgPSB3aW5kb3dbXCJhbmd1bGFyLXVpLXJvdXRlclwiXS50cmFjZTsgLy8gb3IgXCJ1aS1yb3V0ZXItbmcyXCJcclxuICAgICAqIHRyYWNlLmVuYWJsZSgpOyAvLyBUcmFjZSBldmVyeXRoaW5nICh2ZXJ5IHZlcmJvc2UpXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyMgQW5ndWxhciAxOlxyXG4gICAgICogYGBganNcclxuICAgICAqIGFwcC5ydW4oJHRyYWNlID0+ICR0cmFjZS5lbmFibGUoKSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB0cmFjZVxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIGZ1bmN0aW9uIHVpVmlld1N0cmluZyh1aXZpZXcpIHtcclxuICAgICAgICBpZiAoIXVpdmlldykgcmV0dXJuICd1aS12aWV3IChkZWZ1bmN0KSc7XHJcbiAgICAgICAgdmFyIHN0YXRlID0gdWl2aWV3LmNyZWF0aW9uQ29udGV4dCA/IHVpdmlldy5jcmVhdGlvbkNvbnRleHQubmFtZSB8fCAnKHJvb3QpJyA6ICcobm9uZSknO1xyXG4gICAgICAgIHJldHVybiBcIlt1aS12aWV3I1wiICsgdWl2aWV3LmlkICsgXCIgXCIgKyB1aXZpZXcuJHR5cGUgKyBcIjpcIiArIHVpdmlldy5mcW4gKyBcIiAoXCIgKyB1aXZpZXcubmFtZSArIFwiQFwiICsgc3RhdGUgKyBcIildXCI7XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgdmFyIHZpZXdDb25maWdTdHJpbmcgPSBmdW5jdGlvbiB2aWV3Q29uZmlnU3RyaW5nKHZpZXdDb25maWcpIHtcclxuICAgICAgICB2YXIgdmlldyA9IHZpZXdDb25maWcudmlld0RlY2w7XHJcbiAgICAgICAgdmFyIHN0YXRlID0gdmlldy4kY29udGV4dC5uYW1lIHx8ICcocm9vdCknO1xyXG4gICAgICAgIHJldHVybiBcIltWaWV3I1wiICsgdmlld0NvbmZpZy4kaWQgKyBcIiBmcm9tICdcIiArIHN0YXRlICsgXCInIHN0YXRlXTogdGFyZ2V0IHVpLXZpZXc6ICdcIiArIHZpZXcuJHVpVmlld05hbWUgKyBcIkBcIiArIHZpZXcuJHVpVmlld0NvbnRleHRBbmNob3IgKyBcIidcIjtcclxuICAgIH07XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplZENhdChpbnB1dCkge1xyXG4gICAgICAgIHJldHVybiBpc051bWJlcihpbnB1dCkgPyBleHBvcnRzLkNhdGVnb3J5W2lucHV0XSA6IGV4cG9ydHMuQ2F0ZWdvcnlbZXhwb3J0cy5DYXRlZ29yeVtpbnB1dF1dO1xyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHZhciBjb25zb2xlTG9nID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSk7XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgdmFyIGNvbnNvbGV0YWJsZSA9IGlzRnVuY3Rpb24oY29uc29sZS50YWJsZSkgPyBjb25zb2xlLnRhYmxlLmJpbmQoY29uc29sZSkgOiBjb25zb2xlTG9nLmJpbmQoY29uc29sZSk7XHJcbiAgICAvKipcclxuICAgICAqIFRyYWNlIGNhdGVnb3JpZXMgRW51bVxyXG4gICAgICpcclxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIGEgY2F0ZWdvcnkgdXNpbmcgW1tUcmFjZS5lbmFibGVdXSBvciBbW1RyYWNlLmRpc2FibGVdXVxyXG4gICAgICpcclxuICAgICAqIGB0cmFjZS5lbmFibGUoQ2F0ZWdvcnkuVFJBTlNJVElPTilgXHJcbiAgICAgKlxyXG4gICAgICogVGhlc2UgY2FuIGFsc28gYmUgcHJvdmlkZWQgdXNpbmcgYSBtYXRjaGluZyBzdHJpbmcsIG9yIHBvc2l0aW9uIG9yZGluYWxcclxuICAgICAqXHJcbiAgICAgKiBgdHJhY2UuZW5hYmxlKFwiVFJBTlNJVElPTlwiKWBcclxuICAgICAqXHJcbiAgICAgKiBgdHJhY2UuZW5hYmxlKDEpYFxyXG4gICAgICovXHJcblxyXG4gICAgKGZ1bmN0aW9uIChDYXRlZ29yeSkge1xyXG4gICAgICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiUkVTT0xWRVwiXSA9IDBdID0gXCJSRVNPTFZFXCI7XHJcbiAgICAgICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJUUkFOU0lUSU9OXCJdID0gMV0gPSBcIlRSQU5TSVRJT05cIjtcclxuICAgICAgICBDYXRlZ29yeVtDYXRlZ29yeVtcIkhPT0tcIl0gPSAyXSA9IFwiSE9PS1wiO1xyXG4gICAgICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVUlWSUVXXCJdID0gM10gPSBcIlVJVklFV1wiO1xyXG4gICAgICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiVklFV0NPTkZJR1wiXSA9IDRdID0gXCJWSUVXQ09ORklHXCI7XHJcbiAgICB9KShleHBvcnRzLkNhdGVnb3J5IHx8IChleHBvcnRzLkNhdGVnb3J5ID0ge30pKTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIF90aWQgPSBwYXJzZShcIiRpZFwiKTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIF9yaWQgPSBwYXJzZShcInJvdXRlci4kaWRcIik7XHJcbiAgICAvKiogQGhpZGRlbiAqL3ZhciB0cmFuc0xibCA9IGZ1bmN0aW9uIHRyYW5zTGJsKHRyYW5zKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVHJhbnNpdGlvbiAjXCIgKyBfdGlkKHRyYW5zKSArIFwiLVwiICsgX3JpZCh0cmFucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQcmludHMgVUktUm91dGVyIFRyYW5zaXRpb24gdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUuXHJcbiAgICAgKi9cclxuICAgIHZhciBUcmFjZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBmdW5jdGlvbiBUcmFjZSgpIHtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICAgICAgdGhpcy5fZW5hYmxlZCA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmFwcHJveGltYXRlRGlnZXN0cyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoZW5hYmxlZCwgY2F0ZWdvcmllcykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoIWNhdGVnb3JpZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gT2JqZWN0LmtleXMoZXhwb3J0cy5DYXRlZ29yeSkubWFwKGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGssIDEwKTtcclxuICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXNOYU4oayk7XHJcbiAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHBvcnRzLkNhdGVnb3J5W2tleV07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRlZ29yaWVzLm1hcChub3JtYWxpemVkQ2F0KS5mb3JFYWNoKGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9lbmFibGVkW2NhdGVnb3J5XSA9IGVuYWJsZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNhdGVnb3JpZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZXQodHJ1ZSwgY2F0ZWdvcmllcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNhdGVnb3JpZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZXQoZmFsc2UsIGNhdGVnb3JpZXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0cmlldmVzIHRoZSBlbmFibGVkIHN0YXRldXMgb2YgYSBbW0NhdGVnb3J5XV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdHJhY2UuZW5hYmxlZChcIlZJRVdDT05GSUdcIik7IC8vIHRydWUgb3IgZmFsc2VcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgY2F0ZWdvcnkgaXMgZW5hYmxlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYWNlLnByb3RvdHlwZS5lbmFibGVkID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX2VuYWJsZWRbbm9ybWFsaXplZENhdChjYXRlZ29yeSldO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VUcmFuc2l0aW9uU3RhcnQgPSBmdW5jdGlvbiAodHJhbnMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5UUkFOU0lUSU9OKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogU3RhcnRlZCAgLT4gXCIgKyBzdHJpbmdpZnkodHJhbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQgPSBmdW5jdGlvbiAodHJhbnMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5UUkFOU0lUSU9OKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogSWdub3JlZCAgPD4gXCIgKyBzdHJpbmdpZnkodHJhbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLnRyYWNlSG9va0ludm9jYXRpb24gPSBmdW5jdGlvbiAoc3RlcCwgdHJhbnMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5IT09LKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBwYXJzZShcInRyYWNlRGF0YS5ob29rVHlwZVwiKShvcHRpb25zKSB8fCBcImludGVybmFsXCIsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gcGFyc2UoXCJ0cmFjZURhdGEuY29udGV4dC5zdGF0ZS5uYW1lXCIpKG9wdGlvbnMpIHx8IHBhcnNlKFwidHJhY2VEYXRhLmNvbnRleHRcIikob3B0aW9ucykgfHwgXCJ1bmtub3duXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lID0gZnVuY3Rpb25Ub1N0cmluZyhzdGVwLnJlZ2lzdGVyZWRIb29rLmNhbGxiYWNrKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgSG9vayAtPiBcIiArIGV2ZW50ICsgXCIgY29udGV4dDogXCIgKyBjb250ZXh0ICsgXCIsIFwiICsgbWF4TGVuZ3RoKDIwMCwgbmFtZSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VIb29rUmVzdWx0ID0gZnVuY3Rpb24gKGhvb2tSZXN1bHQsIHRyYW5zLCB0cmFuc2l0aW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LkhPT0spKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiAgIDwtIEhvb2sgcmV0dXJuZWQ6IFwiICsgbWF4TGVuZ3RoKDIwMCwgc3RyaW5naWZ5KGhvb2tSZXN1bHQpKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xyXG4gICAgICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVJlc29sdmVQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHdoZW4sIHRyYW5zKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuUkVTT0xWRSkpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgICAgICAgUmVzb2x2aW5nIFwiICsgcGF0aCArIFwiIChcIiArIHdoZW4gKyBcIilcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xyXG4gICAgICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZCA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlLCB0cmFucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LlJFU09MVkUpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiAgICAgICAgICAgICAgIDwtIFJlc29sdmVkICBcIiArIHJlc29sdmFibGUgKyBcIiB0bzogXCIgKyBtYXhMZW5ndGgoMjAwLCBzdHJpbmdpZnkocmVzb2x2YWJsZS5kYXRhKSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VFcnJvciA9IGZ1bmN0aW9uIChyZWFzb24sIHRyYW5zKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6IDwtIFJlamVjdGVkIFwiICsgc3RyaW5naWZ5KHRyYW5zKSArIFwiLCByZWFzb246IFwiICsgcmVhc29uKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLnRyYWNlU3VjY2VzcyA9IGZ1bmN0aW9uIChmaW5hbFN0YXRlLCB0cmFucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LlRSQU5TSVRJT04pKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBTdWNjZXNzICBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgZmluYWwgc3RhdGU6IFwiICsgZmluYWxTdGF0ZS5uYW1lKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQsIHZpZXdEYXRhLCBleHRyYSkge1xyXG4gICAgICAgICAgICBpZiAoZXh0cmEgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgZXh0cmEgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVUlWSUVXKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVpLXZpZXc6IFwiICsgcGFkU3RyaW5nKDMwLCBldmVudCkgKyBcIiBcIiArIHVpVmlld1N0cmluZyh2aWV3RGF0YSkgKyBleHRyYSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xyXG4gICAgICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVVJVmlld0NvbmZpZ1VwZGF0ZWQgPSBmdW5jdGlvbiAodmlld0RhdGEsIGNvbnRleHQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5VSVZJRVcpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudHJhY2VVSVZpZXdFdmVudChcIlVwZGF0aW5nXCIsIHZpZXdEYXRhLCBcIiB3aXRoIFZpZXdDb25maWcgZnJvbSBjb250ZXh0PSdcIiArIGNvbnRleHQgKyBcIidcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xyXG4gICAgICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVVJVmlld0ZpbGwgPSBmdW5jdGlvbiAodmlld0RhdGEsIGh0bWwpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5VSVZJRVcpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudHJhY2VVSVZpZXdFdmVudChcIkZpbGxcIiwgdmlld0RhdGEsIFwiIHdpdGg6IFwiICsgbWF4TGVuZ3RoKDIwMCwgaHRtbCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U3luYyA9IGZ1bmN0aW9uIChwYWlycykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LlZJRVdDT05GSUcpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBtYXBwaW5nID0gcGFpcnMubWFwKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVpVmlld0RhdGEgPSBfYVswXSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBfYVsxXTtcclxuICAgICAgICAgICAgICAgIHZhciB1aVZpZXcgPSB1aVZpZXdEYXRhLiR0eXBlICsgXCI6XCIgKyB1aVZpZXdEYXRhLmZxbjtcclxuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gY29uZmlnICYmIGNvbmZpZy52aWV3RGVjbC4kY29udGV4dC5uYW1lICsgXCI6IFwiICsgY29uZmlnLnZpZXdEZWNsLiRuYW1lICsgXCIgKFwiICsgY29uZmlnLnZpZXdEZWNsLiR0eXBlICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyAndWktdmlldyBmcW4nOiB1aVZpZXcsICdzdGF0ZTogdmlldyBuYW1lJzogdmlldyB9O1xyXG4gICAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVsndWktdmlldyBmcW4nXS5sb2NhbGVDb21wYXJlKGJbJ3VpLXZpZXcgZnFuJ10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc29sZXRhYmxlKG1hcHBpbmcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cclxuICAgICAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3Q29uZmlnKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVklFV0NPTkZJRykpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJWSUVXQ09ORklHOiBcIiArIGV2ZW50ICsgXCIgXCIgKyB2aWV3Q29uZmlnU3RyaW5nKHZpZXdDb25maWcpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXHJcbiAgICAgICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCA9IGZ1bmN0aW9uIChldmVudCwgdmlld0RhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5WSUVXQ09ORklHKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlZJRVdDT05GSUc6IFwiICsgZXZlbnQgKyBcIiBcIiArIHVpVmlld1N0cmluZyh2aWV3RGF0YSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFRyYWNlO1xyXG4gICAgfSgpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgW1tUcmFjZV1dIHNpbmdsZXRvblxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwiYW5ndWxhci11aS1yb3V0ZXJcIjtcclxuICAgICAqIHRyYWNlLmVuYWJsZSgxLCA1KTtcclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICB2YXIgdHJhY2UgPSBuZXcgVHJhY2UoKTtcclxuXHJcbiAgICAoZnVuY3Rpb24gKFRyYW5zaXRpb25Ib29rUGhhc2UpIHtcclxuICAgICAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJDUkVBVEVcIl0gPSAwXSA9IFwiQ1JFQVRFXCI7XHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiQkVGT1JFXCJdID0gMV0gPSBcIkJFRk9SRVwiO1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIlJVTlwiXSA9IDJdID0gXCJSVU5cIjtcclxuICAgICAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJTVUNDRVNTXCJdID0gM10gPSBcIlNVQ0NFU1NcIjtcclxuICAgICAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgfSkoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlIHx8IChleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UgPSB7fSkpO1xyXG5cclxuICAgIChmdW5jdGlvbiAoVHJhbnNpdGlvbkhvb2tTY29wZSkge1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rU2NvcGVbVHJhbnNpdGlvbkhvb2tTY29wZVtcIlRSQU5TSVRJT05cIl0gPSAwXSA9IFwiVFJBTlNJVElPTlwiO1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rU2NvcGVbVHJhbnNpdGlvbkhvb2tTY29wZVtcIlNUQVRFXCJdID0gMV0gPSBcIlNUQVRFXCI7XHJcbiAgICB9KShleHBvcnRzLlRyYW5zaXRpb25Ib29rU2NvcGUgfHwgKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZSA9IHt9KSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSBzdGF0ZVxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBFbmNhcHN1bGF0ZSB0aGUgdGFyZ2V0IChkZXN0aW5hdGlvbikgc3RhdGUvcGFyYW1zL29wdGlvbnMgb2YgYSBbW1RyYW5zaXRpb25dXS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNsYXNzIGlzIGZyZXF1ZW50bHkgdXNlZCB0byByZWRpcmVjdCBhIHRyYW5zaXRpb24gdG8gYSBuZXcgZGVzdGluYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogU2VlOlxyXG4gICAgICpcclxuICAgICAqIC0gW1tIb29rUmVzdWx0XV1cclxuICAgICAqIC0gW1tUcmFuc2l0aW9uSG9va0ZuXV1cclxuICAgICAqIC0gW1tUcmFuc2l0aW9uU2VydmljZS5vblN0YXJ0XV1cclxuICAgICAqXHJcbiAgICAgKiBUbyBjcmVhdGUgYSBgVGFyZ2V0U3RhdGVgLCB1c2UgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0uXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBjbGFzcyB3cmFwczpcclxuICAgICAqXHJcbiAgICAgKiAxKSBhbiBpZGVudGlmaWVyIGZvciBhIHN0YXRlXHJcbiAgICAgKiAyKSBhIHNldCBvZiBwYXJhbWV0ZXJzXHJcbiAgICAgKiAzKSBhbmQgdHJhbnNpdGlvbiBvcHRpb25zXHJcbiAgICAgKiA0KSB0aGUgcmVnaXN0ZXJlZCBzdGF0ZSBvYmplY3QgKHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSlcclxuICAgICAqXHJcbiAgICAgKiBNYW55IFVJLVJvdXRlciBBUElzIHN1Y2ggYXMgW1tTdGF0ZVNlcnZpY2UuZ29dXSB0YWtlIGEgW1tTdGF0ZU9yTmFtZV1dIGFyZ3VtZW50IHdoaWNoIGNhblxyXG4gICAgICogZWl0aGVyIGJlIGEgKnN0YXRlIG9iamVjdCogKGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gb3IgW1tTdGF0ZU9iamVjdF1dKSBvciBhICpzdGF0ZSBuYW1lKiAoYSBzdHJpbmcpLlxyXG4gICAgICogVGhlIGBUYXJnZXRTdGF0ZWAgY2xhc3Mgbm9ybWFsaXplcyB0aG9zZSBvcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEEgYFRhcmdldFN0YXRlYCBtYXkgYmUgdmFsaWQgKHRoZSBzdGF0ZSBiZWluZyB0YXJnZXRlZCBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5KVxyXG4gICAgICogb3IgaW52YWxpZCAodGhlIHN0YXRlIGJlaW5nIHRhcmdldGVkIGlzIG5vdCByZWdpc3RlcmVkKS5cclxuICAgICAqL1xyXG4gICAgdmFyIFRhcmdldFN0YXRlID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgVGFyZ2V0U3RhdGUgY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IERvIG5vdCBjb25zdHJ1Y3QgYSBgVGFyZ2V0U3RhdGVgIG1hbnVhbGx5LlxyXG4gICAgICAgICAqIFRvIGNyZWF0ZSBhIGBUYXJnZXRTdGF0ZWAsIHVzZSB0aGUgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0gZmFjdG9yeSBtZXRob2QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX3N0YXRlUmVnaXN0cnkgVGhlIFN0YXRlUmVnaXN0cnkgdG8gdXNlIHRvIGxvb2sgdXAgdGhlIF9kZWZpbml0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIF9pZGVudGlmaWVyIEFuIGlkZW50aWZpZXIgZm9yIGEgc3RhdGUuXHJcbiAgICAgICAgICogICAgRWl0aGVyIGEgZnVsbHktcXVhbGlmaWVkIHN0YXRlIG5hbWUsIG9yIHRoZSBvYmplY3QgdXNlZCB0byBkZWZpbmUgdGhlIHN0YXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSBfcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSB0YXJnZXQgc3RhdGVcclxuICAgICAgICAgKiBAcGFyYW0gX29wdGlvbnMgVHJhbnNpdGlvbiBvcHRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsYXBpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gVGFyZ2V0U3RhdGUoX3N0YXRlUmVnaXN0cnksIF9pZGVudGlmaWVyLCBfcGFyYW1zLCBfb3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZVJlZ2lzdHJ5ID0gX3N0YXRlUmVnaXN0cnk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkZW50aWZpZXIgPSBfaWRlbnRpZmllcjtcclxuICAgICAgICAgICAgdGhpcy5faWRlbnRpZmllciA9IF9pZGVudGlmaWVyO1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJhbXMgPSBleHRlbmQoe30sIF9wYXJhbXMgfHwge30pO1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHt9LCBfb3B0aW9ucyB8fCB7fSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluaXRpb24gPSBfc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoX2lkZW50aWZpZXIsIHRoaXMuX29wdGlvbnMucmVsYXRpdmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRoaXMgb2JqZWN0IHRhcmdldHMgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb24gJiYgdGhpcy5fZGVmaW5pdGlvbi5uYW1lIHx8IHRoaXMuX2lkZW50aWZpZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogVGhlIGlkZW50aWZpZXIgdXNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgVGFyZ2V0U3RhdGUgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuaWRlbnRpZmllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkZW50aWZpZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogVGhlIHRhcmdldCBwYXJhbWV0ZXIgdmFsdWVzICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmFtcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2JqZWN0IChpZiBpdCB3YXMgZm91bmQpICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLiRzdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb247XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIGRlY2xhcmF0aW9uIChpZiBpdCB3YXMgZm91bmQpICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLnNlbGY7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogVGhlIHRhcmdldCBvcHRpb25zICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFRydWUgaWYgdGhlIHRhcmdldCBzdGF0ZSB3YXMgZm91bmQgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLnNlbGYpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFRydWUgaWYgdGhlIG9iamVjdCBpcyB2YWxpZCAqL1xyXG4gICAgICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS52YWxpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmVycm9yKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogSWYgdGhlIG9iamVjdCBpcyBpbnZhbGlkLCByZXR1cm5zIHRoZSByZWFzb24gd2h5ICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYmFzZSA9IHRoaXMub3B0aW9ucygpLnJlbGF0aXZlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24gJiYgISFiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGVOYW1lID0gYmFzZS5uYW1lID8gYmFzZS5uYW1lIDogYmFzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIkNvdWxkIG5vdCByZXNvbHZlICdcIiArIHRoaXMubmFtZSgpICsgXCInIGZyb20gc3RhdGUgJ1wiICsgc3RhdGVOYW1lICsgXCInXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9kZWZpbml0aW9uKSByZXR1cm4gXCJObyBzdWNoIHN0YXRlICdcIiArIHRoaXMubmFtZSgpICsgXCInXCI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbi5zZWxmKSByZXR1cm4gXCJTdGF0ZSAnXCIgKyB0aGlzLm5hbWUoKSArIFwiJyBoYXMgYW4gaW52YWxpZCBkZWZpbml0aW9uXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIidcIiArIHRoaXMubmFtZSgpICsgXCInXCIgKyBzdHJpbmdpZnkodGhpcy5wYXJhbXMoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlIHdoaWNoIHRhcmdldHMgYSBkaWZmZXJlbnQgc3RhdGUuXHJcbiAgICAgICAgICogVGhlIG5ldyBUYXJnZXRTdGF0ZSBoYXMgdGhlIHNhbWUgcGFyYW1ldGVyIHZhbHVlcyBhbmQgdHJhbnNpdGlvbiBvcHRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBuZXcgc3RhdGUgdGhhdCBzaG91bGQgYmUgdGFyZ2V0ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUud2l0aFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgc3RhdGUsIHRoaXMuX3BhcmFtcywgdGhpcy5fb3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciB2YWx1ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIHRoZSBuZXcgcGFyYW1ldGVyIHZhbHVlcyB0byB1c2VcclxuICAgICAgICAgKiBAcGFyYW0gcmVwbGFjZSBXaGVuIGZhbHNlIChkZWZhdWx0KSB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgd2lsbCBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZXMuXHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgV2hlbiB0cnVlIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZhbHVlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUud2l0aFBhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXMsIHJlcGxhY2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgcmVwbGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuZXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgbmV3UGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG5ldyBvcHRpb25zIHRvIHVzZVxyXG4gICAgICAgICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgV2hlbiB0cnVlIHRoZSBvcHRpb25zIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IG9wdGlvbnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcGxhY2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgcmVwbGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuZXdPcHRzID0gcmVwbGFjZSA/IG9wdGlvbnMgOiBleHRlbmQoe30sIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHRoaXMuX3N0YXRlUmVnaXN0cnksIHRoaXMuX2lkZW50aWZpZXIsIHRoaXMuX3BhcmFtcywgbmV3T3B0cyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBvYmplY3QgaGFzIGEgc3RhdGUgcHJvcGVydHkgdGhhdCBtaWdodCBiZSBhIHN0YXRlIG9yIHN0YXRlIG5hbWUgKi9cclxuICAgICAgICBUYXJnZXRTdGF0ZS5pc0RlZiA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouc3RhdGUgJiYgKGlzU3RyaW5nKG9iai5zdGF0ZSkgfHwgaXNTdHJpbmcob2JqLnN0YXRlLm5hbWUpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBUYXJnZXRTdGF0ZTtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHRyYW5zaXRpb25cclxuICAgICAqL1xyXG4gICAgLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgY3VycmVudDogbm9vcCQxLFxyXG4gICAgICAgIHRyYW5zaXRpb246IG51bGwsXHJcbiAgICAgICAgdHJhY2VEYXRhOiB7fSxcclxuICAgICAgICBiaW5kOiBudWxsXHJcbiAgICB9O1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHZhciBUcmFuc2l0aW9uSG9vayA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVHJhbnNpdGlvbkhvb2sodHJhbnNpdGlvbiwgc3RhdGVDb250ZXh0LCByZWdpc3RlcmVkSG9vaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlQ29udGV4dCA9IHN0YXRlQ29udGV4dDtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkSG9vayA9IHJlZ2lzdGVyZWRIb29rO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICB0aGlzLmlzU3VwZXJzZWRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50eXBlLmhvb2tQaGFzZSA9PT0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLlJVTiAmJiAhX3RoaXMub3B0aW9ucy50cmFuc2l0aW9uLmlzQWN0aXZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gcmVnaXN0ZXJlZEhvb2suZXZlbnRUeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBUcmFuc2l0aW9uSG9vay5wcm90b3R5cGUubG9nRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbi5yb3V0ZXIuc3RhdGVTZXJ2aWNlLmRlZmF1bHRFcnJvckhhbmRsZXIoKShlcnIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmludm9rZUhvb2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBob29rID0gdGhpcy5yZWdpc3RlcmVkSG9vaztcclxuICAgICAgICAgICAgaWYgKGhvb2suX2RlcmVnaXN0ZXJlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgbm90Q3VycmVudCA9IHRoaXMuZ2V0Tm90Q3VycmVudFJlamVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAobm90Q3VycmVudCkgcmV0dXJuIG5vdEN1cnJlbnQ7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG4gICAgICAgICAgICB0cmFjZS50cmFjZUhvb2tJbnZvY2F0aW9uKHRoaXMsIHRoaXMudHJhbnNpdGlvbiwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBpbnZva2VDYWxsYmFjayA9IGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvb2suY2FsbGJhY2suY2FsbChvcHRpb25zLmJpbmQsIF90aGlzLnRyYW5zaXRpb24sIF90aGlzLnN0YXRlQ29udGV4dCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBub3JtYWxpemVFcnIgPSBmdW5jdGlvbiBub3JtYWxpemVFcnIoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRFcnJvckhhbmRsZXIoX3RoaXMpKGVycik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVSZXN1bHQgPSBmdW5jdGlvbiBoYW5kbGVSZXN1bHQocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG9vay5ldmVudFR5cGUuZ2V0UmVzdWx0SGFuZGxlcihfdGhpcykocmVzdWx0KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpbnZva2VDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuc3luY2hyb25vdXMgJiYgaXNQcm9taXNlKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNhdGNoKG5vcm1hbGl6ZUVycikudGhlbihoYW5kbGVSZXN1bHQsIGhhbmRsZUVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIGNhbGxiYWNrIHRocm93cyAoc3luY2hyb25vdXNseSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpO1xyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2suaW52b2tlTGltaXQgJiYgKytob29rLmludm9rZUNvdW50ID49IGhvb2suaW52b2tlTGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rLmRlcmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaGFuZGxlcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgVHJhbnNpdGlvbiBIb29rLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSBob29rIGNhbiByZXR1cm4gZmFsc2UgKGNhbmNlbCksIGEgVGFyZ2V0U3RhdGUgKHJlZGlyZWN0KSxcclxuICAgICAgICAgKiBvciBhIHByb21pc2UgKHdoaWNoIG1heSBsYXRlciByZXNvbHZlIHRvIGZhbHNlIG9yIGEgcmVkaXJlY3QpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGFsc28gaGFuZGxlcyBcInRyYW5zaXRpb24gc3VwZXJzZWRlZFwiIC0tIHdoZW4gYSBuZXcgdHJhbnNpdGlvblxyXG4gICAgICAgICAqIHdhcyBzdGFydGVkIHdoaWxlIHRoZSBob29rIHdhcyBzdGlsbCBydW5uaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmhhbmRsZUhvb2tSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBub3RDdXJyZW50ID0gdGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChub3RDdXJyZW50KSByZXR1cm4gbm90Q3VycmVudDtcclxuICAgICAgICAgICAgLy8gSG9vayByZXR1cm5lZCBhIHByb21pc2VcclxuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgcHJvbWlzZSwgdGhlbiByZXByb2Nlc3Mgd2l0aCB0aGUgcmVzdWx0aW5nIHZhbHVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHZhbCQkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVIb29rUmVzdWx0KHZhbCQkMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFjZS50cmFjZUhvb2tSZXN1bHQocmVzdWx0LCB0aGlzLnRyYW5zaXRpb24sIHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8vIEhvb2sgcmV0dXJuZWQgZmFsc2VcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoaXMgVHJhbnNpdGlvblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5hYm9ydGVkKFwiSG9vayBhYm9ydGVkIHRyYW5zaXRpb25cIikudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGlzVGFyZ2V0U3RhdGUgPSBpcyhUYXJnZXRTdGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIGhvb2sgcmV0dXJuZWQgYSBUYXJnZXRTdGF0ZVxyXG4gICAgICAgICAgICBpZiAoaXNUYXJnZXRTdGF0ZShyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYWx0IHRoZSBjdXJyZW50IFRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IChhIG5ldyBUcmFuc2l0aW9uKSB0byB0aGUgVGFyZ2V0U3RhdGUuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnJlZGlyZWN0ZWQocmVzdWx0KS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIGEgUmVqZWN0aW9uIHByb21pc2UgaWYgdGhlIHRyYW5zaXRpb24gaXMgbm8gbG9uZ2VyIGN1cnJlbnQgZHVlXHJcbiAgICAgICAgICogdG8gYSBzdG9wcGVkIHJvdXRlciAoZGlzcG9zZWQpLCBvciBhIG5ldyB0cmFuc2l0aW9uIGhhcyBzdGFydGVkIGFuZCBzdXBlcnNlZGVkIHRoaXMgb25lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5nZXROb3RDdXJyZW50UmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcm91dGVyID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlcjtcclxuICAgICAgICAgICAgLy8gVGhlIHJvdXRlciBpcyBzdG9wcGVkXHJcbiAgICAgICAgICAgIGlmIChyb3V0ZXIuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLmFib3J0ZWQoXCJVSVJvdXRlciBpbnN0YW5jZSAjXCIgKyByb3V0ZXIuJGlkICsgXCIgaGFzIGJlZW4gc3RvcHBlZCAoZGlzcG9zZWQpXCIpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb24uX2Fib3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudC5cclxuICAgICAgICAgICAgLy8gQW5vdGhlciB0cmFuc2l0aW9uIHN0YXJ0ZWQgd2hpbGUgdGhpcyBob29rIHdhcyBzdGlsbCBydW5uaW5nLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1N1cGVyc2VkZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhpcyB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQodGhpcy5vcHRpb25zLmN1cnJlbnQoKSkudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfYS5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZEhvb2sgPSBfYS5yZWdpc3RlcmVkSG9vaztcclxuICAgICAgICAgICAgdmFyIGV2ZW50ID0gcGFyc2UoXCJ0cmFjZURhdGEuaG9va1R5cGVcIikob3B0aW9ucykgfHwgXCJpbnRlcm5hbFwiLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dCA9IHBhcnNlKFwidHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZVwiKShvcHRpb25zKSB8fCBwYXJzZShcInRyYWNlRGF0YS5jb250ZXh0XCIpKG9wdGlvbnMpIHx8IFwidW5rbm93blwiLFxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGZuVG9TdHJpbmcocmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQgKyBcIiBjb250ZXh0OiBcIiArIGNvbnRleHQgKyBcIiwgXCIgKyBtYXhMZW5ndGgoMjAwLCBuYW1lKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoYWlucyB0b2dldGhlciBhbiBhcnJheSBvZiBUcmFuc2l0aW9uSG9va3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHaXZlbiBhIGxpc3Qgb2YgW1tUcmFuc2l0aW9uSG9va11dIG9iamVjdHMsIGNoYWlucyB0aGVtIHRvZ2V0aGVyLlxyXG4gICAgICAgICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGFmdGVyIHRoZSBwcmV2aW91cyBvbmUgY29tcGxldGVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdmFyIGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdID0gZ2V0SG9va3MoKTtcclxuICAgICAgICAgKiBsZXQgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gVHJhbnNpdGlvbkhvb2suY2hhaW4oaG9va3MpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogcHJvbWlzZS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBob29rcyB0byBjaGFpbiB0b2dldGhlclxyXG4gICAgICAgICAqIEBwYXJhbSB3YWl0Rm9yIGlmIHByb3ZpZGVkLCB0aGUgY2hhaW4gaXMgYC50aGVuKClgJ2VkIG9mZiB0aGlzIHByb21pc2VcclxuICAgICAgICAgKiBAcmV0dXJucyBhIGBQcm9taXNlYCBmb3Igc2VxdWVudGlhbGx5IGludm9raW5nIHRoZSBob29rcyAoaW4gb3JkZXIpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suY2hhaW4gPSBmdW5jdGlvbiAoaG9va3MsIHdhaXRGb3IpIHtcclxuICAgICAgICAgICAgLy8gQ2hhaW4gdGhlIG5leHQgaG9vayBvZmYgdGhlIHByZXZpb3VzXHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVIb29rQ2hhaW5SID0gZnVuY3Rpb24gY3JlYXRlSG9va0NoYWluUihwcmV2LCBuZXh0SG9vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXYudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRIb29rLmludm9rZUhvb2soKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gaG9va3MucmVkdWNlKGNyZWF0ZUhvb2tDaGFpblIsIHdhaXRGb3IgfHwgc2VydmljZXMuJHEud2hlbigpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEludm9rZXMgYWxsIHRoZSBwcm92aWRlZCBUcmFuc2l0aW9uSG9va3MsIGluIG9yZGVyLlxyXG4gICAgICAgICAqIEVhY2ggaG9vaydzIHJldHVybiB2YWx1ZSBpcyBjaGVja2VkLlxyXG4gICAgICAgICAqIElmIGFueSBob29rIHJldHVybnMgYSBwcm9taXNlLCB0aGVuIHRoZSByZXN0IG9mIHRoZSBob29rcyBhcmUgY2hhaW5lZCBvZmYgdGhhdCBwcm9taXNlLCBhbmQgdGhlIHByb21pc2UgaXMgcmV0dXJuZWQuXHJcbiAgICAgICAgICogSWYgbm8gaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlbiBhbGwgaG9va3MgYXJlIHByb2Nlc3NlZCBzeW5jaHJvbm91c2x5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGhvb2tzIHRoZSBsaXN0IG9mIFRyYW5zaXRpb25Ib29rcyB0byBpbnZva2VcclxuICAgICAgICAgKiBAcGFyYW0gZG9uZUNhbGxiYWNrIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIGFmdGVyIGFsbCB0aGUgaG9va3MgaGF2ZSBzdWNjZXNzZnVsbHkgY29tcGxldGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBhc3luYyByZXN1bHQsIG9yIHRoZSByZXN1bHQgb2YgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3MgPSBmdW5jdGlvbiAoaG9va3MsIGRvbmVDYWxsYmFjaykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBob29rcy5sZW5ndGg7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9va1Jlc3VsdCA9IGhvb2tzW2lkeF0uaW52b2tlSG9vaygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShob29rUmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdIb29rcyA9IGhvb2tzLnNsaWNlKGlkeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5jaGFpbihyZW1haW5pbmdIb29rcywgaG9va1Jlc3VsdCkudGhlbihkb25lQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkb25lQ2FsbGJhY2soKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJ1biBhbGwgVHJhbnNpdGlvbkhvb2tzLCBpZ25vcmluZyB0aGVpciByZXR1cm4gdmFsdWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2sucnVuQWxsSG9va3MgPSBmdW5jdGlvbiAoaG9va3MpIHtcclxuICAgICAgICAgICAgaG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvb2suaW52b2tlSG9vaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZXNlIEdldFJlc3VsdEhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcclxuICAgICAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRSZXN1bHRIYW5kbGVyIChTZWU6IFtbVHJhbnNpdGlvblNlcnZpY2UuX2RlZmluZUNvcmVFdmVudHNdXSlcclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUID0gZnVuY3Rpb24gKGhvb2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob29rLmhhbmRsZUhvb2tSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRoZSByZXN1bHQgaXMgYSBwcm9taXNlIHJlamVjdGlvbiwgbG9nIGl0LlxyXG4gICAgICAgICAqIE90aGVyd2lzZSwgaWdub3JlIHRoZSByZXN1bHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suTE9HX1JFSkVDVEVEX1JFU1VMVCA9IGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiByZXN1bHQuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob29rLmxvZ0Vycm9yKFJlamVjdGlvbi5ub3JtYWxpemUoZXJyKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGVzZSBHZXRFcnJvckhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcclxuICAgICAgICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRFcnJvckhhbmRsZXIgKFNlZTogW1tUcmFuc2l0aW9uU2VydmljZS5fZGVmaW5lQ29yZUV2ZW50c11dKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rLkxPR19FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob29rLmxvZ0Vycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zaXRpb25Ib29rLlJFSkVDVF9FUlJPUiA9IGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWxlbnRSZWplY3Rpb24oZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suVEhST1dfRVJST1IgPSBmdW5jdGlvbiAoaG9vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vaztcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHRyYW5zaXRpb25cclxuICAgICAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gc3RhdGUgbWF0Y2hlcyB0aGUgbWF0Y2hDcml0ZXJpYVxyXG4gICAgICpcclxuICAgICAqIEBoaWRkZW5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RhdGUgYSBTdGF0ZSBPYmplY3QgdG8gdGVzdCBhZ2FpbnN0XHJcbiAgICAgKiBAcGFyYW0gY3JpdGVyaW9uXHJcbiAgICAgKiAtIElmIGEgc3RyaW5nLCBtYXRjaFN0YXRlIHVzZXMgdGhlIHN0cmluZyBhcyBhIGdsb2ItbWF0Y2hlciBhZ2FpbnN0IHRoZSBzdGF0ZSBuYW1lXHJcbiAgICAgKiAtIElmIGFuIGFycmF5IChvZiBzdHJpbmdzKSwgbWF0Y2hTdGF0ZSB1c2VzIGVhY2ggc3RyaW5nIGluIHRoZSBhcnJheSBhcyBhIGdsb2ItbWF0Y2hlcnMgYWdhaW5zdCB0aGUgc3RhdGUgbmFtZVxyXG4gICAgICogICBhbmQgcmV0dXJucyBhIHBvc2l0aXZlIG1hdGNoIGlmIGFueSBvZiB0aGUgZ2xvYnMgbWF0Y2guXHJcbiAgICAgKiAtIElmIGEgZnVuY3Rpb24sIG1hdGNoU3RhdGUgY2FsbHMgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIHN0YXRlIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0IGlzIHRydXRoeS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBtYXRjaFN0YXRlKHN0YXRlLCBjcml0ZXJpb24pIHtcclxuICAgICAgICB2YXIgdG9NYXRjaCA9IGlzU3RyaW5nKGNyaXRlcmlvbikgPyBbY3JpdGVyaW9uXSA6IGNyaXRlcmlvbjtcclxuICAgICAgICBmdW5jdGlvbiBtYXRjaEdsb2JzKF9zdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZ2xvYlN0cmluZ3MgPSB0b01hdGNoO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdsb2JTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2xvYiA9IG5ldyBHbG9iKGdsb2JTdHJpbmdzW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChnbG9iICYmIGdsb2IubWF0Y2hlcyhfc3RhdGUubmFtZSkgfHwgIWdsb2IgJiYgZ2xvYlN0cmluZ3NbaV0gPT09IF9zdGF0ZS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWF0Y2hGbiA9IGlzRnVuY3Rpb24odG9NYXRjaCkgPyB0b01hdGNoIDogbWF0Y2hHbG9icztcclxuICAgICAgICByZXR1cm4gISFtYXRjaEZuKHN0YXRlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKiBUaGUgcmVnaXN0cmF0aW9uIGRhdGEgZm9yIGEgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tcclxuICAgICAqL1xyXG4gICAgdmFyIFJlZ2lzdGVyZWRIb29rID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBSZWdpc3RlcmVkSG9vayh0cmFuU3ZjLCBldmVudFR5cGUsIGNhbGxiYWNrLCBtYXRjaENyaXRlcmlhLCByZW1vdmVIb29rRnJvbVJlZ2lzdHJ5LCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRyYW5TdmMgPSB0cmFuU3ZjO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGNoQ3JpdGVyaWEgPSBtYXRjaENyaXRlcmlhO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkgPSByZW1vdmVIb29rRnJvbVJlZ2lzdHJ5O1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZUNvdW50ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fZGVyZWdpc3RlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdHkgPSBvcHRpb25zLnByaW9yaXR5IHx8IDA7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZCA9IG9wdGlvbnMuYmluZCB8fCBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZUxpbWl0ID0gb3B0aW9ucy5pbnZva2VMaW1pdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgbWF0Y2hpbmcgW1tQYXRoTm9kZV1dc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgW1tQYXRoTm9kZV1dcywgYW5kIGEgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSwgcmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nXHJcbiAgICAgICAgICogdGhlIFtbUGF0aE5vZGVdXXMgdGhhdCB0aGUgY3JpdGVyaWEgbWF0Y2hlcywgb3IgYG51bGxgIGlmIHRoZXJlIHdlcmUgbm8gbWF0Y2hpbmcgbm9kZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5pbmcgYG51bGxgIGlzIHNpZ25pZmljYW50IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gdGhlIGRlZmF1bHRcclxuICAgICAgICAgKiBcIm1hdGNoLWFsbCBjcml0ZXJpb24gdmFsdWVcIiBvZiBgdHJ1ZWAgY29tcGFyZWQgdG8gYSBgKCkgPT4gdHJ1ZWAgZnVuY3Rpb24sXHJcbiAgICAgICAgICogd2hlbiB0aGUgbm9kZXMgaXMgYW4gZW1wdHkgYXJyYXkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBhbGxvdyBhIHRyYW5zaXRpb24gbWF0Y2ggY3JpdGVyaWEgb2YgYGVudGVyaW5nOiB0cnVlYFxyXG4gICAgICAgICAqIHRvIHN0aWxsIG1hdGNoIGEgdHJhbnNpdGlvbiwgZXZlbiB3aGVuIGBlbnRlcmluZyA9PT0gW11gLiAgQ29udHJhc3QgdGhhdFxyXG4gICAgICAgICAqIHdpdGggYGVudGVyaW5nOiAoc3RhdGUpID0+IHRydWVgIHdoaWNoIG9ubHkgbWF0Y2hlcyB3aGVuIGEgc3RhdGUgaXMgYWN0dWFsbHlcclxuICAgICAgICAgKiBiZWluZyBlbnRlcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fbWF0Y2hpbmdOb2RlcyA9IGZ1bmN0aW9uIChub2RlcywgY3JpdGVyaW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChjcml0ZXJpb24gPT09IHRydWUpIHJldHVybiBub2RlcztcclxuICAgICAgICAgICAgdmFyIG1hdGNoaW5nID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hTdGF0ZShub2RlLnN0YXRlLCBjcml0ZXJpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nLmxlbmd0aCA/IG1hdGNoaW5nIDogbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgbWF0Y2ggY3JpdGVyaWEgKGFsbCBgdHJ1ZWApXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aGljaCBoYXMgYWxsIHRoZSBjcml0ZXJpYSBtYXRjaCBwYXRocyBhcyBrZXlzIGFuZCBgdHJ1ZWAgYXMgdmFsdWVzLCBpLmUuOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICB0bzogdHJ1ZSxcclxuICAgICAgICAgKiAgIGZyb206IHRydWUsXHJcbiAgICAgICAgICogICBlbnRlcmluZzogdHJ1ZSxcclxuICAgICAgICAgKiAgIGV4aXRpbmc6IHRydWUsXHJcbiAgICAgICAgICogICByZXRhaW5lZDogdHJ1ZSxcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUmVnaXN0ZXJlZEhvb2sucHJvdG90eXBlLl9nZXREZWZhdWx0TWF0Y2hDcml0ZXJpYSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcCh0aGlzLnRyYW5TdmMuX3BsdWdpbmFwaS5fZ2V0UGF0aFR5cGVzKCksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgbWF0Y2hpbmcgbm9kZXMgYXMgW1tJTWF0Y2hpbmdOb2Rlc11dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBDcmVhdGUgYSBJTWF0Y2hpbmdOb2RlcyBvYmplY3QgZnJvbSB0aGUgVHJhbnNpdGlvbkhvb2tUeXBlcyB0aGF0IGlzIHJvdWdobHkgZXF1aXZhbGVudCB0bzpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbGV0IG1hdGNoZXM6IElNYXRjaGluZ05vZGVzID0ge1xyXG4gICAgICAgICAqICAgdG86ICAgICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLnRvKV0sICAgbWMudG8pLFxyXG4gICAgICAgICAqICAgZnJvbTogICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLmZyb20pXSwgbWMuZnJvbSksXHJcbiAgICAgICAgICogICBleGl0aW5nOiAgX21hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMuZXhpdGluZywgICAgICBtYy5leGl0aW5nKSxcclxuICAgICAgICAgKiAgIHJldGFpbmVkOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5yZXRhaW5lZCwgICAgIG1jLnJldGFpbmVkKSxcclxuICAgICAgICAgKiAgIGVudGVyaW5nOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5lbnRlcmluZywgICAgIG1jLmVudGVyaW5nKSxcclxuICAgICAgICAgKiB9O1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5fZ2V0TWF0Y2hpbmdOb2RlcyA9IGZ1bmN0aW9uICh0cmVlQ2hhbmdlcykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgY3JpdGVyaWEgPSBleHRlbmQodGhpcy5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWEoKSwgdGhpcy5tYXRjaENyaXRlcmlhKTtcclxuICAgICAgICAgICAgdmFyIHBhdGhzID0gdmFsdWVzKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRocy5yZWR1Y2UoZnVuY3Rpb24gKG1uLCBwYXRodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU1RBVEUgc2NvcGUgY3JpdGVyaWEgbWF0Y2hlcyBhZ2FpbnN0IGV2ZXJ5IG5vZGUgaW4gdGhlIHBhdGguXHJcbiAgICAgICAgICAgICAgICAvLyBUUkFOU0lUSU9OIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBvbmx5IHRoZSBsYXN0IG5vZGUgaW4gdGhlIHBhdGhcclxuICAgICAgICAgICAgICAgIHZhciBpc1N0YXRlSG9vayA9IHBhdGh0eXBlLnNjb3BlID09PSBleHBvcnRzLlRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHRyZWVDaGFuZ2VzW3BhdGh0eXBlLm5hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gaXNTdGF0ZUhvb2sgPyBwYXRoIDogW3RhaWwocGF0aCldO1xyXG4gICAgICAgICAgICAgICAgbW5bcGF0aHR5cGUubmFtZV0gPSBfdGhpcy5fbWF0Y2hpbmdOb2Rlcyhub2RlcywgY3JpdGVyaWFbcGF0aHR5cGUubmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1uO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgaG9vaydzIFtbbWF0Y2hDcml0ZXJpYV1dIG1hdGNoIHRoZSBnaXZlbiBbW1RyZWVDaGFuZ2VzXV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGFuIElNYXRjaGluZ05vZGVzIG9iamVjdCwgb3IgbnVsbC4gSWYgYW4gSU1hdGNoaW5nTm9kZXMgb2JqZWN0IGlzIHJldHVybmVkLCBpdHMgdmFsdWVzXHJcbiAgICAgICAgICogYXJlIHRoZSBtYXRjaGluZyBbW1BhdGhOb2RlXV1zIGZvciBlYWNoIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gKHRvLCBmcm9tLCBleGl0aW5nLCByZXRhaW5lZCwgZW50ZXJpbmcpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUmVnaXN0ZXJlZEhvb2sucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAodHJlZUNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSB0aGlzLl9nZXRNYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzKTtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHRoZSBjcml0ZXJpYSBtYXRjaGVkIHRoZSBUcmVlQ2hhbmdlcyBvYmplY3RcclxuICAgICAgICAgICAgdmFyIGFsbE1hdGNoZWQgPSB2YWx1ZXMobWF0Y2hlcykuZXZlcnkoaWRlbnRpdHkpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWxsTWF0Y2hlZCA/IG1hdGNoZXMgOiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUmVnaXN0ZXJlZEhvb2sucHJvdG90eXBlLmRlcmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSG9va0Zyb21SZWdpc3RyeSh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVyZWdpc3RlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBSZWdpc3RlcmVkSG9vaztcclxuICAgIH0oKTtcclxuICAgIC8qKiBAaGlkZGVuIFJldHVybiBhIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBvZiB0aGUgcmVxdWVzdGVkIHR5cGUuICovXHJcbiAgICBmdW5jdGlvbiBtYWtlRXZlbnQocmVnaXN0cnksIHRyYW5zaXRpb25TZXJ2aWNlLCBldmVudFR5cGUpIHtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIG9iamVjdCB3aGljaCBob2xkcyB0aGUgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tzLlxyXG4gICAgICAgIHZhciBfcmVnaXN0ZXJlZEhvb2tzID0gcmVnaXN0cnkuX3JlZ2lzdGVyZWRIb29rcyA9IHJlZ2lzdHJ5Ll9yZWdpc3RlcmVkSG9va3MgfHwge307XHJcbiAgICAgICAgdmFyIGhvb2tzID0gX3JlZ2lzdGVyZWRIb29rc1tldmVudFR5cGUubmFtZV0gPSBbXTtcclxuICAgICAgICB2YXIgcmVtb3ZlSG9va0ZuID0gcmVtb3ZlRnJvbShob29rcyk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGhvb2sgcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIG9uIHRoZSBJSG9va1JlZ2lzdHJ5IGZvciB0aGUgZXZlbnRcclxuICAgICAgICByZWdpc3RyeVtldmVudFR5cGUubmFtZV0gPSBob29rUmVnaXN0cmF0aW9uRm47XHJcbiAgICAgICAgZnVuY3Rpb24gaG9va1JlZ2lzdHJhdGlvbkZuKG1hdGNoT2JqZWN0LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHJlZ2lzdGVyZWRIb29rID0gbmV3IFJlZ2lzdGVyZWRIb29rKHRyYW5zaXRpb25TZXJ2aWNlLCBldmVudFR5cGUsIGNhbGxiYWNrLCBtYXRjaE9iamVjdCwgcmVtb3ZlSG9va0ZuLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaG9va3MucHVzaChyZWdpc3RlcmVkSG9vayk7XHJcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RlcmVkSG9vay5kZXJlZ2lzdGVyLmJpbmQocmVnaXN0ZXJlZEhvb2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaG9va1JlZ2lzdHJhdGlvbkZuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgdHJhbnNpdGlvblxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGNsYXNzIHJldHVybnMgYXBwbGljYWJsZSBUcmFuc2l0aW9uSG9va3MgZm9yIGEgc3BlY2lmaWMgVHJhbnNpdGlvbiBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBIb29rcyAoW1tSZWdpc3RlcmVkSG9va11dKSBtYXkgYmUgcmVnaXN0ZXJlZCBnbG9iYWxseSwgZS5nLiwgJHRyYW5zaXRpb25zLm9uRW50ZXIoLi4uKSwgb3IgbG9jYWxseSwgZS5nLlxyXG4gICAgICogbXlUcmFuc2l0aW9uLm9uRW50ZXIoLi4uKS4gIFRoZSBIb29rQnVpbGRlciBmaW5kcyBtYXRjaGluZyBSZWdpc3RlcmVkSG9va3MgKHdoZXJlIHRoZSBtYXRjaCBjcml0ZXJpYSBpc1xyXG4gICAgICogZGV0ZXJtaW5lZCBieSB0aGUgdHlwZSBvZiBob29rKVxyXG4gICAgICpcclxuICAgICAqIFRoZSBIb29rQnVpbGRlciBhbHNvIGNvbnZlcnRzIFJlZ2lzdGVyZWRIb29rcyBvYmplY3RzIHRvIFRyYW5zaXRpb25Ib29rIG9iamVjdHMsIHdoaWNoIGFyZSB1c2VkIHRvIHJ1biBhIFRyYW5zaXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogVGhlIEhvb2tCdWlsZGVyIGNvbnN0cnVjdG9yIGlzIGdpdmVuIHRoZSAkdHJhbnNpdGlvbnMgc2VydmljZSBhbmQgYSBUcmFuc2l0aW9uIGluc3RhbmNlLiAgVGh1cywgYSBIb29rQnVpbGRlclxyXG4gICAgICogaW5zdGFuY2UgbWF5IG9ubHkgYmUgdXNlZCBmb3Igb25lIHNwZWNpZmljIFRyYW5zaXRpb24gb2JqZWN0LiAoc2lkZSBub3RlOiB0aGUgX3RyZWVDaGFuZ2VzIGFjY2Vzc29yIGlzIHByaXZhdGVcclxuICAgICAqIGluIHRoZSBUcmFuc2l0aW9uIGNsYXNzLCBzbyB3ZSBtdXN0IGFsc28gcHJvdmlkZSB0aGUgVHJhbnNpdGlvbidzIF90cmVlQ2hhbmdlcylcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHZhciBIb29rQnVpbGRlciA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gSG9va0J1aWxkZXIodHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuYnVpbGRIb29rc0ZvclBoYXNlID0gZnVuY3Rpb24gKHBoYXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xyXG4gICAgICAgICAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGkuX2dldEV2ZW50cyhwaGFzZSkubWFwKGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYnVpbGRIb29rcyh0eXBlKTtcclxuICAgICAgICAgICAgfSkucmVkdWNlKHVubmVzdFIsIFtdKS5maWx0ZXIoaWRlbnRpdHkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBuZXdseSBidWlsdCBUcmFuc2l0aW9uSG9vayBvYmplY3RzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLSBGaW5kcyBhbGwgUmVnaXN0ZXJlZEhvb2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBnaXZlbiBgaG9va1R5cGVgIHdoaWNoIG1hdGNoZWQgdGhlIHRyYW5zaXRpb24ncyBbW1RyZWVDaGFuZ2VzXV0uXHJcbiAgICAgICAgICogLSBGaW5kcyBbW1BhdGhOb2RlXV0gKG9yIGBQYXRoTm9kZVtdYCkgdG8gdXNlIGFzIHRoZSBUcmFuc2l0aW9uSG9vayBjb250ZXh0KHMpXHJcbiAgICAgICAgICogLSBGb3IgZWFjaCBvZiB0aGUgW1tQYXRoTm9kZV1dcywgY3JlYXRlcyBhIFRyYW5zaXRpb25Ib29rXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaG9va1R5cGUgdGhlIHR5cGUgb2YgdGhlIGhvb2sgcmVnaXN0cmF0aW9uIGZ1bmN0aW9uLCBlLmcuLCAnb25FbnRlcicsICdvbkZpbmlzaCcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgSG9va0J1aWxkZXIucHJvdG90eXBlLmJ1aWxkSG9va3MgPSBmdW5jdGlvbiAoaG9va1R5cGUpIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIHZhciB0cmVlQ2hhbmdlcyA9IHRyYW5zaXRpb24udHJlZUNoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy8gRmluZCBhbGwgdGhlIG1hdGNoaW5nIHJlZ2lzdGVyZWQgaG9va3MgZm9yIGEgZ2l2ZW4gaG9vayB0eXBlXHJcbiAgICAgICAgICAgIHZhciBtYXRjaGluZ0hvb2tzID0gdGhpcy5nZXRNYXRjaGluZ0hvb2tzKGhvb2tUeXBlLCB0cmVlQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2hpbmdIb29rcykgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICB2YXIgYmFzZUhvb2tPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHRyYW5zaXRpb24ub3B0aW9ucygpLmN1cnJlbnRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIG1ha2VUcmFuc2l0aW9uSG9va3MgPSBmdW5jdGlvbiBtYWtlVHJhbnNpdGlvbkhvb2tzKGhvb2spIHtcclxuICAgICAgICAgICAgICAgIC8vIEZldGNoIHRoZSBOb2RlcyB0aGF0IGNhdXNlZCB0aGlzIGhvb2sgdG8gbWF0Y2guXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IGhvb2subWF0Y2hlcyh0cmVlQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgdGhlIFBhdGhOb2RlW10gdGhhdCB3aWxsIGJlIHVzZWQgYXMgVHJhbnNpdGlvbkhvb2sgY29udGV4dCBvYmplY3RzXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmdOb2RlcyA9IG1hdGNoZXNbaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGgubmFtZV07XHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gYW4gYXJyYXkgb2YgSG9va1R1cGxlc1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9vcHRpb25zID0gZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZDogaG9vay5iaW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjZURhdGE6IHsgaG9va1R5cGU6IGhvb2tUeXBlLm5hbWUsIGNvbnRleHQ6IG5vZGUgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGJhc2VIb29rT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGguc2NvcGUgPT09IGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSA/IG5vZGUuc3RhdGUuc2VsZiA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25Ib29rID0gbmV3IFRyYW5zaXRpb25Ib29rKHRyYW5zaXRpb24sIHN0YXRlLCBob29rLCBfb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaG9vazogaG9vaywgbm9kZTogbm9kZSwgdHJhbnNpdGlvbkhvb2s6IHRyYW5zaXRpb25Ib29rIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nSG9va3MubWFwKG1ha2VUcmFuc2l0aW9uSG9va3MpLnJlZHVjZSh1bm5lc3RSLCBbXSkuc29ydCh0dXBsZVNvcnQoaG9va1R5cGUucmV2ZXJzZVNvcnQpKS5tYXAoZnVuY3Rpb24gKHR1cGxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHVwbGUudHJhbnNpdGlvbkhvb2s7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyBmcm9tOlxyXG4gICAgICAgICAqIC0gVGhlIFRyYW5zaXRpb24gb2JqZWN0IGluc3RhbmNlIGhvb2sgcmVnaXN0cnlcclxuICAgICAgICAgKiAtIFRoZSBUcmFuc2l0aW9uU2VydmljZSAoJHRyYW5zaXRpb25zKSBnbG9iYWwgaG9vayByZWdpc3RyeVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogd2hpY2ggbWF0Y2hlZDpcclxuICAgICAgICAgKiAtIHRoZSBldmVudFR5cGVcclxuICAgICAgICAgKiAtIHRoZSBtYXRjaENyaXRlcmlhICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgbWF0Y2hlZCBbW1JlZ2lzdGVyZWRIb29rXV1zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgSG9va0J1aWxkZXIucHJvdG90eXBlLmdldE1hdGNoaW5nSG9va3MgPSBmdW5jdGlvbiAoaG9va1R5cGUsIHRyZWVDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHZhciBpc0NyZWF0ZSA9IGhvb2tUeXBlLmhvb2tQaGFzZSA9PT0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURTtcclxuICAgICAgICAgICAgLy8gSW5zdGFuY2UgYW5kIEdsb2JhbCBob29rIHJlZ2lzdHJpZXNcclxuICAgICAgICAgICAgdmFyICR0cmFuc2l0aW9ucyA9IHRoaXMudHJhbnNpdGlvbi5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyaWVzID0gaXNDcmVhdGUgPyBbJHRyYW5zaXRpb25zXSA6IFt0aGlzLnRyYW5zaXRpb24sICR0cmFuc2l0aW9uc107XHJcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RyaWVzLm1hcChmdW5jdGlvbiAocmVnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVnLmdldEhvb2tzKGhvb2tUeXBlLm5hbWUpO1xyXG4gICAgICAgICAgICB9KSAvLyBHZXQgbmFtZWQgaG9va3MgZnJvbSByZWdpc3RyaWVzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzQXJyYXksIFwiYnJva2VuIGV2ZW50IG5hbWVkOiBcIiArIGhvb2tUeXBlLm5hbWUpKSAvLyBTYW5pdHkgY2hlY2tcclxuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gVW4tbmVzdCBSZWdpc3RlcmVkSG9va1tdW10gdG8gUmVnaXN0ZXJlZEhvb2tbXSBhcnJheVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTtcclxuICAgICAgICAgICAgfSk7IC8vIE9ubHkgdGhvc2Ugc2F0aXNmeWluZyBtYXRjaENyaXRlcmlhXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gSG9va0J1aWxkZXI7XHJcbiAgICB9KCk7XHJcbiAgICAvKipcclxuICAgICAqIEEgZmFjdG9yeSBmb3IgYSBzb3J0IGZ1bmN0aW9uIGZvciBIb29rVHVwbGVzLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBzb3J0IGZ1bmN0aW9uIGZpcnN0IGNvbXBhcmVzIHRoZSBQYXRoTm9kZSBkZXB0aCAoaG93IGRlZXAgaW4gdGhlIHN0YXRlIHRyZWUgYSBub2RlIGlzKSwgdGhlbiBjb21wYXJlc1xyXG4gICAgICogdGhlIEV2ZW50SG9vayBwcmlvcml0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmV2ZXJzZURlcHRoU29ydCBhIGJvb2xlYW4sIHdoZW4gdHJ1ZSwgcmV2ZXJzZXMgdGhlIHNvcnQgb3JkZXIgZm9yIHRoZSBub2RlIGRlcHRoXHJcbiAgICAgKiBAcmV0dXJucyBhIHR1cGxlIHNvcnQgZnVuY3Rpb25cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdHVwbGVTb3J0KHJldmVyc2VEZXB0aFNvcnQpIHtcclxuICAgICAgICBpZiAocmV2ZXJzZURlcHRoU29ydCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIHJldmVyc2VEZXB0aFNvcnQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVEZXB0aFRoZW5Qcmlvcml0eShsLCByKSB7XHJcbiAgICAgICAgICAgIHZhciBmYWN0b3IgPSByZXZlcnNlRGVwdGhTb3J0ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICB2YXIgZGVwdGhEZWx0YSA9IChsLm5vZGUuc3RhdGUucGF0aC5sZW5ndGggLSByLm5vZGUuc3RhdGUucGF0aC5sZW5ndGgpICogZmFjdG9yO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVwdGhEZWx0YSAhPT0gMCA/IGRlcHRoRGVsdGEgOiByLmhvb2sucHJpb3JpdHkgLSBsLmhvb2sucHJpb3JpdHk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHBhcmFtc1xyXG4gICAgICovXHJcbiAgICAvKiogKi9cclxuICAgIC8qKlxyXG4gICAgICogQW4gaW50ZXJuYWwgY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1BhcmFtVHlwZURlZmluaXRpb25dXS5cclxuICAgICAqXHJcbiAgICAgKiBBIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGlzIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdXNlZCB0byByZWdpc3RlciBjdXN0b20gcGFyYW1ldGVyIHR5cGVzLlxyXG4gICAgICogV2hlbiBhIHBhcmFtIHR5cGUgZGVmaW5pdGlvbiBpcyByZWdpc3RlcmVkLCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGNyZWF0ZWQgaW50ZXJuYWxseS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNsYXNzIGhhcyBuYWl2ZSBpbXBsZW1lbnRhdGlvbnMgZm9yIGFsbCB0aGUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gbWV0aG9kcy5cclxuICAgICAqXHJcbiAgICAgKiBVc2VkIGJ5IFtbVXJsTWF0Y2hlcl1dIHdoZW4gbWF0Y2hpbmcgb3IgZm9ybWF0dGluZyBVUkxzLCBvciBjb21wYXJpbmcgYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcy5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogdmFyIHBhcmFtVHlwZURlZiA9IHtcclxuICAgICAqICAgZGVjb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApOyB9LFxyXG4gICAgICogICBlbmNvZGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsICYmIHZhbC50b1N0cmluZygpOyB9LFxyXG4gICAgICogICBlcXVhbHM6IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHRoaXMuaXMoYSkgJiYgYSA9PT0gYjsgfSxcclxuICAgICAqICAgaXM6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gYW5ndWxhci5pc051bWJlcih2YWwpICYmIGlzRmluaXRlKHZhbCkgJiYgdmFsICUgMSA9PT0gMDsgfSxcclxuICAgICAqICAgcGF0dGVybjogL1xcZCsvXHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogdmFyIHBhcmFtVHlwZSA9IG5ldyBQYXJhbVR5cGUocGFyYW1UeXBlRGVmKTtcclxuICAgICAqIGBgYFxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKi9cclxuICAgIHZhciBQYXJhbVR5cGUgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZWYgIEEgY29uZmlndXJhdGlvbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgdGhlIGN1c3RvbSB0eXBlIGRlZmluaXRpb24uICBUaGUgb2JqZWN0J3NcclxuICAgICAgICAgKiAgICAgICAgcHJvcGVydGllcyB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG1ldGhvZHMgYW5kL29yIHBhdHRlcm4gaW4gYFBhcmFtVHlwZWAncyBwdWJsaWMgaW50ZXJmYWNlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgbmV3IFBhcmFtVHlwZSBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBQYXJhbVR5cGUoZGVmKSB7XHJcbiAgICAgICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgICAgICB0aGlzLnBhdHRlcm4gPSAvLiovO1xyXG4gICAgICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICAgICAgdGhpcy5pbmhlcml0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGRlZik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNpZGVyIHRoZXNlIGZvdXIgbWV0aG9kcyB0byBiZSBcImFic3RyYWN0IG1ldGhvZHNcIiB0aGF0IHNob3VsZCBiZSBvdmVycmlkZGVuXHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgUGFyYW1UeXBlLnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uICh2YWwsIGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBQYXJhbVR5cGUucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uICh2YWwsIGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgUGFyYW1UeXBlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYSA9PSBiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kc3ViUGF0dGVybiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YiA9IHRoaXMucGF0dGVybi50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3ViLnN1YnN0cigxLCBzdWIubGVuZ3RoIC0gMik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBQYXJhbVR5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ7UGFyYW1UeXBlOlwiICsgdGhpcy5uYW1lICsgXCJ9XCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogR2l2ZW4gYW4gZW5jb2RlZCBzdHJpbmcsIG9yIGEgZGVjb2RlZCBvYmplY3QsIHJldHVybnMgYSBkZWNvZGVkIG9iamVjdCAqL1xyXG4gICAgICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuJG5vcm1hbGl6ZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXModmFsKSA/IHZhbCA6IHRoaXMuZGVjb2RlKHZhbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXcmFwcyBhbiBleGlzdGluZyBjdXN0b20gUGFyYW1UeXBlIGFzIGFuIGFycmF5IG9mIFBhcmFtVHlwZSwgZGVwZW5kaW5nIG9uICdtb2RlJy5cclxuICAgICAgICAgKiBlLmcuOlxyXG4gICAgICAgICAqIC0gdXJsbWF0Y2hlciBwYXR0ZXJuIFwiL3BhdGg/e3F1ZXJ5UGFyYW1bXTppbnR9XCJcclxuICAgICAgICAgKiAtIHVybDogXCIvcGF0aD9xdWVyeVBhcmFtPTEmcXVlcnlQYXJhbT0yXHJcbiAgICAgICAgICogLSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbSB3aWxsIGJlIFsxLCAyXVxyXG4gICAgICAgICAqIGlmIGBtb2RlYCBpcyBcImF1dG9cIiwgdGhlblxyXG4gICAgICAgICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogMVxyXG4gICAgICAgICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSZxdWVyeVBhcmFtPTIgd2lsbCBjcmVhdGUgJHN0YXRlUGFyYW1zLnF1ZXJ5UGFyYW06IFsxLCAyXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuJGFzQXJyYXkgPSBmdW5jdGlvbiAobW9kZSwgaXNTZWFyY2gpIHtcclxuICAgICAgICAgICAgaWYgKCFtb2RlKSByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09IFwiYXV0b1wiICYmICFpc1NlYXJjaCkgdGhyb3cgbmV3IEVycm9yKFwiJ2F1dG8nIGFycmF5IG1vZGUgaXMgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMgb25seVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheVR5cGUodGhpcywgbW9kZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUGFyYW1UeXBlO1xyXG4gICAgfSgpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcyB1cCBhIGBQYXJhbVR5cGVgIG9iamVjdCB0byBoYW5kbGUgYXJyYXkgdmFsdWVzLlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEFycmF5VHlwZSh0eXBlLCBtb2RlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBXcmFwIG5vbi1hcnJheSB2YWx1ZSBhcyBhcnJheVxyXG4gICAgICAgIGZ1bmN0aW9uIGFycmF5V3JhcCh2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzQXJyYXkodmFsKSA/IHZhbCA6IGlzRGVmaW5lZCh2YWwpID8gW3ZhbF0gOiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVW53cmFwIGFycmF5IHZhbHVlIGZvciBcImF1dG9cIiBtb2RlLiBSZXR1cm4gdW5kZWZpbmVkIGZvciBlbXB0eSBhcnJheS5cclxuICAgICAgICBmdW5jdGlvbiBhcnJheVVud3JhcCh2YWwpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh2YWwubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZSA9PT0gXCJhdXRvXCIgPyB2YWxbMF0gOiB2YWw7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV3JhcHMgdHlwZSAoLmlzLy5lbmNvZGUvLmRlY29kZSkgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxyXG4gICAgICAgIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjaywgYWxsVHJ1dGh5TW9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGggPT09IDApIHJldHVybiB2YWw7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gYXJyYXlXcmFwKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbWFwKGFyciwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbFRydXRoeU1vZGUgPT09IHRydWUgPyBmaWx0ZXIocmVzdWx0LCBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAheDtcclxuICAgICAgICAgICAgICAgIH0pLmxlbmd0aCA9PT0gMCA6IGFycmF5VW53cmFwKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdyYXBzIHR5cGUgKC5lcXVhbHMpIGZ1bmN0aW9ucyB0byBvcGVyYXRlIG9uIGVhY2ggdmFsdWUgb2YgYW4gYXJyYXlcclxuICAgICAgICBmdW5jdGlvbiBhcnJheUVxdWFsc0hhbmRsZXIoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUFycmF5KHZhbDEsIHZhbDIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gYXJyYXlXcmFwKHZhbDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gYXJyYXlXcmFwKHZhbDIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVmdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2sobGVmdFtpXSwgcmlnaHRbaV0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgWydlbmNvZGUnLCAnZGVjb2RlJywgJ2VxdWFscycsICckbm9ybWFsaXplJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1UeXBlRm4gPSB0eXBlW25hbWVdLmJpbmQodHlwZSk7XHJcbiAgICAgICAgICAgIHZhciB3cmFwcGVyRm4gPSBuYW1lID09PSAnZXF1YWxzJyA/IGFycmF5RXF1YWxzSGFuZGxlciA6IGFycmF5SGFuZGxlcjtcclxuICAgICAgICAgICAgX3RoaXNbbmFtZV0gPSB3cmFwcGVyRm4ocGFyYW1UeXBlRm4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLCB7XHJcbiAgICAgICAgICAgIGR5bmFtaWM6IHR5cGUuZHluYW1pYyxcclxuICAgICAgICAgICAgbmFtZTogdHlwZS5uYW1lLFxyXG4gICAgICAgICAgICBwYXR0ZXJuOiB0eXBlLnBhdHRlcm4sXHJcbiAgICAgICAgICAgIGluaGVyaXQ6IHR5cGUuaW5oZXJpdCxcclxuICAgICAgICAgICAgaXM6IGFycmF5SGFuZGxlcih0eXBlLmlzLmJpbmQodHlwZSksIHRydWUpLFxyXG4gICAgICAgICAgICAkYXJyYXlNb2RlOiBtb2RlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSBwYXJhbXNcclxuICAgICAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKiBAaGlkZGVuICovdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XHJcbiAgICAvKiogQGhpZGRlbiAqL3ZhciBpc1Nob3J0aGFuZCA9IGZ1bmN0aW9uIGlzU2hvcnRoYW5kKGNmZykge1xyXG4gICAgICAgIHJldHVybiBbXCJ2YWx1ZVwiLCBcInR5cGVcIiwgXCJzcXVhc2hcIiwgXCJhcnJheVwiLCBcImR5bmFtaWNcIl0uZmlsdGVyKGhhc093bi5iaW5kKGNmZyB8fCB7fSkpLmxlbmd0aCA9PT0gMDtcclxuICAgIH07XHJcbiAgICAvKiogQGludGVybmFsYXBpICovXHJcblxyXG4gICAgKGZ1bmN0aW9uIChEZWZUeXBlKSB7XHJcbiAgICAgICAgRGVmVHlwZVtEZWZUeXBlW1wiUEFUSFwiXSA9IDBdID0gXCJQQVRIXCI7XHJcbiAgICAgICAgRGVmVHlwZVtEZWZUeXBlW1wiU0VBUkNIXCJdID0gMV0gPSBcIlNFQVJDSFwiO1xyXG4gICAgICAgIERlZlR5cGVbRGVmVHlwZVtcIkNPTkZJR1wiXSA9IDJdID0gXCJDT05GSUdcIjtcclxuICAgIH0pKGV4cG9ydHMuRGVmVHlwZSB8fCAoZXhwb3J0cy5EZWZUeXBlID0ge30pKTtcclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBmdW5jdGlvbiB1bndyYXBTaG9ydGhhbmQoY2ZnKSB7XHJcbiAgICAgICAgY2ZnID0gaXNTaG9ydGhhbmQoY2ZnKSAmJiB7IHZhbHVlOiBjZmcgfSB8fCBjZmc7XHJcbiAgICAgICAgZ2V0U3RhdGljRGVmYXVsdFZhbHVlWydfX2NhY2hlYWJsZSddID0gdHJ1ZTtcclxuICAgICAgICBmdW5jdGlvbiBnZXRTdGF0aWNEZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjZmcudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleHRlbmQoY2ZnLCB7XHJcbiAgICAgICAgICAgICQkZm46IGlzSW5qZWN0YWJsZShjZmcudmFsdWUpID8gY2ZnLnZhbHVlIDogZ2V0U3RhdGljRGVmYXVsdFZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0VHlwZShjZmcsIHVybFR5cGUsIGxvY2F0aW9uLCBpZCwgcGFyYW1UeXBlcykge1xyXG4gICAgICAgIGlmIChjZmcudHlwZSAmJiB1cmxUeXBlICYmIHVybFR5cGUubmFtZSAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcihcIlBhcmFtICdcIiArIGlkICsgXCInIGhhcyB0d28gdHlwZSBjb25maWd1cmF0aW9ucy5cIik7XHJcbiAgICAgICAgaWYgKGNmZy50eXBlICYmIHVybFR5cGUgJiYgdXJsVHlwZS5uYW1lID09PSAnc3RyaW5nJyAmJiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUpKSByZXR1cm4gcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKTtcclxuICAgICAgICBpZiAodXJsVHlwZSkgcmV0dXJuIHVybFR5cGU7XHJcbiAgICAgICAgaWYgKCFjZmcudHlwZSkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuQ09ORklHID8gXCJhbnlcIiA6IGxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuUEFUSCA/IFwicGF0aFwiIDogbG9jYXRpb24gPT09IGV4cG9ydHMuRGVmVHlwZS5TRUFSQ0ggPyBcInF1ZXJ5XCIgOiBcInN0cmluZ1wiO1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1UeXBlcy50eXBlKHR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2ZnLnR5cGUgaW5zdGFuY2VvZiBQYXJhbVR5cGUgPyBjZmcudHlwZSA6IHBhcmFtVHlwZXMudHlwZShjZmcudHlwZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICogcmV0dXJucyBmYWxzZSwgdHJ1ZSwgb3IgdGhlIHNxdWFzaCB2YWx1ZSB0byBpbmRpY2F0ZSB0aGUgXCJkZWZhdWx0IHBhcmFtZXRlciB1cmwgc3F1YXNoIHBvbGljeVwiLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRTcXVhc2hQb2xpY3koY29uZmlnLCBpc09wdGlvbmFsLCBkZWZhdWx0UG9saWN5KSB7XHJcbiAgICAgICAgdmFyIHNxdWFzaCA9IGNvbmZpZy5zcXVhc2g7XHJcbiAgICAgICAgaWYgKCFpc09wdGlvbmFsIHx8IHNxdWFzaCA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoIWlzRGVmaW5lZChzcXVhc2gpIHx8IHNxdWFzaCA9PSBudWxsKSByZXR1cm4gZGVmYXVsdFBvbGljeTtcclxuICAgICAgICBpZiAoc3F1YXNoID09PSB0cnVlIHx8IGlzU3RyaW5nKHNxdWFzaCkpIHJldHVybiBzcXVhc2g7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcXVhc2ggcG9saWN5OiAnXCIgKyBzcXVhc2ggKyBcIicuIFZhbGlkIHBvbGljaWVzOiBmYWxzZSwgdHJ1ZSwgb3IgYXJiaXRyYXJ5IHN0cmluZ1wiKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgIGZ1bmN0aW9uIGdldFJlcGxhY2UoY29uZmlnLCBhcnJheU1vZGUsIGlzT3B0aW9uYWwsIHNxdWFzaCkge1xyXG4gICAgICAgIHZhciByZXBsYWNlLFxyXG4gICAgICAgICAgICBjb25maWd1cmVkS2V5cyxcclxuICAgICAgICAgICAgZGVmYXVsdFBvbGljeSA9IFt7IGZyb206IFwiXCIsIHRvOiBpc09wdGlvbmFsIHx8IGFycmF5TW9kZSA/IHVuZGVmaW5lZCA6IFwiXCIgfSwgeyBmcm9tOiBudWxsLCB0bzogaXNPcHRpb25hbCB8fCBhcnJheU1vZGUgPyB1bmRlZmluZWQgOiBcIlwiIH1dO1xyXG4gICAgICAgIHJlcGxhY2UgPSBpc0FycmF5KGNvbmZpZy5yZXBsYWNlKSA/IGNvbmZpZy5yZXBsYWNlIDogW107XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHNxdWFzaCkpIHJlcGxhY2UucHVzaCh7IGZyb206IHNxdWFzaCwgdG86IHVuZGVmaW5lZCB9KTtcclxuICAgICAgICBjb25maWd1cmVkS2V5cyA9IG1hcChyZXBsYWNlLCBwcm9wKFwiZnJvbVwiKSk7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcihkZWZhdWx0UG9saWN5LCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlndXJlZEtleXMuaW5kZXhPZihpdGVtLmZyb20pID09PSAtMTtcclxuICAgICAgICB9KS5jb25jYXQocmVwbGFjZSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICB2YXIgUGFyYW0gPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFBhcmFtKGlkLCB0eXBlLCBjb25maWcsIGxvY2F0aW9uLCB1cmxNYXRjaGVyRmFjdG9yeSkge1xyXG4gICAgICAgICAgICBjb25maWcgPSB1bndyYXBTaG9ydGhhbmQoY29uZmlnKTtcclxuICAgICAgICAgICAgdHlwZSA9IGdldFR5cGUoY29uZmlnLCB0eXBlLCBsb2NhdGlvbiwgaWQsIHVybE1hdGNoZXJGYWN0b3J5LnBhcmFtVHlwZXMpO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlNb2RlID0gZ2V0QXJyYXlNb2RlKCk7XHJcbiAgICAgICAgICAgIHR5cGUgPSBhcnJheU1vZGUgPyB0eXBlLiRhc0FycmF5KGFycmF5TW9kZSwgbG9jYXRpb24gPT09IGV4cG9ydHMuRGVmVHlwZS5TRUFSQ0gpIDogdHlwZTtcclxuICAgICAgICAgICAgdmFyIGlzT3B0aW9uYWwgPSBjb25maWcudmFsdWUgIT09IHVuZGVmaW5lZCB8fCBsb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSDtcclxuICAgICAgICAgICAgdmFyIGR5bmFtaWMgPSBpc0RlZmluZWQoY29uZmlnLmR5bmFtaWMpID8gISFjb25maWcuZHluYW1pYyA6ICEhdHlwZS5keW5hbWljO1xyXG4gICAgICAgICAgICB2YXIgcmF3ID0gaXNEZWZpbmVkKGNvbmZpZy5yYXcpID8gISFjb25maWcucmF3IDogISF0eXBlLnJhdztcclxuICAgICAgICAgICAgdmFyIHNxdWFzaCA9IGdldFNxdWFzaFBvbGljeShjb25maWcsIGlzT3B0aW9uYWwsIHVybE1hdGNoZXJGYWN0b3J5LmRlZmF1bHRTcXVhc2hQb2xpY3koKSk7XHJcbiAgICAgICAgICAgIHZhciByZXBsYWNlID0gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKTtcclxuICAgICAgICAgICAgdmFyIGluaGVyaXQkJDEgPSBpc0RlZmluZWQoY29uZmlnLmluaGVyaXQpID8gISFjb25maWcuaW5oZXJpdCA6ICEhdHlwZS5pbmhlcml0O1xyXG4gICAgICAgICAgICAvLyBhcnJheSBjb25maWc6IHBhcmFtIG5hbWUgKHBhcmFtW10pIG92ZXJyaWRlcyBkZWZhdWx0IHNldHRpbmdzLiAgZXhwbGljaXQgY29uZmlnIG92ZXJyaWRlcyBwYXJhbSBuYW1lLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRBcnJheU1vZGUoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXlEZWZhdWx0cyA9IHsgYXJyYXk6IGxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuU0VBUkNIID8gXCJhdXRvXCIgOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUgPSBpZC5tYXRjaCgvXFxbXFxdJC8pID8geyBhcnJheTogdHJ1ZSB9IDoge307XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKGFycmF5RGVmYXVsdHMsIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUsIGNvbmZpZykuYXJyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHsgaWQ6IGlkLCB0eXBlOiB0eXBlLCBsb2NhdGlvbjogbG9jYXRpb24sIGlzT3B0aW9uYWw6IGlzT3B0aW9uYWwsIGR5bmFtaWM6IGR5bmFtaWMsIHJhdzogcmF3LCBzcXVhc2g6IHNxdWFzaCwgcmVwbGFjZTogcmVwbGFjZSwgaW5oZXJpdDogaW5oZXJpdCQkMSwgYXJyYXk6IGFycmF5TW9kZSwgY29uZmlnOiBjb25maWcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBhcmFtLnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBbSW50ZXJuYWxdIEdldHMgdGhlIGRlY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgZGVmaW5lZCwgb3RoZXJ3aXNlLCByZXR1cm5zIHRoZVxyXG4gICAgICAgICAqIGRlZmF1bHQgdmFsdWUsIHdoaWNoIG1heSBiZSB0aGUgcmVzdWx0IG9mIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUGFyYW0ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9kZWZhdWx0VmFsdWVDYWNoZSkgcmV0dXJuIF90aGlzLl9kZWZhdWx0VmFsdWVDYWNoZS5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlcnZpY2VzLiRpbmplY3RvcikgdGhyb3cgbmV3IEVycm9yKFwiSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWVcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gc2VydmljZXMuJGluamVjdG9yLmludm9rZShfdGhpcy5jb25maWcuJCRmbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICFfdGhpcy50eXBlLmlzKGRlZmF1bHRWYWx1ZSkpIHRocm93IG5ldyBFcnJvcihcIkRlZmF1bHQgdmFsdWUgKFwiICsgZGVmYXVsdFZhbHVlICsgXCIpIGZvciBwYXJhbWV0ZXIgJ1wiICsgX3RoaXMuaWQgKyBcIicgaXMgbm90IGFuIGluc3RhbmNlIG9mIFBhcmFtVHlwZSAoXCIgKyBfdGhpcy50eXBlLm5hbWUgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLiQkZm5bJ19fY2FjaGVhYmxlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZGVmYXVsdFZhbHVlQ2FjaGUgPSB7IGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcmVwbGFjZVNwZWNpYWxWYWx1ZXMgPSBmdW5jdGlvbiByZXBsYWNlU3BlY2lhbFZhbHVlcyh2YWwkJDEpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5yZXBsYWNlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0dXBsZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHVwbGUuZnJvbSA9PT0gdmFsJCQxKSByZXR1cm4gdHVwbGUudG87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsJCQxO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlcGxhY2VTcGVjaWFsVmFsdWVzKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzVW5kZWZpbmVkKHZhbHVlKSA/IGdldERlZmF1bHRWYWx1ZSgpIDogdGhpcy50eXBlLiRub3JtYWxpemUodmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUGFyYW0ucHJvdG90eXBlLmlzU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFBhcmFtLnByb3RvdHlwZS52YWxpZGF0ZXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgd2FzIG5vIHBhcmFtZXRlciB2YWx1ZSwgYnV0IHRoZSBwYXJhbSBpcyBvcHRpb25hbFxyXG4gICAgICAgICAgICBpZiAoKGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbCkgJiYgdGhpcy5pc09wdGlvbmFsKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gVGhlIHZhbHVlIHdhcyBub3Qgb2YgdGhlIGNvcnJlY3QgUGFyYW1UeXBlLCBhbmQgY291bGQgbm90IGJlIGRlY29kZWQgdG8gdGhlIGNvcnJlY3QgUGFyYW1UeXBlXHJcbiAgICAgICAgICAgIHZhciBub3JtYWxpemVkID0gdGhpcy50eXBlLiRub3JtYWxpemUodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudHlwZS5pcyhub3JtYWxpemVkKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBUaGUgdmFsdWUgd2FzIG9mIHRoZSBjb3JyZWN0IHR5cGUsIGJ1dCB3aGVuIGVuY29kZWQsIGRpZCBub3QgbWF0Y2ggdGhlIFBhcmFtVHlwZSdzIHJlZ2V4cFxyXG4gICAgICAgICAgICB2YXIgZW5jb2RlZCA9IHRoaXMudHlwZS5lbmNvZGUobm9ybWFsaXplZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhKGlzU3RyaW5nKGVuY29kZWQpICYmICF0aGlzLnR5cGUucGF0dGVybi5leGVjKGVuY29kZWQpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFBhcmFtLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwie1BhcmFtOlwiICsgdGhpcy5pZCArIFwiIFwiICsgdGhpcy50eXBlICsgXCIgc3F1YXNoOiAnXCIgKyB0aGlzLnNxdWFzaCArIFwiJyBvcHRpb25hbDogXCIgKyB0aGlzLmlzT3B0aW9uYWwgKyBcIn1cIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFBhcmFtLnZhbHVlcyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlcyQkMSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWVzJCQxID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlcyQkMSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwYXJhbVZhbHVlcyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHBhcmFtc18xID0gcGFyYW1zOyBfaSA8IHBhcmFtc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1zXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1WYWx1ZXNbcGFyYW0uaWRdID0gcGFyYW0udmFsdWUodmFsdWVzJCQxW3BhcmFtLmlkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtVmFsdWVzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmluZHMgW1tQYXJhbV1dIG9iamVjdHMgd2hpY2ggaGF2ZSBkaWZmZXJlbnQgcGFyYW0gdmFsdWVzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBGaWx0ZXJzIGEgbGlzdCBvZiBbW1BhcmFtXV0gb2JqZWN0cyB0byBvbmx5IHRob3NlIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyIGluIHR3byBwYXJhbSB2YWx1ZSBvYmplY3RzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zOiBUaGUgbGlzdCBvZiBQYXJhbSBvYmplY3RzIHRvIGZpbHRlclxyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZXMxOiBUaGUgZmlyc3Qgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXNcclxuICAgICAgICAgKiBAcGFyYW0gdmFsdWVzMjogdGhlIHNlY29uZCBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgYW55IFBhcmFtIG9iamVjdHMgd2hvc2UgdmFsdWVzIHdlcmUgZGlmZmVyZW50IGJldHdlZW4gdmFsdWVzMSBhbmQgdmFsdWVzMlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhcmFtLmNoYW5nZWQgPSBmdW5jdGlvbiAocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXMxID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlczEgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmFsdWVzMiA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMyID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIXBhcmFtLnR5cGUuZXF1YWxzKHZhbHVlczFbcGFyYW0uaWRdLCB2YWx1ZXMyW3BhcmFtLmlkXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIHR3byBwYXJhbSB2YWx1ZSBvYmplY3RzIGFyZSBlcXVhbCAoZm9yIGEgc2V0IG9mIFtbUGFyYW1dXSBvYmplY3RzKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyBUaGUgbGlzdCBvZiBbW1BhcmFtXV0gb2JqZWN0cyB0byBjaGVja1xyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZXMxIFRoZSBmaXJzdCBzZXQgb2YgcGFyYW0gdmFsdWVzXHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlczIgVGhlIHNlY29uZCBzZXQgb2YgcGFyYW0gdmFsdWVzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwYXJhbSB2YWx1ZXMgaW4gdmFsdWVzMSBhbmQgdmFsdWVzMiBhcmUgZXF1YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBQYXJhbS5lcXVhbHMgPSBmdW5jdGlvbiAocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXMxID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlczEgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmFsdWVzMiA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMyID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIGEgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXJlIHZhbGlkLCBhY2NvcmRpbmcgdG8gdGhlIFBhcmFtIGRlZmluaXRpb25zICovXHJcbiAgICAgICAgUGFyYW0udmFsaWRhdGVzID0gZnVuY3Rpb24gKHBhcmFtcywgdmFsdWVzJCQxKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXMkJDEgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzJCQxID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW0udmFsaWRhdGVzKHZhbHVlcyQkMVtwYXJhbS5pZF0pO1xyXG4gICAgICAgICAgICB9KS5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFBhcmFtO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHBhdGggKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICpcclxuICAgICAqIEEgbm9kZSBpbiBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoXHJcbiAgICAgKlxyXG4gICAgICogRm9yIGEgW1tUcmVlQ2hhbmdlc11dIHBhdGgsIHRoaXMgY2xhc3MgaG9sZHMgdGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGZvciBhIHNpbmdsZSBub2RlIGluIHRoZSBwYXRoLlxyXG4gICAgICogRWFjaCBQYXRoTm9kZSBjb3JyZXNwb25kcyB0byBhIHN0YXRlIGJlaW5nIGVudGVyZWQsIGV4aXRlZCwgb3IgcmV0YWluZWQuXHJcbiAgICAgKiBUaGUgc3RhdGVmdWwgaW5mb3JtYXRpb24gaW5jbHVkZXMgcGFyYW1ldGVyIHZhbHVlcyBhbmQgcmVzb2x2ZSBkYXRhLlxyXG4gICAgICovXHJcbiAgICB2YXIgUGF0aE5vZGUgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFBhdGhOb2RlKHN0YXRlT3JOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZU9yTm9kZSBpbnN0YW5jZW9mIFBhdGhOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHN0YXRlT3JOb2RlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5vZGUuc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gbm9kZS5wYXJhbVNjaGVtYS5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IGV4dGVuZCh7fSwgbm9kZS5wYXJhbVZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3cyA9IG5vZGUudmlld3MgJiYgbm9kZS52aWV3cy5zbGljZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVPck5vZGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIFNldHMgW1twYXJhbVZhbHVlc11dIGZvciB0aGUgbm9kZSwgZnJvbSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCBoYXNoICovXHJcbiAgICAgICAgUGF0aE5vZGUucHJvdG90eXBlLmFwcGx5UmF3UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgICAgICB2YXIgZ2V0UGFyYW1WYWwgPSBmdW5jdGlvbiBnZXRQYXJhbVZhbChwYXJhbURlZikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtwYXJhbURlZi5pZCwgcGFyYW1EZWYudmFsdWUocGFyYW1zW3BhcmFtRGVmLmlkXSldO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHBEZWYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseVBhaXJzKG1lbW8sIGdldFBhcmFtVmFsKHBEZWYpKTtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBHZXRzIGEgc3BlY2lmaWMgW1tQYXJhbV1dIG1ldGFkYXRhIHRoYXQgYmVsb25ncyB0byB0aGUgbm9kZSAqL1xyXG4gICAgICAgIFBhdGhOb2RlLnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmluZCh0aGlzLnBhcmFtU2NoZW1hLCBwcm9wRXEoXCJpZFwiLCBuYW1lKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYW5vdGhlciBQYXRoTm9kZSBhcmVcclxuICAgICAgICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhdGhOb2RlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobm9kZSwgcGFyYW1zRm4pIHtcclxuICAgICAgICAgICAgdmFyIGRpZmYgPSB0aGlzLmRpZmYobm9kZSwgcGFyYW1zRm4pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGlmZiAmJiBkaWZmLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpbmRzIFBhcmFtcyB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXIgdmFsdWVzIG9uIGFub3RoZXIgUGF0aE5vZGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHaXZlbiBhbm90aGVyIG5vZGUgKG9mIHRoZSBzYW1lIHN0YXRlKSwgZmluZHMgdGhlIHBhcmFtZXRlciB2YWx1ZXMgd2hpY2ggZGlmZmVyLlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIFtbUGFyYW1dXSAoc2NoZW1hIG9iamVjdHMpIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogR2l2ZW4gYW5vdGhlciBub2RlIGZvciBhIGRpZmZlcmVudCBzdGF0ZSwgcmV0dXJucyBgZmFsc2VgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmFtc0ZuIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHdoaWNoIHBhcmFtZXRlcnMgc2hvdWxkIGJlIGNvbXBhcmVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIFRoZSBbW1BhcmFtXV1zIHdoaWNoIGRpZmZlciwgb3IgbnVsbCBpZiB0aGUgdHdvIG5vZGVzIGFyZSBmb3IgZGlmZmVyZW50IHN0YXRlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhdGhOb2RlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5vZGUsIHBhcmFtc0ZuKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBub2RlLnN0YXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBwYXJhbXNGbiA/IHBhcmFtc0ZuKHRoaXMpIDogdGhpcy5wYXJhbVNjaGVtYTtcclxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB0aGlzLnBhcmFtVmFsdWVzLCBub2RlLnBhcmFtVmFsdWVzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIFBhdGhOb2RlICovXHJcbiAgICAgICAgUGF0aE5vZGUuY2xvbmUgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKG5vZGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFBhdGhOb2RlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHBhdGggKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgY2xhc3MgY29udGFpbnMgZnVuY3Rpb25zIHdoaWNoIGNvbnZlcnQgVGFyZ2V0U3RhdGVzLCBOb2RlcyBhbmQgcGF0aHMgZnJvbSBvbmUgdHlwZSB0byBhbm90aGVyLlxyXG4gICAgICovXHJcbiAgICB2YXIgUGF0aFV0aWxzID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBQYXRoVXRpbHMoKSB7fVxyXG4gICAgICAgIC8qKiBHaXZlbiBhIFBhdGhOb2RlW10sIGNyZWF0ZSBhbiBUYXJnZXRTdGF0ZSAqL1xyXG4gICAgICAgIFBhdGhVdGlscy5tYWtlVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAocmVnaXN0cnksIHBhdGgpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGFpbChwYXRoKS5zdGF0ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZShyZWdpc3RyeSwgc3RhdGUsIHBhdGgubWFwKHByb3AoXCJwYXJhbVZhbHVlc1wiKSkucmVkdWNlKG1lcmdlUiwge30pLCB7fSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBQYXRoVXRpbHMuYnVpbGRQYXRoID0gZnVuY3Rpb24gKHRhcmdldFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciB0b1BhcmFtcyA9IHRhcmdldFN0YXRlLnBhcmFtcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0U3RhdGUuJHN0YXRlKCkucGF0aC5tYXAoZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHN0YXRlKS5hcHBseVJhd1BhcmFtcyh0b1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEdpdmVuIGEgZnJvbVBhdGg6IFBhdGhOb2RlW10gYW5kIGEgVGFyZ2V0U3RhdGUsIGJ1aWxkcyBhIHRvUGF0aDogUGF0aE5vZGVbXSAqL1xyXG4gICAgICAgIFBhdGhVdGlscy5idWlsZFRvUGF0aCA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRvUGF0aCA9IFBhdGhVdGlscy5idWlsZFBhdGgodGFyZ2V0U3RhdGUpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0U3RhdGUub3B0aW9ucygpLmluaGVyaXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYXRoVXRpbHMuaW5oZXJpdFBhcmFtcyhmcm9tUGF0aCwgdG9QYXRoLCBPYmplY3Qua2V5cyh0YXJnZXRTdGF0ZS5wYXJhbXMoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0b1BhdGg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIFZpZXdDb25maWcgb2JqZWN0cyBhbmQgYWRkcyB0byBub2Rlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE9uIGVhY2ggW1tQYXRoTm9kZV1dLCBjcmVhdGVzIFZpZXdDb25maWcgb2JqZWN0cyBmcm9tIHRoZSB2aWV3czogcHJvcGVydHkgb2YgdGhlIG5vZGUncyBzdGF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhdGhVdGlscy5hcHBseVZpZXdDb25maWdzID0gZnVuY3Rpb24gKCR2aWV3LCBwYXRoLCBzdGF0ZXMpIHtcclxuICAgICAgICAgICAgLy8gT25seSBhcHBseSB0aGUgdmlld0NvbmZpZ3MgdG8gdGhlIG5vZGVzIGZvciB0aGUgZ2l2ZW4gc3RhdGVzXHJcbiAgICAgICAgICAgIHBhdGguZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5BcnJheShzdGF0ZXMsIG5vZGUuc3RhdGUpO1xyXG4gICAgICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlld0RlY2xzID0gdmFsdWVzKG5vZGUuc3RhdGUudmlld3MgfHwge30pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YlBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aChwYXRoLCBmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBub2RlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlld0NvbmZpZ3MgPSB2aWV3RGVjbHMubWFwKGZ1bmN0aW9uICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR2aWV3LmNyZWF0ZVZpZXdDb25maWcoc3ViUGF0aCwgdmlldyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5vZGUudmlld3MgPSB2aWV3Q29uZmlncy5yZWR1Y2UodW5uZXN0UiwgW10pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdpdmVuIGEgZnJvbVBhdGggYW5kIGEgdG9QYXRoLCByZXR1cm5zIGEgbmV3IHRvIHBhdGggd2hpY2ggaW5oZXJpdHMgcGFyYW1ldGVycyBmcm9tIHRoZSBmcm9tUGF0aFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRm9yIGEgcGFyYW1ldGVyIGluIGEgbm9kZSB0byBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgZnJvbSBwYXRoOlxyXG4gICAgICAgICAqIC0gVGhlIHRvUGF0aCdzIG5vZGUgbXVzdCBoYXZlIGEgbWF0Y2hpbmcgbm9kZSBpbiB0aGUgZnJvbVBhdGggKGJ5IHN0YXRlKS5cclxuICAgICAgICAgKiAtIFRoZSBwYXJhbWV0ZXIgbmFtZSBtdXN0IG5vdCBiZSBmb3VuZCBpbiB0aGUgdG9LZXlzIHBhcmFtZXRlciBhcnJheS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IHRoZSBrZXlzIHByb3ZpZGVkIGluIHRvS2V5cyBhcmUgaW50ZW5kZWQgdG8gYmUgdGhvc2UgcGFyYW0ga2V5cyBleHBsaWNpdGx5IHNwZWNpZmllZCBieSBzb21lXHJcbiAgICAgICAgICogY2FsbGVyLCBmb3IgaW5zdGFuY2UsICRzdGF0ZS50cmFuc2l0aW9uVG8oLi4uLCB0b1BhcmFtcykuICBJZiBhIGtleSB3YXMgZm91bmQgaW4gdG9QYXJhbXMsXHJcbiAgICAgICAgICogaXQgaXMgbm90IGluaGVyaXRlZCBmcm9tIHRoZSBmcm9tUGF0aC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBQYXRoVXRpbHMuaW5oZXJpdFBhcmFtcyA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdG9QYXRoLCB0b0tleXMpIHtcclxuICAgICAgICAgICAgaWYgKHRvS2V5cyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0b0tleXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBub2RlUGFyYW1WYWxzKHBhdGgsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJvcEVxKCdzdGF0ZScsIHN0YXRlKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBub2RlICYmIG5vZGUucGFyYW1WYWx1ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBub0luaGVyaXQgPSBmcm9tUGF0aC5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnBhcmFtU2NoZW1hO1xyXG4gICAgICAgICAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhcGFyYW0uaW5oZXJpdDtcclxuICAgICAgICAgICAgfSkubWFwKHByb3AoJ2lkJykpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2l2ZW4gYW4gW1tQYXRoTm9kZV1dIFwidG9Ob2RlXCIsIHJldHVybiBhIG5ldyBbW1BhdGhOb2RlXV0gd2l0aCBwYXJhbSB2YWx1ZXMgaW5oZXJpdGVkIGZyb20gdGhlXHJcbiAgICAgICAgICAgICAqIG1hdGNoaW5nIG5vZGUgaW4gZnJvbVBhdGguICBPbmx5IGluaGVyaXQga2V5cyB0aGF0IGFyZW4ndCBmb3VuZCBpbiBcInRvS2V5c1wiIGZyb20gdGhlIG5vZGUgaW4gXCJmcm9tUGF0aFwiXCJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxsIHBhcmFtIHZhbHVlcyBmb3IgdGhlIG5vZGUgKG1heSBpbmNsdWRlIGRlZmF1bHQga2V5L3ZhbHMsIHdoZW4ga2V5IHdhcyBub3QgZm91bmQgaW4gdG9QYXJhbXMpXHJcbiAgICAgICAgICAgICAgICB2YXIgdG9QYXJhbVZhbHMgPSBleHRlbmQoe30sIHRvTm9kZSAmJiB0b05vZGUucGFyYW1WYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgLy8gbGltaXRlZCB0byBvbmx5IHRob3NlIGtleXMgZm91bmQgaW4gdG9QYXJhbXNcclxuICAgICAgICAgICAgICAgIHZhciBpbmNvbWluZ1BhcmFtVmFscyA9IHBpY2sodG9QYXJhbVZhbHMsIHRvS2V5cyk7XHJcbiAgICAgICAgICAgICAgICB0b1BhcmFtVmFscyA9IG9taXQodG9QYXJhbVZhbHMsIHRvS2V5cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVBhcmFtVmFscyA9IG9taXQobm9kZVBhcmFtVmFscyhmcm9tUGF0aCwgdG9Ob2RlLnN0YXRlKSB8fCB7fSwgbm9Jbmhlcml0KTtcclxuICAgICAgICAgICAgICAgIC8vIGV4dGVuZCB0b1BhcmFtVmFscyB3aXRoIGFueSBmcm9tUGFyYW1WYWxzLCB0aGVuIG92ZXJyaWRlIGFueSBvZiB0aG9zZSB0aG9zZSB3aXRoIGluY29taW5nUGFyYW1WYWxzXHJcbiAgICAgICAgICAgICAgICB2YXIgb3duUGFyYW1WYWxzID0gZXh0ZW5kKHRvUGFyYW1WYWxzLCBmcm9tUGFyYW1WYWxzLCBpbmNvbWluZ1BhcmFtVmFscyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRvTm9kZS5zdGF0ZSkuYXBwbHlSYXdQYXJhbXMob3duUGFyYW1WYWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUaGUgcGFyYW0ga2V5cyBzcGVjaWZpZWQgYnkgdGhlIGluY29taW5nIHRvUGFyYW1zXHJcbiAgICAgICAgICAgIHJldHVybiB0b1BhdGgubWFwKG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbXB1dGVzIHRoZSB0cmVlIGNoYW5nZXMgKGVudGVyaW5nLCBleGl0aW5nKSBiZXR3ZWVuIGEgZnJvbVBhdGggYW5kIHRvUGF0aC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBQYXRoVXRpbHMudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvUGF0aCwgcmVsb2FkU3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGtlZXAgPSAwLFxyXG4gICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5taW4oZnJvbVBhdGgubGVuZ3RoLCB0b1BhdGgubGVuZ3RoKTtcclxuICAgICAgICAgICAgdmFyIG5vZGVzTWF0Y2ggPSBmdW5jdGlvbiBub2Rlc01hdGNoKG5vZGUxLCBub2RlMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUxLmVxdWFscyhub2RlMiwgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3aGlsZSAoa2VlcCA8IG1heCAmJiBmcm9tUGF0aFtrZWVwXS5zdGF0ZSAhPT0gcmVsb2FkU3RhdGUgJiYgbm9kZXNNYXRjaChmcm9tUGF0aFtrZWVwXSwgdG9QYXRoW2tlZXBdKSkge1xyXG4gICAgICAgICAgICAgICAga2VlcCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKiBHaXZlbiBhIHJldGFpbmVkIG5vZGUsIHJldHVybiBhIG5ldyBub2RlIHdoaWNoIHVzZXMgdGhlIHRvIG5vZGUncyBwYXJhbSB2YWx1ZXMgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlUb1BhcmFtcyhyZXRhaW5lZE5vZGUsIGlkeCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNsb25lZCA9IFBhdGhOb2RlLmNsb25lKHJldGFpbmVkTm9kZSk7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWQucGFyYW1WYWx1ZXMgPSB0b1BhdGhbaWR4XS5wYXJhbVZhbHVlcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGZyb20sIHJldGFpbmVkLCBleGl0aW5nLCBlbnRlcmluZywgdG87XHJcbiAgICAgICAgICAgIGZyb20gPSBmcm9tUGF0aDtcclxuICAgICAgICAgICAgcmV0YWluZWQgPSBmcm9tLnNsaWNlKDAsIGtlZXApO1xyXG4gICAgICAgICAgICBleGl0aW5nID0gZnJvbS5zbGljZShrZWVwKTtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHJldGFpbmVkIHBhdGggKHdpdGggc2hhbGxvdyBjb3BpZXMgb2Ygbm9kZXMpIHdoaWNoIGhhdmUgdGhlIHBhcmFtcyBvZiB0aGUgdG9QYXRoIG1hcHBlZFxyXG4gICAgICAgICAgICB2YXIgcmV0YWluZWRXaXRoVG9QYXJhbXMgPSByZXRhaW5lZC5tYXAoYXBwbHlUb1BhcmFtcyk7XHJcbiAgICAgICAgICAgIGVudGVyaW5nID0gdG9QYXRoLnNsaWNlKGtlZXApO1xyXG4gICAgICAgICAgICB0byA9IHJldGFpbmVkV2l0aFRvUGFyYW1zLmNvbmNhdChlbnRlcmluZyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGZyb20sIHRvOiB0bywgcmV0YWluZWQ6IHJldGFpbmVkLCBleGl0aW5nOiBleGl0aW5nLCBlbnRlcmluZzogZW50ZXJpbmcgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBuZXcgcGF0aCB3aGljaCBpczogdGhlIHN1YnBhdGggb2YgdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2hlcyB0aGUgc2Vjb25kIHBhdGguXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgbmV3IHBhdGggc3RhcnRzIGZyb20gcm9vdCBhbmQgY29udGFpbnMgYW55IG5vZGVzIHRoYXQgbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aC5cclxuICAgICAgICAgKiBJdCBzdG9wcyBiZWZvcmUgdGhlIGZpcnN0IG5vbi1tYXRjaGluZyBub2RlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm9kZXMgYXJlIGNvbXBhcmVkIHVzaW5nIHRoZWlyIHN0YXRlIHByb3BlcnR5IGFuZCB0aGVpciBwYXJhbWV0ZXIgdmFsdWVzLlxyXG4gICAgICAgICAqIElmIGEgYHBhcmFtc0ZuYCBpcyBwcm92aWRlZCwgb25seSB0aGUgW1tQYXJhbV1dIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbiB3aWxsIGJlIGNvbnNpZGVyZWQgd2hlbiBjb21wYXJpbmcgbm9kZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aEEgdGhlIGZpcnN0IHBhdGhcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aEIgdGhlIHNlY29uZCBwYXRoXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmFtc0ZuIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcGFyYW1ldGVycyB0byBjb25zaWRlciB3aGVuIGNvbXBhcmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgUGF0aE5vZGVzIGZyb20gdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhdGhVdGlscy5tYXRjaGluZyA9IGZ1bmN0aW9uIChwYXRoQSwgcGF0aEIsIHBhcmFtc0ZuKSB7XHJcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciB0dXBsZXMgPSBhcnJheVR1cGxlcyhwYXRoQSwgcGF0aEIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHVwbGVzLnJlZHVjZShmdW5jdGlvbiAobWF0Y2hpbmcsIF9hKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUEgPSBfYVswXSxcclxuICAgICAgICAgICAgICAgICAgICBub2RlQiA9IF9hWzFdO1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IGRvbmUgfHwgIW5vZGVBLmVxdWFscyhub2RlQiwgcGFyYW1zRm4pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmUgPyBtYXRjaGluZyA6IG1hdGNoaW5nLmNvbmNhdChub2RlQSk7XHJcbiAgICAgICAgICAgIH0sIFtdKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0d28gcGF0aHMgYXJlIGlkZW50aWNhbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoQVxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoQlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXNGbiBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHBhcmFtZXRlcnMgdG8gY29uc2lkZXIgd2hlbiBjb21wYXJpbmdcclxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB0aGUgc3RhdGVzIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGZvciBib3RoIHBhdGhzIGFyZSBpZGVudGljYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBQYXRoVXRpbHMuZXF1YWxzID0gZnVuY3Rpb24gKHBhdGhBLCBwYXRoQiwgcGFyYW1zRm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhBLmxlbmd0aCA9PT0gcGF0aEIubGVuZ3RoICYmIFBhdGhVdGlscy5tYXRjaGluZyhwYXRoQSwgcGF0aEIsIHBhcmFtc0ZuKS5sZW5ndGggPT09IHBhdGhBLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiBhIHN1YnBhdGggb2YgYSBwYXRoLCB3aGljaCBzdG9wcyBhdCB0aGUgZmlyc3QgbWF0Y2hpbmcgbm9kZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogR2l2ZW4gYW4gYXJyYXkgb2Ygbm9kZXMsIHJldHVybnMgYSBzdWJzZXQgb2YgdGhlIGFycmF5IHN0YXJ0aW5nIGZyb20gdGhlIGZpcnN0IG5vZGUsXHJcbiAgICAgICAgICogc3RvcHBpbmcgd2hlbiB0aGUgZmlyc3Qgbm9kZSBtYXRjaGVzIHRoZSBwcmVkaWNhdGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCBhIHBhdGggb2YgW1tQYXRoTm9kZV1dc1xyXG4gICAgICAgICAqIEBwYXJhbSBwcmVkaWNhdGUgYSBbW1ByZWRpY2F0ZV1dIGZuIHRoYXQgbWF0Y2hlcyBbW1BhdGhOb2RlXV1zXHJcbiAgICAgICAgICogQHJldHVybnMgYSBzdWJwYXRoIHVwIHRvIHRoZSBtYXRjaGluZyBub2RlLCBvciB1bmRlZmluZWQgaWYgbm8gbWF0Y2ggaXMgZm91bmRcclxuICAgICAgICAgKi9cclxuICAgICAgICBQYXRoVXRpbHMuc3ViUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCBwcmVkaWNhdGUpIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBmaW5kKHBhdGgsIHByZWRpY2F0ZSk7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50SWR4ID0gcGF0aC5pbmRleE9mKG5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudElkeCA9PT0gLTEgPyB1bmRlZmluZWQgOiBwYXRoLnNsaWNlKDAsIGVsZW1lbnRJZHggKyAxKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhcGFyYW0uZHluYW1pYztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogR2V0cyB0aGUgcmF3IHBhcmFtZXRlciB2YWx1ZXMgZnJvbSBhIHBhdGggKi9cclxuICAgICAgICBQYXRoVXRpbHMucGFyYW1WYWx1ZXMgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuZChhY2MsIG5vZGUucGFyYW1WYWx1ZXMpO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gUGF0aFV0aWxzO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgcmVzb2x2ZVxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLy8gVE9ETzogZXhwbGljaXRseSBtYWtlIHRoaXMgdXNlciBjb25maWd1cmFibGVcclxuICAgIHZhciBkZWZhdWx0UmVzb2x2ZVBvbGljeSA9IHtcclxuICAgICAgICB3aGVuOiBcIkxBWllcIixcclxuICAgICAgICBhc3luYzogXCJXQUlUXCJcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBiYXNpYyBidWlsZGluZyBibG9jayBmb3IgdGhlIHJlc29sdmUgc3lzdGVtLlxyXG4gICAgICpcclxuICAgICAqIFJlc29sdmFibGVzIGVuY2Fwc3VsYXRlIGEgc3RhdGUncyByZXNvbHZlJ3MgcmVzb2x2ZUZuLCB0aGUgcmVzb2x2ZUZuJ3MgZGVjbGFyZWQgZGVwZW5kZW5jaWVzLCB0aGUgd3JhcHBlZCAoLnByb21pc2UpLFxyXG4gICAgICogYW5kIHRoZSB1bndyYXBwZWQtd2hlbi1jb21wbGV0ZSAoLmRhdGEpIHJlc3VsdCBvZiB0aGUgcmVzb2x2ZUZuLlxyXG4gICAgICpcclxuICAgICAqIFJlc29sdmFibGUuZ2V0KCkgZWl0aGVyIHJldHJpZXZlcyB0aGUgUmVzb2x2YWJsZSdzIGV4aXN0aW5nIHByb21pc2UsIG9yIGVsc2UgaW52b2tlcyByZXNvbHZlKCkgKHdoaWNoIGludm9rZXMgdGhlXHJcbiAgICAgKiByZXNvbHZlRm4pIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgcHJvbWlzZS5cclxuICAgICAqXHJcbiAgICAgKiBSZXNvbHZhYmxlLmdldCgpIGFuZCBSZXNvbHZhYmxlLnJlc29sdmUoKSBib3RoIGV4ZWN1dGUgd2l0aGluIGEgY29udGV4dCBwYXRoLCB3aGljaCBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0XHJcbiAgICAgKiBwYXJhbWV0ZXIgdG8gdGhvc2UgZm5zLlxyXG4gICAgICovXHJcbiAgICB2YXIgUmVzb2x2YWJsZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gUmVzb2x2YWJsZShhcmcxLCByZXNvbHZlRm4sIGRlcHMsIHBvbGljeSwgZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucHJvbWlzZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKGFyZzEgaW5zdGFuY2VvZiBSZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBleHRlbmQodGhpcywgYXJnMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihyZXNvbHZlRm4pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoYXJnMSkpIHRocm93IG5ldyBFcnJvcihcIm5ldyBSZXNvbHZhYmxlKCk6IHRva2VuIGFyZ3VtZW50IGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVGbikpIHRocm93IG5ldyBFcnJvcihcIm5ldyBSZXNvbHZhYmxlKCk6IHJlc29sdmVGbiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gYXJnMTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9saWN5ID0gcG9saWN5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlRm4gPSByZXNvbHZlRm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlcHMgPSBkZXBzIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSBkYXRhICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnJlc29sdmVkID8gc2VydmljZXMuJHEud2hlbih0aGlzLmRhdGEpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFyZzEpICYmIGFyZzEudG9rZW4gJiYgaXNGdW5jdGlvbihhcmcxLnJlc29sdmVGbikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXRlcmFsID0gYXJnMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZShsaXRlcmFsLnRva2VuLCBsaXRlcmFsLnJlc29sdmVGbiwgbGl0ZXJhbC5kZXBzLCBsaXRlcmFsLnBvbGljeSwgbGl0ZXJhbC5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5nZXRQb2xpY3kgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNQb2xpY3kgPSB0aGlzLnBvbGljeSB8fCB7fTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlUG9saWN5ID0gc3RhdGUgJiYgc3RhdGUucmVzb2x2ZVBvbGljeSB8fCB7fTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHdoZW46IHRoaXNQb2xpY3kud2hlbiB8fCBzdGF0ZVBvbGljeS53aGVuIHx8IGRlZmF1bHRSZXNvbHZlUG9saWN5LndoZW4sXHJcbiAgICAgICAgICAgICAgICBhc3luYzogdGhpc1BvbGljeS5hc3luYyB8fCBzdGF0ZVBvbGljeS5hc3luYyB8fCBkZWZhdWx0UmVzb2x2ZVBvbGljeS5hc3luY1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXN5bmNocm9ub3VzbHkgcmVzb2x2ZSB0aGlzIFJlc29sdmFibGUncyBkYXRhXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHaXZlbiBhIFJlc29sdmVDb250ZXh0IHRoYXQgdGhpcyBSZXNvbHZhYmxlIGlzIGZvdW5kIGluOlxyXG4gICAgICAgICAqIFdhaXQgZm9yIHRoaXMgUmVzb2x2YWJsZSdzIGRlcGVuZGVuY2llcywgdGhlbiBpbnZva2UgdGhpcyBSZXNvbHZhYmxlJ3MgZnVuY3Rpb25cclxuICAgICAgICAgKiBhbmQgdXBkYXRlIHRoZSBSZXNvbHZhYmxlJ3Mgc3RhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gKHJlc29sdmVDb250ZXh0LCB0cmFucykge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgJHEgPSBzZXJ2aWNlcy4kcTtcclxuICAgICAgICAgICAgLy8gR2V0cyBhbGwgZGVwZW5kZW5jaWVzIGZyb20gUmVzb2x2ZUNvbnRleHQgYW5kIHdhaXQgZm9yIHRoZW0gdG8gYmUgcmVzb2x2ZWRcclxuICAgICAgICAgICAgdmFyIGdldFJlc29sdmFibGVEZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiBnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChyZXNvbHZlQ29udGV4dC5nZXREZXBlbmRlbmNpZXMoX3RoaXMpLm1hcChmdW5jdGlvbiAocmVzb2x2YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBJbnZva2VzIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHBhc3NpbmcgdGhlIHJlc29sdmVkIGRlcGVuZGVuY2llcyBhcyBhcmd1bWVudHNcclxuICAgICAgICAgICAgdmFyIGludm9rZVJlc29sdmVGbiA9IGZ1bmN0aW9uIGludm9rZVJlc29sdmVGbihyZXNvbHZlZERlcHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlRm4uYXBwbHkobnVsbCwgcmVzb2x2ZWREZXBzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZvciBSWFdBSVQgcG9saWN5OlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBHaXZlbiBhbiBvYnNlcnZhYmxlIHJldHVybmVkIGZyb20gYSByZXNvbHZlIGZ1bmN0aW9uOlxyXG4gICAgICAgICAgICAgKiAtIGVuYWJsZXMgLmNhY2hlKCkgbW9kZSAodGhpcyBhbGxvd3MgbXVsdGljYXN0IHN1YnNjcmliZXJzKVxyXG4gICAgICAgICAgICAgKiAtIHRoZW4gY2FsbHMgdG9Qcm9taXNlKCkgKHRoaXMgdHJpZ2dlcnMgc3Vic2NyaWJlKCkgYW5kIHRodXMgZmV0Y2hlcylcclxuICAgICAgICAgICAgICogLSBXYWl0cyBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmV0dXJuIHRoZSBjYWNoZWQgb2JzZXJ2YWJsZSAobm90IHRoZSBmaXJzdCBlbWl0dGVkIHZhbHVlKS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZhciB3YWl0Rm9yUnggPSBmdW5jdGlvbiB3YWl0Rm9yUngob2JzZXJ2YWJsZSQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWNoZWQgPSBvYnNlcnZhYmxlJC5jYWNoZSgxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQudGFrZSgxKS50b1Byb21pc2UoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSByZXNvbHZlIHBvbGljeSBpcyBSWFdBSVQsIHdhaXQgZm9yIHRoZSBvYnNlcnZhYmxlIHRvIGVtaXQgc29tZXRoaW5nLiBvdGhlcndpc2UgcGFzcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHJlc29sdmVDb250ZXh0LmZpbmROb2RlKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBub2RlICYmIG5vZGUuc3RhdGU7XHJcbiAgICAgICAgICAgIHZhciBtYXliZVdhaXRGb3JSeCA9IHRoaXMuZ2V0UG9saWN5KHN0YXRlKS5hc3luYyA9PT0gXCJSWFdBSVRcIiA/IHdhaXRGb3JSeCA6IGlkZW50aXR5O1xyXG4gICAgICAgICAgICAvLyBBZnRlciB0aGUgZmluYWwgdmFsdWUgaGFzIGJlZW4gcmVzb2x2ZWQsIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIFJlc29sdmFibGVcclxuICAgICAgICAgICAgdmFyIGFwcGx5UmVzb2x2ZWRWYWx1ZSA9IGZ1bmN0aW9uIGFwcGx5UmVzb2x2ZWRWYWx1ZShyZXNvbHZlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhID0gcmVzb2x2ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlUmVzb2x2YWJsZVJlc29sdmVkKF90aGlzLCB0cmFucyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGF0YTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gU2V0cyB0aGUgcHJvbWlzZSBwcm9wZXJ0eSBmaXJzdCwgdGhlbiBnZXRzUmVzb2x2YWJsZURlcGVuZGVuY2llcyBpbiB0aGUgY29udGV4dCBvZiB0aGUgcHJvbWlzZSBjaGFpbi4gQWx3YXlzIHdhaXRzIG9uZSB0aWNrLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlID0gJHEud2hlbigpLnRoZW4oZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcykudGhlbihpbnZva2VSZXNvbHZlRm4pLnRoZW4obWF5YmVXYWl0Rm9yUngpLnRoZW4oYXBwbHlSZXNvbHZlZFZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgYSBwcm9taXNlIGZvciB0aGlzIFJlc29sdmFibGUncyBkYXRhLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRmV0Y2hlcyB0aGUgZGF0YSBhbmQgcmV0dXJucyBhIHByb21pc2UuXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgZXhpc3RpbmcgcHJvbWlzZSBpZiBpdCBoYXMgYWxyZWFkeSBiZWVuIGZldGNoZWQgb25jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocmVzb2x2ZUNvbnRleHQsIHRyYW5zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb21pc2UgfHwgdGhpcy5yZXNvbHZlKHJlc29sdmVDb250ZXh0LCB0cmFucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiUmVzb2x2YWJsZSh0b2tlbjogXCIgKyBzdHJpbmdpZnkodGhpcy50b2tlbikgKyBcIiwgcmVxdWlyZXM6IFtcIiArIHRoaXMuZGVwcy5tYXAoc3RyaW5naWZ5KSArIFwiXSlcIjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFJlc29sdmFibGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodGhpcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBSZXNvbHZhYmxlLmZyb21EYXRhID0gZnVuY3Rpb24gKHRva2VuLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZSh0b2tlbiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIGRhdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFJlc29sdmFibGU7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgdmFyIHJlc29sdmVQb2xpY2llcyA9IHtcclxuICAgICAgICB3aGVuOiB7XHJcbiAgICAgICAgICAgIExBWlk6IFwiTEFaWVwiLFxyXG4gICAgICAgICAgICBFQUdFUjogXCJFQUdFUlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhc3luYzoge1xyXG4gICAgICAgICAgICBXQUlUOiBcIldBSVRcIixcclxuICAgICAgICAgICAgTk9XQUlUOiBcIk5PV0FJVFwiLFxyXG4gICAgICAgICAgICBSWFdBSVQ6IFwiUlhXQUlUXCJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHJlc29sdmUgKi9cclxuICAgIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgdmFyIHdoZW5zID0gcmVzb2x2ZVBvbGljaWVzLndoZW47XHJcbiAgICB2YXIgQUxMX1dIRU5TID0gW3doZW5zLkVBR0VSLCB3aGVucy5MQVpZXTtcclxuICAgIHZhciBFQUdFUl9XSEVOUyA9IFt3aGVucy5FQUdFUl07XHJcbiAgICB2YXIgTkFUSVZFX0lOSkVDVE9SX1RPS0VOID0gXCJOYXRpdmUgSW5qZWN0b3JcIjtcclxuICAgIC8qKlxyXG4gICAgICogRW5jYXBzdWxhdGVzIERlcGVuZGVuY3kgSW5qZWN0aW9uIGZvciBhIHBhdGggb2Ygbm9kZXNcclxuICAgICAqXHJcbiAgICAgKiBVSS1Sb3V0ZXIgc3RhdGVzIGFyZSBvcmdhbml6ZWQgYXMgYSB0cmVlLlxyXG4gICAgICogQSBuZXN0ZWQgc3RhdGUgaGFzIGEgcGF0aCBvZiBhbmNlc3RvcnMgdG8gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXHJcbiAgICAgKiBXaGVuIGEgc3RhdGUgaXMgYmVpbmcgYWN0aXZhdGVkLCBlYWNoIGVsZW1lbnQgaW4gdGhlIHBhdGggaXMgd3JhcHBlZCBhcyBhIFtbUGF0aE5vZGVdXS5cclxuICAgICAqIEEgYFBhdGhOb2RlYCBpcyBhIHN0YXRlZnVsIG9iamVjdCB0aGF0IGhvbGRzIHRoaW5ncyBsaWtlIHBhcmFtZXRlcnMgYW5kIHJlc29sdmFibGVzIGZvciB0aGUgc3RhdGUgYmVpbmcgYWN0aXZhdGVkLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBSZXNvbHZlQ29udGV4dCBjbG9zZXMgb3ZlciB0aGUgW1tQYXRoTm9kZV1dcywgYW5kIHByb3ZpZGVzIERJIGZvciB0aGUgbGFzdCBub2RlIGluIHRoZSBwYXRoLlxyXG4gICAgICovXHJcbiAgICB2YXIgUmVzb2x2ZUNvbnRleHQgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFJlc29sdmVDb250ZXh0KF9wYXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEdldHMgYWxsIHRoZSB0b2tlbnMgZm91bmQgaW4gdGhlIHJlc29sdmUgY29udGV4dCwgZGUtZHVwbGljYXRlZCAqL1xyXG4gICAgICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRUb2tlbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChub2RlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9LCBbXSkucmVkdWNlKHVuaXFSLCBbXSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGxhc3QgUmVzb2x2YWJsZSB0aGF0IG1hdGNoZXMgdGhlIHRva2VuIGluIHRoaXMgY29udGV4dCwgb3IgdW5kZWZpbmVkLlxyXG4gICAgICAgICAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBSZXNvbHZlQ29udGV4dFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRSZXNvbHZhYmxlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IHRoaXMuX3BhdGgubWFwKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5yZXNvbHZhYmxlcztcclxuICAgICAgICAgICAgfSkucmVkdWNlKHVubmVzdFIsIFtdKS5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLnRva2VuID09PSB0b2tlbjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWlsKG1hdGNoaW5nKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBbW1Jlc29sdmVQb2xpY3ldXSBmb3IgdGhlIGdpdmVuIFtbUmVzb2x2YWJsZV1dICovXHJcbiAgICAgICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFBvbGljeSA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0UG9saWN5KG5vZGUuc3RhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBhIFJlc29sdmVDb250ZXh0IHRoYXQgaW5jbHVkZXMgYSBwb3J0aW9uIG9mIHRoaXMgb25lXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHaXZlbiBhIHN0YXRlLCB0aGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IFJlc29sdmVDb250ZXh0IGZyb20gdGhpcyBvbmUuXHJcbiAgICAgICAgICogVGhlIG5ldyBjb250ZXh0IHN0YXJ0cyBhdCB0aGUgZmlyc3Qgbm9kZSAocm9vdCkgYW5kIHN0b3BzIGF0IHRoZSBub2RlIGZvciB0aGUgYHN0YXRlYCBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIFdoeVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2hlbiBhIHRyYW5zaXRpb24gaXMgY3JlYXRlZCwgdGhlIG5vZGVzIGluIHRoZSBcIlRvIFBhdGhcIiBhcmUgaW5qZWN0ZWQgZnJvbSBhIFJlc29sdmVDb250ZXh0LlxyXG4gICAgICAgICAqIEEgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgYSBwYXRoIG9mIFtbUGF0aE5vZGVdXXMgYW5kIHByb2Nlc3NlcyB0aGUgcmVzb2x2YWJsZXMuXHJcbiAgICAgICAgICogVGhlIFwiVG8gU3RhdGVcIiBjYW4gaW5qZWN0IHZhbHVlcyBmcm9tIGl0cyBvd24gcmVzb2x2YWJsZXMsIGFzIHdlbGwgYXMgdGhvc2UgZnJvbSBhbGwgaXRzIGFuY2VzdG9yIHN0YXRlJ3MgKG5vZGUncykuXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBuYXJyb3dlciBjb250ZXh0IHdoZW4gaW5qZWN0aW5nIGFuY2VzdG9yIG5vZGVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiBgbGV0IEFCQ0QgPSBuZXcgUmVzb2x2ZUNvbnRleHQoW0EsIEIsIEMsIERdKTtgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBHaXZlbiBhIHBhdGggYFtBLCBCLCBDLCBEXWAsIHdoZXJlIGBBYCwgYEJgLCBgQ2AgYW5kIGBEYCBhcmUgbm9kZXMgZm9yIHN0YXRlcyBgYWAsIGBiYCwgYGNgLCBgZGA6XHJcbiAgICAgICAgICogV2hlbiBpbmplY3RpbmcgYERgLCBgRGAgc2hvdWxkIGhhdmUgYWNjZXNzIHRvIGFsbCByZXNvbHZhYmxlcyBmcm9tIGBBYCwgYEJgLCBgQ2AsIGBEYC5cclxuICAgICAgICAgKiBIb3dldmVyLCBgQmAgc2hvdWxkIG9ubHkgYmUgYWJsZSB0byBhY2Nlc3MgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdoZW4gcmVzb2x2aW5nIGZvciB0aGUgYEJgIG5vZGUsIGZpcnN0IHRha2UgdGhlIGZ1bGwgXCJUbyBQYXRoXCIgQ29udGV4dCBgW0EsQixDLERdYCBhbmQgbGltaXQgdG8gdGhlIHN1YnBhdGggYFtBLEJdYC5cclxuICAgICAgICAgKiBgbGV0IEFCID0gQUJDRC5zdWJjb250ZXh0KGEpYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5zdWJDb250ZXh0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQoUGF0aFV0aWxzLnN1YlBhdGgodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnN0YXRlID09PSBzdGF0ZTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyBSZXNvbHZhYmxlcyB0byB0aGUgbm9kZSB0aGF0IG1hdGNoZXMgdGhlIHN0YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGFkZHMgYSBbW1Jlc29sdmFibGVdXSAoZ2VuZXJhbGx5IG9uZSBjcmVhdGVkIG9uIHRoZSBmbHk7IG5vdCBkZWNsYXJlZCBvbiBhIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gYmxvY2spLlxyXG4gICAgICAgICAqIFRoZSByZXNvbHZhYmxlIGlzIGFkZGVkIHRvIHRoZSBub2RlIG1hdGNoaW5nIHRoZSBgc3RhdGVgIHBhcmFtZXRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZXNlIG5ldyByZXNvbHZhYmxlcyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZmV0Y2hlZC5cclxuICAgICAgICAgKiBUaGUgY2FsbGluZyBjb2RlIHNob3VsZCBlaXRoZXIgZmV0Y2ggdGhlbSwgZmV0Y2ggc29tZXRoaW5nIHRoYXQgZGVwZW5kcyBvbiB0aGVtLFxyXG4gICAgICAgICAqIG9yIHJlbHkgb24gW1tyZXNvbHZlUGF0aF1dIGJlaW5nIGNhbGxlZCB3aGVuIHNvbWUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IGVhY2ggcmVzb2x2YWJsZSdzIFtbUmVzb2x2ZVBvbGljeV1dIGlzIG1lcmdlZCB3aXRoIHRoZSBzdGF0ZSdzIHBvbGljeSwgYW5kIHRoZSBnbG9iYWwgZGVmYXVsdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdSZXNvbHZhYmxlcyB0aGUgbmV3IFJlc29sdmFibGVzXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFVzZWQgdG8gZmluZCB0aGUgbm9kZSB0byBwdXQgdGhlIHJlc29sdmFibGUgb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuYWRkUmVzb2x2YWJsZXMgPSBmdW5jdGlvbiAobmV3UmVzb2x2YWJsZXMsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gZmluZCh0aGlzLl9wYXRoLCBwcm9wRXEoJ3N0YXRlJywgc3RhdGUpKTtcclxuICAgICAgICAgICAgdmFyIGtleXMgPSBuZXdSZXNvbHZhYmxlcy5tYXAoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLnRva2VuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbm9kZS5yZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5pbmRleE9mKHIudG9rZW4pID09PSAtMTtcclxuICAgICAgICAgICAgfSkuY29uY2F0KG5ld1Jlc29sdmFibGVzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiByZXNvbHZlZCBwYXRoIEVsZW1lbnQgcHJvbWlzZXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB3aGVuXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zXHJcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pnxhbnl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLnJlc29sdmVQYXRoID0gZnVuY3Rpb24gKHdoZW4sIHRyYW5zKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICh3aGVuID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHdoZW4gPSBcIkxBWllcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBkZXRlcm1pbmVzIHdoaWNoICd3aGVuJyBwb2xpY3kgUmVzb2x2YWJsZXMgd2UgYXJlIGFib3V0IHRvIGZldGNoLlxyXG4gICAgICAgICAgICB2YXIgd2hlbk9wdGlvbiA9IGluQXJyYXkoQUxMX1dIRU5TLCB3aGVuKSA/IHdoZW4gOiBcIkxBWllcIjtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGNhbGxlciBzcGVjaWZpZWQgRUFHRVIsIG9ubHkgdGhlIEVBR0VSIFJlc29sdmFibGVzIGFyZSBmZXRjaGVkLlxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgY2FsbGVyIHNwZWNpZmllZCBMQVpZLCBib3RoIEVBR0VSIGFuZCBMQVpZIFJlc29sdmFibGVzIGFyZSBmZXRjaGVkLmBcclxuICAgICAgICAgICAgdmFyIG1hdGNoZWRXaGVucyA9IHdoZW5PcHRpb24gPT09IHJlc29sdmVQb2xpY2llcy53aGVuLkVBR0VSID8gRUFHRVJfV0hFTlMgOiBBTExfV0hFTlM7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgc3VicGF0aCB0byB0aGUgc3RhdGUgYXJndW1lbnQsIGlmIHByb3ZpZGVkXHJcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlUmVzb2x2ZVBhdGgodGhpcy5fcGF0aCwgd2hlbiwgdHJhbnMpO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlc1BvbGljeSA9IGZ1bmN0aW9uIG1hdGNoZXNQb2xpY3koYWNjZXB0ZWRWYWxzLCB3aGVuT3JBc3luYykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluQXJyYXkoYWNjZXB0ZWRWYWxzLCBfdGhpcy5nZXRQb2xpY3kocmVzb2x2YWJsZSlbd2hlbk9yQXN5bmNdKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgYWxsIHRoZSAobWF0Y2hpbmcpIFJlc29sdmFibGVzIGluIHRoZSBwYXRoXHJcbiAgICAgICAgICAgIC8vIFJlZHVjZSBhbGwgdGhlIFwiV0FJVFwiIFJlc29sdmFibGVzIGludG8gYW4gYXJyYXlcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gdGhpcy5fcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVSZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3kobWF0Y2hlZFdoZW5zLCAnd2hlbicpKTtcclxuICAgICAgICAgICAgICAgIHZhciBub3dhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG5vdChtYXRjaGVzUG9saWN5KFsnTk9XQUlUJ10sICdhc3luYycpKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3IgdGhlIG1hdGNoaW5nIFJlc29sdmFibGVzLCBzdGFydCB0aGVpciBhc3luYyBmZXRjaCBwcm9jZXNzLlxyXG4gICAgICAgICAgICAgICAgdmFyIHN1YkNvbnRleHQgPSBfdGhpcy5zdWJDb250ZXh0KG5vZGUuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdldFJlc3VsdCA9IGZ1bmN0aW9uIGdldFJlc3VsdChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZ2V0KHN1YkNvbnRleHQsIHRyYW5zKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0b2tlbjogci50b2tlbiwgdmFsdWU6IHZhbHVlIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbm93YWl0LmZvckVhY2goZ2V0UmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MuY29uY2F0KHdhaXQubWFwKGdldFJlc3VsdCkpO1xyXG4gICAgICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGFsbCB0aGUgXCJXQUlUXCIgcmVzb2x2YWJsZXNcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLmFsbChwcm9taXNlcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuaW5qZWN0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmplY3RvciB8fCAodGhpcy5faW5qZWN0b3IgPSBuZXcgVUlJbmplY3RvckltcGwodGhpcykpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmZpbmROb2RlID0gZnVuY3Rpb24gKHJlc29sdmFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbmQodGhpcy5fcGF0aCwgZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbkFycmF5KG5vZGUucmVzb2x2YWJsZXMsIHJlc29sdmFibGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGFzeW5jIGRlcGVuZGVuY2llcyBvZiBhIFJlc29sdmFibGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEdpdmVuIGEgUmVzb2x2YWJsZSwgcmV0dXJucyBpdHMgZGVwZW5kZW5jaWVzIGFzIGEgUmVzb2x2YWJsZVtdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcclxuICAgICAgICAgICAgLy8gRmluZCB3aGljaCBvdGhlciByZXNvbHZhYmxlcyBhcmUgXCJ2aXNpYmxlXCIgdG8gdGhlIGByZXNvbHZhYmxlYCBhcmd1bWVudFxyXG4gICAgICAgICAgICAvLyBzdWJwYXRoIHN0b3BwaW5nIGF0IHJlc29sdmFibGUncyBub2RlLCBvciB0aGUgd2hvbGUgcGF0aCAoaWYgdGhlIHJlc29sdmFibGUgaXNuJ3QgaW4gdGhlIHBhdGgpXHJcbiAgICAgICAgICAgIHZhciBzdWJQYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgodGhpcy5fcGF0aCwgZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB4ID09PSBub2RlO1xyXG4gICAgICAgICAgICB9KSB8fCB0aGlzLl9wYXRoO1xyXG4gICAgICAgICAgICB2YXIgYXZhaWxhYmxlUmVzb2x2YWJsZXMgPSBzdWJQYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBfbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoX25vZGUucmVzb2x2YWJsZXMpO1xyXG4gICAgICAgICAgICB9LCBbXSkgLy9hbGwgb2Ygc3VicGF0aCdzIHJlc29sdmFibGVzXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcyAhPT0gcmVzb2x2YWJsZTtcclxuICAgICAgICAgICAgfSk7IC8vIGZpbHRlciBvdXQgdGhlIGByZXNvbHZhYmxlYCBhcmd1bWVudFxyXG4gICAgICAgICAgICB2YXIgZ2V0RGVwZW5kZW5jeSA9IGZ1bmN0aW9uIGdldERlcGVuZGVuY3kodG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IGF2YWlsYWJsZVJlc29sdmFibGVzLmZpbHRlcihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLnRva2VuID09PSB0b2tlbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nLmxlbmd0aCkgcmV0dXJuIHRhaWwobWF0Y2hpbmcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb21JbmplY3RvciA9IF90aGlzLmluamVjdG9yKCkuZ2V0TmF0aXZlKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChmcm9tSW5qZWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgRGVwZW5kZW5jeSBJbmplY3Rpb24gdG9rZW46IFwiICsgc3RyaW5naWZ5KHRva2VuKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJvbUluamVjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSwgW10sIGZyb21JbmplY3Rvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmRlcHMubWFwKGdldERlcGVuZGVuY3kpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFJlc29sdmVDb250ZXh0O1xyXG4gICAgfSgpO1xyXG4gICAgdmFyIFVJSW5qZWN0b3JJbXBsID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBVSUluamVjdG9ySW1wbChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMubmF0aXZlID0gdGhpcy5nZXQoTkFUSVZFX0lOSkVDVE9SX1RPS0VOKSB8fCBzZXJ2aWNlcy4kaW5qZWN0b3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdmFyIHJlc29sdmFibGUgPSB0aGlzLmNvbnRleHQuZ2V0UmVzb2x2YWJsZSh0b2tlbik7XHJcbiAgICAgICAgICAgIGlmIChyZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlc29sdmFibGUgYXN5bmMgLmdldCgpIG5vdCBjb21wbGV0ZTpcIiArIHN0cmluZ2lmeShyZXNvbHZhYmxlLnRva2VuKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5hdGl2ZSh0b2tlbik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBVSUluamVjdG9ySW1wbC5wcm90b3R5cGUuZ2V0QXN5bmMgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdmFyIHJlc29sdmFibGUgPSB0aGlzLmNvbnRleHQuZ2V0UmVzb2x2YWJsZSh0b2tlbik7XHJcbiAgICAgICAgICAgIGlmIChyZXNvbHZhYmxlKSByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odGhpcy5uYXRpdmUuZ2V0KHRva2VuKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBVSUluamVjdG9ySW1wbC5wcm90b3R5cGUuZ2V0TmF0aXZlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hdGl2ZSAmJiB0aGlzLm5hdGl2ZS5nZXQodG9rZW4pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFVJSW5qZWN0b3JJbXBsO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgdHJhbnNpdGlvblxyXG4gICAgICovXHJcbiAgICAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICB2YXIgc3RhdGVTZWxmID0gcHJvcChcInNlbGZcIik7XHJcbiAgICAvKipcclxuICAgICAqIFJlcHJlc2VudHMgYSB0cmFuc2l0aW9uIGJldHdlZW4gdHdvIHN0YXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIG5hdmlnYXRpbmcgdG8gYSBzdGF0ZSwgd2UgYXJlIHRyYW5zaXRpb25pbmcgKipmcm9tKiogdGhlIGN1cnJlbnQgc3RhdGUgKip0byoqIHRoZSBuZXcgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBvYmplY3QgY29udGFpbnMgYWxsIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRvL2Zyb20gc3RhdGVzLCBwYXJhbWV0ZXJzLCByZXNvbHZlcy5cclxuICAgICAqIEl0IGhhcyBpbmZvcm1hdGlvbiBhYm91dCBhbGwgc3RhdGVzIGJlaW5nIGVudGVyZWQgYW5kIGV4aXRlZCBhcyBhIHJlc3VsdCBvZiB0aGUgdHJhbnNpdGlvbi5cclxuICAgICAqL1xyXG4gICAgdmFyIFRyYW5zaXRpb24gPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiB0aGUgdGFyZ2V0IHN0YXRlIGlzIG5vdCB2YWxpZCwgYW4gZXJyb3IgaXMgdGhyb3duLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsYXBpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZnJvbVBhdGggVGhlIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBmcm9tIHdoaWNoIHRoZSB0cmFuc2l0aW9uIGlzIGxlYXZpbmcuICBUaGUgbGFzdCBub2RlIGluIHRoZSBgZnJvbVBhdGhgXHJcbiAgICAgICAgICogICAgICAgIGVuY2Fwc3VsYXRlcyB0aGUgXCJmcm9tIHN0YXRlXCIuXHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldFN0YXRlIFRoZSB0YXJnZXQgc3RhdGUgYW5kIHBhcmFtZXRlcnMgYmVpbmcgdHJhbnNpdGlvbmVkIHRvIChhbHNvLCB0aGUgdHJhbnNpdGlvbiBvcHRpb25zKVxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZXIgVGhlIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zaXRpb24oZnJvbVBhdGgsIHRhcmdldFN0YXRlLCByb3V0ZXIpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICAgICAgdGhpcy5fZGVmZXJyZWQgPSBzZXJ2aWNlcy4kcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhpcyBwcm9taXNlIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkIGJhc2VkIG9uIHRoZSBvdXRjb21lIG9mIHRoZSBUcmFuc2l0aW9uLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBXaGVuIHRoZSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkXHJcbiAgICAgICAgICAgICAqIFdoZW4gdGhlIHRyYW5zaXRpb24gaXMgdW5zdWNjZXNzZnVsLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIHRoZSBbW1JlamVjdGlvbl1dIG9yIGphdmFzY3JpcHQgZXJyb3JcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMuX2RlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuIEhvbGRzIHRoZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgc3VjaCBhcyB0aG9zZSBwYXNzZWQgdG8gVHJhbnNpdGlvbi5vblN0YXJ0KCkgKi9cclxuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJlZEhvb2tzID0ge307XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMuX2hvb2tCdWlsZGVyID0gbmV3IEhvb2tCdWlsZGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAvKiogQ2hlY2tzIGlmIHRoaXMgdHJhbnNpdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlL3J1bm5pbmcuICovXHJcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbiA9PT0gX3RoaXM7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgICAgICB0aGlzLl90YXJnZXRTdGF0ZSA9IHRhcmdldFN0YXRlO1xyXG4gICAgICAgICAgICBpZiAoIXRhcmdldFN0YXRlLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0YXJnZXRTdGF0ZS5lcnJvcigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjdXJyZW50KCkgaXMgYXNzdW1lZCB0byBjb21lIGZyb20gdGFyZ2V0U3RhdGUub3B0aW9ucywgYnV0IHByb3ZpZGUgYSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiBvdGhlcndpc2UuXHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBleHRlbmQoeyBjdXJyZW50OiB2YWwodGhpcykgfSwgdGFyZ2V0U3RhdGUub3B0aW9ucygpKTtcclxuICAgICAgICAgICAgdGhpcy4kaWQgPSByb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuX3RyYW5zaXRpb25Db3VudCsrO1xyXG4gICAgICAgICAgICB2YXIgdG9QYXRoID0gUGF0aFV0aWxzLmJ1aWxkVG9QYXRoKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyZWVDaGFuZ2VzID0gUGF0aFV0aWxzLnRyZWVDaGFuZ2VzKGZyb21QYXRoLCB0b1BhdGgsIHRoaXMuX29wdGlvbnMucmVsb2FkU3RhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zKCk7XHJcbiAgICAgICAgICAgIHZhciBvbkNyZWF0ZUhvb2tzID0gdGhpcy5faG9va0J1aWxkZXIuYnVpbGRIb29rc0ZvclBoYXNlKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZS5DUkVBVEUpO1xyXG4gICAgICAgICAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhvbkNyZWF0ZUhvb2tzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uQmVmb3JlID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vblN0YXJ0ID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vbkV4aXQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uUmV0YWluID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vbkVudGVyID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vbkZpbmlzaCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25TdWNjZXNzID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlblxyXG4gICAgICAgICAqIENyZWF0ZXMgdGhlIHRyYW5zaXRpb24tbGV2ZWwgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb25zXHJcbiAgICAgICAgICogKHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgaG9va3MpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLl9wbHVnaW5hcGkuX2dldEV2ZW50cygpLmZpbHRlcihmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGUuaG9va1BoYXNlICE9PSBleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFO1xyXG4gICAgICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZUV2ZW50KF90aGlzLCBfdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UsIHR5cGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRIb29rcyA9IGZ1bmN0aW9uIChob29rTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEhvb2tzW2hvb2tOYW1lXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFwcGx5Vmlld0NvbmZpZ3MgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRlcmluZ1N0YXRlcyA9IHRoaXMuX3RyZWVDaGFuZ2VzLmVudGVyaW5nLm1hcChmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3RhdGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBQYXRoVXRpbHMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuJHZpZXcsIHRoaXMuX3RyZWVDaGFuZ2VzLnRvLCBlbnRlcmluZ1N0YXRlcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSBpbnRlcm5hbCBmcm9tIFtTdGF0ZV0gb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuJGZyb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGludGVybmFsYXBpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgdG8gW1N0YXRlXSBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS4kdG8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIFwiZnJvbSBzdGF0ZVwiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSouXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIChcImZyb20gc3RhdGVcIikuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgXCJ0byBzdGF0ZVwiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byouXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAoXCJ0byBzdGF0ZVwiKS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRvKCkuc2VsZjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIFRhcmdldCBTdGF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSB0cmFuc2l0aW9uJ3MgW1tUYXJnZXRTdGF0ZV1dIGVuY2Fwc3VsYXRlcyB0aGUgW1t0b11dIHN0YXRlLCB0aGUgW1twYXJhbXNdXSwgYW5kIHRoZSBbW29wdGlvbnNdXSBhcyBhIHNpbmdsZSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB0aGUgW1tUYXJnZXRTdGF0ZV1dIG9mIHRoaXMgVHJhbnNpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnRhcmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0U3RhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdHdvIHRyYW5zaXRpb25zIGFyZSBlcXVpdmFsZW50LlxyXG4gICAgICAgICAqIEBkZXByZWNhdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoY29tcGFyZSkge1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEFsc28gY29tcGFyZSBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pcyh7IHRvOiBjb21wYXJlLiR0bygpLm5hbWUsIGZyb206IGNvbXBhcmUuJGZyb20oKS5uYW1lIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAhKGNvbXBhcmUudG8gJiYgIW1hdGNoU3RhdGUodGhpcy4kdG8oKSwgY29tcGFyZS50bykgfHwgY29tcGFyZS5mcm9tICYmICFtYXRjaFN0YXRlKHRoaXMuJGZyb20oKSwgY29tcGFyZS5mcm9tKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5wYXJhbXMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHBhdGhuYW1lID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHBhdGhuYW1lID0gXCJ0b1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXS5tYXAocHJvcChcInBhcmFtVmFsdWVzXCIpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIFtbVUlJbmplY3Rvcl1dIERlcGVuZGVuY3kgSW5qZWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBEZXBlbmRlbmN5IEluamVjdG9yIGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAodG8gc3RhdGUpLlxyXG4gICAgICAgICAqIFRoZSBpbmplY3RvciBwcm92aWRlcyByZXNvbHZlIHZhbHVlcyB3aGljaCB0aGUgdGFyZ2V0IHN0YXRlIGhhcyBhY2Nlc3MgdG8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgYFVJSW5qZWN0b3JgIGNhbiBhbHNvIHByb3ZpZGUgdmFsdWVzIGZyb20gdGhlIG5hdGl2ZSByb290L2dsb2JhbCBpbmplY3RvciAobmcxL25nMikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiAub25FbnRlcih7IGVudGVyaW5nOiAnbXlTdGF0ZScgfSwgdHJhbnMgPT4ge1xyXG4gICAgICAgICAqICAgdmFyIG15UmVzb2x2ZVZhbHVlID0gdHJhbnMuaW5qZWN0b3IoKS5nZXQoJ215UmVzb2x2ZScpO1xyXG4gICAgICAgICAqICAgLy8gSW5qZWN0IGEgZ2xvYmFsIHNlcnZpY2UgZnJvbSB0aGUgZ2xvYmFsL25hdGl2ZSBpbmplY3RvciAoaWYgaXQgZXhpc3RzKVxyXG4gICAgICAgICAqICAgdmFyIE15U2VydmljZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdNeVNlcnZpY2UnKTtcclxuICAgICAgICAgKiB9KVxyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSW4gc29tZSBjYXNlcyAoc3VjaCBhcyBgb25CZWZvcmVgKSwgeW91IG1heSBuZWVkIGFjY2VzcyB0byBzb21lIHJlc29sdmUgZGF0YSBidXQgaXQgaGFzIG5vdCB5ZXQgYmVlbiBmZXRjaGVkLlxyXG4gICAgICAgICAqIFlvdSBjYW4gdXNlIFtbVUlJbmplY3Rvci5nZXRBc3luY11dIHRvIGdldCBhIHByb21pc2UgZm9yIHRoZSBkYXRhLlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIC5vbkJlZm9yZSh7fSwgdHJhbnMgPT4ge1xyXG4gICAgICAgICAqICAgcmV0dXJuIHRyYW5zLmluamVjdG9yKCkuZ2V0QXN5bmMoJ215UmVzb2x2ZScpLnRoZW4obXlSZXNvbHZlVmFsdWUgPT5cclxuICAgICAgICAgKiAgICAgcmV0dXJuIG15UmVzb2x2ZVZhbHVlICE9PSAnQUJPUlQnO1xyXG4gICAgICAgICAqICAgfSk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIGBzdGF0ZWAgaXMgcHJvdmlkZWQsIHRoZSBpbmplY3RvciB0aGF0IGlzIHJldHVybmVkIHdpbGwgYmUgbGltaXRlZCB0byByZXNvbHZlIHZhbHVlcyB0aGF0IHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxyXG4gICAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCBpZiBib3RoIGEgcGFyZW50IHN0YXRlIGBmb29gIGFuZCBhIGNoaWxkIHN0YXRlIGBmb28uYmFyYCBoYXZlIGJvdGggZGVmaW5lZCBhIHJlc29sdmUgc3VjaCBhcyBgZGF0YWAuXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogLm9uRW50ZXIoeyB0bzogJ2Zvby5iYXInIH0sIHRyYW5zID0+IHtcclxuICAgICAgICAgKiAgIC8vIHJldHVybnMgcmVzdWx0IG9mIGBmb29gIHN0YXRlJ3MgYGRhdGFgIHJlc29sdmVcclxuICAgICAgICAgKiAgIC8vIGV2ZW4gdGhvdWdoIGBmb28uYmFyYCBhbHNvIGhhcyBhIGBkYXRhYCByZXNvbHZlXHJcbiAgICAgICAgICogICB2YXIgZm9vRGF0YSA9IHRyYW5zLmluamVjdG9yKCdmb28nKS5nZXQoJ2RhdGEnKTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIHlvdSBuZWVkIHJlc29sdmUgZGF0YSBmcm9tIHRoZSBleGl0aW5nIHN0YXRlcywgcGFzcyBgJ2Zyb20nYCBhcyBgcGF0aE5hbWVgLlxyXG4gICAgICAgICAqIFRoZSByZXNvbHZlIGRhdGEgZnJvbSB0aGUgYGZyb21gIHBhdGggd2lsbCBiZSByZXR1cm5lZC5cclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiAub25FeGl0KHsgZXhpdGluZzogJ2Zvby5iYXInIH0sIHRyYW5zID0+IHtcclxuICAgICAgICAgKiAgIC8vIEdldHMgdGhlIHJlc29sdmUgdmFsdWUgb2YgYGRhdGFgIGZyb20gdGhlIGV4aXRpbmcgc3RhdGUuXHJcbiAgICAgICAgICogICB2YXIgZm9vRGF0YSA9IHRyYW5zLmluamVjdG9yKG51bGwsICdmb28uYmFyJykuZ2V0KCdkYXRhJyk7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBMaW1pdHMgdGhlIHJlc29sdmVzIHByb3ZpZGVkIHRvIG9ubHkgdGhlIHJlc29sdmVzIHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoTmFtZSBEZWZhdWx0OiBgJ3RvJ2A6IENob29zZXMgdGhlIHBhdGggZm9yIHdoaWNoIHRvIGNyZWF0ZSB0aGUgaW5qZWN0b3IuIFVzZSB0aGlzIHRvIGFjY2VzcyByZXNvbHZlcyBmb3IgYGV4aXRpbmdgIHN0YXRlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgW1tVSUluamVjdG9yXV1cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5pbmplY3RvciA9IGZ1bmN0aW9uIChzdGF0ZSwgcGF0aE5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHBhdGhOYW1lID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHBhdGhOYW1lID0gXCJ0b1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUpIHBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aChwYXRoLCBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3RhdGUgPT09IHN0YXRlIHx8IG5vZGUuc3RhdGUubmFtZSA9PT0gc3RhdGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHBhdGgpLmluamVjdG9yKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIGFsbCBhdmFpbGFibGUgcmVzb2x2ZSB0b2tlbnMgKGtleXMpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtbaW5qZWN0b3JdXSB0byBpbnNwZWN0IHRoZSByZXNvbHZlIHZhbHVlc1xyXG4gICAgICAgICAqIGF2YWlsYWJsZSB0byB0aGUgVHJhbnNpdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgcmV0dXJucyBhbGwgdGhlIHRva2VucyBkZWZpbmVkIG9uIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gYmxvY2tzLCBmb3IgdGhlIHN0YXRlc1xyXG4gICAgICAgICAqIGluIHRoZSBUcmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlcy50b11dIHBhdGguXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogVGhpcyBleGFtcGxlIGxvZ3MgYWxsIHJlc29sdmUgdmFsdWVzXHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xyXG4gICAgICAgICAqIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IGNvbnNvbGUubG9nKHRva2VuICsgXCIgPSBcIiArIHRyYW5zLmluamVjdG9yKCkuZ2V0KHRva2VuKSkpO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIHByb21pc2VzIGZvciBlYWNoIHJlc29sdmUgdmFsdWUuXHJcbiAgICAgICAgICogVGhpcyB0cmlnZ2VycyBmZXRjaGVzIG9mIHJlc29sdmVzIChpZiBhbnkgaGF2ZSBub3QgeWV0IGJlZW4gZmV0Y2hlZCkuXHJcbiAgICAgICAgICogV2hlbiBhbGwgcHJvbWlzZXMgaGF2ZSBhbGwgc2V0dGxlZCwgaXQgbG9ncyB0aGUgcmVzb2x2ZSB2YWx1ZXMuXHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiBsZXQgdG9rZW5zID0gdHJhbnMuZ2V0UmVzb2x2ZVRva2VucygpO1xyXG4gICAgICAgICAqIGxldCBwcm9taXNlID0gdG9rZW5zLm1hcCh0b2tlbiA9PiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKHRva2VuKSk7XHJcbiAgICAgICAgICogUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4odmFsdWVzID0+IGNvbnNvbGUubG9nKFwiUmVzb2x2ZWQgdmFsdWVzOiBcIiArIHZhbHVlcykpO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogQW5ndWxhciAxIHVzZXJzIHdob3VsZCB1c2UgYCRxLmFsbCgpYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGhuYW1lIHJlc29sdmUgY29udGV4dCdzIHBhdGggbmFtZSAoZS5nLiwgYHRvYCBvciBgZnJvbWApXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiByZXNvbHZlIHRva2VucyAoa2V5cylcclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRSZXNvbHZlVG9rZW5zID0gZnVuY3Rpb24gKHBhdGhuYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRobmFtZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRobmFtZSA9IFwidG9cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXSkuZ2V0VG9rZW5zKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEeW5hbWljYWxseSBhZGRzIGEgbmV3IFtbUmVzb2x2YWJsZV1dIChpLmUuLCBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dKSB0byB0aGlzIHRyYW5zaXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgdHJhbnNpdGlvbiA9PiB7XHJcbiAgICAgICAgICogICB0cmFuc2l0aW9uLmFkZFJlc29sdmFibGUoe1xyXG4gICAgICAgICAqICAgICB0b2tlbjogJ215UmVzb2x2ZScsXHJcbiAgICAgICAgICogICAgIGRlcHM6IFsnTXlTZXJ2aWNlJ10sXHJcbiAgICAgICAgICogICAgIHJlc29sdmVGbjogbXlTZXJ2aWNlID0+IG15U2VydmljZS5nZXREYXRhKClcclxuICAgICAgICAgKiAgIH0pO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHJlc29sdmFibGUgYSBbW1Jlc29sdmFibGVMaXRlcmFsXV0gb2JqZWN0IChvciBhIFtbUmVzb2x2YWJsZV1dKVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgaW4gdGhlIFwidG8gcGF0aFwiIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBuZXcgcmVzb2x2ZSAob3RoZXJ3aXNlLCB0aGUgcm9vdCBzdGF0ZSlcclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5hZGRSZXNvbHZhYmxlID0gZnVuY3Rpb24gKHJlc29sdmFibGUsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzb2x2YWJsZSA9IGlzKFJlc29sdmFibGUpKHJlc29sdmFibGUpID8gcmVzb2x2YWJsZSA6IG5ldyBSZXNvbHZhYmxlKHJlc29sdmFibGUpO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGVOYW1lID0gdHlwZW9mIHN0YXRlID09PSBcInN0cmluZ1wiID8gc3RhdGUgOiBzdGF0ZS5uYW1lO1xyXG4gICAgICAgICAgICB2YXIgdG9wYXRoID0gdGhpcy5fdHJlZUNoYW5nZXMudG87XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gZmluZCh0b3BhdGgsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5zdGF0ZS5uYW1lID09PSBzdGF0ZU5hbWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x2ZUNvbnRleHQgPSBuZXcgUmVzb2x2ZUNvbnRleHQodG9wYXRoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZUNvbnRleHQuYWRkUmVzb2x2YWJsZXMoW3Jlc29sdmFibGVdLCB0YXJnZXROb2RlLnN0YXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIHRyYW5zaXRpb24gZnJvbSB3aGljaCB0aGlzIHRyYW5zaXRpb24gd2FzIHJlZGlyZWN0ZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCB0cmFuc2l0aW9uIGlzIGEgcmVkaXJlY3QsIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIHRyYW5zaXRpb24gdGhhdCB3YXMgcmVkaXJlY3RlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cclxuICAgICAgICAgKiB0cmFuc2l0aW9uQS5vblN0YXJ0KHt9LCAoKSA9PiAkc3RhdGUudGFyZ2V0KCdCJykpO1xyXG4gICAgICAgICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0InIH0sICh0cmFucykgPT4ge1xyXG4gICAgICAgICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnQic7IC8vIHRydWVcclxuICAgICAgICAgKiAgIHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkgPT09IHRyYW5zaXRpb25BOyAvLyB0cnVlXHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgVHJhbnNpdGlvbiwgb3IgbnVsbCBpZiB0aGlzIFRyYW5zaXRpb24gaXMgbm90IHRoZSByZXN1bHQgb2YgYSByZWRpcmVjdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ZWRGcm9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5yZWRpcmVjdGVkRnJvbSB8fCBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiBpbiBhIHJlZGlyZWN0IGNoYWluXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBIHRyYW5zaXRpb24gbWlnaHQgYmVsb25nIHRvIGEgbG9uZyBjaGFpbiBvZiBtdWx0aXBsZSByZWRpcmVjdHMuXHJcbiAgICAgICAgICogVGhpcyBtZXRob2Qgd2Fsa3MgdGhlIFtbcmVkaXJlY3RlZEZyb21dXSBjaGFpbiBiYWNrIHRvIHRoZSBvcmlnaW5hbCAoZmlyc3QpIHRyYW5zaXRpb24gaW4gdGhlIGNoYWluLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogLy8gc3RhdGVzXHJcbiAgICAgICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQScsIHJlZGlyZWN0VG86ICdCJyB9KTtcclxuICAgICAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdCJywgcmVkaXJlY3RUbzogJ0MnIH0pO1xyXG4gICAgICAgICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0MnLCByZWRpcmVjdFRvOiAnRCcgfSk7XHJcbiAgICAgICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnRCcgfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBsZXQgdHJhbnNpdGlvbkEgPSAkc3RhdGUuZ28oJ0EnKS50cmFuc2l0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAkdHJhbnNpdGlvbnMub25TdWNjZXNzKHsgdG86ICdEJyB9LCAodHJhbnMpID0+IHtcclxuICAgICAgICAgKiAgIHRyYW5zLnRvKCkubmFtZSA9PT0gJ0QnOyAvLyB0cnVlXHJcbiAgICAgICAgICogICB0cmFucy5yZWRpcmVjdGVkRnJvbSgpLnRvKCkubmFtZSA9PT0gJ0MnOyAvLyB0cnVlXHJcbiAgICAgICAgICogICB0cmFucy5vcmlnaW5hbFRyYW5zaXRpb24oKSA9PT0gdHJhbnNpdGlvbkE7IC8vIHRydWVcclxuICAgICAgICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpLnRvKCkubmFtZSA9PT0gJ0EnOyAvLyB0cnVlXHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgVHJhbnNpdGlvbiB0aGF0IHN0YXJ0ZWQgYSByZWRpcmVjdCBjaGFpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9yaWdpbmFsVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJmID0gdGhpcy5yZWRpcmVjdGVkRnJvbSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmYgJiYgcmYub3JpZ2luYWxUcmFuc2l0aW9uKCkgfHwgdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgdHJhbnNpdGlvbiBvcHRpb25zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB0aGUgb3B0aW9ucyBmb3IgdGhpcyBUcmFuc2l0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIGVudGVyZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZXMgdGhhdCB3aWxsIGJlIGVudGVyZWQgZHVyaW5nIHRoaXMgdHJhbnNpdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5lbnRlcmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcCh0aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZywgcHJvcCgnc3RhdGUnKSkubWFwKHN0YXRlU2VsZik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBzdGF0ZXMgYmVpbmcgZXhpdGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgd2lsbCBiZSBleGl0ZWQgZHVyaW5nIHRoaXMgdHJhbnNpdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5leGl0aW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwKHRoaXMuX3RyZWVDaGFuZ2VzLmV4aXRpbmcsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpLnJldmVyc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyByZXRhaW5lZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlcyB0aGF0IGFyZSBhbHJlYWR5IGVudGVyZWQgZnJvbSBhIHByZXZpb3VzIFRyYW5zaXRpb24sIHRoYXQgd2lsbCBub3QgYmVcclxuICAgICAgICAgKiAgICBleGl0ZWQgZHVyaW5nIHRoaXMgVHJhbnNpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJldGFpbmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwKHRoaXMuX3RyZWVDaGFuZ2VzLnJldGFpbmVkLCBwcm9wKCdzdGF0ZScpKS5tYXAoc3RhdGVTZWxmKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgW1tWaWV3Q29uZmlnXV1zIGFzc29jaWF0ZWQgd2l0aCB0aGlzIFRyYW5zaXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEVhY2ggc3RhdGUgY2FuIGRlZmluZSBvbmUgb3IgbW9yZSB2aWV3cyAodGVtcGxhdGUvY29udHJvbGxlciksIHdoaWNoIGFyZSBlbmNhcHN1bGF0ZWQgYXMgYFZpZXdDb25maWdgIG9iamVjdHMuXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgZmV0Y2hlcyB0aGUgYFZpZXdDb25maWdzYCBmb3IgYSBnaXZlbiBwYXRoIGluIHRoZSBUcmFuc2l0aW9uIChlLmcuLCBcInRvXCIgb3IgXCJlbnRlcmluZ1wiKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRobmFtZSB0aGUgbmFtZSBvZiB0aGUgcGF0aCB0byBmZXRjaCB2aWV3cyBmb3I6XHJcbiAgICAgICAgICogICAoYCd0bydgLCBgJ2Zyb20nYCwgYCdlbnRlcmluZydgLCBgJ2V4aXRpbmcnYCwgYCdyZXRhaW5lZCdgKVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBJZiBwcm92aWRlZCwgb25seSByZXR1cm5zIHRoZSBgVmlld0NvbmZpZ2BzIGZvciBhIHNpbmdsZSBzdGF0ZSBpbiB0aGUgcGF0aFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgYSBsaXN0IG9mIFZpZXdDb25maWcgb2JqZWN0cyBmb3IgdGhlIGdpdmVuIHBhdGguXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudmlld3MgPSBmdW5jdGlvbiAocGF0aG5hbWUsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRobmFtZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRobmFtZSA9IFwiZW50ZXJpbmdcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXTtcclxuICAgICAgICAgICAgcGF0aCA9ICFzdGF0ZSA/IHBhdGggOiBwYXRoLmZpbHRlcihwcm9wRXEoJ3N0YXRlJywgc3RhdGUpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGgubWFwKHByb3AoXCJ2aWV3c1wiKSkuZmlsdGVyKGlkZW50aXR5KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhuYW1lID8gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdIDogdGhpcy5fdHJlZUNoYW5nZXM7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IHRyYW5zaXRpb24gdGhhdCBpcyBhIHJlZGlyZWN0aW9uIG9mIHRoZSBjdXJyZW50IG9uZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgdHJhbnNpdGlvbiBjYW4gYmUgcmV0dXJuZWQgZnJvbSBhIFtbVHJhbnNpdGlvblNlcnZpY2VdXSBob29rIHRvXHJcbiAgICAgICAgICogcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlIGFuZC9vciBzZXQgb2YgcGFyYW1ldGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgUmV0dXJucyBhIG5ldyBbW1RyYW5zaXRpb25dXSBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RzID0gMSxcclxuICAgICAgICAgICAgICAgIHRyYW5zID0gdGhpcztcclxuICAgICAgICAgICAgd2hpbGUgKCh0cmFucyA9IHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICgrK3JlZGlyZWN0cyA+IDIwKSB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbWFueSBjb25zZWN1dGl2ZSBUcmFuc2l0aW9uIHJlZGlyZWN0cyAoMjArKVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RPcHRzID0geyByZWRpcmVjdGVkRnJvbTogdGhpcywgc291cmNlOiBcInJlZGlyZWN0XCIgfTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gd2FzIGNhdXNlZCBieSBVUkwgc3luYywgdGhlbiB1c2UgeyBsb2NhdGlvbjogJ3JlcGxhY2UnIH1cclxuICAgICAgICAgICAgLy8gb24gdGhlIG5ldyB0cmFuc2l0aW9uICh1bmxlc3MgdGhlIHRhcmdldCBzdGF0ZSBleHBsaWNpdGx5IHNwZWNpZmllcyBsb2NhdGlvbjogZmFsc2UpLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGNhdXNlcyB0aGUgb3JpZ2luYWwgdXJsIHRvIGJlIHJlcGxhY2VkIHdpdGggdGhlIHVybCBmb3IgdGhlIHJlZGlyZWN0IHRhcmdldFxyXG4gICAgICAgICAgICAvLyBzbyB0aGUgb3JpZ2luYWwgdXJsIGRpc2FwcGVhcnMgZnJvbSB0aGUgYnJvd3NlciBoaXN0b3J5LlxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zKCkuc291cmNlID09PSAndXJsJyAmJiB0YXJnZXRTdGF0ZS5vcHRpb25zKCkubG9jYXRpb24gIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdE9wdHMubG9jYXRpb24gPSAncmVwbGFjZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5ld09wdGlvbnMgPSBleHRlbmQoe30sIHRoaXMub3B0aW9ucygpLCB0YXJnZXRTdGF0ZS5vcHRpb25zKCksIHJlZGlyZWN0T3B0cyk7XHJcbiAgICAgICAgICAgIHRhcmdldFN0YXRlID0gdGFyZ2V0U3RhdGUud2l0aE9wdGlvbnMobmV3T3B0aW9ucywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciBuZXdUcmFuc2l0aW9uID0gdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20sIHRhcmdldFN0YXRlKTtcclxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsRW50ZXJpbmdOb2RlcyA9IHRoaXMuX3RyZWVDaGFuZ2VzLmVudGVyaW5nO1xyXG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RFbnRlcmluZ05vZGVzID0gbmV3VHJhbnNpdGlvbi5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XHJcbiAgICAgICAgICAgIC8vIC0tLSBSZS11c2UgcmVzb2x2ZSBkYXRhIGZyb20gb3JpZ2luYWwgdHJhbnNpdGlvbiAtLS1cclxuICAgICAgICAgICAgLy8gV2hlbiByZWRpcmVjdGluZyBmcm9tIGEgcGFyZW50IHN0YXRlIHRvIGEgY2hpbGQgc3RhdGUgd2hlcmUgdGhlIHBhcmVudCBwYXJhbWV0ZXIgdmFsdWVzIGhhdmVuJ3QgY2hhbmdlZFxyXG4gICAgICAgICAgICAvLyAoYmVjYXVzZSBvZiB0aGUgcmVkaXJlY3QpLCB0aGUgcmVzb2x2ZXMgZmV0Y2hlZCBieSB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiBhcmUgc3RpbGwgdmFsaWQgaW4gdGhlXHJcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0ZWQgdHJhbnNpdGlvbi5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gVGhpcyBhbGxvd3MgeW91IHRvIGRlZmluZSBhIHJlZGlyZWN0IG9uIGEgcGFyZW50IHN0YXRlIHdoaWNoIGRlcGVuZHMgb24gYW4gYXN5bmMgcmVzb2x2ZSB2YWx1ZS5cclxuICAgICAgICAgICAgLy8gWW91IGNhbiB3YWl0IGZvciB0aGUgcmVzb2x2ZSwgdGhlbiByZWRpcmVjdCB0byBhIGNoaWxkIHN0YXRlIGJhc2VkIG9uIHRoZSByZXN1bHQuXHJcbiAgICAgICAgICAgIC8vIFRoZSByZWRpcmVjdGVkIHRyYW5zaXRpb24gZG9lcyBub3QgaGF2ZSB0byByZS1mZXRjaCB0aGUgcmVzb2x2ZS5cclxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIHZhciBub2RlSXNSZWxvYWRpbmcgPSBmdW5jdGlvbiBub2RlSXNSZWxvYWRpbmcocmVsb2FkU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWxvYWRTdGF0ZSAmJiBub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gRmluZCBhbnkgXCJlbnRlcmluZ1wiIG5vZGVzIGluIHRoZSByZWRpcmVjdCBwYXRoIHRoYXQgbWF0Y2ggdGhlIG9yaWdpbmFsIHBhdGggYW5kIGFyZW4ndCBiZWluZyByZWxvYWRlZFxyXG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdFbnRlcmluZ05vZGVzID0gUGF0aFV0aWxzLm1hdGNoaW5nKHJlZGlyZWN0RW50ZXJpbmdOb2Rlcywgb3JpZ2luYWxFbnRlcmluZ05vZGVzLCBQYXRoVXRpbHMubm9uRHluYW1pY1BhcmFtcykuZmlsdGVyKG5vdChub2RlSXNSZWxvYWRpbmcodGFyZ2V0U3RhdGUub3B0aW9ucygpLnJlbG9hZFN0YXRlKSkpO1xyXG4gICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIChwb3NzaWJseSBwcmUtcmVzb2x2ZWQpIHJlc29sdmFibGVzIGZvciB0aGUgbWF0Y2hpbmcgZW50ZXJpbmcgbm9kZXMuXHJcbiAgICAgICAgICAgIG1hdGNoaW5nRW50ZXJpbmdOb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlLCBpZHgpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUucmVzb2x2YWJsZXMgPSBvcmlnaW5hbEVudGVyaW5nTm9kZXNbaWR4XS5yZXNvbHZhYmxlcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdUcmFuc2l0aW9uO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gSWYgYSB0cmFuc2l0aW9uIGRvZXNuJ3QgZXhpdC9lbnRlciBhbnkgc3RhdGVzLCByZXR1cm5zIGFueSBbW1BhcmFtXV0gd2hvc2UgdmFsdWUgY2hhbmdlZCAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLl9jaGFuZ2VkUGFyYW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGMgPSB0aGlzLl90cmVlQ2hhbmdlcztcclxuICAgICAgICAgICAgLyoqIFJldHVybiB1bmRlZmluZWQgaWYgaXQncyBub3QgYSBcImR5bmFtaWNcIiB0cmFuc2l0aW9uLCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb25zICovXHJcbiAgICAgICAgICAgIC8vIElmIHVzZXIgZXhwbGljaXRseSB3YW50cyBhIHJlbG9hZFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5yZWxvYWQpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIC8vIElmIGFueSBzdGF0ZXMgYXJlIGV4aXRpbmcgb3IgZW50ZXJpbmdcclxuICAgICAgICAgICAgaWYgKHRjLmV4aXRpbmcubGVuZ3RoIHx8IHRjLmVudGVyaW5nLmxlbmd0aCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgLy8gSWYgdG8vZnJvbSBwYXRoIGxlbmd0aHMgZGlmZmVyXHJcbiAgICAgICAgICAgIGlmICh0Yy50by5sZW5ndGggIT09IHRjLmZyb20ubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgdG8vZnJvbSBwYXRocyBhcmUgZGlmZmVyZW50XHJcbiAgICAgICAgICAgIHZhciBwYXRoc0RpZmZlciA9IGFycmF5VHVwbGVzKHRjLnRvLCB0Yy5mcm9tKS5tYXAoZnVuY3Rpb24gKHR1cGxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHVwbGVbMF0uc3RhdGUgIT09IHR1cGxlWzFdLnN0YXRlO1xyXG4gICAgICAgICAgICB9KS5yZWR1Y2UoYW55VHJ1ZVIsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKHBhdGhzRGlmZmVyKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAvLyBGaW5kIGFueSBwYXJhbWV0ZXIgdmFsdWVzIHRoYXQgZGlmZmVyXHJcbiAgICAgICAgICAgIHZhciBub2RlU2NoZW1hcyA9IHRjLnRvLm1hcChmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUucGFyYW1TY2hlbWE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBbdGMudG8sIHRjLmZyb21dLm1hcChmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGgubWFwKGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgucGFyYW1WYWx1ZXM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICB0b1ZhbHVlcyA9IF9hWzBdLFxyXG4gICAgICAgICAgICAgICAgZnJvbVZhbHVlcyA9IF9hWzFdO1xyXG4gICAgICAgICAgICB2YXIgdHVwbGVzID0gYXJyYXlUdXBsZXMobm9kZVNjaGVtYXMsIHRvVmFsdWVzLCBmcm9tVmFsdWVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHR1cGxlcy5tYXAoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NoZW1hID0gX2FbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9WYWxzID0gX2FbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbVZhbHMgPSBfYVsyXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHNjaGVtYSwgdG9WYWxzLCBmcm9tVmFscyk7XHJcbiAgICAgICAgICAgIH0pLnJlZHVjZSh1bm5lc3RSLCBbXSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zaXRpb24gaXMgZHluYW1pYy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEEgdHJhbnNpdGlvbiBpcyBkeW5hbWljIGlmIG5vIHN0YXRlcyBhcmUgZW50ZXJlZCBub3IgZXhpdGVkLCBidXQgYXQgbGVhc3Qgb25lIGR5bmFtaWMgcGFyYW1ldGVyIGhhcyBjaGFuZ2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBkeW5hbWljXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZHluYW1pYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLl9jaGFuZ2VkUGFyYW1zKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhY2hhbmdlcyA/IGZhbHNlIDogY2hhbmdlcy5tYXAoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB4LmR5bmFtaWM7XHJcbiAgICAgICAgICAgIH0pLnJlZHVjZShhbnlUcnVlUiwgZmFsc2UpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBIHRyYW5zaXRpb24gaXMgaWdub3JlZCBpZiBubyBzdGF0ZXMgYXJlIGVudGVyZWQgbm9yIGV4aXRlZCwgYW5kIG5vIHBhcmFtZXRlciB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBpZ25vcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmlnbm9yZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX2lnbm9yZWRSZWFzb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuX2lnbm9yZWRSZWFzb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZW5kaW5nID0gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICB2YXIgcmVsb2FkU3RhdGUgPSB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlO1xyXG4gICAgICAgICAgICB2YXIgc2FtZSA9IGZ1bmN0aW9uIHNhbWUocGF0aEEsIHBhdGhCKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aEEubGVuZ3RoICE9PSBwYXRoQi5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IFBhdGhVdGlscy5tYXRjaGluZyhwYXRoQSwgcGF0aEIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhBLmxlbmd0aCA9PT0gbWF0Y2hpbmcuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyZWxvYWRTdGF0ZSB8fCAhbm9kZS5zdGF0ZS5pbmNsdWRlc1tyZWxvYWRTdGF0ZS5uYW1lXTtcclxuICAgICAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIG5ld1RDID0gdGhpcy50cmVlQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB2YXIgcGVuZFRDID0gcGVuZGluZyAmJiBwZW5kaW5nLnRyZWVDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmIChwZW5kVEMgJiYgc2FtZShwZW5kVEMudG8sIG5ld1RDLnRvKSAmJiBzYW1lKHBlbmRUQy5leGl0aW5nLCBuZXdUQy5leGl0aW5nKSkgcmV0dXJuIFwiU2FtZUFzUGVuZGluZ1wiO1xyXG4gICAgICAgICAgICBpZiAobmV3VEMuZXhpdGluZy5sZW5ndGggPT09IDAgJiYgbmV3VEMuZW50ZXJpbmcubGVuZ3RoID09PSAwICYmIHNhbWUobmV3VEMuZnJvbSwgbmV3VEMudG8pKSByZXR1cm4gXCJTYW1lQXNDdXJyZW50XCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSdW5zIHRoZSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyBnZW5lcmFsbHkgY2FsbGVkIGZyb20gdGhlIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25Ub11dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzdWNjZXNzZnVsIHRyYW5zaXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgcnVuQWxsSG9va3MgPSBUcmFuc2l0aW9uSG9vay5ydW5BbGxIb29rcztcclxuICAgICAgICAgICAgLy8gR2V0cyB0cmFuc2l0aW9uIGhvb2tzIGFycmF5IGZvciB0aGUgZ2l2ZW4gcGhhc2VcclxuICAgICAgICAgICAgdmFyIGdldEhvb2tzRm9yID0gZnVuY3Rpb24gZ2V0SG9va3NGb3IocGhhc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5faG9va0J1aWxkZXIuYnVpbGRIb29rc0ZvclBoYXNlKHBoYXNlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgY2hhaW4gaXMgY29tcGxldGUsIHRoZW4gcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkXHJcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uU3VjY2VzcyA9IGZ1bmN0aW9uIHRyYW5zaXRpb25TdWNjZXNzKCkge1xyXG4gICAgICAgICAgICAgICAgdHJhY2UudHJhY2VTdWNjZXNzKF90aGlzLiR0bygpLCBfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLl9kZWZlcnJlZC5yZXNvbHZlKF90aGlzLnRvKCkpO1xyXG4gICAgICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLlNVQ0NFU1MpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25FcnJvciA9IGZ1bmN0aW9uIHRyYW5zaXRpb25FcnJvcihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlRXJyb3IocmVhc29uLCBfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fZXJyb3IgPSByZWFzb247XHJcbiAgICAgICAgICAgICAgICBydW5BbGxIb29rcyhnZXRIb29rc0ZvcihleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuRVJST1IpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHJ1blRyYW5zaXRpb24gPSBmdW5jdGlvbiBydW5UcmFuc2l0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2FpdCB0byBidWlsZCB0aGUgUlVOIGhvb2sgY2hhaW4gdW50aWwgdGhlIEJFRk9SRSBob29rcyBhcmUgZG9uZVxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhbGxvd3MgYSBCRUZPUkUgaG9vayB0byBkeW5hbWljYWxseSBhZGQgYWRkaXRpb25hbCBSVU4gaG9va3MgdmlhIHRoZSBUcmFuc2l0aW9uIG9iamVjdC5cclxuICAgICAgICAgICAgICAgIHZhciBhbGxSdW5Ib29rcyA9IGdldEhvb2tzRm9yKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZS5SVU4pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiBkb25lKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rLmludm9rZUhvb2tzKGFsbFJ1bkhvb2tzLCBkb25lKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHN0YXJ0VHJhbnNpdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBnbG9iYWxzID0gX3RoaXMucm91dGVyLmdsb2JhbHM7XHJcbiAgICAgICAgICAgICAgICBnbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkID0gX3RoaXMuJGlkO1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFscy50cmFuc2l0aW9uID0gX3RoaXM7XHJcbiAgICAgICAgICAgICAgICBnbG9iYWxzLnRyYW5zaXRpb25IaXN0b3J5LmVucXVldWUoX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgdHJhY2UudHJhY2VUcmFuc2l0aW9uU3RhcnQoX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGFsbEJlZm9yZUhvb2tzID0gZ2V0SG9va3NGb3IoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLkJFRk9SRSk7XHJcbiAgICAgICAgICAgIFRyYW5zaXRpb25Ib29rLmludm9rZUhvb2tzKGFsbEJlZm9yZUhvb2tzLCBzdGFydFRyYW5zaXRpb24pLnRoZW4ocnVuVHJhbnNpdGlvbikudGhlbih0cmFuc2l0aW9uU3VjY2VzcywgdHJhbnNpdGlvbkVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKSB8fCB0aGlzLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFib3J0cyB0aGlzIHRyYW5zaXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEltcGVyYXRpdmUgQVBJIHRvIGFib3J0IGEgVHJhbnNpdGlvbi5cclxuICAgICAgICAgKiBUaGlzIG9ubHkgYXBwbGllcyB0byBUcmFuc2l0aW9ucyB0aGF0IGFyZSBub3QgeWV0IGNvbXBsZXRlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgc2V0IGZsYWcgaWYgdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZVxyXG4gICAgICAgICAgICBpZiAoaXNVbmRlZmluZWQodGhpcy5zdWNjZXNzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBUcmFuc2l0aW9uIGVycm9yIHJlYXNvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQgKGFuZCBjb3VsZCBub3QgYmUgcnVuKSwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQuXHJcbiAgICAgICAgICogSWYgdGhlIHRyYW5zaXRpb24gd2FzIHZhbGlkIGFuZCByYW4sIGJ1dCB3YXMgbm90IHN1Y2Nlc3NmdWwsIHJldHVybnMgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBmYWlsZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBhbiBlcnJvciBtZXNzYWdlIGV4cGxhaW5pbmcgd2h5IHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQsIG9yIHRoZSByZWFzb24gdGhlIHRyYW5zaXRpb24gZmFpbGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLiR0bygpO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUuc2VsZi5hYnN0cmFjdCkgcmV0dXJuIFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYWJzdHJhY3Qgc3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJ1wiO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1EZWZzID0gc3RhdGUucGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVzJCQxID0gdGhpcy5wYXJhbXMoKTtcclxuICAgICAgICAgICAgdmFyIGludmFsaWRQYXJhbXMgPSBwYXJhbURlZnMuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFwYXJhbS52YWxpZGF0ZXModmFsdWVzJCQxW3BhcmFtLmlkXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaW52YWxpZFBhcmFtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlBhcmFtIHZhbHVlcyBub3QgdmFsaWQgZm9yIHN0YXRlICdcIiArIHN0YXRlLm5hbWUgKyBcIicuIEludmFsaWQgcGFyYW1zOiBbIFwiICsgaW52YWxpZFBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmlkO1xyXG4gICAgICAgICAgICAgICAgfSkuam9pbignLCAnKSArIFwiIF1cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdWNjZXNzID09PSBmYWxzZSkgcmV0dXJuIHRoaXMuX2Vycm9yO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUcmFuc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tU3RhdGVPck5hbWUgPSB0aGlzLmZyb20oKTtcclxuICAgICAgICAgICAgdmFyIHRvU3RhdGVPck5hbWUgPSB0aGlzLnRvKCk7XHJcbiAgICAgICAgICAgIHZhciBhdm9pZEVtcHR5SGFzaCA9IGZ1bmN0aW9uIGF2b2lkRW1wdHlIYXNoKHBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtc1tcIiNcIl0gIT09IG51bGwgJiYgcGFyYW1zW1wiI1wiXSAhPT0gdW5kZWZpbmVkID8gcGFyYW1zIDogb21pdChwYXJhbXMsIFtcIiNcIl0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyAoWCkgbWVhbnMgdGhlIHRvIHN0YXRlIGlzIGludmFsaWQuXHJcbiAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuJGlkLFxyXG4gICAgICAgICAgICAgICAgZnJvbSA9IGlzT2JqZWN0KGZyb21TdGF0ZU9yTmFtZSkgPyBmcm9tU3RhdGVPck5hbWUubmFtZSA6IGZyb21TdGF0ZU9yTmFtZSxcclxuICAgICAgICAgICAgICAgIGZyb21QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5fdHJlZUNoYW5nZXMuZnJvbS5tYXAocHJvcCgncGFyYW1WYWx1ZXMnKSkucmVkdWNlKG1lcmdlUiwge30pKSksXHJcbiAgICAgICAgICAgICAgICB0b1ZhbGlkID0gdGhpcy52YWxpZCgpID8gXCJcIiA6IFwiKFgpIFwiLFxyXG4gICAgICAgICAgICAgICAgdG8gPSBpc09iamVjdCh0b1N0YXRlT3JOYW1lKSA/IHRvU3RhdGVPck5hbWUubmFtZSA6IHRvU3RhdGVPck5hbWUsXHJcbiAgICAgICAgICAgICAgICB0b1BhcmFtcyA9IHN0cmluZ2lmeShhdm9pZEVtcHR5SGFzaCh0aGlzLnBhcmFtcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlRyYW5zaXRpb24jXCIgKyBpZCArIFwiKCAnXCIgKyBmcm9tICsgXCInXCIgKyBmcm9tUGFyYW1zICsgXCIgLT4gXCIgKyB0b1ZhbGlkICsgXCInXCIgKyB0byArIFwiJ1wiICsgdG9QYXJhbXMgKyBcIiApXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFRyYW5zaXRpb24uZGlUb2tlbiA9IFRyYW5zaXRpb247XHJcbiAgICAgICAgcmV0dXJuIFRyYW5zaXRpb247XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbnMgdGhhdCBtYW5pcHVsYXRlIHN0cmluZ3NcclxuICAgICAqXHJcbiAgICAgKiBBbHRob3VnaCB0aGVzZSBmdW5jdGlvbnMgYXJlIGV4cG9ydGVkLCB0aGV5IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cclxuICAgICAqXHJcbiAgICAgKiBAbW9kdWxlIGNvbW1vbl9zdHJpbmdzXHJcbiAgICAgKi8gLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgc2hvcnRlbmVkIHRvIGEgbWF4aW11bSBsZW5ndGhcclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGUgc3RyaW5nIGlzIGFscmVhZHkgbGVzcyB0aGFuIHRoZSBgbWF4YCBsZW5ndGgsIHJldHVybiB0aGUgc3RyaW5nLlxyXG4gICAgICogRWxzZSByZXR1cm4gdGhlIHN0cmluZywgc2hvcnRlbmVkIHRvIGBtYXggLSAzYCBhbmQgYXBwZW5kIHRocmVlIGRvdHMgKFwiLi4uXCIpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtYXggdGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBzdHJpbmcgdG8gcmV0dXJuXHJcbiAgICAgKiBAcGFyYW0gc3RyIHRoZSBpbnB1dCBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWF4TGVuZ3RoKG1heCwgc3RyKSB7XHJcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPD0gbWF4KSByZXR1cm4gc3RyO1xyXG4gICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIG1heCAtIDMpICsgXCIuLi5cIjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHN0cmluZywgd2l0aCBzcGFjZXMgYWRkZWQgdG8gdGhlIGVuZCwgdXAgdG8gYSBkZXNpcmVkIHN0ciBsZW5ndGhcclxuICAgICAqXHJcbiAgICAgKiBJZiB0aGUgc3RyaW5nIGlzIGFscmVhZHkgbG9uZ2VyIHRoYW4gdGhlIGRlc2lyZWQgbGVuZ3RoLCByZXR1cm4gdGhlIHN0cmluZy5cclxuICAgICAqIEVsc2UgcmV0dXJucyB0aGUgc3RyaW5nLCB3aXRoIGV4dHJhIHNwYWNlcyBvbiB0aGUgZW5kLCBzdWNoIHRoYXQgaXQgcmVhY2hlcyBgbGVuZ3RoYCBjaGFyYWN0ZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsZW5ndGggdGhlIGRlc2lyZWQgbGVuZ3RoIG9mIHRoZSBzdHJpbmcgdG8gcmV0dXJuXHJcbiAgICAgKiBAcGFyYW0gc3RyIHRoZSBpbnB1dCBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGFkU3RyaW5nKGxlbmd0aCwgc3RyKSB7XHJcbiAgICAgICAgd2hpbGUgKHN0ci5sZW5ndGggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgc3RyICs9IFwiIFwiO1xyXG4gICAgICAgIH1yZXR1cm4gc3RyO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24ga2Vib2JTdHJpbmcoY2FtZWxDYXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbWVsQ2FzZS5yZXBsYWNlKC9eKFtBLVpdKS8sIGZ1bmN0aW9uICgkMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJDEudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9KSAvLyByZXBsYWNlIGZpcnN0IGNoYXJcclxuICAgICAgICAucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoJDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiLVwiICsgJDEudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9KTsgLy8gcmVwbGFjZSByZXN0XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBmdW5jdGlvblRvU3RyaW5nKGZuKSB7XHJcbiAgICAgICAgdmFyIGZuU3RyID0gZm5Ub1N0cmluZyhmbik7XHJcbiAgICAgICAgdmFyIG5hbWVkRnVuY3Rpb25NYXRjaCA9IGZuU3RyLm1hdGNoKC9eKGZ1bmN0aW9uIFteIF0rXFwoW14pXSpcXCkpLyk7XHJcbiAgICAgICAgdmFyIHRvU3RyID0gbmFtZWRGdW5jdGlvbk1hdGNoID8gbmFtZWRGdW5jdGlvbk1hdGNoWzFdIDogZm5TdHI7XHJcbiAgICAgICAgdmFyIGZuTmFtZSA9IGZuWyduYW1lJ10gfHwgXCJcIjtcclxuICAgICAgICBpZiAoZm5OYW1lICYmIHRvU3RyLm1hdGNoKC9mdW5jdGlvbiBcXCgvKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uICcgKyBmbk5hbWUgKyB0b1N0ci5zdWJzdHIoOSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b1N0cjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZuVG9TdHJpbmcoZm4pIHtcclxuICAgICAgICB2YXIgX2ZuID0gaXNBcnJheShmbikgPyBmbi5zbGljZSgtMSlbMF0gOiBmbjtcclxuICAgICAgICByZXR1cm4gX2ZuICYmIF9mbi50b1N0cmluZygpIHx8IFwidW5kZWZpbmVkXCI7XHJcbiAgICB9XHJcbiAgICB2YXIgc3RyaW5naWZ5UGF0dGVybkZuID0gbnVsbDtcclxuICAgIHZhciBzdHJpbmdpZnlQYXR0ZXJuID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0dGVybih2YWx1ZSkge1xyXG4gICAgICAgIHZhciBpc1JlamVjdGlvbiA9IFJlamVjdGlvbi5pc1JlamVjdGlvblByb21pc2U7XHJcbiAgICAgICAgc3RyaW5naWZ5UGF0dGVybkZuID0gc3RyaW5naWZ5UGF0dGVybkZuIHx8IHBhdHRlcm4oW1tub3QoaXNEZWZpbmVkKSwgdmFsKFwidW5kZWZpbmVkXCIpXSwgW2lzTnVsbCwgdmFsKFwibnVsbFwiKV0sIFtpc1Byb21pc2UsIHZhbChcIltQcm9taXNlXVwiKV0sIFtpc1JlamVjdGlvbiwgZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHguX3RyYW5zaXRpb25SZWplY3Rpb24udG9TdHJpbmcoKTtcclxuICAgICAgICB9XSwgW2lzKFJlamVjdGlvbiksIGludm9rZShcInRvU3RyaW5nXCIpXSwgW2lzKFRyYW5zaXRpb24pLCBpbnZva2UoXCJ0b1N0cmluZ1wiKV0sIFtpcyhSZXNvbHZhYmxlKSwgaW52b2tlKFwidG9TdHJpbmdcIildLCBbaXNJbmplY3RhYmxlLCBmdW5jdGlvblRvU3RyaW5nXSwgW3ZhbCh0cnVlKSwgaWRlbnRpdHldXSk7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeVBhdHRlcm5Gbih2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gc3RyaW5naWZ5KG8pIHtcclxuICAgICAgICB2YXIgc2VlbiA9IFtdO1xyXG4gICAgICAgIGZ1bmN0aW9uIGZvcm1hdCh2YWwkJDEpIHtcclxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHZhbCQkMSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWVuLmluZGV4T2YodmFsJCQxKSAhPT0gLTEpIHJldHVybiAnW2NpcmN1bGFyIHJlZl0nO1xyXG4gICAgICAgICAgICAgICAgc2Vlbi5wdXNoKHZhbCQkMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ2lmeVBhdHRlcm4odmFsJCQxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG8sIGZ1bmN0aW9uIChrZXksIHZhbCQkMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0KHZhbCQkMSk7XHJcbiAgICAgICAgfSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHNwbGl0cyBhIHN0cmluZyBvbiBhIGNoYXJhY3RlciBvciBzdWJzdHJpbmcgKi9cclxuICAgIHZhciBiZWZvcmVBZnRlclN1YnN0ciA9IGZ1bmN0aW9uIGJlZm9yZUFmdGVyU3Vic3RyKGNoYXIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICBpZiAoIXN0cikgcmV0dXJuIFtcIlwiLCBcIlwiXTtcclxuICAgICAgICAgICAgdmFyIGlkeCA9IHN0ci5pbmRleE9mKGNoYXIpO1xyXG4gICAgICAgICAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIFtzdHIsIFwiXCJdO1xyXG4gICAgICAgICAgICByZXR1cm4gW3N0ci5zdWJzdHIoMCwgaWR4KSwgc3RyLnN1YnN0cihpZHggKyAxKV07XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICB2YXIgaG9zdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vW14vXSsvJyk7XHJcbiAgICB2YXIgc3RyaXBGaWxlID0gZnVuY3Rpb24gc3RyaXBGaWxlKHN0cikge1xyXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXFwvW14vXSokLywgJycpO1xyXG4gICAgfTtcclxuICAgIHZhciBzcGxpdEhhc2ggPSBiZWZvcmVBZnRlclN1YnN0cihcIiNcIik7XHJcbiAgICB2YXIgc3BsaXRRdWVyeSA9IGJlZm9yZUFmdGVyU3Vic3RyKFwiP1wiKTtcclxuICAgIHZhciBzcGxpdEVxdWFsID0gYmVmb3JlQWZ0ZXJTdWJzdHIoXCI9XCIpO1xyXG4gICAgdmFyIHRyaW1IYXNoVmFsID0gZnVuY3Rpb24gdHJpbUhhc2hWYWwoc3RyKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0ciA/IHN0ci5yZXBsYWNlKC9eIy8sIFwiXCIpIDogXCJcIjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNwbGl0cyBvbiBhIGRlbGltaXRlciwgYnV0IHJldHVybnMgdGhlIGRlbGltaXRlcnMgaW4gdGhlIGFycmF5XHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBganNcclxuICAgICAqIHZhciBzcGxpdE9uU2xhc2hlcyA9IHNwbGl0T25EZWxpbSgnLycpO1xyXG4gICAgICogc3BsaXRPblNsYXNoZXMoXCIvZm9vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCJdXHJcbiAgICAgKiBzcGxpdE9uU2xhc2hlcyhcIi9mb28vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCIsIFwiL1wiXVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNwbGl0T25EZWxpbShkZWxpbSkge1xyXG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCIoXCIgKyBkZWxpbSArIFwiKVwiLCBcImdcIik7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChyZSkuZmlsdGVyKGlkZW50aXR5KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVkdWNlIGZuIHRoYXQgam9pbnMgbmVpZ2hib3Jpbmcgc3RyaW5nc1xyXG4gICAgICpcclxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHN0cmluZ3MsIHJldHVybnMgYSBuZXcgYXJyYXlcclxuICAgICAqIHdoZXJlIGFsbCBuZWlnaGJvcmluZyBzdHJpbmdzIGhhdmUgYmVlbiBqb2luZWQuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBganNcclxuICAgICAqIGxldCBhcnIgPSBbXCJmb29cIiwgXCJiYXJcIiwgMSwgXCJiYXpcIiwgXCJcIiwgXCJxdXhcIiBdO1xyXG4gICAgICogYXJyLnJlZHVjZShqb2luTmVpZ2hib3JzUiwgW10pIC8vIFtcImZvb2JhclwiLCAxLCBcImJhenF1eFwiIF1cclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBqb2luTmVpZ2hib3JzUihhY2MsIHgpIHtcclxuICAgICAgICBpZiAoaXNTdHJpbmcodGFpbChhY2MpKSAmJiBpc1N0cmluZyh4KSkgcmV0dXJuIGFjYy5zbGljZSgwLCAtMSkuY29uY2F0KHRhaWwoYWNjKSArIHgpO1xyXG4gICAgICAgIHJldHVybiBwdXNoUihhY2MsIHgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAbW9kdWxlIGNvbW1vbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHBhcmFtc1xyXG4gICAgICovXHJcbiAgICAvKiogKi9cclxuICAgIC8qKlxyXG4gICAgICogQSByZWdpc3RyeSBmb3IgcGFyYW1ldGVyIHR5cGVzLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgcmVnaXN0cnkgbWFuYWdlcyB0aGUgYnVpbHQtaW4gKGFuZCBjdXN0b20pIHBhcmFtZXRlciB0eXBlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYnVpbHQtaW4gcGFyYW1ldGVyIHR5cGVzIGFyZTpcclxuICAgICAqXHJcbiAgICAgKiAtIFtbc3RyaW5nXV1cclxuICAgICAqIC0gW1twYXRoXV1cclxuICAgICAqIC0gW1txdWVyeV1dXHJcbiAgICAgKiAtIFtbaGFzaF1dXHJcbiAgICAgKiAtIFtbaW50XV1cclxuICAgICAqIC0gW1tib29sXV1cclxuICAgICAqIC0gW1tkYXRlXV1cclxuICAgICAqIC0gW1tqc29uXV1cclxuICAgICAqIC0gW1thbnldXVxyXG4gICAgICovXHJcbiAgICB2YXIgUGFyYW1UeXBlcyA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFBhcmFtVHlwZXMoKSB7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMudHlwZVF1ZXVlID0gW107XHJcbiAgICAgICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0VHlwZXMgPSBwaWNrKFBhcmFtVHlwZXMucHJvdG90eXBlLCBbXCJoYXNoXCIsIFwic3RyaW5nXCIsIFwicXVlcnlcIiwgXCJwYXRoXCIsIFwiaW50XCIsIFwiYm9vbFwiLCBcImRhdGVcIiwgXCJqc29uXCIsIFwiYW55XCJdKTtcclxuICAgICAgICAgICAgLy8gUmVnaXN0ZXIgZGVmYXVsdCB0eXBlcy4gU3RvcmUgdGhlbSBpbiB0aGUgcHJvdG90eXBlIG9mIHRoaXMudHlwZXMuXHJcbiAgICAgICAgICAgIHZhciBtYWtlVHlwZSA9IGZ1bmN0aW9uIG1ha2VUeXBlKGRlZmluaXRpb24sIG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWU6IG5hbWUgfSwgZGVmaW5pdGlvbikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnR5cGVzID0gaW5oZXJpdChtYXAodGhpcy5kZWZhdWx0VHlwZXMsIG1ha2VUeXBlKSwge30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICAgICAgUGFyYW1UeXBlcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlcyA9IHt9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgcGFyYW1ldGVyIHR5cGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEVuZCB1c2VycyBzaG91bGQgY2FsbCBbW1VybE1hdGNoZXJGYWN0b3J5LnR5cGVdXSwgd2hpY2ggZGVsZWdhdGVzIHRvIHRoaXMgbWV0aG9kLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFBhcmFtVHlwZXMucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNEZWZpbmVkKGRlZmluaXRpb24pKSByZXR1cm4gdGhpcy50eXBlc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHRocm93IG5ldyBFcnJvcihcIkEgdHlwZSBuYW1lZCAnXCIgKyBuYW1lICsgXCInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZXNbbmFtZV0gPSBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWU6IG5hbWUgfSwgZGVmaW5pdGlvbikpO1xyXG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbkZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGVRdWV1ZS5wdXNoKHsgbmFtZTogbmFtZSwgZGVmOiBkZWZpbml0aW9uRm4gfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5xdWV1ZSkgdGhpcy5fZmx1c2hUeXBlUXVldWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBQYXJhbVR5cGVzLnByb3RvdHlwZS5fZmx1c2hUeXBlUXVldWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnR5cGVRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlUXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlLnBhdHRlcm4pIHRocm93IG5ldyBFcnJvcihcIllvdSBjYW5ub3Qgb3ZlcnJpZGUgYSB0eXBlJ3MgLnBhdHRlcm4gYXQgcnVudGltZS5cIik7XHJcbiAgICAgICAgICAgICAgICBleHRlbmQodGhpcy50eXBlc1t0eXBlLm5hbWVdLCBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHR5cGUuZGVmKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBQYXJhbVR5cGVzO1xyXG4gICAgfSgpO1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIGZ1bmN0aW9uIGluaXREZWZhdWx0VHlwZXMoKSB7XHJcbiAgICAgICAgdmFyIG1ha2VEZWZhdWx0VHlwZSA9IGZ1bmN0aW9uIG1ha2VEZWZhdWx0VHlwZShkZWYpIHtcclxuICAgICAgICAgICAgdmFyIHZhbFRvU3RyaW5nID0gZnVuY3Rpb24gdmFsVG9TdHJpbmcodmFsJCQxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsJCQxICE9IG51bGwgPyB2YWwkJDEudG9TdHJpbmcoKSA6IHZhbCQkMTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRUeXBlQmFzZSA9IHtcclxuICAgICAgICAgICAgICAgIGVuY29kZTogdmFsVG9TdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBkZWNvZGU6IHZhbFRvU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgaXM6IGlzKFN0cmluZyksXHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvLiovLFxyXG4gICAgICAgICAgICAgICAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhID09IGI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmQoe30sIGRlZmF1bHRUeXBlQmFzZSwgZGVmKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIERlZmF1bHQgUGFyYW1ldGVyIFR5cGUgRGVmaW5pdGlvbnNcclxuICAgICAgICBleHRlbmQoUGFyYW1UeXBlcy5wcm90b3R5cGUsIHtcclxuICAgICAgICAgICAgc3RyaW5nOiBtYWtlRGVmYXVsdFR5cGUoe30pLFxyXG4gICAgICAgICAgICBwYXRoOiBtYWtlRGVmYXVsdFR5cGUoe1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogL1teL10qL1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgcXVlcnk6IG1ha2VEZWZhdWx0VHlwZSh7fSksXHJcbiAgICAgICAgICAgIGhhc2g6IG1ha2VEZWZhdWx0VHlwZSh7XHJcbiAgICAgICAgICAgICAgICBpbmhlcml0OiBmYWxzZVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgaW50OiBtYWtlRGVmYXVsdFR5cGUoe1xyXG4gICAgICAgICAgICAgICAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUodmFsJCQxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCQkMSwgMTApO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGlzOiBmdW5jdGlvbiBpcyh2YWwkJDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWlzTnVsbE9yVW5kZWZpbmVkKHZhbCQkMSkgJiYgdGhpcy5kZWNvZGUodmFsJCQxLnRvU3RyaW5nKCkpID09PSB2YWwkJDE7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLy0/XFxkKy9cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGJvb2w6IG1ha2VEZWZhdWx0VHlwZSh7XHJcbiAgICAgICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZSh2YWwkJDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsJCQxICYmIDEgfHwgMDtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZSh2YWwkJDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsJCQxLCAxMCkgIT09IDA7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaXM6IGlzKEJvb2xlYW4pLFxyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLzB8MS9cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGRhdGU6IG1ha2VEZWZhdWx0VHlwZSh7XHJcbiAgICAgICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZSh2YWwkJDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaXModmFsJCQxKSA/IHVuZGVmaW5lZCA6IFt2YWwkJDEuZ2V0RnVsbFllYXIoKSwgKCcwJyArICh2YWwkJDEuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMiksICgnMCcgKyB2YWwkJDEuZ2V0RGF0ZSgpKS5zbGljZSgtMildLmpvaW4oXCItXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKHZhbCQkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzKHZhbCQkMSkpIHJldHVybiB2YWwkJDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5jYXB0dXJlLmV4ZWModmFsJCQxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2ggPyBuZXcgRGF0ZShtYXRjaFsxXSwgbWF0Y2hbMl0gLSAxLCBtYXRjaFszXSkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaXM6IGZ1bmN0aW9uIGlzKHZhbCQkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwkJDEgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWwkJDEudmFsdWVPZigpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcXVhbHM6IGZ1bmN0aW9uIGVxdWFscyhsLCByKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnZ2V0RnVsbFllYXInLCAnZ2V0TW9udGgnLCAnZ2V0RGF0ZSddLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBmbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjICYmIGxbZm5dKCkgPT09IHJbZm5dKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogL1swLTldezR9LSg/OjBbMS05XXwxWzAtMl0pLSg/OjBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLFxyXG4gICAgICAgICAgICAgICAgY2FwdHVyZTogLyhbMC05XXs0fSktKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pL1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAganNvbjogbWFrZURlZmF1bHRUeXBlKHtcclxuICAgICAgICAgICAgICAgIGVuY29kZTogdG9Kc29uLFxyXG4gICAgICAgICAgICAgICAgZGVjb2RlOiBmcm9tSnNvbixcclxuICAgICAgICAgICAgICAgIGlzOiBpcyhPYmplY3QpLFxyXG4gICAgICAgICAgICAgICAgZXF1YWxzOiBlcXVhbHMsXHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvW14vXSovXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAvLyBkb2VzIG5vdCBlbmNvZGUvZGVjb2RlXHJcbiAgICAgICAgICAgIGFueTogbWFrZURlZmF1bHRUeXBlKHtcclxuICAgICAgICAgICAgICAgIGVuY29kZTogaWRlbnRpdHksXHJcbiAgICAgICAgICAgICAgICBkZWNvZGU6IGlkZW50aXR5LFxyXG4gICAgICAgICAgICAgICAgaXM6IGZ1bmN0aW9uIGlzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVxdWFsczogZXF1YWxzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpbml0RGVmYXVsdFR5cGVzKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSBwYXJhbXNcclxuICAgICAqL1xyXG4gICAgLyoqICovXHJcbiAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICB2YXIgU3RhdGVQYXJhbXMgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFN0YXRlUGFyYW1zKHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXJnZXMgYSBzZXQgb2YgcGFyYW1ldGVycyB3aXRoIGFsbCBwYXJhbWV0ZXJzIGluaGVyaXRlZCBiZXR3ZWVuIHRoZSBjb21tb24gcGFyZW50cyBvZiB0aGVcclxuICAgICAgICAgKiBjdXJyZW50IHN0YXRlIGFuZCBhIGdpdmVuIGRlc3RpbmF0aW9uIHN0YXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG5ld1BhcmFtcyBUaGUgc2V0IG9mIHBhcmFtZXRlcnMgd2hpY2ggd2lsbCBiZSBjb21wb3NpdGVkIHdpdGggaW5oZXJpdGVkIHBhcmFtcy5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gJGN1cnJlbnQgSW50ZXJuYWwgZGVmaW5pdGlvbiBvZiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHN0YXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkdG8gSW50ZXJuYWwgZGVmaW5pdGlvbiBvZiBvYmplY3QgcmVwcmVzZW50aW5nIHN0YXRlIHRvIHRyYW5zaXRpb24gdG8uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVQYXJhbXMucHJvdG90eXBlLiRpbmhlcml0ID0gZnVuY3Rpb24gKG5ld1BhcmFtcywgJGN1cnJlbnQsICR0bykge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50cyA9IGFuY2VzdG9ycygkY3VycmVudCwgJHRvKSxcclxuICAgICAgICAgICAgICAgIHBhcmVudFBhcmFtcyxcclxuICAgICAgICAgICAgICAgIGluaGVyaXRlZCA9IHt9LFxyXG4gICAgICAgICAgICAgICAgaW5oZXJpdExpc3QgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBhcmVudHNbaV0gfHwgIXBhcmVudHNbaV0ucGFyYW1zKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIHBhcmVudFBhcmFtcyA9IE9iamVjdC5rZXlzKHBhcmVudHNbaV0ucGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIGlmICghcGFyZW50UGFyYW1zLmxlbmd0aCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIHBhcmVudFBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmhlcml0TGlzdC5pbmRleE9mKHBhcmVudFBhcmFtc1tqXSkgPj0gMCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5oZXJpdExpc3QucHVzaChwYXJlbnRQYXJhbXNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGluaGVyaXRlZFtwYXJlbnRQYXJhbXNbal1dID0gdGhpc1twYXJlbnRQYXJhbXNbal1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmQoe30sIGluaGVyaXRlZCwgbmV3UGFyYW1zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gU3RhdGVQYXJhbXM7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgcGF0aCAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuXHJcbiAgICAvKiogQG1vZHVsZSByZXNvbHZlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgdmFyIHBhcnNlVXJsID0gZnVuY3Rpb24gcGFyc2VVcmwodXJsKSB7XHJcbiAgICAgICAgaWYgKCFpc1N0cmluZyh1cmwpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIHJvb3QkJDEgPSB1cmwuY2hhckF0KDApID09PSAnXic7XHJcbiAgICAgICAgcmV0dXJuIHsgdmFsOiByb290JCQxID8gdXJsLnN1YnN0cmluZygxKSA6IHVybCwgcm9vdDogcm9vdCQkMSB9O1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG5hbWVCdWlsZGVyKHN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0YXRlLm5hbWU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZWxmQnVpbGRlcihzdGF0ZSkge1xyXG4gICAgICAgIHN0YXRlLnNlbGYuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHN0YXRlLnNlbGY7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkYXRhQnVpbGRlcihzdGF0ZSkge1xyXG4gICAgICAgIGlmIChzdGF0ZS5wYXJlbnQgJiYgc3RhdGUucGFyZW50LmRhdGEpIHtcclxuICAgICAgICAgICAgc3RhdGUuZGF0YSA9IHN0YXRlLnNlbGYuZGF0YSA9IGluaGVyaXQoc3RhdGUucGFyZW50LmRhdGEsIHN0YXRlLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3RhdGUuZGF0YTtcclxuICAgIH1cclxuICAgIHZhciBnZXRVcmxCdWlsZGVyID0gZnVuY3Rpb24gZ2V0VXJsQnVpbGRlcigkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgcm9vdCQkMSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiB1cmxCdWlsZGVyKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZURlYyA9IHN0YXRlO1xyXG4gICAgICAgICAgICAvLyBGb3IgZnV0dXJlIHN0YXRlcywgaS5lLiwgc3RhdGVzIHdob3NlIG5hbWUgZW5kcyB3aXRoIGAuKipgLFxyXG4gICAgICAgICAgICAvLyBtYXRjaCBhbnl0aGluZyB0aGF0IHN0YXJ0cyB3aXRoIHRoZSB1cmwgcHJlZml4XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZURlYyAmJiBzdGF0ZURlYy51cmwgJiYgc3RhdGVEZWMubmFtZSAmJiBzdGF0ZURlYy5uYW1lLm1hdGNoKC9cXC5cXCpcXCokLykpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlRGVjLnVybCArPSBcIntyZW1haW5kZXI6YW55fVwiOyAvLyBtYXRjaCBhbnkgcGF0aCAoLiopXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlVXJsKHN0YXRlRGVjLnVybCksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBzdGF0ZS5wYXJlbnQ7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAhcGFyc2VkID8gc3RhdGVEZWMudXJsIDogJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuY29tcGlsZShwYXJzZWQudmFsLCB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHN0YXRlLnBhcmFtcyB8fCB7fSxcclxuICAgICAgICAgICAgICAgIHBhcmFtTWFwOiBmdW5jdGlvbiBwYXJhbU1hcChwYXJhbUNvbmZpZywgaXNTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGVEZWMucmVsb2FkT25TZWFyY2ggPT09IGZhbHNlICYmIGlzU2VhcmNoKSBwYXJhbUNvbmZpZyA9IGV4dGVuZChwYXJhbUNvbmZpZyB8fCB7fSwgeyBkeW5hbWljOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbUNvbmZpZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghdXJsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCEkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5pc01hdGNoZXIodXJsKSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1cmwgJ1wiICsgdXJsICsgXCInIGluIHN0YXRlICdcIiArIHN0YXRlICsgXCInXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5yb290ID8gdXJsIDogKHBhcmVudCAmJiBwYXJlbnQubmF2aWdhYmxlIHx8IHJvb3QkJDEoKSkudXJsLmFwcGVuZCh1cmwpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldE5hdmlnYWJsZUJ1aWxkZXIgPSBmdW5jdGlvbiBnZXROYXZpZ2FibGVCdWlsZGVyKGlzUm9vdCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuYXZpZ2FibGVCdWlsZGVyKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaXNSb290KHN0YXRlKSAmJiBzdGF0ZS51cmwgPyBzdGF0ZSA6IHN0YXRlLnBhcmVudCA/IHN0YXRlLnBhcmVudC5uYXZpZ2FibGUgOiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldFBhcmFtc0J1aWxkZXIgPSBmdW5jdGlvbiBnZXRQYXJhbXNCdWlsZGVyKHBhcmFtRmFjdG9yeSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBwYXJhbXNCdWlsZGVyKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBtYWtlQ29uZmlnUGFyYW0gPSBmdW5jdGlvbiBtYWtlQ29uZmlnUGFyYW0oY29uZmlnLCBpZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtRmFjdG9yeS5mcm9tQ29uZmlnKGlkLCBudWxsLCBjb25maWcpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdXJsUGFyYW1zID0gc3RhdGUudXJsICYmIHN0YXRlLnVybC5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogZmFsc2UgfSkgfHwgW107XHJcbiAgICAgICAgICAgIHZhciBub25VcmxQYXJhbXMgPSB2YWx1ZXMobWFwT2JqKG9taXQoc3RhdGUucGFyYW1zIHx8IHt9LCB1cmxQYXJhbXMubWFwKHByb3AoJ2lkJykpKSwgbWFrZUNvbmZpZ1BhcmFtKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmxQYXJhbXMuY29uY2F0KG5vblVybFBhcmFtcykubWFwKGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3AuaWQsIHBdO1xyXG4gICAgICAgICAgICB9KS5yZWR1Y2UoYXBwbHlQYWlycywge30pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGF0aEJ1aWxkZXIoc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50LnBhdGguY29uY2F0KHN0YXRlKSA6IC8qcm9vdCovW3N0YXRlXTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGluY2x1ZGVzQnVpbGRlcihzdGF0ZSkge1xyXG4gICAgICAgIHZhciBpbmNsdWRlcyA9IHN0YXRlLnBhcmVudCA/IGV4dGVuZCh7fSwgc3RhdGUucGFyZW50LmluY2x1ZGVzKSA6IHt9O1xyXG4gICAgICAgIGluY2x1ZGVzW3N0YXRlLm5hbWVdID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gaW5jbHVkZXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIHRoZSBgcmVzb2x2ZTpgIGJsb2NrIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxyXG4gICAgICogdmFsaWRhdGVzIHRoZSBgcmVzb2x2ZWAgcHJvcGVydHkgYW5kIGNvbnZlcnRzIGl0IHRvIGEgW1tSZXNvbHZhYmxlXV0gYXJyYXkuXHJcbiAgICAgKlxyXG4gICAgICogcmVzb2x2ZTogaW5wdXQgdmFsdWUgY2FuIGJlOlxyXG4gICAgICpcclxuICAgICAqIHtcclxuICAgICAqICAgLy8gYW5hbHl6ZWQgYnV0IG5vdCBpbmplY3RlZFxyXG4gICAgICogICBteUZvb1Jlc29sdmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJteUZvb0RhdGFcIjsgfSxcclxuICAgICAqXHJcbiAgICAgKiAgIC8vIGZ1bmN0aW9uLnRvU3RyaW5nKCkgcGFyc2VkLCBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZyAobm90IG1pbi1zYWZlKVxyXG4gICAgICogICBteUJhclJlc29sdmU6IGZ1bmN0aW9uKERlcGVuZGVuY3lOYW1lKSB7IHJldHVybiBEZXBlbmRlbmN5TmFtZS5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXHJcbiAgICAgKlxyXG4gICAgICogICAvLyBBcnJheSBzcGxpdDsgXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcclxuICAgICAqICAgbXlCYXpSZXNvbHZlOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LFxyXG4gICAgICpcclxuICAgICAqICAgLy8gQXJyYXkgc3BsaXQ7IERlcGVuZGVuY3lUeXBlIGRlcCBhcyB0b2tlbiAoY29tcGFyZWQgdXNpbmcgPT09KVxyXG4gICAgICogICBteVF1eFJlc29sdmU6IFsgRGVwZW5kZW5jeVR5cGUsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9LFxyXG4gICAgICpcclxuICAgICAqICAgLy8gdmFsLiRpbmplY3QgdXNlZCBhcyBkZXBzXHJcbiAgICAgKiAgIC8vIHdoZXJlOlxyXG4gICAgICogICAvLyAgICAgY29yZ2VSZXNvbHZlLiRpbmplY3QgPSBbXCJEZXBlbmRlbmN5TmFtZVwiXTtcclxuICAgICAqICAgLy8gICAgIGZ1bmN0aW9uIGNvcmdlUmVzb2x2ZShkZXApIHsgZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9XHJcbiAgICAgKiAgIC8vIHRoZW4gXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcclxuICAgICAqICAgbXlDb3JnZVJlc29sdmU6IGNvcmdlUmVzb2x2ZSxcclxuICAgICAqXHJcbiAgICAgKiAgLy8gaW5qZWN0IHNlcnZpY2UgYnkgbmFtZVxyXG4gICAgICogIC8vIFdoZW4gYSBzdHJpbmcgaXMgZm91bmQsIGRlc3VnYXIgY3JlYXRpbmcgYSByZXNvbHZlIHRoYXQgaW5qZWN0cyB0aGUgbmFtZWQgc2VydmljZVxyXG4gICAgICogICBteUdyYXVsdFJlc29sdmU6IFwiU29tZVNlcnZpY2VcIlxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIG9yOlxyXG4gICAgICpcclxuICAgICAqIFtcclxuICAgICAqICAgbmV3IFJlc29sdmFibGUoXCJteUZvb1Jlc29sdmVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiIH0pLFxyXG4gICAgICogICBuZXcgUmVzb2x2YWJsZShcIm15QmFyUmVzb2x2ZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0pLFxyXG4gICAgICogICB7IHByb3ZpZGU6IFwibXlCYXpSZXNvbHZlXCIsIHVzZUZhY3Rvcnk6IGZ1bmN0aW9uKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LCBkZXBzOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiBdIH1cclxuICAgICAqIF1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVzb2x2YWJsZXNCdWlsZGVyKHN0YXRlKSB7XHJcbiAgICAgICAgLyoqIGNvbnZlcnQgcmVzb2x2ZToge30gYW5kIHJlc29sdmVQb2xpY3k6IHt9IG9iamVjdHMgdG8gYW4gYXJyYXkgb2YgdHVwbGVzICovXHJcbiAgICAgICAgdmFyIG9iamVjdHMyVHVwbGVzID0gZnVuY3Rpb24gb2JqZWN0czJUdXBsZXMocmVzb2x2ZU9iaiwgcmVzb2x2ZVBvbGljaWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXNvbHZlT2JqIHx8IHt9KS5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0b2tlbjogdG9rZW4sIHZhbDogcmVzb2x2ZU9ialt0b2tlbl0sIGRlcHM6IHVuZGVmaW5lZCwgcG9saWN5OiByZXNvbHZlUG9saWNpZXNbdG9rZW5dIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIGZldGNoIERJIGFubm90YXRpb25zIGZyb20gYSBmdW5jdGlvbiBvciBuZzEtc3R5bGUgYXJyYXkgKi9cclxuICAgICAgICB2YXIgYW5ub3RhdGUgPSBmdW5jdGlvbiBhbm5vdGF0ZShmbikge1xyXG4gICAgICAgICAgICB2YXIgJGluamVjdG9yID0gc2VydmljZXMuJGluamVjdG9yO1xyXG4gICAgICAgICAgICAvLyBuZzEgZG9lc24ndCBoYXZlIGFuICRpbmplY3RvciB1bnRpbCBydW50aW1lLlxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgJGluamVjdG9yIGRvZXNuJ3QgZXhpc3QsIHVzZSBcImRlZmVycmVkXCIgbGl0ZXJhbCBhcyBhXHJcbiAgICAgICAgICAgIC8vIG1hcmtlciBpbmRpY2F0aW5nIHRoZXkgc2hvdWxkIGJlIGFubm90YXRlZCB3aGVuIHJ1bnRpbWUgc3RhcnRzXHJcbiAgICAgICAgICAgIHJldHVybiBmblsnJGluamVjdCddIHx8ICRpbmplY3RvciAmJiAkaW5qZWN0b3IuYW5ub3RhdGUoZm4sICRpbmplY3Rvci5zdHJpY3REaSkgfHwgXCJkZWZlcnJlZFwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYm90aCBgdG9rZW5gIGFuZCBgcmVzb2x2ZUZuYCwgYW5kIGlzIHByb2JhYmx5IGEgW1tSZXNvbHZlTGl0ZXJhbF1dICovXHJcbiAgICAgICAgdmFyIGlzUmVzb2x2ZUxpdGVyYWwgPSBmdW5jdGlvbiBpc1Jlc29sdmVMaXRlcmFsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gISEob2JqLnRva2VuICYmIG9iai5yZXNvbHZlRm4pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgcHJvdmlkZSBsaXRlcmFsLCBvciBhIG5nMiBQcm92aWRlciAqL1xyXG4gICAgICAgIHZhciBpc0xpa2VOZzJQcm92aWRlciA9IGZ1bmN0aW9uIGlzTGlrZU5nMlByb3ZpZGVyKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gISEoKG9iai5wcm92aWRlIHx8IG9iai50b2tlbikgJiYgKG9iai51c2VWYWx1ZSB8fCBvYmoudXNlRmFjdG9yeSB8fCBvYmoudXNlRXhpc3RpbmcgfHwgb2JqLnVzZUNsYXNzKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogdHJ1ZSBpZiB0aGUgb2JqZWN0IGxvb2tzIGxpa2UgYSB0dXBsZSBmcm9tIG9iajJUdXBsZXMgKi9cclxuICAgICAgICB2YXIgaXNUdXBsZUZyb21PYmogPSBmdW5jdGlvbiBpc1R1cGxlRnJvbU9iaihvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhKG9iaiAmJiBvYmoudmFsICYmIChpc1N0cmluZyhvYmoudmFsKSB8fCBpc0FycmF5KG9iai52YWwpIHx8IGlzRnVuY3Rpb24ob2JqLnZhbCkpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBleHRyYWN0cyB0aGUgdG9rZW4gZnJvbSBhIFByb3ZpZGVyIG9yIHByb3ZpZGUgbGl0ZXJhbCAqL1xyXG4gICAgICAgIHZhciB0b2tlbiA9IGZ1bmN0aW9uIHRva2VuKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHAucHJvdmlkZSB8fCBwLnRva2VuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEdpdmVuIGEgbGl0ZXJhbCByZXNvbHZlIG9yIHByb3ZpZGVyIG9iamVjdCwgcmV0dXJucyBhIFJlc29sdmFibGUgKi9cclxuICAgICAgICB2YXIgbGl0ZXJhbDJSZXNvbHZhYmxlID0gcGF0dGVybihbW3Byb3AoJ3Jlc29sdmVGbicpLCBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KTtcclxuICAgICAgICB9XSwgW3Byb3AoJ3VzZUZhY3RvcnknKSwgZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRva2VuKHApLCBwLnVzZUZhY3RvcnksIHAuZGVwcyB8fCBwLmRlcGVuZGVuY2llcywgcC5wb2xpY3kpO1xyXG4gICAgICAgIH1dLCBbcHJvcCgndXNlQ2xhc3MnKSwgZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRva2VuKHApLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHAudXNlQ2xhc3MoKTtcclxuICAgICAgICAgICAgfSwgW10sIHAucG9saWN5KTtcclxuICAgICAgICB9XSwgW3Byb3AoJ3VzZVZhbHVlJyksIGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZSh0b2tlbihwKSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAudXNlVmFsdWU7XHJcbiAgICAgICAgICAgIH0sIFtdLCBwLnBvbGljeSwgcC51c2VWYWx1ZSk7XHJcbiAgICAgICAgfV0sIFtwcm9wKCd1c2VFeGlzdGluZycpLCBmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4ocCksIGlkZW50aXR5LCBbcC51c2VFeGlzdGluZ10sIHAucG9saWN5KTtcclxuICAgICAgICB9XV0pO1xyXG4gICAgICAgIHZhciB0dXBsZTJSZXNvbHZhYmxlID0gcGF0dGVybihbW3BpcGUocHJvcChcInZhbFwiKSwgaXNTdHJpbmcpLCBmdW5jdGlvbiAodHVwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCBpZGVudGl0eSwgW3R1cGxlLnZhbF0sIHR1cGxlLnBvbGljeSk7XHJcbiAgICAgICAgfV0sIFtwaXBlKHByb3AoXCJ2YWxcIiksIGlzQXJyYXkpLCBmdW5jdGlvbiAodHVwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0YWlsKHR1cGxlLnZhbCksIHR1cGxlLnZhbC5zbGljZSgwLCAtMSksIHR1cGxlLnBvbGljeSk7XHJcbiAgICAgICAgfV0sIFtwaXBlKHByb3AoXCJ2YWxcIiksIGlzRnVuY3Rpb24pLCBmdW5jdGlvbiAodHVwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0dXBsZS52YWwsIGFubm90YXRlKHR1cGxlLnZhbCksIHR1cGxlLnBvbGljeSk7XHJcbiAgICAgICAgfV1dKTtcclxuICAgICAgICB2YXIgaXRlbTJSZXNvbHZhYmxlID0gcGF0dGVybihbW2lzKFJlc29sdmFibGUpLCBmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9XSwgW2lzUmVzb2x2ZUxpdGVyYWwsIGxpdGVyYWwyUmVzb2x2YWJsZV0sIFtpc0xpa2VOZzJQcm92aWRlciwgbGl0ZXJhbDJSZXNvbHZhYmxlXSwgW2lzVHVwbGVGcm9tT2JqLCB0dXBsZTJSZXNvbHZhYmxlXSwgW3ZhbCh0cnVlKSwgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlc29sdmUgdmFsdWU6IFwiICsgc3RyaW5naWZ5KG9iaikpO1xyXG4gICAgICAgIH1dXSk7XHJcbiAgICAgICAgLy8gSWYgcmVzb2x2ZUJsb2NrIGlzIGFscmVhZHkgYW4gYXJyYXksIHVzZSBpdCBhcy1pcy5cclxuICAgICAgICAvLyBPdGhlcndpc2UsIGFzc3VtZSBpdCdzIGFuIG9iamVjdCBhbmQgY29udmVydCB0byBhbiBBcnJheSBvZiB0dXBsZXNcclxuICAgICAgICB2YXIgZGVjbCA9IHN0YXRlLnJlc29sdmU7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gaXNBcnJheShkZWNsKSA/IGRlY2wgOiBvYmplY3RzMlR1cGxlcyhkZWNsLCBzdGF0ZS5yZXNvbHZlUG9saWN5IHx8IHt9KTtcclxuICAgICAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0yUmVzb2x2YWJsZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaSBBIGludGVybmFsIGdsb2JhbCBzZXJ2aWNlXHJcbiAgICAgKlxyXG4gICAgICogU3RhdGVCdWlsZGVyIGlzIGEgZmFjdG9yeSBmb3IgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4geW91IHJlZ2lzdGVyIGEgc3RhdGUgd2l0aCB0aGUgW1tTdGF0ZVJlZ2lzdHJ5XV0sIHlvdSByZWdpc3RlciBhIHBsYWluIG9sZCBqYXZhc2NyaXB0IG9iamVjdCB3aGljaFxyXG4gICAgICogY29uZm9ybXMgdG8gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dIGludGVyZmFjZS4gIFRoaXMgZmFjdG9yeSB0YWtlcyB0aGF0IG9iamVjdCBhbmQgYnVpbGRzIHRoZSBjb3JyZXNwb25kaW5nXHJcbiAgICAgKiBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0LCB3aGljaCBoYXMgYW4gQVBJIGFuZCBpcyB1c2VkIGludGVybmFsbHkuXHJcbiAgICAgKlxyXG4gICAgICogQ3VzdG9tIHByb3BlcnRpZXMgb3IgQVBJIG1heSBiZSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBieSByZWdpc3RlcmluZyBhIGRlY29yYXRvciBmdW5jdGlvblxyXG4gICAgICogdXNpbmcgdGhlIFtbYnVpbGRlcl1dIG1ldGhvZC5cclxuICAgICAqL1xyXG4gICAgdmFyIFN0YXRlQnVpbGRlciA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gU3RhdGVCdWlsZGVyKG1hdGNoZXIsIHVybE1hdGNoZXJGYWN0b3J5KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHJvb3QkJDEgPSBmdW5jdGlvbiByb290JCQxKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXIuZmluZChcIlwiKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGlzUm9vdCA9IGZ1bmN0aW9uIGlzUm9vdChzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLm5hbWUgPT09IFwiXCI7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcmVudEJ1aWxkZXIoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1Jvb3Qoc3RhdGUpKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLmZpbmQoc2VsZi5wYXJlbnROYW1lKHN0YXRlKSkgfHwgcm9vdCQkMSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRlcnMgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBbbmFtZUJ1aWxkZXJdLFxyXG4gICAgICAgICAgICAgICAgc2VsZjogW3NlbGZCdWlsZGVyXSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogW3BhcmVudEJ1aWxkZXJdLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogW2RhdGFCdWlsZGVyXSxcclxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGEgVVJMTWF0Y2hlciBpZiBuZWNlc3NhcnksIGVpdGhlciB2aWEgYSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkxcclxuICAgICAgICAgICAgICAgIHVybDogW2dldFVybEJ1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnksIHJvb3QkJDEpXSxcclxuICAgICAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGkuZS4gaXMgbmF2aWdhYmxlKVxyXG4gICAgICAgICAgICAgICAgbmF2aWdhYmxlOiBbZ2V0TmF2aWdhYmxlQnVpbGRlcihpc1Jvb3QpXSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogW2dldFBhcmFtc0J1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnkucGFyYW1GYWN0b3J5KV0sXHJcbiAgICAgICAgICAgICAgICAvLyBFYWNoIGZyYW1ld29yay1zcGVjaWZpYyB1aS1yb3V0ZXIgaW1wbGVtZW50YXRpb24gc2hvdWxkIGRlZmluZSBpdHMgb3duIGB2aWV3c2AgYnVpbGRlclxyXG4gICAgICAgICAgICAgICAgLy8gZS5nLiwgc3JjL25nMS9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzXHJcbiAgICAgICAgICAgICAgICB2aWV3czogW10sXHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwIGEgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlIGFzIHRoaXMgaXMgbmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgcGF0aDogW3BhdGhCdWlsZGVyXSxcclxuICAgICAgICAgICAgICAgIC8vIFNwZWVkIHVwICRzdGF0ZS5pbmNsdWRlcygpIGFzIGl0J3MgdXNlZCBhIGxvdFxyXG4gICAgICAgICAgICAgICAgaW5jbHVkZXM6IFtpbmNsdWRlc0J1aWxkZXJdLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2YWJsZXM6IFtyZXNvbHZhYmxlc0J1aWxkZXJdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVycyBhIFtbQnVpbGRlckZ1bmN0aW9uXV0gZm9yIGEgc3BlY2lmaWMgW1tTdGF0ZU9iamVjdF1dIHByb3BlcnR5IChlLmcuLCBgcGFyZW50YCwgYHVybGAsIG9yIGBwYXRoYCkuXHJcbiAgICAgICAgICogTW9yZSB0aGFuIG9uZSBCdWlsZGVyRnVuY3Rpb24gY2FuIGJlIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gcHJvcGVydHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgQnVpbGRlckZ1bmN0aW9uKHMpIHdpbGwgYmUgdXNlZCB0byBkZWZpbmUgdGhlIHByb3BlcnR5IG9uIGFueSBzdWJzZXF1ZW50bHkgYnVpbHQgW1tTdGF0ZU9iamVjdF1dIG9iamVjdHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgU3RhdGUgcHJvcGVydHkgYmVpbmcgcmVnaXN0ZXJlZCBmb3IuXHJcbiAgICAgICAgICogQHBhcmFtIGZuIFRoZSBCdWlsZGVyRnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIHRoZSBTdGF0ZSBwcm9wZXJ0eVxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIEJ1aWxkZXJGdW5jdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlQnVpbGRlci5wcm90b3R5cGUuYnVpbGRlciA9IGZ1bmN0aW9uIChuYW1lLCBmbikge1xyXG4gICAgICAgICAgICB2YXIgYnVpbGRlcnMgPSB0aGlzLmJ1aWxkZXJzO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBidWlsZGVyc1tuYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgLy8gQmFja3dhcmRzIGNvbXBhdDogaWYgb25seSBvbmUgYnVpbGRlciBleGlzdHMsIHJldHVybiBpdCwgZWxzZSByZXR1cm4gd2hvbGUgYXJhcnkuXHJcbiAgICAgICAgICAgIGlmIChpc1N0cmluZyhuYW1lKSAmJiAhaXNEZWZpbmVkKGZuKSkgcmV0dXJuIGFycmF5Lmxlbmd0aCA+IDEgPyBhcnJheSA6IGFycmF5WzBdO1xyXG4gICAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFpc0Z1bmN0aW9uKGZuKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBidWlsZGVyc1tuYW1lXSA9IGFycmF5O1xyXG4gICAgICAgICAgICBidWlsZGVyc1tuYW1lXS5wdXNoKGZuKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyc1tuYW1lXS5zcGxpY2UoYnVpbGRlcnNbbmFtZV0uaW5kZXhPZihmbiwgMSkpICYmIG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdWlsZHMgYWxsIG9mIHRoZSBwcm9wZXJ0aWVzIG9uIGFuIGVzc2VudGlhbGx5IGJsYW5rIFN0YXRlIG9iamVjdCwgcmV0dXJuaW5nIGEgU3RhdGUgb2JqZWN0IHdoaWNoIGhhcyBhbGwgaXRzXHJcbiAgICAgICAgICogcHJvcGVydGllcyBhbmQgQVBJIGJ1aWx0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIGFuIHVuaW5pdGlhbGl6ZWQgU3RhdGUgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybnMgdGhlIGJ1aWx0IFN0YXRlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIgPSBfYS5tYXRjaGVyLFxyXG4gICAgICAgICAgICAgICAgYnVpbGRlcnMgPSBfYS5idWlsZGVycztcclxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50TmFtZShzdGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgIW1hdGNoZXIuZmluZChwYXJlbnQsIHVuZGVmaW5lZCwgZmFsc2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYnVpbGRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghYnVpbGRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhaW4gPSBidWlsZGVyc1trZXldLnJlZHVjZShmdW5jdGlvbiAocGFyZW50Rm4sIHN0ZXApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF9zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RlcChfc3RhdGUsIHBhcmVudEZuKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSwgbm9vcCQxKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlW2tleV0gPSBjaGFpbihzdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVCdWlsZGVyLnByb3RvdHlwZS5wYXJlbnROYW1lID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIC8vIG5hbWUgPSAnZm9vLmJhci5iYXouKionXHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3RhdGUubmFtZSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAnLioqJ11cclxuICAgICAgICAgICAgdmFyIHNlZ21lbnRzID0gbmFtZS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonXVxyXG4gICAgICAgICAgICB2YXIgbGFzdFNlZ21lbnQgPSBzZWdtZW50cy5wb3AoKTtcclxuICAgICAgICAgICAgLy8gc2VnbWVudHMgPSBbJ2ZvbycsICdiYXInXSAoaWdub3JlIC4qKiBzZWdtZW50IGZvciBmdXR1cmUgc3RhdGVzKVxyXG4gICAgICAgICAgICBpZiAobGFzdFNlZ21lbnQgPT09ICcqKicpIHNlZ21lbnRzLnBvcCgpO1xyXG4gICAgICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGVzIHRoYXQgc3BlY2lmeSB0aGUgJ3BhcmVudDonIHByb3BlcnR5IHNob3VsZCBub3QgaGF2ZSBhICcuJyBpbiB0aGVpciBuYW1lIChcIiArIG5hbWUgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAnZm9vLmJhcidcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXN0YXRlLnBhcmVudCkgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lO1xyXG4gICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKCcuJykgIT09IC0xIHx8ICFzdGF0ZS5wYXJlbnQpIHJldHVybiBuYW1lO1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IGlzU3RyaW5nKHN0YXRlLnBhcmVudCkgPyBzdGF0ZS5wYXJlbnQgOiBzdGF0ZS5wYXJlbnQubmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudE5hbWUgPyBwYXJlbnROYW1lICsgXCIuXCIgKyBuYW1lIDogbmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBTdGF0ZUJ1aWxkZXI7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgc3RhdGUgKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICB2YXIgU3RhdGVNYXRjaGVyID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBTdGF0ZU1hdGNoZXIoX3N0YXRlcykge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZXMgPSBfc3RhdGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBTdGF0ZU1hdGNoZXIucHJvdG90eXBlLmlzUmVsYXRpdmUgPSBmdW5jdGlvbiAoc3RhdGVOYW1lKSB7XHJcbiAgICAgICAgICAgIHN0YXRlTmFtZSA9IHN0YXRlTmFtZSB8fCBcIlwiO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVOYW1lLmluZGV4T2YoXCIuXCIpID09PSAwIHx8IHN0YXRlTmFtZS5pbmRleE9mKFwiXlwiKSA9PT0gMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFN0YXRlTWF0Y2hlci5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYmFzZSwgbWF0Y2hHbG9iKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaEdsb2IgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hHbG9iID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXN0YXRlT3JOYW1lICYmIHN0YXRlT3JOYW1lICE9PSBcIlwiKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB2YXIgaXNTdHIgPSBpc1N0cmluZyhzdGF0ZU9yTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gaXNTdHIgPyBzdGF0ZU9yTmFtZSA6IHN0YXRlT3JOYW1lLm5hbWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVsYXRpdmUobmFtZSkpIG5hbWUgPSB0aGlzLnJlc29sdmVQYXRoKG5hbWUsIGJhc2UpO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZXNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSAmJiAoaXNTdHIgfHwgIWlzU3RyICYmIChzdGF0ZSA9PT0gc3RhdGVPck5hbWUgfHwgc3RhdGUuc2VsZiA9PT0gc3RhdGVPck5hbWUpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzU3RyICYmIG1hdGNoR2xvYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9zdGF0ZXMgPSB2YWx1ZXModGhpcy5fc3RhdGVzKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gX3N0YXRlcy5maWx0ZXIoZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLl9fc3RhdGVPYmplY3RDYWNoZS5uYW1lR2xvYiAmJiBzdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2IubWF0Y2hlcyhuYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhdGVNYXRjaGVyLmZpbmQ6IEZvdW5kIG11bHRpcGxlIG1hdGNoZXMgZm9yIFwiICsgbmFtZSArIFwiIHVzaW5nIGdsb2I6IFwiLCBtYXRjaGVzLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFN0YXRlTWF0Y2hlci5wcm90b3R5cGUucmVzb2x2ZVBhdGggPSBmdW5jdGlvbiAobmFtZSwgYmFzZSkge1xyXG4gICAgICAgICAgICBpZiAoIWJhc2UpIHRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIgKyBuYW1lICsgXCInXCIpO1xyXG4gICAgICAgICAgICB2YXIgYmFzZVN0YXRlID0gdGhpcy5maW5kKGJhc2UpO1xyXG4gICAgICAgICAgICB2YXIgc3BsaXROYW1lID0gbmFtZS5zcGxpdChcIi5cIiksXHJcbiAgICAgICAgICAgICAgICBpID0gMCxcclxuICAgICAgICAgICAgICAgIHBhdGhMZW5ndGggPSBzcGxpdE5hbWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGJhc2VTdGF0ZTtcclxuICAgICAgICAgICAgZm9yICg7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxpdE5hbWVbaV0gPT09IFwiXCIgJiYgaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBiYXNlU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc3BsaXROYW1lW2ldID09PSBcIl5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudC5wYXJlbnQpIHRocm93IG5ldyBFcnJvcihcIlBhdGggJ1wiICsgbmFtZSArIFwiJyBub3QgdmFsaWQgZm9yIHN0YXRlICdcIiArIGJhc2VTdGF0ZS5uYW1lICsgXCInXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWxOYW1lID0gc3BsaXROYW1lLnNsaWNlKGkpLmpvaW4oXCIuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudC5uYW1lICsgKGN1cnJlbnQubmFtZSAmJiByZWxOYW1lID8gXCIuXCIgOiBcIlwiKSArIHJlbE5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gU3RhdGVNYXRjaGVyO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgdmFyIFN0YXRlUXVldWVNYW5hZ2VyID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBTdGF0ZVF1ZXVlTWFuYWdlcigkcmVnaXN0cnksICR1cmxSb3V0ZXIsIHN0YXRlcywgYnVpbGRlciwgbGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHJlZ2lzdHJ5ID0gJHJlZ2lzdHJ5O1xyXG4gICAgICAgICAgICB0aGlzLiR1cmxSb3V0ZXIgPSAkdXJsUm91dGVyO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlcyA9IHN0YXRlcztcclxuICAgICAgICAgICAgdGhpcy5idWlsZGVyID0gYnVpbGRlcjtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBsaXN0ZW5lcnM7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVyID0gJHJlZ2lzdHJ5Lm1hdGNoZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlRGVjbCkge1xyXG4gICAgICAgICAgICB2YXIgcXVldWUgPSB0aGlzLnF1ZXVlO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBTdGF0ZU9iamVjdC5jcmVhdGUoc3RhdGVEZWNsKTtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lXCIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkgfHwgaW5BcnJheShxdWV1ZS5tYXAocHJvcCgnbmFtZScpKSwgbmFtZSkpIHRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIiArIG5hbWUgKyBcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBxdWV1ZSA9IF9hLnF1ZXVlLFxyXG4gICAgICAgICAgICAgICAgc3RhdGVzID0gX2Euc3RhdGVzLFxyXG4gICAgICAgICAgICAgICAgYnVpbGRlciA9IF9hLmJ1aWxkZXI7XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RlcmVkID0gW10sXHJcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZXMgdGhhdCBnb3QgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAgICBvcnBoYW5zID0gW10sXHJcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZXMgdGhhdCBkb24ndCB5ZXQgaGF2ZSBhIHBhcmVudCByZWdpc3RlcmVkXHJcbiAgICAgICAgICAgIHByZXZpb3VzUXVldWVMZW5ndGggPSB7fTsgLy8ga2VlcCB0cmFjayBvZiBob3cgbG9uZyB0aGUgcXVldWUgd2hlbiBhbiBvcnBoYW4gd2FzIGZpcnN0IGVuY291bnRlcmVkXHJcbiAgICAgICAgICAgIHZhciBnZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zdGF0ZXMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgX3RoaXMuc3RhdGVzW25hbWVdO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gcXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lXzEgPSBzdGF0ZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGJ1aWxkZXIuYnVpbGQoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9ycGhhbklkeCA9IG9ycGhhbnMuaW5kZXhPZihzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nU3RhdGUgPSBnZXRTdGF0ZShuYW1lXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1N0YXRlICYmIGV4aXN0aW5nU3RhdGUubmFtZSA9PT0gbmFtZV8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIiArIG5hbWVfMSArIFwiJyBpcyBhbHJlYWR5IGRlZmluZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0Z1dHVyZVN0YXRlID0gZ2V0U3RhdGUobmFtZV8xICsgXCIuKipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nRnV0dXJlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZ1dHVyZSBzdGF0ZSBvZiB0aGUgc2FtZSBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZ2lzdHJ5LmRlcmVnaXN0ZXIoZXhpc3RpbmdGdXR1cmVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlc1tuYW1lXzFdID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hSb3V0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ycGhhbklkeCA+PSAwKSBvcnBoYW5zLnNwbGljZShvcnBoYW5JZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWQucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldiA9IHByZXZpb3VzUXVldWVMZW5ndGhbbmFtZV8xXTtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzUXVldWVMZW5ndGhbbmFtZV8xXSA9IHF1ZXVlLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChvcnBoYW5JZHggPj0gMCAmJiBwcmV2ID09PSBxdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHVudGlsIHR3byBjb25zZWN1dGl2ZSBpdGVyYXRpb25zIHdoZXJlIG5vIGFkZGl0aW9uYWwgc3RhdGVzIHdlcmUgZGVxdWV1ZWQgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlZ2lzdGVyIG9ycGhhbmVkIHN0YXRlICcke25hbWV9J2ApO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZXM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9ycGhhbklkeCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvcnBoYW5zLnB1c2goc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVldWUucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlZ2lzdGVyZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihcInJlZ2lzdGVyZWRcIiwgcmVnaXN0ZXJlZC5tYXAoZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuc2VsZjtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmF0dGFjaFJvdXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5hYnN0cmFjdCB8fCAhc3RhdGUudXJsKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuJHVybFJvdXRlci5ydWxlKHRoaXMuJHVybFJvdXRlci51cmxSdWxlRmFjdG9yeS5jcmVhdGUoc3RhdGUpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBTdGF0ZVF1ZXVlTWFuYWdlcjtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHN0YXRlXHJcbiAgICAgKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICB2YXIgU3RhdGVSZWdpc3RyeSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFN0YXRlUmVnaXN0cnkoX3JvdXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXIgPSBuZXcgU3RhdGVNYXRjaGVyKHRoaXMuc3RhdGVzKTtcclxuICAgICAgICAgICAgdGhpcy5idWlsZGVyID0gbmV3IFN0YXRlQnVpbGRlcih0aGlzLm1hdGNoZXIsIF9yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlUXVldWUgPSBuZXcgU3RhdGVRdWV1ZU1hbmFnZXIodGhpcywgX3JvdXRlci51cmxSb3V0ZXIsIHRoaXMuc3RhdGVzLCB0aGlzLmJ1aWxkZXIsIHRoaXMubGlzdGVuZXJzKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJSb290KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fcmVnaXN0ZXJSb290ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcm9vdFN0YXRlRGVmID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICdeJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJyMnOiB7IHZhbHVlOiBudWxsLCB0eXBlOiAnaGFzaCcsIGR5bmFtaWM6IHRydWUgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfcm9vdCA9IHRoaXMuX3Jvb3QgPSB0aGlzLnN0YXRlUXVldWUucmVnaXN0ZXIocm9vdFN0YXRlRGVmKTtcclxuICAgICAgICAgICAgX3Jvb3QubmF2aWdhYmxlID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlUXVldWUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmdldCgpLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0KHN0YXRlKSAmJiBfdGhpcy5kZXJlZ2lzdGVyKHN0YXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMaXN0ZW4gZm9yIGEgU3RhdGUgUmVnaXN0cnkgZXZlbnRzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBZGRzIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gc3RhdGVzIGFyZSByZWdpc3RlcmVkIG9yIGRlcmVnaXN0ZXJlZCB3aXRoIHRoZSBTdGF0ZVJlZ2lzdHJ5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbGV0IGFsbFN0YXRlcyA9IHJlZ2lzdHJ5LmdldCgpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gTGF0ZXIsIGludm9rZSBkZXJlZ2lzdGVyRm4oKSB0byByZW1vdmUgdGhlIGxpc3RlbmVyXHJcbiAgICAgICAgICogbGV0IGRlcmVnaXN0ZXJGbiA9IHJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCgoZXZlbnQsIHN0YXRlcykgPT4ge1xyXG4gICAgICAgICAqICAgc3dpdGNoKGV2ZW50KSB7XHJcbiAgICAgICAgICogICAgIGNhc2U6ICdyZWdpc3RlcmVkJzpcclxuICAgICAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiBhbGxTdGF0ZXMucHVzaChzdGF0ZSkpO1xyXG4gICAgICAgICAqICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAqICAgICBjYXNlOiAnZGVyZWdpc3RlcmVkJzpcclxuICAgICAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiB7XHJcbiAgICAgICAgICogICAgICAgICBsZXQgaWR4ID0gYWxsU3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xyXG4gICAgICAgICAqICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIGFsbFN0YXRlcy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgKiAgICAgICB9KTtcclxuICAgICAgICAgKiAgICAgICBicmVhaztcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGludm9rZWQgd2hlbiB0aGUgcmVnaXN0ZXJlZCBzdGF0ZXMgY2hhbmdlcy5cclxuICAgICAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzLCBgZXZlbnRgIGFuZCBgc3RhdGVgLlxyXG4gICAgICAgICAqICAgICAgICBTZWUgW1tTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXJdXVxyXG4gICAgICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlcmVnaXN0ZXJzIHRoZSBsaXN0ZW5lclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLm9uU3RhdGVzQ2hhbmdlZCA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJMaXN0ZW5lcigpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUZyb20odGhpcy5saXN0ZW5lcnMpKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgaW1wbGljaXQgcm9vdCBzdGF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogR2V0cyB0aGUgcm9vdCBvZiB0aGUgc3RhdGUgdHJlZS5cclxuICAgICAgICAgKiBUaGUgcm9vdCBzdGF0ZSBpcyBpbXBsaWNpdGx5IGNyZWF0ZWQgYnkgVUktUm91dGVyLlxyXG4gICAgICAgICAqIE5vdGU6IHRoaXMgcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIHJlcHJlc2VudGF0aW9uLCBub3QgYSBbW1N0YXRlRGVjbGFyYXRpb25dXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB0aGUgcm9vdCBbW1N0YXRlT2JqZWN0XV1cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcm9vdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgYSBzdGF0ZSB0byB0aGUgcmVnaXN0cnlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFJlZ2lzdGVycyBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIHF1ZXVlcyBpdCBmb3IgcmVnaXN0cmF0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogYSBzdGF0ZSB3aWxsIGJlIHF1ZXVlZCBpZiB0aGUgc3RhdGUncyBwYXJlbnQgaXNuJ3QgeWV0IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdGVEZWZpbml0aW9uIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdGF0ZSB0byByZWdpc3Rlci5cclxuICAgICAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cclxuICAgICAgICAgKiAgICAgICAgICBJZiB0aGUgc3RhdGUgd2FzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLCB0aGVuIHRoZSBvYmplY3QgaXMgZnVsbHkgYnVpbHQgKFNlZTogW1tTdGF0ZUJ1aWxkZXJdXSkuXHJcbiAgICAgICAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBvbmx5IHF1ZXVlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIG5vdCBmdWxseSBidWlsdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlZmluaXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3RlcihzdGF0ZURlZmluaXRpb24pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fZGVyZWdpc3RlclRyZWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGFsbCQkMSA9IHRoaXMuZ2V0KCkubWFwKGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcy4kJHN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgZ2V0Q2hpbGRyZW4gPSBmdW5jdGlvbiBnZXRDaGlsZHJlbihzdGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGFsbCQkMS5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVzLmluZGV4T2Yocy5wYXJlbnQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IGNoaWxkcmVuIDogY2hpbGRyZW4uY29uY2F0KGdldENoaWxkcmVuKGNoaWxkcmVuKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGdldENoaWxkcmVuKFtzdGF0ZV0pO1xyXG4gICAgICAgICAgICB2YXIgZGVyZWdpc3RlcmVkID0gW3N0YXRlXS5jb25jYXQoY2hpbGRyZW4pLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgZGVyZWdpc3RlcmVkLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHVyID0gX3RoaXMuX3JvdXRlci51cmxSb3V0ZXI7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgVVJMIHJ1bGVcclxuICAgICAgICAgICAgICAgICR1ci5ydWxlcygpLmZpbHRlcihwcm9wRXEoXCJzdGF0ZVwiLCBzdGF0ZSkpLmZvckVhY2goJHVyLnJlbW92ZVJ1bGUuYmluZCgkdXIpKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBzdGF0ZSBmcm9tIHJlZ2lzdHJ5XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuc3RhdGVzW3N0YXRlLm5hbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZXMgYSBzdGF0ZSBmcm9tIHRoZSByZWdpc3RyeVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyByZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnkuXHJcbiAgICAgICAgICogSWYgdGhlIHN0YXRlIGhhcyBjaGlsZHJlbiwgdGhleSBhcmUgYXJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSByZWdpc3RyeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUncyBuYW1lIG9yIG9iamVjdCByZXByZXNlbnRhdGlvblxyXG4gICAgICAgICAqIEByZXR1cm5zIHtTdGF0ZU9iamVjdFtdfSBhIGxpc3Qgb2YgcmVtb3ZlZCBzdGF0ZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghX3N0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBkZXJlZ2lzdGVyIHN0YXRlOyBub3QgZm91bmQ6IFwiICsgc3RhdGVPck5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgZGVyZWdpc3RlcmVkU3RhdGVzID0gdGhpcy5fZGVyZWdpc3RlclRyZWUoX3N0YXRlLiQkc3RhdGUoKSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoXCJkZXJlZ2lzdGVyZWRcIiwgZGVyZWdpc3RlcmVkU3RhdGVzLm1hcChmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzLnNlbGY7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVyZWdpc3RlcmVkU3RhdGVzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBiYXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zdGF0ZXMpLm1hcChmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXRlc1tuYW1lXS5zZWxmO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIGJhc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZm91bmQgJiYgZm91bmQuc2VsZiB8fCBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGVjb3JhdG9yID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlci5idWlsZGVyKG5hbWUsIGZ1bmMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFN0YXRlUmVnaXN0cnk7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB1cmxcclxuICAgICAqL1xyXG4gICAgLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gcXVvdGVSZWdFeHAoc3RyaW5nLCBwYXJhbSkge1xyXG4gICAgICAgIHZhciBzdXJyb3VuZFBhdHRlcm4gPSBbJycsICcnXSxcclxuICAgICAgICAgICAgcmVzdWx0ID0gc3RyaW5nLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZywgXCJcXFxcJCZcIik7XHJcbiAgICAgICAgaWYgKCFwYXJhbSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICBzd2l0Y2ggKHBhcmFtLnNxdWFzaCkge1xyXG4gICAgICAgICAgICBjYXNlIGZhbHNlOlxyXG4gICAgICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoJywgJyknICsgKHBhcmFtLmlzT3B0aW9uYWwgPyAnPycgOiAnJyldO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgdHJ1ZTpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXC8kLywgJycpO1xyXG4gICAgICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoPzpcXC8oJywgJyl8XFwvKT8nXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgc3Vycm91bmRQYXR0ZXJuID0gW1wiKFwiICsgcGFyYW0uc3F1YXNoICsgXCJ8XCIsICcpPyddO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQgKyBzdXJyb3VuZFBhdHRlcm5bMF0gKyBwYXJhbS50eXBlLnBhdHRlcm4uc291cmNlICsgc3Vycm91bmRQYXR0ZXJuWzFdO1xyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHZhciBtZW1vaXplVG8gPSBmdW5jdGlvbiBtZW1vaXplVG8ob2JqLCBwcm9wJCQxLCBmbikge1xyXG4gICAgICAgIHJldHVybiBvYmpbcHJvcCQkMV0gPSBvYmpbcHJvcCQkMV0gfHwgZm4oKTtcclxuICAgIH07XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgdmFyIHNwbGl0T25TbGFzaCA9IHNwbGl0T25EZWxpbSgnLycpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucy5cclxuICAgICAqXHJcbiAgICAgKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucyBhbmQgZXh0cmFjdHMgbmFtZWQgcGFyYW1ldGVycyBmcm9tIHRoZSBwYXRoIG9yIHRoZSBzZWFyY2hcclxuICAgICAqIHBhcnQgb2YgdGhlIFVSTC5cclxuICAgICAqXHJcbiAgICAgKiBBIFVSTCBwYXR0ZXJuIGNvbnNpc3RzIG9mIGEgcGF0aCBwYXR0ZXJuLCBvcHRpb25hbGx5IGZvbGxvd2VkIGJ5ICc/JyBhbmQgYSBsaXN0IG9mIHNlYXJjaCAocXVlcnkpXHJcbiAgICAgKiBwYXJhbWV0ZXJzLiBNdWx0aXBsZSBzZWFyY2ggcGFyYW1ldGVyIG5hbWVzIGFyZSBzZXBhcmF0ZWQgYnkgJyYnLiBTZWFyY2ggcGFyYW1ldGVyc1xyXG4gICAgICogZG8gbm90IGluZmx1ZW5jZSB3aGV0aGVyIG9yIG5vdCBhIFVSTCBpcyBtYXRjaGVkLCBidXQgdGhlaXIgdmFsdWVzIGFyZSBwYXNzZWQgdGhyb3VnaCBpbnRvXHJcbiAgICAgKiB0aGUgbWF0Y2hlZCBwYXJhbWV0ZXJzIHJldHVybmVkIGJ5IFtbVXJsTWF0Y2hlci5leGVjXV0uXHJcbiAgICAgKlxyXG4gICAgICogLSAqUGF0aCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBjdXJseSBicmFjZSBwbGFjZWhvbGRlcnMgKGAvc29tZXBhdGgve3BhcmFtfWApXHJcbiAgICAgKiBvciBjb2xvbiBwbGFjZWhvbGRlcnMgKGAvc29tZVBhdGgvOnBhcmFtYCkuXHJcbiAgICAgKlxyXG4gICAgICogLSAqQSBwYXJhbWV0ZXIgUmVnRXhwKiBtYXkgYmUgZGVmaW5lZCBmb3IgYSBwYXJhbSBhZnRlciBhIGNvbG9uXHJcbiAgICAgKiAoYC9zb21lUGF0aC97cGFyYW06W2EtekEtWjAtOV0rfWApIGluIGEgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXIuXHJcbiAgICAgKiBUaGUgcmVnZXhwIG11c3QgbWF0Y2ggZm9yIHRoZSB1cmwgdG8gYmUgbWF0Y2hlZC5cclxuICAgICAqIFNob3VsZCB0aGUgcmVnZXhwIGl0c2VsZiBjb250YWluIGN1cmx5IGJyYWNlcywgdGhleSBtdXN0IGJlIGluIG1hdGNoZWQgcGFpcnMgb3IgZXNjYXBlZCB3aXRoIGEgYmFja3NsYXNoLlxyXG4gICAgICpcclxuICAgICAqIE5vdGU6IGEgUmVnRXhwIHBhcmFtZXRlciB3aWxsIGVuY29kZSBpdHMgdmFsdWUgdXNpbmcgZWl0aGVyIFtbUGFyYW1UeXBlcy5wYXRoXV0gb3IgW1tQYXJhbVR5cGVzLnF1ZXJ5XV0uXHJcbiAgICAgKlxyXG4gICAgICogLSAqQ3VzdG9tIHBhcmFtZXRlciB0eXBlcyogbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFmdGVyIGEgY29sb24gKGAvc29tZVBhdGgve3BhcmFtOmludH1gKSBpbiBjdXJseSBicmFjZSBwYXJhbWV0ZXJzLlxyXG4gICAgICogICBTZWUgW1tVcmxNYXRjaGVyRmFjdG9yeS50eXBlXV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogLSAqQ2F0Y2gtYWxsIHBhcmFtZXRlcnMqIGFyZSBkZWZpbmVkIHVzaW5nIGFuIGFzdGVyaXNrIHBsYWNlaG9sZGVyIChgL3NvbWVwYXRoLypjYXRjaGFsbHBhcmFtYCkuXHJcbiAgICAgKiAgIEEgY2F0Y2gtYWxsICogcGFyYW1ldGVyIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgcmVtYWluZGVyIG9mIHRoZSBVUkwuXHJcbiAgICAgKlxyXG4gICAgICogLS0tXHJcbiAgICAgKlxyXG4gICAgICogUGFyYW1ldGVyIG5hbWVzIG1heSBjb250YWluIG9ubHkgd29yZCBjaGFyYWN0ZXJzIChsYXRpbiBsZXR0ZXJzLCBkaWdpdHMsIGFuZCB1bmRlcnNjb3JlKSBhbmRcclxuICAgICAqIG11c3QgYmUgdW5pcXVlIHdpdGhpbiB0aGUgcGF0dGVybiAoYWNyb3NzIGJvdGggcGF0aCBhbmQgc2VhcmNoIHBhcmFtZXRlcnMpLlxyXG4gICAgICogQSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycyBvdGhlciB0aGFuICcvJy4gRm9yIGNhdGNoLWFsbFxyXG4gICAgICogcGxhY2Vob2xkZXJzIHRoZSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycy5cclxuICAgICAqXHJcbiAgICAgKiBFeGFtcGxlczpcclxuICAgICAqXHJcbiAgICAgKiAqIGAnL2hlbGxvLydgIC0gTWF0Y2hlcyBvbmx5IGlmIHRoZSBwYXRoIGlzIGV4YWN0bHkgJy9oZWxsby8nLiBUaGVyZSBpcyBubyBzcGVjaWFsIHRyZWF0bWVudCBmb3JcclxuICAgICAqICAgdHJhaWxpbmcgc2xhc2hlcywgYW5kIHBhdHRlcm5zIGhhdmUgdG8gbWF0Y2ggdGhlIGVudGlyZSBwYXRoLCBub3QganVzdCBhIHByZWZpeC5cclxuICAgICAqICogYCcvdXNlci86aWQnYCAtIE1hdGNoZXMgJy91c2VyL2JvYicgb3IgJy91c2VyLzEyMzQhISEnIG9yIGV2ZW4gJy91c2VyLycgYnV0IG5vdCAnL3VzZXInIG9yXHJcbiAgICAgKiAgICcvdXNlci9ib2IvZGV0YWlscycuIFRoZSBzZWNvbmQgcGF0aCBzZWdtZW50IHdpbGwgYmUgY2FwdHVyZWQgYXMgdGhlIHBhcmFtZXRlciAnaWQnLlxyXG4gICAgICogKiBgJy91c2VyL3tpZH0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCB1c2luZyBjdXJseSBicmFjZSBzeW50YXguXHJcbiAgICAgKiAqIGAnL3VzZXIve2lkOlteL10qfSdgIC0gU2FtZSBhcyB0aGUgcHJldmlvdXMgZXhhbXBsZS5cclxuICAgICAqICogYCcvdXNlci97aWQ6WzAtOWEtZkEtRl17MSw4fX0nYCAtIFNpbWlsYXIgdG8gdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCBvbmx5IG1hdGNoZXMgaWYgdGhlIGlkXHJcbiAgICAgKiAgIHBhcmFtZXRlciBjb25zaXN0cyBvZiAxIHRvIDggaGV4IGRpZ2l0cy5cclxuICAgICAqICogYCcvZmlsZXMve3BhdGg6Lip9J2AgLSBNYXRjaGVzIGFueSBVUkwgc3RhcnRpbmcgd2l0aCAnL2ZpbGVzLycgYW5kIGNhcHR1cmVzIHRoZSByZXN0IG9mIHRoZVxyXG4gICAgICogICBwYXRoIGludG8gdGhlIHBhcmFtZXRlciAncGF0aCcuXHJcbiAgICAgKiAqIGAnL2ZpbGVzLypwYXRoJ2AgLSBkaXR0by5cclxuICAgICAqICogYCcvY2FsZW5kYXIve3N0YXJ0OmRhdGV9J2AgLSBNYXRjaGVzIFwiL2NhbGVuZGFyLzIwMTQtMTEtMTJcIiAoYmVjYXVzZSB0aGUgcGF0dGVybiBkZWZpbmVkXHJcbiAgICAgKiAgIGluIHRoZSBidWlsdC1pbiAgYGRhdGVgIFBhcmFtVHlwZSBtYXRjaGVzIGAyMDE0LTExLTEyYCkgYW5kIHByb3ZpZGVzIGEgRGF0ZSBvYmplY3QgaW4gJHN0YXRlUGFyYW1zLnN0YXJ0XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICB2YXIgVXJsTWF0Y2hlciA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHBhdHRlcm4gVGhlIHBhdHRlcm4gdG8gY29tcGlsZSBpbnRvIGEgbWF0Y2hlci5cclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1UeXBlcyBUaGUgW1tQYXJhbVR5cGVzXV0gcmVnaXN0cnlcclxuICAgICAgICAgKiBAcGFyYW0gY29uZmlnICBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICAgICAgICogLSBgY2FzZUluc2Vuc2l0aXZlYCAtIGB0cnVlYCBpZiBVUkwgbWF0Y2hpbmcgc2hvdWxkIGJlIGNhc2UgaW5zZW5zaXRpdmUsIG90aGVyd2lzZSBgZmFsc2VgLCB0aGUgZGVmYXVsdCB2YWx1ZSAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpIGlzIGBmYWxzZWAuXHJcbiAgICAgICAgICogLSBgc3RyaWN0YCAtIGBmYWxzZWAgaWYgbWF0Y2hpbmcgYWdhaW5zdCBhIFVSTCB3aXRoIGEgdHJhaWxpbmcgc2xhc2ggc2hvdWxkIGJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCB0byBhIFVSTCB3aXRob3V0IGEgdHJhaWxpbmcgc2xhc2gsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBVcmxNYXRjaGVyKHBhdHRlcm4kJDEsIHBhcmFtVHlwZXMsIHBhcmFtRmFjdG9yeSwgY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IHsgcGF0aDogW3RoaXNdIH07XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BhcmFtcyA9IFtdO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9jb21waWxlZCA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuJCQxO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGRlZmF1bHRzKHRoaXMuY29uZmlnLCB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FzZUluc2Vuc2l0aXZlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHBhcmFtTWFwOiBpZGVudGl0eVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gRmluZCBhbGwgcGxhY2Vob2xkZXJzIGFuZCBjcmVhdGUgYSBjb21waWxlZCBwYXR0ZXJuLCB1c2luZyBlaXRoZXIgY2xhc3NpYyBvciBjdXJseSBzeW50YXg6XHJcbiAgICAgICAgICAgIC8vICAgJyonIG5hbWVcclxuICAgICAgICAgICAgLy8gICAnOicgbmFtZVxyXG4gICAgICAgICAgICAvLyAgICd7JyBuYW1lICd9J1xyXG4gICAgICAgICAgICAvLyAgICd7JyBuYW1lICc6JyByZWdleHAgJ30nXHJcbiAgICAgICAgICAgIC8vIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gaXMgc29tZXdoYXQgY29tcGxpY2F0ZWQgZHVlIHRvIHRoZSBuZWVkIHRvIGFsbG93IGN1cmx5IGJyYWNlc1xyXG4gICAgICAgICAgICAvLyBpbnNpZGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbi4gVGhlIHBsYWNlaG9sZGVyIHJlZ2V4cCBicmVha3MgZG93biBhcyBmb2xsb3dzOlxyXG4gICAgICAgICAgICAvLyAgICAoWzoqXSkoW1xcd1xcW1xcXV0rKSAgICAgICAgICAgICAgLSBjbGFzc2ljIHBsYWNlaG9sZGVyICgkMSAvICQyKSAoc2VhcmNoIHZlcnNpb24gaGFzIC0gZm9yIHNuYWtlLWNhc2UpXHJcbiAgICAgICAgICAgIC8vICAgIFxceyhbXFx3XFxbXFxdXSspKD86XFw6XFxzKiggLi4uICkpP1xcfSAgLSBjdXJseSBicmFjZSBwbGFjZWhvbGRlciAoJDMpIHdpdGggb3B0aW9uYWwgcmVnZXhwL3R5cGUgLi4uICgkNCkgKHNlYXJjaCB2ZXJzaW9uIGhhcyAtIGZvciBzbmFrZS1jYXNlXHJcbiAgICAgICAgICAgIC8vICAgICg/OiAuLi4gfCAuLi4gfCAuLi4gKSsgICAgICAgICAtIHRoZSByZWdleHAgY29uc2lzdHMgb2YgYW55IG51bWJlciBvZiBhdG9tcywgYW4gYXRvbSBiZWluZyBlaXRoZXJcclxuICAgICAgICAgICAgLy8gICAgW157fVxcXFxdKyAgICAgICAgICAgICAgICAgICAgICAgLSBhbnl0aGluZyBvdGhlciB0aGFuIGN1cmx5IGJyYWNlcyBvciBiYWNrc2xhc2hcclxuICAgICAgICAgICAgLy8gICAgXFxcXC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBhIGJhY2tzbGFzaCBlc2NhcGVcclxuICAgICAgICAgICAgLy8gICAgXFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9ICAgICAgICAgIC0gYSBtYXRjaGVkIHNldCBvZiBjdXJseSBicmFjZXMgY29udGFpbmluZyBvdGhlciBhdG9tc1xyXG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAvKFs6Kl0pKFtcXHdcXFtcXF1dKyl8XFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZyxcclxuICAgICAgICAgICAgICAgIHNlYXJjaFBsYWNlaG9sZGVyID0gLyhbOl0/KShbXFx3XFxbXFxdLi1dKyl8XFx7KFtcXHdcXFtcXF0uLV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nLFxyXG4gICAgICAgICAgICAgICAgbGFzdCA9IDAsXHJcbiAgICAgICAgICAgICAgICBtLFxyXG4gICAgICAgICAgICAgICAgcGF0dGVybnMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGNoZWNrUGFyYW1FcnJvcnMgPSBmdW5jdGlvbiBjaGVja1BhcmFtRXJyb3JzKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVVybE1hdGNoZXIubmFtZVZhbGlkYXRvci50ZXN0KGlkKSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgbmFtZSAnXCIgKyBpZCArIFwiJyBpbiBwYXR0ZXJuICdcIiArIHBhdHRlcm4kJDEgKyBcIidcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZChfdGhpcy5fcGFyYW1zLCBwcm9wRXEoJ2lkJywgaWQpKSkgdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIiArIGlkICsgXCInIGluIHBhdHRlcm4gJ1wiICsgcGF0dGVybiQkMSArIFwiJ1wiKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gU3BsaXQgaW50byBzdGF0aWMgc2VnbWVudHMgc2VwYXJhdGVkIGJ5IHBhdGggcGFyYW1ldGVyIHBsYWNlaG9sZGVycy5cclxuICAgICAgICAgICAgLy8gVGhlIG51bWJlciBvZiBzZWdtZW50cyBpcyBhbHdheXMgMSBtb3JlIHRoYW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAgICB2YXIgbWF0Y2hEZXRhaWxzID0gZnVuY3Rpb24gbWF0Y2hEZXRhaWxzKG0sIGlzU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJRVs3OF0gcmV0dXJucyAnJyBmb3IgdW5tYXRjaGVkIGdyb3VwcyBpbnN0ZWFkIG9mIG51bGxcclxuICAgICAgICAgICAgICAgIHZhciBpZCA9IG1bMl0gfHwgbVszXTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleHAgPSBpc1NlYXJjaCA/IG1bNF0gOiBtWzRdIHx8IChtWzFdID09PSAnKicgPyAnW1xcXFxzXFxcXFNdKicgOiBudWxsKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYWtlUmVnZXhwVHlwZSA9IGZ1bmN0aW9uIG1ha2VSZWdleHBUeXBlKHJlZ2V4cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmhlcml0KHBhcmFtVHlwZXMudHlwZShpc1NlYXJjaCA/IFwicXVlcnlcIiA6IFwicGF0aFwiKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHJlZ2V4cCwgX3RoaXMuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSA/ICdpJyA6IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICByZWdleHA6IHJlZ2V4cCxcclxuICAgICAgICAgICAgICAgICAgICBjZmc6IF90aGlzLmNvbmZpZy5wYXJhbXNbaWRdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IHBhdHRlcm4kJDEuc3Vic3RyaW5nKGxhc3QsIG0uaW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICFyZWdleHAgPyBudWxsIDogcGFyYW1UeXBlcy50eXBlKHJlZ2V4cCkgfHwgbWFrZVJlZ2V4cFR5cGUocmVnZXhwKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHAsIHNlZ21lbnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChtID0gcGxhY2Vob2xkZXIuZXhlYyhwYXR0ZXJuJCQxKSkge1xyXG4gICAgICAgICAgICAgICAgcCA9IG1hdGNoRGV0YWlscyhtLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5zZWdtZW50LmluZGV4T2YoJz8nKSA+PSAwKSBicmVhazsgLy8gd2UncmUgaW50byB0aGUgc2VhcmNoIHBhcnRcclxuICAgICAgICAgICAgICAgIGNoZWNrUGFyYW1FcnJvcnMocC5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMucHVzaChwYXJhbUZhY3RvcnkuZnJvbVBhdGgocC5pZCwgcC50eXBlLCB0aGlzLmNvbmZpZy5wYXJhbU1hcChwLmNmZywgZmFsc2UpKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKHAuc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJucy5wdXNoKFtwLnNlZ21lbnQsIHRhaWwodGhpcy5fcGFyYW1zKV0pO1xyXG4gICAgICAgICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWdtZW50ID0gcGF0dGVybiQkMS5zdWJzdHJpbmcobGFzdCk7XHJcbiAgICAgICAgICAgIC8vIEZpbmQgYW55IHNlYXJjaCBwYXJhbWV0ZXIgbmFtZXMgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIGxhc3Qgc2VnbWVudFxyXG4gICAgICAgICAgICB2YXIgaSA9IHNlZ21lbnQuaW5kZXhPZignPycpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gc2VnbWVudC5zdWJzdHJpbmcoaSk7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudC5zdWJzdHJpbmcoMCwgaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobSA9IHNlYXJjaFBsYWNlaG9sZGVyLmV4ZWMoc2VhcmNoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gbWF0Y2hEZXRhaWxzKG0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1BhcmFtRXJyb3JzKHAuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJhbXMucHVzaChwYXJhbUZhY3RvcnkuZnJvbVNlYXJjaChwLmlkLCBwLnR5cGUsIHRoaXMuY29uZmlnLnBhcmFtTWFwKHAuY2ZnLCB0cnVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0ID0gcGxhY2Vob2xkZXIubGFzdEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiA/JlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb21waWxlZCA9IHBhdHRlcm5zLm1hcChmdW5jdGlvbiAocGF0dGVybiQkMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1b3RlUmVnRXhwLmFwcGx5KG51bGwsIHBhdHRlcm4kJDEpO1xyXG4gICAgICAgICAgICB9KS5jb25jYXQocXVvdGVSZWdFeHAoc2VnbWVudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbmNhdGVuYXRlZCBVcmxNYXRjaGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBCdWlsZHMgYSBuZXcgVXJsTWF0Y2hlciBieSBhcHBlbmRpbmcgYW5vdGhlciBVcmxNYXRjaGVyIHRvIHRoaXMgb25lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCBBIGBVcmxNYXRjaGVyYCBpbnN0YW5jZSB0byBhcHBlbmQgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBgVXJsTWF0Y2hlcmAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKHVybCk7XHJcbiAgICAgICAgICAgIHVybC5fY2FjaGUgPSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiB0aGlzLl9jYWNoZS5wYXRoLmNvbmNhdCh1cmwpLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5wYXRoWzBdID09PSB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGlucHV0IHBhdHRlcm4gc3RyaW5nICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdHRlcm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUZXN0cyB0aGUgc3BlY2lmaWVkIHVybC9wYXRoIGFnYWluc3QgdGhpcyBtYXRjaGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGVzdHMgaWYgdGhlIGdpdmVuIHVybCBtYXRjaGVzIHRoaXMgbWF0Y2hlcidzIHBhdHRlcm4sIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjYXB0dXJlZFxyXG4gICAgICAgICAqIHBhcmFtZXRlciB2YWx1ZXMuICBSZXR1cm5zIG51bGwgaWYgdGhlIHBhdGggZG9lcyBub3QgbWF0Y2guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGNvbnRhaW5zIHRoZSB2YWx1ZXNcclxuICAgICAgICAgKiBvZiBhbnkgc2VhcmNoIHBhcmFtZXRlcnMgdGhhdCBhcmUgbWVudGlvbmVkIGluIHRoZSBwYXR0ZXJuLCBidXQgdGhlaXIgdmFsdWUgbWF5IGJlIG51bGwgaWZcclxuICAgICAgICAgKiB0aGV5IGFyZSBub3QgcHJlc2VudCBpbiBgc2VhcmNoYC4gVGhpcyBtZWFucyB0aGF0IHNlYXJjaCBwYXJhbWV0ZXJzIGFyZSBhbHdheXMgdHJlYXRlZFxyXG4gICAgICAgICAqIGFzIG9wdGlvbmFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbmV3IFVybE1hdGNoZXIoJy91c2VyL3tpZH0/cSZyJykuZXhlYygnL3VzZXIvYm9iJywge1xyXG4gICAgICAgICAqICAgeDogJzEnLCBxOiAnaGVsbG8nXHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogLy8gcmV0dXJucyB7IGlkOiAnYm9iJywgcTogJ2hlbGxvJywgcjogbnVsbCB9XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCAgICBUaGUgVVJMIHBhdGggdG8gbWF0Y2gsIGUuZy4gYCRsb2NhdGlvbi5wYXRoKClgLlxyXG4gICAgICAgICAqIEBwYXJhbSBzZWFyY2ggIFVSTCBzZWFyY2ggcGFyYW1ldGVycywgZS5nLiBgJGxvY2F0aW9uLnNlYXJjaCgpYC5cclxuICAgICAgICAgKiBAcGFyYW0gaGFzaCAgICBVUkwgaGFzaCBlLmcuIGAkbG9jYXRpb24uaGFzaCgpYC5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgVGhlIGNhcHR1cmVkIHBhcmFtZXRlciB2YWx1ZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChwYXRoLCBzZWFyY2gsIGhhc2gsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKHNlYXJjaCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2ggPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1hdGNoID0gbWVtb2l6ZVRvKHRoaXMuX2NhY2hlLCAncGF0dGVybicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFsnXicsIHVubmVzdChfdGhpcy5fY2FjaGUucGF0aC5tYXAocHJvcCgnX2NvbXBpbGVkJykpKS5qb2luKCcnKSwgX3RoaXMuY29uZmlnLnN0cmljdCA9PT0gZmFsc2UgPyAnXFwvPycgOiAnJywgJyQnXS5qb2luKCcnKSwgX3RoaXMuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSA/ICdpJyA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0pLmV4ZWMocGF0aCk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAvL29wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB7IGlzb2xhdGU6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB2YXIgYWxsUGFyYW1zID0gdGhpcy5wYXJhbWV0ZXJzKCksXHJcbiAgICAgICAgICAgICAgICBwYXRoUGFyYW1zID0gYWxsUGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhcGFyYW0uaXNTZWFyY2goKTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzZWFyY2hQYXJhbXMgPSBhbGxQYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmlzU2VhcmNoKCk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgblBhdGhTZWdtZW50cyA9IHRoaXMuX2NhY2hlLnBhdGgubWFwKGZ1bmN0aW9uICh1cmxtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsbS5fc2VnbWVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChhLCB4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYSArIHg7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVzJCQxID0ge307XHJcbiAgICAgICAgICAgIGlmIChuUGF0aFNlZ21lbnRzICE9PSBtYXRjaC5sZW5ndGggLSAxKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmJhbGFuY2VkIGNhcHR1cmUgZ3JvdXAgaW4gcm91dGUgJ1wiICsgdGhpcy5wYXR0ZXJuICsgXCInXCIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWNvZGVQYXRoQXJyYXkoc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmV2ZXJzZVN0cmluZyA9IGZ1bmN0aW9uIHJldmVyc2VTdHJpbmcoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5xdW90ZURhc2hlcyA9IGZ1bmN0aW9uIHVucXVvdGVEYXNoZXMoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXFxcLS9nLCBcIi1cIik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNwbGl0ID0gcmV2ZXJzZVN0cmluZyhzdHJpbmcpLnNwbGl0KC8tKD8hXFxcXCkvKTtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxSZXZlcnNlZCA9IG1hcChzcGxpdCwgcmV2ZXJzZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwKGFsbFJldmVyc2VkLCB1bnF1b3RlRGFzaGVzKS5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuUGF0aFNlZ21lbnRzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IHBhdGhQYXJhbXNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFtpICsgMV07XHJcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcGFyYW0gdmFsdWUgbWF0Y2hlcyBhIHByZS1yZXBsYWNlIHBhaXIsIHJlcGxhY2UgdGhlIHZhbHVlIGJlZm9yZSBkZWNvZGluZy5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFyYW0ucmVwbGFjZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbS5yZXBsYWNlW2pdLmZyb20gPT09IHZhbHVlKSB2YWx1ZSA9IHBhcmFtLnJlcGxhY2Vbal0udG87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgcGFyYW0uYXJyYXkgPT09IHRydWUpIHZhbHVlID0gZGVjb2RlUGF0aEFycmF5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB2YWx1ZSA9IHBhcmFtLnR5cGUuZGVjb2RlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlcyQkMVtwYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzZWFyY2hbcGFyYW0uaWRdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB2YWx1ZSA9IHBhcmFtLnR5cGUuZGVjb2RlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlcyQkMVtwYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaGFzaCkgdmFsdWVzJCQxW1wiI1wiXSA9IGhhc2g7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMkJDE7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaGlkZGVuXHJcbiAgICAgICAgICogUmV0dXJucyBhbGwgdGhlIFtbUGFyYW1dXSBvYmplY3RzIG9mIGFsbCBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycyBvZiB0aGlzIHBhdHRlcm4gaW4gb3JkZXIgb2YgYXBwZWFyYW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheS48UGFyYW0+fSAgQW4gYXJyYXkgb2YgW1tQYXJhbV1dIG9iamVjdHMuIE11c3QgYmUgdHJlYXRlZCBhcyByZWFkLW9ubHkuIElmIHRoZVxyXG4gICAgICAgICAqICAgIHBhdHRlcm4gaGFzIG5vIHBhcmFtZXRlcnMsIGFuIGVtcHR5IGFycmF5IGlzIHJldHVybmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybE1hdGNoZXIucHJvdG90eXBlLnBhcmFtZXRlcnMgPSBmdW5jdGlvbiAob3B0cykge1xyXG4gICAgICAgICAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdHMuaW5oZXJpdCA9PT0gZmFsc2UpIHJldHVybiB0aGlzLl9wYXJhbXM7XHJcbiAgICAgICAgICAgIHJldHVybiB1bm5lc3QodGhpcy5fY2FjaGUucGF0aC5tYXAoZnVuY3Rpb24gKG1hdGNoZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLl9wYXJhbXM7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBoaWRkZW5cclxuICAgICAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIHBhcmFtZXRlciBmcm9tIHRoaXMgVXJsTWF0Y2hlciBieSBpZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGlkXHJcbiAgICAgICAgICogQHBhcmFtIG9wdHNcclxuICAgICAgICAgKiBAcmV0dXJucyB7VHxQYXJhbXxhbnl8Ym9vbGVhbnxVcmxNYXRjaGVyfG51bGx9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUucGFyYW1ldGVyID0gZnVuY3Rpb24gKGlkLCBvcHRzKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChvcHRzID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIG9wdHMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZmluZFBhcmFtID0gZnVuY3Rpb24gZmluZFBhcmFtKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLl9wYXJhbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbS5pZCA9PT0gaWQpIHJldHVybiBwYXJhbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuX2NhY2hlLnBhcmVudDtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbmRQYXJhbSgpIHx8IG9wdHMuaW5oZXJpdCAhPT0gZmFsc2UgJiYgcGFyZW50ICYmIHBhcmVudC5wYXJhbWV0ZXIoaWQsIG9wdHMpIHx8IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBWYWxpZGF0ZXMgdGhlIGlucHV0IHBhcmFtZXRlciB2YWx1ZXMgYWdhaW5zdCB0aGlzIFVybE1hdGNoZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIENoZWNrcyBhbiBvYmplY3QgaGFzaCBvZiBwYXJhbWV0ZXJzIHRvIHZhbGlkYXRlIHRoZWlyIGNvcnJlY3RuZXNzIGFjY29yZGluZyB0byB0aGUgcGFyYW1ldGVyXHJcbiAgICAgICAgICogdHlwZXMgb2YgdGhpcyBgVXJsTWF0Y2hlcmAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBvYmplY3QgaGFzaCBvZiBwYXJhbWV0ZXJzIHRvIHZhbGlkYXRlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIFJldHVybnMgYHRydWVgIGlmIGBwYXJhbXNgIHZhbGlkYXRlcywgb3RoZXJ3aXNlIGBmYWxzZWAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUudmFsaWRhdGVzID0gZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRQYXJhbVZhbCA9IGZ1bmN0aW9uIHZhbGlkUGFyYW1WYWwocGFyYW0sIHZhbCQkMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFwYXJhbSB8fCBwYXJhbS52YWxpZGF0ZXModmFsJCQxKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG4gICAgICAgICAgICAvLyBJJ20gbm90IHN1cmUgd2h5IHRoaXMgY2hlY2tzIG9ubHkgdGhlIHBhcmFtIGtleXMgcGFzc2VkIGluLCBhbmQgbm90IGFsbCB0aGUgcGFyYW1zIGtub3duIHRvIHRoZSBtYXRjaGVyXHJcbiAgICAgICAgICAgIHZhciBwYXJhbVNjaGVtYSA9IHRoaXMucGFyYW1ldGVycygpLmZpbHRlcihmdW5jdGlvbiAocGFyYW1EZWYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1EZWYuaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtU2NoZW1hLm1hcChmdW5jdGlvbiAocGFyYW1EZWYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZFBhcmFtVmFsKHBhcmFtRGVmLCBwYXJhbXNbcGFyYW1EZWYuaWRdKTtcclxuICAgICAgICAgICAgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdpdmVuIGEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMsIGNyZWF0ZXMgYSBVUkwgZnJvbSB0aGlzIFVybE1hdGNoZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBDcmVhdGVzIGEgVVJMIHRoYXQgbWF0Y2hlcyB0aGlzIHBhdHRlcm4gYnkgc3Vic3RpdHV0aW5nIHRoZSBzcGVjaWZpZWQgdmFsdWVzXHJcbiAgICAgICAgICogZm9yIHRoZSBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIG5ldyBVcmxNYXRjaGVyKCcvdXNlci97aWR9P3EnKS5mb3JtYXQoeyBpZDonYm9iJywgcToneWVzJyB9KTtcclxuICAgICAgICAgKiAvLyByZXR1cm5zICcvdXNlci9ib2I/cT15ZXMnXHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdmFsdWVzICB0aGUgdmFsdWVzIHRvIHN1YnN0aXR1dGUgZm9yIHRoZSBwYXJhbWV0ZXJzIGluIHRoaXMgcGF0dGVybi5cclxuICAgICAgICAgKiBAcmV0dXJucyB0aGUgZm9ybWF0dGVkIFVSTCAocGF0aCBhbmQgb3B0aW9uYWxseSBzZWFyY2ggcGFydCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKHZhbHVlcyQkMSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWVzJCQxID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlcyQkMSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSBmdWxsIHBhdGggb2YgVXJsTWF0Y2hlcnMgKGluY2x1ZGluZyBhbGwgcGFyZW50IFVybE1hdGNoZXJzKVxyXG4gICAgICAgICAgICB2YXIgdXJsTWF0Y2hlcnMgPSB0aGlzLl9jYWNoZS5wYXRoO1xyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IGFsbCB0aGUgc3RhdGljIHNlZ21lbnRzIGFuZCBQYXJhbXMgKHByb2Nlc3NlZCBhcyBQYXJhbURldGFpbHMpXHJcbiAgICAgICAgICAgIC8vIGludG8gYW4gb3JkZXJlZCBhcnJheVxyXG4gICAgICAgICAgICB2YXIgcGF0aFNlZ21lbnRzQW5kUGFyYW1zID0gdXJsTWF0Y2hlcnMubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKS5yZWR1Y2UodW5uZXN0UiwgW10pLm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzU3RyaW5nKHgpID8geCA6IGdldERldGFpbHMoeCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBxdWVyeSBwYXJhbXMgaW50byBhIHNlcGFyYXRlIGFycmF5XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHVybE1hdGNoZXJzLm1hcChVcmxNYXRjaGVyLnF1ZXJ5UGFyYW1zKS5yZWR1Y2UodW5uZXN0UiwgW10pLm1hcChnZXREZXRhaWxzKTtcclxuICAgICAgICAgICAgdmFyIGlzSW52YWxpZCA9IGZ1bmN0aW9uIGlzSW52YWxpZChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmlzVmFsaWQgPT09IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAocGF0aFNlZ21lbnRzQW5kUGFyYW1zLmNvbmNhdChxdWVyeVBhcmFtcykuZmlsdGVyKGlzSW52YWxpZCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2l2ZW4gYSBQYXJhbSwgYXBwbGllcyB0aGUgcGFyYW1ldGVyIHZhbHVlLCB0aGVuIHJldHVybnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgaXRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldERldGFpbHMocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSB0byB0eXBlZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW0udmFsdWUodmFsdWVzJCQxW3BhcmFtLmlkXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IHBhcmFtLnZhbGlkYXRlcyh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNEZWZhdWx0VmFsdWUgPSBwYXJhbS5pc0RlZmF1bHRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBzcXVhc2ggbW9kZSBmb3IgdGhlIHBhcmFtZXRlclxyXG4gICAgICAgICAgICAgICAgdmFyIHNxdWFzaCA9IGlzRGVmYXVsdFZhbHVlID8gcGFyYW0uc3F1YXNoIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBBbGxvdyB0aGUgUGFyYW1ldGVyJ3MgVHlwZSB0byBlbmNvZGUgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICB2YXIgZW5jb2RlZCA9IHBhcmFtLnR5cGUuZW5jb2RlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHBhcmFtOiBwYXJhbSwgdmFsdWU6IHZhbHVlLCBpc1ZhbGlkOiBpc1ZhbGlkLCBpc0RlZmF1bHRWYWx1ZTogaXNEZWZhdWx0VmFsdWUsIHNxdWFzaDogc3F1YXNoLCBlbmNvZGVkOiBlbmNvZGVkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQnVpbGQgdXAgdGhlIHBhdGgtcG9ydGlvbiBmcm9tIHRoZSBsaXN0IG9mIHN0YXRpYyBzZWdtZW50cyBhbmQgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICB2YXIgcGF0aFN0cmluZyA9IHBhdGhTZWdtZW50c0FuZFBhcmFtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgeCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgaXMgYSBzdGF0aWMgc2VnbWVudCAoYSByYXcgc3RyaW5nKTsganVzdCBhcHBlbmQgaXRcclxuICAgICAgICAgICAgICAgIGlmIChpc1N0cmluZyh4KSkgcmV0dXJuIGFjYyArIHg7XHJcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGl0J3MgYSBQYXJhbURldGFpbHMuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3F1YXNoID0geC5zcXVhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlZCA9IHguZW5jb2RlZCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbSA9IHgucGFyYW07XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBzcXVhc2ggaXMgPT09IHRydWUsIHRyeSB0byByZW1vdmUgYSBzbGFzaCBmcm9tIHRoZSBwYXRoXHJcbiAgICAgICAgICAgICAgICBpZiAoc3F1YXNoID09PSB0cnVlKSByZXR1cm4gYWNjLm1hdGNoKC9cXC8kLykgPyBhY2Muc2xpY2UoMCwgLTEpIDogYWNjO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgc3F1YXNoIGlzIGEgc3RyaW5nLCB1c2UgdGhlIHN0cmluZyBmb3IgdGhlIHBhcmFtIHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoc3F1YXNoKSkgcmV0dXJuIGFjYyArIHNxdWFzaDtcclxuICAgICAgICAgICAgICAgIGlmIChzcXVhc2ggIT09IGZhbHNlKSByZXR1cm4gYWNjOyAvLyA/XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5jb2RlZCA9PSBudWxsKSByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBwYXJhbWV0ZXIgdmFsdWUgaXMgYW4gYXJyYXksIGVuY29kZSB0aGUgdmFsdWUgdXNpbmcgZW5jb2RlRGFzaGVzXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShlbmNvZGVkKSkgcmV0dXJuIGFjYyArIG1hcChlbmNvZGVkLCBVcmxNYXRjaGVyLmVuY29kZURhc2hlcykuam9pbihcIi1cIik7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHR5cGUgaXMgXCJyYXdcIiwgdGhlbiBkbyBub3QgZW5jb2RlVVJJQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0ucmF3KSByZXR1cm4gYWNjICsgZW5jb2RlZDtcclxuICAgICAgICAgICAgICAgIC8vIEVuY29kZSB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBlbmNvZGVVUklDb21wb25lbnQoZW5jb2RlZCk7XHJcbiAgICAgICAgICAgIH0sIFwiXCIpO1xyXG4gICAgICAgICAgICAvLyBCdWlsZCB0aGUgcXVlcnkgc3RyaW5nIGJ5IGFwcGx5aW5nIHBhcmFtZXRlciB2YWx1ZXMgKGFycmF5IG9yIHJlZ3VsYXIpXHJcbiAgICAgICAgICAgIC8vIHRoZW4gbWFwcGluZyB0byBrZXk9dmFsdWUsIHRoZW4gZmxhdHRlbmluZyBhbmQgam9pbmluZyB1c2luZyBcIiZcIlxyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1EZXRhaWxzLnBhcmFtLFxyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFzaCA9IHBhcmFtRGV0YWlscy5zcXVhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlZCA9IHBhcmFtRGV0YWlscy5lbmNvZGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzRGVmYXVsdFZhbHVlID0gcGFyYW1EZXRhaWxzLmlzRGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZWQgPT0gbnVsbCB8fCBpc0RlZmF1bHRWYWx1ZSAmJiBzcXVhc2ggIT09IGZhbHNlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkoZW5jb2RlZCkpIGVuY29kZWQgPSBbZW5jb2RlZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5jb2RlZC5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmICghcGFyYW0ucmF3KSBlbmNvZGVkID0gbWFwKGVuY29kZWQsIGVuY29kZVVSSUNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlZC5tYXAoZnVuY3Rpb24gKHZhbCQkMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbS5pZCArIFwiPVwiICsgdmFsJCQxO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLmZpbHRlcihpZGVudGl0eSkucmVkdWNlKHVubmVzdFIsIFtdKS5qb2luKFwiJlwiKTtcclxuICAgICAgICAgICAgLy8gQ29uY2F0IHRoZSBwYXRoc3RyaW5nIHdpdGggdGhlIHF1ZXJ5U3RyaW5nIChpZiBleGlzdHMpIGFuZCB0aGUgaGFzaFN0cmluZyAoaWYgZXhpc3RzKVxyXG4gICAgICAgICAgICByZXR1cm4gcGF0aFN0cmluZyArIChxdWVyeVN0cmluZyA/IFwiP1wiICsgcXVlcnlTdHJpbmcgOiBcIlwiKSArICh2YWx1ZXMkJDFbXCIjXCJdID8gXCIjXCIgKyB2YWx1ZXMkJDFbXCIjXCJdIDogXCJcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFVybE1hdGNoZXIuZW5jb2RlRGFzaGVzID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvLS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiJTVDJVwiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaGlkZGVuIEdpdmVuIGEgbWF0Y2hlciwgcmV0dXJuIGFuIGFycmF5IHdpdGggdGhlIG1hdGNoZXIncyBwYXRoIHNlZ21lbnRzIGFuZCBwYXRoIHBhcmFtcywgaW4gb3JkZXIgKi9cclxuICAgICAgICBVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0aWNTZWdtZW50cyA9IG1hdGNoZXIuX3NlZ21lbnRzO1xyXG4gICAgICAgICAgICB2YXIgcGF0aFBhcmFtcyA9IG1hdGNoZXIuX3BhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwLmxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuUEFUSDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhcnJheVR1cGxlcyhzdGF0aWNTZWdtZW50cywgcGF0aFBhcmFtcy5jb25jYXQodW5kZWZpbmVkKSkucmVkdWNlKHVubmVzdFIsIFtdKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB4ICE9PSBcIlwiICYmIGlzRGVmaW5lZCh4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiBHaXZlbiBhIG1hdGNoZXIsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBtYXRjaGVyJ3MgcXVlcnkgcGFyYW1zICovXHJcbiAgICAgICAgVXJsTWF0Y2hlci5xdWVyeVBhcmFtcyA9IGZ1bmN0aW9uIChtYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLl9wYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcC5sb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb21wYXJlIHR3byBVcmxNYXRjaGVyc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBjb21wYXJpc29uIGZ1bmN0aW9uIGNvbnZlcnRzIGEgVXJsTWF0Y2hlciBpbnRvIHN0YXRpYyBhbmQgZHluYW1pYyBwYXRoIHNlZ21lbnRzLlxyXG4gICAgICAgICAqIEVhY2ggc3RhdGljIHBhdGggc2VnbWVudCBpcyBhIHN0YXRpYyBzdHJpbmcgYmV0d2VlbiBhIHBhdGggc2VwYXJhdG9yIChzbGFzaCBjaGFyYWN0ZXIpLlxyXG4gICAgICAgICAqIEVhY2ggZHluYW1pYyBzZWdtZW50IGlzIGEgcGF0aCBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgY29tcGFyaXNvbiBmdW5jdGlvbiBzb3J0cyBzdGF0aWMgc2VnbWVudHMgYmVmb3JlIGR5bmFtaWMgb25lcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBVcmxNYXRjaGVyLmNvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVHVybiBhIFVybE1hdGNoZXIgYW5kIGFsbCBpdHMgcGFyZW50IG1hdGNoZXJzIGludG8gYW4gYXJyYXlcclxuICAgICAgICAgICAgICogb2Ygc2xhc2ggbGl0ZXJhbHMgJy8nLCBzdHJpbmcgbGl0ZXJhbHMsIGFuZCBQYXJhbSBvYmplY3RzXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIFRoaXMgZXhhbXBsZSBtYXRjaGVyIG1hdGNoZXMgc3RyaW5ncyBsaWtlIFwiL2Zvby86cGFyYW0vdGFpbFwiOlxyXG4gICAgICAgICAgICAgKiB2YXIgbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb29cIikuYXBwZW5kKCR1bWYuY29tcGlsZShcIi86cGFyYW1cIikpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwidGFpbFwiKSk7XHJcbiAgICAgICAgICAgICAqIHZhciByZXN1bHQgPSBzZWdtZW50cyhtYXRjaGVyKTsgLy8gWyAnLycsICdmb28nLCAnLycsIFBhcmFtLCAnLycsICd0YWlsJyBdXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIENhY2hlcyB0aGUgcmVzdWx0IGFzIGBtYXRjaGVyLl9jYWNoZS5zZWdtZW50c2BcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZhciBzZWdtZW50cyA9IGZ1bmN0aW9uIHNlZ21lbnRzKG1hdGNoZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLl9jYWNoZS5zZWdtZW50cyA9IG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzIHx8IG1hdGNoZXIuX2NhY2hlLnBhdGgubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKS5yZWR1Y2UodW5uZXN0UiwgW10pLnJlZHVjZShqb2luTmVpZ2hib3JzUiwgW10pLm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1N0cmluZyh4KSA/IHNwbGl0T25TbGFzaCh4KSA6IHg7XHJcbiAgICAgICAgICAgICAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2V0cyB0aGUgc29ydCB3ZWlnaHQgZm9yIGVhY2ggc2VnbWVudCBvZiBhIFVybE1hdGNoZXJcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQ2FjaGVzIHRoZSByZXN1bHQgYXMgYG1hdGNoZXIuX2NhY2hlLndlaWdodHNgXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IGZ1bmN0aW9uIHdlaWdodHMobWF0Y2hlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXIuX2NhY2hlLndlaWdodHMgPSBtYXRjaGVyLl9jYWNoZS53ZWlnaHRzIHx8IHNlZ21lbnRzKG1hdGNoZXIpLm1hcChmdW5jdGlvbiAoc2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNvcnQgc2xhc2hlcyBmaXJzdCwgdGhlbiBzdGF0aWMgc3RyaW5ncywgdGhlIFBhcmFtc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50ID09PSAnLycpIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N0cmluZyhzZWdtZW50KSkgcmV0dXJuIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBQYXJhbSkgcmV0dXJuIDM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFBhZHMgc2hvcnRlciBhcnJheSBpbi1wbGFjZSAobXV0YXRlcylcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZhciBwYWRBcnJheXMgPSBmdW5jdGlvbiBwYWRBcnJheXMobCwgciwgcGFkVmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gTWF0aC5tYXgobC5sZW5ndGgsIHIubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChsLmxlbmd0aCA8IGxlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGwucHVzaChwYWRWYWwpO1xyXG4gICAgICAgICAgICAgICAgfXdoaWxlIChyLmxlbmd0aCA8IGxlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHIucHVzaChwYWRWYWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0c0EgPSB3ZWlnaHRzKGEpLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0c0IgPSB3ZWlnaHRzKGIpO1xyXG4gICAgICAgICAgICBwYWRBcnJheXMod2VpZ2h0c0EsIHdlaWdodHNCLCAwKTtcclxuICAgICAgICAgICAgdmFyIGNtcCxcclxuICAgICAgICAgICAgICAgIGksXHJcbiAgICAgICAgICAgICAgICBwYWlycyQkMSA9IGFycmF5VHVwbGVzKHdlaWdodHNBLCB3ZWlnaHRzQik7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYWlycyQkMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY21wID0gcGFpcnMkJDFbaV1bMF0gLSBwYWlycyQkMVtpXVsxXTtcclxuICAgICAgICAgICAgICAgIGlmIChjbXAgIT09IDApIHJldHVybiBjbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFVybE1hdGNoZXIubmFtZVZhbGlkYXRvciA9IC9eXFx3KyhbLS5dK1xcdyspKig/OlxcW1xcXSk/JC87XHJcbiAgICAgICAgcmV0dXJuIFVybE1hdGNoZXI7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAqIEBtb2R1bGUgdXJsXHJcbiAgICAgKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICAvKipcclxuICAgICAqIEZhY3RvcnkgZm9yIFtbVXJsTWF0Y2hlcl1dIGluc3RhbmNlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZmFjdG9yeSBpcyBhdmFpbGFibGUgdG8gbmcxIHNlcnZpY2VzIGFzXHJcbiAgICAgKiBgJHVybE1hdGNoZXJGYWN0b3J5YCBvciBuZzEgcHJvdmlkZXJzIGFzIGAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcmAuXHJcbiAgICAgKi9cclxuICAgIHZhciBVcmxNYXRjaGVyRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVXJsTWF0Y2hlckZhY3RvcnkoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovdGhpcy5wYXJhbVR5cGVzID0gbmV3IFBhcmFtVHlwZXMoKTtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi90aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL3RoaXMuX2lzU3RyaWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHsgc3RyaWN0OiBfdGhpcy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IF90aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZSB9LCBjb25maWcpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtRmFjdG9yeSA9IHtcclxuICAgICAgICAgICAgICAgIC8qKiBDcmVhdGVzIGEgbmV3IFtbUGFyYW1dXSBmcm9tIGEgQ09ORklHIGJsb2NrICovXHJcbiAgICAgICAgICAgICAgICBmcm9tQ29uZmlnOiBmdW5jdGlvbiBmcm9tQ29uZmlnKGlkLCB0eXBlLCBjb25maWcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBjb25maWcsIGV4cG9ydHMuRGVmVHlwZS5DT05GSUcsIF90aGlzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvKiogQ3JlYXRlcyBhIG5ldyBbW1BhcmFtXV0gZnJvbSBhIHVybCBQQVRIICovXHJcbiAgICAgICAgICAgICAgICBmcm9tUGF0aDogZnVuY3Rpb24gZnJvbVBhdGgoaWQsIHR5cGUsIGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIGNvbmZpZywgZXhwb3J0cy5EZWZUeXBlLlBBVEgsIF90aGlzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvKiogQ3JlYXRlcyBhIG5ldyBbW1BhcmFtXV0gZnJvbSBhIHVybCBTRUFSQ0ggKi9cclxuICAgICAgICAgICAgICAgIGZyb21TZWFyY2g6IGZ1bmN0aW9uIGZyb21TZWFyY2goaWQsIHR5cGUsIGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIGNvbmZpZywgZXhwb3J0cy5EZWZUeXBlLlNFQVJDSCwgX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBleHRlbmQodGhpcywgeyBVcmxNYXRjaGVyOiBVcmxNYXRjaGVyLCBQYXJhbTogUGFyYW0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5jYXNlSW5zZW5zaXRpdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNDYXNlSW5zZW5zaXRpdmU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuc3RyaWN0TW9kZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNTdHJpY3RNb2RlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNTdHJpY3RNb2RlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRlZmF1bHRTcXVhc2hQb2xpY3kgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgIT09IHRydWUgJiYgdmFsdWUgIT09IGZhbHNlICYmICFpc1N0cmluZyh2YWx1ZSkpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3F1YXNoIHBvbGljeTogXCIgKyB2YWx1ZSArIFwiLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmdcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5ID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBbW1VybE1hdGNoZXJdXSBmb3IgdGhlIHNwZWNpZmllZCBwYXR0ZXJuLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhdHRlcm4gIFRoZSBVUkwgcGF0dGVybi5cclxuICAgICAgICAgKiBAcGFyYW0gY29uZmlnICBUaGUgY29uZmlnIG9iamVjdCBoYXNoLlxyXG4gICAgICAgICAqIEByZXR1cm5zIFRoZSBVcmxNYXRjaGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHBhdHRlcm4sIGNvbmZpZykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVybE1hdGNoZXIocGF0dGVybiwgdGhpcy5wYXJhbVR5cGVzLCB0aGlzLnBhcmFtRmFjdG9yeSwgdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZykpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IGlzIGEgW1tVcmxNYXRjaGVyXV0sIG9yIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvYmplY3QgIFRoZSBvYmplY3QgdG8gcGVyZm9ybSB0aGUgdHlwZSBjaGVjayBhZ2FpbnN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0IG1hdGNoZXMgdGhlIGBVcmxNYXRjaGVyYCBpbnRlcmZhY2UsIGJ5XHJcbiAgICAgICAgICogICAgICAgICAgaW1wbGVtZW50aW5nIGFsbCB0aGUgc2FtZSBtZXRob2RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5pc01hdGNoZXIgPSBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHR5cGVvZj9cclxuICAgICAgICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3JFYWNoKFVybE1hdGNoZXIucHJvdG90eXBlLCBmdW5jdGlvbiAodmFsLCBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWwpKSByZXN1bHQgPSByZXN1bHQgJiYgaXNEZWZpbmVkKG9iamVjdFtuYW1lXSkgJiYgaXNGdW5jdGlvbihvYmplY3RbbmFtZV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGFuZCByZWdpc3RlcnMgYSBjdXN0b20gW1tQYXJhbVR5cGVdXSBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEEgW1tQYXJhbVR5cGVdXSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBVUkxzIHdpdGggdHlwZWQgcGFyYW1ldGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lICBUaGUgdHlwZSBuYW1lLlxyXG4gICAgICAgICAqIEBwYXJhbSBkZWZpbml0aW9uIFRoZSB0eXBlIGRlZmluaXRpb24uIFNlZSBbW1BhcmFtVHlwZURlZmluaXRpb25dXSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHZhbHVlcyBhY2NlcHRlZC5cclxuICAgICAgICAgKiBAcGFyYW0gZGVmaW5pdGlvbkZuIEEgZnVuY3Rpb24gdGhhdCBpcyBpbmplY3RlZCBiZWZvcmUgdGhlIGFwcCBydW50aW1lIHN0YXJ0cy5cclxuICAgICAgICAgKiAgICAgICAgVGhlIHJlc3VsdCBvZiB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBhIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dLlxyXG4gICAgICAgICAqICAgICAgICBUaGUgcmVzdWx0IGlzIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyBgZGVmaW5pdGlvbmAuXHJcbiAgICAgICAgICogICAgICAgIFNlZSBbW1BhcmFtVHlwZV1dIGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgdmFsdWVzIGFjY2VwdGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgLSBpZiBhIHR5cGUgd2FzIHJlZ2lzdGVyZWQ6IHRoZSBbW1VybE1hdGNoZXJGYWN0b3J5XV1cclxuICAgICAgICAgKiAgIC0gaWYgb25seSB0aGUgYG5hbWVgIHBhcmFtZXRlciB3YXMgc3BlY2lmaWVkOiB0aGUgY3VycmVudGx5IHJlZ2lzdGVyZWQgW1tQYXJhbVR5cGVdXSBvYmplY3QsIG9yIHVuZGVmaW5lZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTm90ZTogUmVnaXN0ZXIgY3VzdG9tIHR5cGVzICpiZWZvcmUgdXNpbmcgdGhlbSogaW4gYSBzdGF0ZSBkZWZpbml0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogU2VlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGZvciBleGFtcGxlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24gKG5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb25Gbikge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMucGFyYW1UeXBlcy50eXBlKG5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb25Gbik7XHJcbiAgICAgICAgICAgIHJldHVybiAhaXNEZWZpbmVkKGRlZmluaXRpb24pID8gdHlwZSA6IHRoaXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbVR5cGVzLmVucXVldWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wYXJhbVR5cGVzLl9mbHVzaFR5cGVRdWV1ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICAgICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1UeXBlcy5kaXNwb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gVXJsTWF0Y2hlckZhY3Rvcnk7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB1cmxcclxuICAgICAqLyAvKiogKi9cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIFtbVXJsUnVsZV1dXHJcbiAgICAgKlxyXG4gICAgICogQ3JlYXRlcyBhIFtbVXJsUnVsZV1dIGZyb20gYTpcclxuICAgICAqXHJcbiAgICAgKiAtIGBzdHJpbmdgXHJcbiAgICAgKiAtIFtbVXJsTWF0Y2hlcl1dXHJcbiAgICAgKiAtIGBSZWdFeHBgXHJcbiAgICAgKiAtIFtbU3RhdGVPYmplY3RdXVxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKi9cclxuICAgIHZhciBVcmxSdWxlRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVXJsUnVsZUZhY3Rvcnkocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGUoc3RyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAod2hhdCwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgbWFrZVJ1bGUgPSBwYXR0ZXJuKFtbaXNTdHJpbmcsIGZ1bmN0aW9uIChfd2hhdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSdWxlKF90aGlzLmNvbXBpbGUoX3doYXQpKTtcclxuICAgICAgICAgICAgfV0sIFtpcyhVcmxNYXRjaGVyKSwgZnVuY3Rpb24gKF93aGF0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZnJvbVVybE1hdGNoZXIoX3doYXQsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XSwgW2lzU3RhdGUsIGZ1bmN0aW9uIChfd2hhdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZyb21TdGF0ZShfd2hhdCwgX3RoaXMucm91dGVyKTtcclxuICAgICAgICAgICAgfV0sIFtpcyhSZWdFeHApLCBmdW5jdGlvbiAoX3doYXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mcm9tUmVnRXhwKF93aGF0LCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgfV0sIFtpc0Z1bmN0aW9uLCBmdW5jdGlvbiAoX3doYXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmFzZVVybFJ1bGUoX3doYXQsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XV0pO1xyXG4gICAgICAgICAgICB2YXIgcnVsZSA9IG1ha2VSdWxlKHdoYXQpO1xyXG4gICAgICAgICAgICBpZiAoIXJ1bGUpIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ3doYXQnIGluIHdoZW4oKVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBiYXNlZCBvbiBhIFVybE1hdGNoZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIGBzdHJpbmdgLCBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGFub3RoZXIgW1tVcmxNYXRjaGVyXV1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtIG1hdGNoZWQgcGFyYW1ldGVyIHZhbHVlcyAoW1tSYXdQYXJhbXNdXSBmcm9tIFtbVXJsTWF0Y2hlci5leGVjXV0pXHJcbiAgICAgICAgICogLSB1cmw6IHRoZSBjdXJyZW50IFVybCAoW1tVcmxQYXJ0c11dKVxyXG4gICAgICAgICAqIC0gcm91dGVyOiB0aGUgcm91dGVyIG9iamVjdCAoW1tVSVJvdXRlcl1dKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdmFyIHVybE1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vLzpmb29JZC86YmFySWRcIik7XHJcbiAgICAgICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIG1hdGNoID0+IFwiL2hvbWUvXCIgKyBtYXRjaC5mb29JZCArIFwiL1wiICsgbWF0Y2guYmFySWQpO1xyXG4gICAgICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxyXG4gICAgICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIEhhbmRsZXIgYXMgVXJsTWF0Y2hlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYGhhbmRsZXJgIGlzIGEgVXJsTWF0Y2hlciwgdGhlIGhhbmRsZXIgbWF0Y2hlciBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgbmV3IHVybC5cclxuICAgICAgICAgKiBUaGUgYGhhbmRsZXJgIFVybE1hdGNoZXIgaXMgZm9ybWF0dGVkIHVzaW5nIHRoZSBtYXRjaGVkIHBhcmFtIGZyb20gdGhlIGZpcnN0IG1hdGNoZXIuXHJcbiAgICAgICAgICogVGhlIHVybCBpcyByZXBsYWNlZCB3aXRoIHRoZSByZXN1bHQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiB2YXIgdXJsTWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb28vOmZvb0lkLzpiYXJJZFwiKTtcclxuICAgICAgICAgKiB2YXIgaGFuZGxlciA9ICR1bWYuY29tcGlsZShcIi9ob21lLzpmb29JZC86YmFySWRcIik7XHJcbiAgICAgICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21VcmxNYXRjaGVyKHVybE1hdGNoZXIsIGhhbmRsZXIpO1xyXG4gICAgICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxyXG4gICAgICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKi9cclxuICAgICAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVVybE1hdGNoZXIgPSBmdW5jdGlvbiAodXJsTWF0Y2hlciwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICB2YXIgX2hhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoaGFuZGxlcikpIGhhbmRsZXIgPSB0aGlzLnJvdXRlci51cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpZiAoaXMoVXJsTWF0Y2hlcikoaGFuZGxlcikpIF9oYW5kbGVyID0gZnVuY3Rpb24gX2hhbmRsZXIobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmZvcm1hdChtYXRjaCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1hdGNoKHVybCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdXJsTWF0Y2hlci5leGVjKHVybC5wYXRoLCB1cmwuc2VhcmNoLCB1cmwuaGFzaCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsTWF0Y2hlci52YWxpZGF0ZXMobWF0Y2gpICYmIG1hdGNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFByaW9yaXRpemUgVVJMcywgbG93ZXN0IHRvIGhpZ2hlc3Q6XHJcbiAgICAgICAgICAgIC8vIC0gU29tZSBvcHRpb25hbCBVUkwgcGFyYW1ldGVycywgYnV0IG5vbmUgbWF0Y2hlZFxyXG4gICAgICAgICAgICAvLyAtIE5vIG9wdGlvbmFsIHBhcmFtZXRlcnMgaW4gVVJMXHJcbiAgICAgICAgICAgIC8vIC0gU29tZSBvcHRpb25hbCBwYXJhbWV0ZXJzLCBzb21lIG1hdGNoZWRcclxuICAgICAgICAgICAgLy8gLSBTb21lIG9wdGlvbmFsIHBhcmFtZXRlcnMsIGFsbCBtYXRjaGVkXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1hdGNoUHJpb3JpdHkocGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uYWwgPSB1cmxNYXRjaGVyLnBhcmFtZXRlcnMoKS5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmlzT3B0aW9uYWw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9uYWwubGVuZ3RoKSByZXR1cm4gMC4wMDAwMDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlZCA9IG9wdGlvbmFsLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zW3BhcmFtLmlkXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQubGVuZ3RoIC8gb3B0aW9uYWwubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWxzID0geyB1cmxNYXRjaGVyOiB1cmxNYXRjaGVyLCBtYXRjaFByaW9yaXR5OiBtYXRjaFByaW9yaXR5LCB0eXBlOiBcIlVSTE1BVENIRVJcIiB9O1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKG5ldyBCYXNlVXJsUnVsZShtYXRjaCwgX2hhbmRsZXIpLCBkZXRhaWxzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGEgc3RhdGUgYnkgaXRzIHVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21TdGF0ZSgkc3RhdGUuZ2V0KCdmb28nKSwgcm91dGVyKTtcclxuICAgICAgICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vLzEyMy80NTYnKTsgLy8gcmVzdWx0cyBpbiB7IGZvb0lkOiAnMTIzJywgYmFySWQ6ICc0NTYnIH1cclxuICAgICAgICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTtcclxuICAgICAgICAgKiAvLyBTdGFydHMgYSB0cmFuc2l0aW9uIHRvICdmb28nIHdpdGggcGFyYW1zOiB7IGZvb0lkOiAnMTIzJywgYmFySWQ6ICc0NTYnIH1cclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKi9cclxuICAgICAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVN0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCByb3V0ZXIpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEhhbmRsZXMgbWF0Y2ggYnkgdHJhbnNpdGlvbmluZyB0byBtYXRjaGVkIHN0YXRlXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEZpcnN0IGNoZWNrcyBpZiB0aGUgcm91dGVyIHNob3VsZCBzdGFydCBhIG5ldyB0cmFuc2l0aW9uLlxyXG4gICAgICAgICAgICAgKiBBIG5ldyB0cmFuc2l0aW9uIGlzIG5vdCByZXF1aXJlZCBpZiB0aGUgY3VycmVudCBzdGF0ZSdzIFVSTFxyXG4gICAgICAgICAgICAgKiBhbmQgdGhlIG5ldyBVUkwgYXJlIGFscmVhZHkgaWRlbnRpY2FsXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkc3RhdGUgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdsb2JhbHMgPSByb3V0ZXIuZ2xvYmFscztcclxuICAgICAgICAgICAgICAgIGlmICgkc3RhdGUuaHJlZihzdGF0ZSwgbWF0Y2gpICE9PSAkc3RhdGUuaHJlZihnbG9iYWxzLmN1cnJlbnQsIGdsb2JhbHMucGFyYW1zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oc3RhdGUsIG1hdGNoLCB7IGluaGVyaXQ6IHRydWUsIHNvdXJjZTogXCJ1cmxcIiB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHMgPSB7IHN0YXRlOiBzdGF0ZSwgdHlwZTogXCJTVEFURVwiIH07XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmQodGhpcy5mcm9tVXJsTWF0Y2hlcihzdGF0ZS51cmwsIGhhbmRsZXIpLCBkZXRhaWxzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgcmVndWxhciBleHByZXNzaW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgYGhhbmRsZXJgIG1heSBiZSBlaXRoZXIgYSBbW1VybFJ1bGVIYW5kbGVyRm5dXSBvciBhIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtIHJlZ2V4cCBtYXRjaCBhcnJheSAoZnJvbSBgcmVnZXhwYClcclxuICAgICAgICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXHJcbiAgICAgICAgICogLSByb3V0ZXI6IHRoZSByb3V0ZXIgb2JqZWN0IChbW1VJUm91dGVyXV0pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVJlZ0V4cCgvXlxcL2Zvb1xcLyhiYXJ8YmF6KSQvLCBtYXRjaCA9PiBcIi9ob21lL1wiICsgbWF0Y2hbMV0pXHJcbiAgICAgICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby9iYXInKTsgLy8gcmVzdWx0cyBpbiBbICcvZm9vL2JhcicsICdiYXInIF1cclxuICAgICAgICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lL2JhcidcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIEhhbmRsZXIgYXMgc3RyaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBzdHJpbmcsIHRoZSB1cmwgaXMgKnJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcqIHdoZW4gdGhlIFJ1bGUgaXMgaW52b2tlZC5cclxuICAgICAgICAgKiBUaGUgc3RyaW5nIGlzIGZpcnN0IGludGVycG9sYXRlZCB1c2luZyBgc3RyaW5nLnJlcGxhY2UoKWAgc3R5bGUgcGF0dGVybi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIFwiL2hvbWUvJDFcIilcclxuICAgICAgICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vL2JhcicpOyAvLyByZXN1bHRzIGluIFsgJy9mb28vYmFyJywgJ2JhcicgXVxyXG4gICAgICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvYmFyJ1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tUmVnRXhwID0gZnVuY3Rpb24gKHJlZ2V4cCwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICBpZiAocmVnZXhwLmdsb2JhbCB8fCByZWdleHAuc3RpY2t5KSB0aHJvdyBuZXcgRXJyb3IoXCJSdWxlIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5XCIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSWYgaGFuZGxlciBpcyBhIHN0cmluZywgdGhlIHVybCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcuXHJcbiAgICAgICAgICAgICAqIElmIHRoZSBzdHJpbmcgaGFzIGFueSBTdHJpbmcucmVwbGFjZSgpIHN0eWxlIHZhcmlhYmxlcyBpbiBpdCAobGlrZSBgJDJgKSxcclxuICAgICAgICAgICAgICogdGhleSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBjYXB0dXJlcyBmcm9tIFtbbWF0Y2hdXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdmFyIHJlZGlyZWN0VXJsVG8gPSBmdW5jdGlvbiByZWRpcmVjdFVybFRvKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnRlcnBvbGF0ZXMgbWF0Y2hlZCB2YWx1ZXMgaW50byAkMSAkMiwgZXRjIHVzaW5nIGEgU3RyaW5nLnJlcGxhY2UoKS1zdHlsZSBwYXR0ZXJuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlci5yZXBsYWNlKC9cXCQoXFwkfFxcZHsxLDJ9KS8sIGZ1bmN0aW9uIChtLCB3aGF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoW3doYXQgPT09ICckJyA/IDAgOiBOdW1iZXIod2hhdCldO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfaGFuZGxlciA9IGlzU3RyaW5nKGhhbmRsZXIpID8gcmVkaXJlY3RVcmxUbyA6IGhhbmRsZXI7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZ1bmN0aW9uIG1hdGNoKHVybCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2V4cC5leGVjKHVybC5wYXRoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHMgPSB7IHJlZ2V4cDogcmVnZXhwLCB0eXBlOiBcIlJFR0VYUFwiIH07XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoLCBfaGFuZGxlciksIGRldGFpbHMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVXJsUnVsZUZhY3RvcnkuaXNVcmxSdWxlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqICYmIFsndHlwZScsICdtYXRjaCcsICdoYW5kbGVyJ10uZXZlcnkoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChvYmpba2V5XSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFVybFJ1bGVGYWN0b3J5O1xyXG4gICAgfSgpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGJhc2UgcnVsZSB3aGljaCBjYWxscyBgbWF0Y2hgXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHZhbHVlIGZyb20gdGhlIGBtYXRjaGAgZnVuY3Rpb24gaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGBoYW5kbGVyYC5cclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICovXHJcbiAgICB2YXIgQmFzZVVybFJ1bGUgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIEJhc2VVcmxSdWxlKG1hdGNoLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gXCJSQVdcIjtcclxuICAgICAgICAgICAgdGhpcy5tYXRjaFByaW9yaXR5ID0gZnVuY3Rpb24gKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMCAtIF90aGlzLiRpZDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlciB8fCBpZGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEJhc2VVcmxSdWxlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKiBAbW9kdWxlIHVybFxyXG4gICAgICovXHJcbiAgICAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBmdW5jdGlvbiBhcHBlbmRCYXNlUGF0aCh1cmwsIGlzSHRtbDUsIGFic29sdXRlLCBiYXNlSHJlZikge1xyXG4gICAgICAgIGlmIChiYXNlSHJlZiA9PT0gJy8nKSByZXR1cm4gdXJsO1xyXG4gICAgICAgIGlmIChpc0h0bWw1KSByZXR1cm4gc3RyaXBGaWxlKGJhc2VIcmVmKSArIHVybDtcclxuICAgICAgICBpZiAoYWJzb2x1dGUpIHJldHVybiBiYXNlSHJlZi5zbGljZSgxKSArIHVybDtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHZhciBwcmlvcml0eVNvcnQgPSBmdW5jdGlvbiBwcmlvcml0eVNvcnQoYSwgYikge1xyXG4gICAgICAgIHJldHVybiAoYi5wcmlvcml0eSB8fCAwKSAtIChhLnByaW9yaXR5IHx8IDApO1xyXG4gICAgfTtcclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICB2YXIgdHlwZVNvcnQgPSBmdW5jdGlvbiB0eXBlU29ydChhLCBiKSB7XHJcbiAgICAgICAgdmFyIHdlaWdodHMgPSB7IFwiU1RBVEVcIjogNCwgXCJVUkxNQVRDSEVSXCI6IDQsIFwiUkVHRVhQXCI6IDMsIFwiUkFXXCI6IDIsIFwiT1RIRVJcIjogMSB9O1xyXG4gICAgICAgIHJldHVybiAod2VpZ2h0c1thLnR5cGVdIHx8IDApIC0gKHdlaWdodHNbYi50eXBlXSB8fCAwKTtcclxuICAgIH07XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgdmFyIHVybE1hdGNoZXJTb3J0ID0gZnVuY3Rpb24gdXJsTWF0Y2hlclNvcnQoYSwgYikge1xyXG4gICAgICAgIHJldHVybiAhYS51cmxNYXRjaGVyIHx8ICFiLnVybE1hdGNoZXIgPyAwIDogVXJsTWF0Y2hlci5jb21wYXJlKGEudXJsTWF0Y2hlciwgYi51cmxNYXRjaGVyKTtcclxuICAgIH07XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgdmFyIGlkU29ydCA9IGZ1bmN0aW9uIGlkU29ydChhLCBiKSB7XHJcbiAgICAgICAgLy8gSWRlbnRpY2FsbHkgc29ydGVkIFNUQVRFIGFuZCBVUkxNQVRDSEVSIGJlc3QgcnVsZSB3aWxsIGJlIGNob3NlbiBieSBgbWF0Y2hQcmlvcml0eWAgYWZ0ZXIgZWFjaCBydWxlIG1hdGNoZXMgdGhlIFVSTFxyXG4gICAgICAgIHZhciB1c2VNYXRjaFByaW9yaXR5ID0geyBTVEFURTogdHJ1ZSwgVVJMTUFUQ0hFUjogdHJ1ZSB9O1xyXG4gICAgICAgIHZhciBlcXVhbCA9IHVzZU1hdGNoUHJpb3JpdHlbYS50eXBlXSAmJiB1c2VNYXRjaFByaW9yaXR5W2IudHlwZV07XHJcbiAgICAgICAgcmV0dXJuIGVxdWFsID8gMCA6IChhLiRpZCB8fCAwKSAtIChiLiRpZCB8fCAwKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERlZmF1bHQgcnVsZSBwcmlvcml0eSBzb3J0aW5nIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFNvcnRzIHJ1bGVzIGJ5OlxyXG4gICAgICpcclxuICAgICAqIC0gRXhwbGljaXQgcHJpb3JpdHkgKHNldCBydWxlIHByaW9yaXR5IHVzaW5nIFtbVXJsUnVsZXNBcGkud2hlbl1dKVxyXG4gICAgICogLSBSdWxlIHR5cGUgKFNUQVRFOiA0LCBVUkxNQVRDSEVSOiA0LCBSRUdFWFA6IDMsIFJBVzogMiwgT1RIRVI6IDEpXHJcbiAgICAgKiAtIGBVcmxNYXRjaGVyYCBzcGVjaWZpY2l0eSAoW1tVcmxNYXRjaGVyLmNvbXBhcmVdXSk6IHdvcmtzIGZvciBTVEFURSBhbmQgVVJMTUFUQ0hFUiB0eXBlcyB0byBwaWNrIHRoZSBtb3N0IHNwZWNpZmljIHJ1bGUuXHJcbiAgICAgKiAtIFJ1bGUgcmVnaXN0cmF0aW9uIG9yZGVyIChmb3IgcnVsZSB0eXBlcyBvdGhlciB0aGFuIFNUQVRFIGFuZCBVUkxNQVRDSEVSKVxyXG4gICAgICogICAtIEVxdWFsbHkgc29ydGVkIFN0YXRlIGFuZCBVcmxNYXRjaGVyIHJ1bGVzIHdpbGwgZWFjaCBtYXRjaCB0aGUgVVJMLlxyXG4gICAgICogICAgIFRoZW4sIHRoZSAqYmVzdCogbWF0Y2ggaXMgY2hvc2VuIGJhc2VkIG9uIGhvdyBtYW55IHBhcmFtZXRlciB2YWx1ZXMgd2VyZSBtYXRjaGVkLlxyXG4gICAgICpcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKi9cclxuICAgIHZhciBkZWZhdWx0UnVsZVNvcnRGbjtcclxuICAgIGRlZmF1bHRSdWxlU29ydEZuID0gZnVuY3Rpb24gZGVmYXVsdFJ1bGVTb3J0Rm4oYSwgYikge1xyXG4gICAgICAgIHZhciBjbXAgPSBwcmlvcml0eVNvcnQoYSwgYik7XHJcbiAgICAgICAgaWYgKGNtcCAhPT0gMCkgcmV0dXJuIGNtcDtcclxuICAgICAgICBjbXAgPSB0eXBlU29ydChhLCBiKTtcclxuICAgICAgICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wO1xyXG4gICAgICAgIGNtcCA9IHVybE1hdGNoZXJTb3J0KGEsIGIpO1xyXG4gICAgICAgIGlmIChjbXAgIT09IDApIHJldHVybiBjbXA7XHJcbiAgICAgICAgcmV0dXJuIGlkU29ydChhLCBiKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgVVJMIGFuZCByZXNwb25kcyB0byBVUkwgY2hhbmdlc1xyXG4gICAgICpcclxuICAgICAqICMjIyBEZXByZWNhdGlvbiB3YXJuaW5nOlxyXG4gICAgICogVGhpcyBjbGFzcyBpcyBub3cgY29uc2lkZXJlZCB0byBiZSBhbiBpbnRlcm5hbCBBUElcclxuICAgICAqIFVzZSB0aGUgW1tVcmxTZXJ2aWNlXV0gaW5zdGVhZC5cclxuICAgICAqIEZvciBjb25maWd1cmluZyBVUkwgcnVsZXMsIHVzZSB0aGUgW1tVcmxSdWxlc0FwaV1dIHdoaWNoIGNhbiBiZSBmb3VuZCBhcyBbW1VybFNlcnZpY2UucnVsZXNdXS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNsYXNzIHVwZGF0ZXMgdGhlIFVSTCB3aGVuIHRoZSBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgICogSXQgYWxzbyByZXNwb25kcyB0byBjaGFuZ2VzIGluIHRoZSBVUkwuXHJcbiAgICAgKi9cclxuICAgIHZhciBVcmxSb3V0ZXIgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZnVuY3Rpb24gVXJsUm91dGVyKHJvdXRlcikge1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL3RoaXMuX3NvcnRGbiA9IGRlZmF1bHRSdWxlU29ydEZuO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL3RoaXMuX3J1bGVzID0gW107XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovdGhpcy5pbnRlcmNlcHREZWZlcnJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL3RoaXMuX2lkID0gMDtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi90aGlzLl9zb3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgICAgICB0aGlzLnVybFJ1bGVGYWN0b3J5ID0gbmV3IFVybFJ1bGVGYWN0b3J5KHJvdXRlcik7XHJcbiAgICAgICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHZhbChVcmxSb3V0ZXIucHJvdG90eXBlKSwgdGhpcywgdmFsKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW4oZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLl9ydWxlcyA9IFtdO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fb3RoZXJ3aXNlRm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiAoY29tcGFyZUZuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3J1bGVzID0gdGhpcy5zdGFibGVTb3J0KHRoaXMuX3J1bGVzLCB0aGlzLl9zb3J0Rm4gPSBjb21wYXJlRm4gfHwgdGhpcy5fc29ydEZuKTtcclxuICAgICAgICAgICAgdGhpcy5fc29ydGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUuZW5zdXJlU29ydGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zb3J0ZWQgfHwgdGhpcy5zb3J0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnN0YWJsZVNvcnQgPSBmdW5jdGlvbiAoYXJyLCBjb21wYXJlRm4pIHtcclxuICAgICAgICAgICAgdmFyIGFyck9mV3JhcHBlciA9IGFyci5tYXAoZnVuY3Rpb24gKGVsZW0sIGlkeCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZWxlbTogZWxlbSwgaWR4OiBpZHggfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFyck9mV3JhcHBlci5zb3J0KGZ1bmN0aW9uICh3cmFwcGVyQSwgd3JhcHBlckIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbXBEaWZmID0gY29tcGFyZUZuKHdyYXBwZXJBLmVsZW0sIHdyYXBwZXJCLmVsZW0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcERpZmYgPT09IDAgPyB3cmFwcGVyQS5pZHggLSB3cmFwcGVyQi5pZHggOiBjbXBEaWZmO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGFyck9mV3JhcHBlci5tYXAoZnVuY3Rpb24gKHdyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLmVsZW07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2l2ZW4gYSBVUkwsIGNoZWNrIGFsbCBydWxlcyBhbmQgcmV0dXJuIHRoZSBiZXN0IFtbTWF0Y2hSZXN1bHRdXVxyXG4gICAgICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAgICAgKiBAcmV0dXJucyB7TWF0Y2hSZXN1bHR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsUm91dGVyLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5lbnN1cmVTb3J0ZWQoKTtcclxuICAgICAgICAgICAgdXJsID0gZXh0ZW5kKHsgcGF0aDogJycsIHNlYXJjaDoge30sIGhhc2g6ICcnIH0sIHVybCk7XHJcbiAgICAgICAgICAgIHZhciBydWxlcyA9IHRoaXMucnVsZXMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX290aGVyd2lzZUZuKSBydWxlcy5wdXNoKHRoaXMuX290aGVyd2lzZUZuKTtcclxuICAgICAgICAgICAgLy8gQ2hlY2tzIGEgc2luZ2xlIHJ1bGUuIFJldHVybnMgeyBydWxlOiBydWxlLCBtYXRjaDogbWF0Y2gsIHdlaWdodDogd2VpZ2h0IH0gaWYgaXQgbWF0Y2hlZCwgb3IgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIHZhciBjaGVja1J1bGUgPSBmdW5jdGlvbiBjaGVja1J1bGUocnVsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gcnVsZS5tYXRjaCh1cmwsIF90aGlzLl9yb3V0ZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoICYmIHsgbWF0Y2g6IG1hdGNoLCBydWxlOiBydWxlLCB3ZWlnaHQ6IHJ1bGUubWF0Y2hQcmlvcml0eShtYXRjaCkgfTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gVGhlIHJ1bGVzIGFyZSBwcmUtc29ydGVkLlxyXG4gICAgICAgICAgICAvLyAtIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHJ1bGUuXHJcbiAgICAgICAgICAgIC8vIC0gRmluZCBhbnkgb3RoZXIgbWF0Y2hpbmcgcnVsZSB0aGF0IHNvcnRlZCAqZXhhY3RseSB0aGUgc2FtZSosIGFjY29yZGluZyB0byBgLnNvcnQoKWAuXHJcbiAgICAgICAgICAgIC8vIC0gQ2hvb3NlIHRoZSBydWxlIHdpdGggdGhlIGhpZ2hlc3QgbWF0Y2ggd2VpZ2h0LlxyXG4gICAgICAgICAgICB2YXIgYmVzdDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gU3RvcCB3aGVuIHRoZXJlIGlzIGEgJ2Jlc3QnIHJ1bGUgYW5kIHRoZSBuZXh0IHJ1bGUgc29ydHMgZGlmZmVyZW50bHkgdGhhbiBpdC5cclxuICAgICAgICAgICAgICAgIGlmIChiZXN0ICYmIHRoaXMuX3NvcnRGbihydWxlc1tpXSwgYmVzdC5ydWxlKSAhPT0gMCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IGNoZWNrUnVsZShydWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBQaWNrIHRoZSBiZXN0IE1hdGNoUmVzdWx0XHJcbiAgICAgICAgICAgICAgICBiZXN0ID0gIWJlc3QgfHwgY3VycmVudCAmJiBjdXJyZW50LndlaWdodCA+IGJlc3Qud2VpZ2h0ID8gY3VycmVudCA6IGJlc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChldnQgJiYgZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMuX3JvdXRlcixcclxuICAgICAgICAgICAgICAgICR1cmwgPSByb3V0ZXIudXJsU2VydmljZSxcclxuICAgICAgICAgICAgICAgICRzdGF0ZSA9IHJvdXRlci5zdGF0ZVNlcnZpY2U7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiAkdXJsLnBhdGgoKSwgc2VhcmNoOiAkdXJsLnNlYXJjaCgpLCBoYXNoOiAkdXJsLmhhc2goKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgYmVzdCA9IHRoaXMubWF0Y2godXJsKTtcclxuICAgICAgICAgICAgdmFyIGFwcGx5UmVzdWx0ID0gcGF0dGVybihbW2lzU3RyaW5nLCBmdW5jdGlvbiAobmV3dXJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHVybC51cmwobmV3dXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgfV0sIFtUYXJnZXRTdGF0ZS5pc0RlZiwgZnVuY3Rpb24gKGRlZikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS5nbyhkZWYuc3RhdGUsIGRlZi5wYXJhbXMsIGRlZi5vcHRpb25zKTtcclxuICAgICAgICAgICAgfV0sIFtpcyhUYXJnZXRTdGF0ZSksIGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkc3RhdGUuZ28odGFyZ2V0LnN0YXRlKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7XHJcbiAgICAgICAgICAgIH1dXSk7XHJcbiAgICAgICAgICAgIGFwcGx5UmVzdWx0KGJlc3QgJiYgYmVzdC5ydWxlLmhhbmRsZXIoYmVzdC5tYXRjaCwgdXJsLCByb3V0ZXIpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdG9wRm4gJiYgdGhpcy5fc3RvcEZuKCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc3RvcEZuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3BGbiA9IHRoaXMuX3N0b3BGbiB8fCB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS5vbkNoYW5nZShmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmMoZXZ0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnRlcm5hbCBBUEkuXHJcbiAgICAgICAgICogQGludGVybmFsYXBpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsUm91dGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocmVhZCkge1xyXG4gICAgICAgICAgICB2YXIgJHVybCA9IHRoaXMuX3JvdXRlci5sb2NhdGlvblNlcnZpY2U7XHJcbiAgICAgICAgICAgIGlmIChyZWFkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gJHVybC5wYXRoKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCR1cmwucGF0aCgpID09PSB0aGlzLmxvY2F0aW9uKSByZXR1cm47XHJcbiAgICAgICAgICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW50ZXJuYWwgQVBJLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXNcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xyXG4gICAgICAgICAgICB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS51cmwodXJsTWF0Y2hlci5mb3JtYXQocGFyYW1zIHx8IHt9KSwgcmVwbGFjZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdWlsZHMgYW5kIHJldHVybnMgYSBVUkwgd2l0aCBpbnRlcnBvbGF0ZWQgcGFyYW1ldGVyc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9hYm91dC86cGVyc29uXCIpO1xyXG4gICAgICAgICAqIHBhcmFtcyA9IHsgcGVyc29uOiBcImJvYlwiIH07XHJcbiAgICAgICAgICogJGJvYiA9ICR1cmxSb3V0ZXIuaHJlZihtYXRjaGVyLCBwYXJhbXMpO1xyXG4gICAgICAgICAqIC8vICRib2IgPT0gXCIvYWJvdXQvYm9iXCI7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlciBUaGUgW1tVcmxNYXRjaGVyXV0gb2JqZWN0IHdoaWNoIGlzIHVzZWQgYXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBVUkwgdG8gZ2VuZXJhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3Qgb2YgcGFyYW1ldGVyIHZhbHVlcyB0byBmaWxsIHRoZSBtYXRjaGVyJ3MgcmVxdWlyZWQgcGFyYW1ldGVycy5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLSAqKmBhYnNvbHV0ZWAqKiAtIHtib29sZWFuPWZhbHNlfSwgIElmIHRydWUgd2lsbCBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSB1cmwsIGUuZy4gXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL2Z1bGx1cmxcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIFJldHVybnMgdGhlIGZ1bGx5IGNvbXBpbGVkIFVSTCwgb3IgYG51bGxgIGlmIGBwYXJhbXNgIGZhaWwgdmFsaWRhdGlvbiBhZ2FpbnN0IGB1cmxNYXRjaGVyYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUuaHJlZiA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9IHVybE1hdGNoZXIuZm9ybWF0KHBhcmFtcyk7XHJcbiAgICAgICAgICAgIGlmICh1cmwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgYWJzb2x1dGU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgIHZhciBjZmcgPSB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS5jb25maWc7XHJcbiAgICAgICAgICAgIHZhciBpc0h0bWw1ID0gY2ZnLmh0bWw1TW9kZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWlzSHRtbDUgJiYgdXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgPSBcIiNcIiArIGNmZy5oYXNoUHJlZml4KCkgKyB1cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXJsID0gYXBwZW5kQmFzZVBhdGgodXJsLCBpc0h0bWw1LCBvcHRpb25zLmFic29sdXRlLCBjZmcuYmFzZUhyZWYoKSk7XHJcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5hYnNvbHV0ZSB8fCAhdXJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzbGFzaCA9ICFpc0h0bWw1ICYmIHVybCA/ICcvJyA6ICcnLFxyXG4gICAgICAgICAgICAgICAgcG9ydCA9IGNmZy5wb3J0KCk7XHJcbiAgICAgICAgICAgIHBvcnQgPSBwb3J0ID09PSA4MCB8fCBwb3J0ID09PSA0NDMgPyAnJyA6ICc6JyArIHBvcnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBbY2ZnLnByb3RvY29sKCksICc6Ly8nLCBjZmcuaG9zdCgpLCBwb3J0LCBzbGFzaCwgdXJsXS5qb2luKCcnKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hbnVhbGx5IGFkZHMgYSBVUkwgUnVsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFVzdWFsbHksIGEgdXJsIHJ1bGUgaXMgYWRkZWQgdXNpbmcgW1tTdGF0ZURlY2xhcmF0aW9uLnVybF1dIG9yIFtbd2hlbl1dLlxyXG4gICAgICAgICAqIFRoaXMgYXBpIGNhbiBiZSB1c2VkIGRpcmVjdGx5IGZvciBtb3JlIGNvbnRyb2wgKHRvIHJlZ2lzdGVyIGEgW1tCYXNlVXJsUnVsZV1dLCBmb3IgZXhhbXBsZSkuXHJcbiAgICAgICAgICogUnVsZXMgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgW1tVcmxSb3V0ZXIudXJsUnVsZUZhY3RvcnldXSwgb3IgY3JlYXRlIG1hbnVhbGx5IGFzIHNpbXBsZSBvYmplY3RzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSBydWxlIHNob3VsZCBoYXZlIGEgYG1hdGNoYCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRydXRoeSBpZiB0aGUgcnVsZSBtYXRjaGVkLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBhbHNvIGhhdmUgYSBgaGFuZGxlcmAgZnVuY3Rpb24gd2hpY2ggaXMgaW52b2tlZCBpZiB0aGUgcnVsZSBpcyB0aGUgYmVzdCBtYXRjaC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlcmVnaXN0ZXJzIHRoZSBydWxlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsUm91dGVyLnByb3RvdHlwZS5ydWxlID0gZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKCFVcmxSdWxlRmFjdG9yeS5pc1VybFJ1bGUocnVsZSkpIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgcnVsZVwiKTtcclxuICAgICAgICAgICAgcnVsZS4kaWQgPSB0aGlzLl9pZCsrO1xyXG4gICAgICAgICAgICBydWxlLnByaW9yaXR5ID0gcnVsZS5wcmlvcml0eSB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9ydWxlcy5wdXNoKHJ1bGUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zb3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVSdWxlKHJ1bGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsUm91dGVyLnByb3RvdHlwZS5yZW1vdmVSdWxlID0gZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLl9ydWxlcywgcnVsZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJ1bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcnVsZXMuc2xpY2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUub3RoZXJ3aXNlID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5fb3RoZXJ3aXNlRm4gPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZSh2YWwodHJ1ZSksIGhhbmRsZXJGbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUuaW5pdGlhbCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVyRm4gPSBnZXRIYW5kbGVyRm4oaGFuZGxlcik7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaEZuID0gZnVuY3Rpb24gbWF0Y2hGbih1cmxQYXJ0cywgcm91dGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbkhpc3Rvcnkuc2l6ZSgpID09PSAwICYmICEhL15cXC8/JC8uZXhlYyh1cmxQYXJ0cy5wYXRoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5ydWxlKHRoaXMudXJsUnVsZUZhY3RvcnkuY3JlYXRlKG1hdGNoRm4sIGhhbmRsZXJGbikpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFJvdXRlci5wcm90b3R5cGUud2hlbiA9IGZ1bmN0aW9uIChtYXRjaGVyLCBoYW5kbGVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBydWxlID0gdGhpcy51cmxSdWxlRmFjdG9yeS5jcmVhdGUobWF0Y2hlciwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSkgcnVsZS5wcmlvcml0eSA9IG9wdGlvbnMucHJpb3JpdHk7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZShydWxlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsUm91dGVyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdCA9IGZ1bmN0aW9uIChkZWZlcikge1xyXG4gICAgICAgICAgICBpZiAoZGVmZXIgPT09IHVuZGVmaW5lZCkgZGVmZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdERlZmVycmVkID0gZGVmZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFVybFJvdXRlcjtcclxuICAgIH0oKTtcclxuICAgIGZ1bmN0aW9uIGdldEhhbmRsZXJGbihoYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGhhbmRsZXIpICYmICFpc1N0cmluZyhoYW5kbGVyKSAmJiAhaXMoVGFyZ2V0U3RhdGUpKGhhbmRsZXIpICYmICFUYXJnZXRTdGF0ZS5pc0RlZihoYW5kbGVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInaGFuZGxlcicgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIFRhcmdldFN0YXRlLCBvciBoYXZlIGEgc3RhdGU6ICduZXd0YXJnZXQnIHByb3BlcnR5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyKSA/IGhhbmRsZXIgOiB2YWwoaGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB2aWV3XHJcbiAgICAgKi8gLyoqIGZvciB0eXBlZG9jICovXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBWaWV3IHNlcnZpY2VcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHNlcnZpY2UgcGFpcnMgZXhpc3RpbmcgYHVpLXZpZXdgIGNvbXBvbmVudHMgKHdoaWNoIGxpdmUgaW4gdGhlIERPTSlcclxuICAgICAqIHdpdGggdmlldyBjb25maWdzIChmcm9tIHRoZSBzdGF0ZSBkZWNsYXJhdGlvbiBvYmplY3RzOiBbW1N0YXRlRGVjbGFyYXRpb24udmlld3NdXSkuXHJcbiAgICAgKlxyXG4gICAgICogLSBBZnRlciBhIHN1Y2Nlc3NmdWwgVHJhbnNpdGlvbiwgdGhlIHZpZXdzIGZyb20gdGhlIG5ld2x5IGVudGVyZWQgc3RhdGVzIGFyZSBhY3RpdmF0ZWQgdmlhIFtbYWN0aXZhdGVWaWV3Q29uZmlnXV0uXHJcbiAgICAgKiAgIFRoZSB2aWV3cyBmcm9tIGV4aXRlZCBzdGF0ZXMgYXJlIGRlYWN0aXZhdGVkIHZpYSBbW2RlYWN0aXZhdGVWaWV3Q29uZmlnXV0uXHJcbiAgICAgKiAgIChTZWU6IHRoZSBbW3JlZ2lzdGVyQWN0aXZhdGVWaWV3c11dIFRyYW5zaXRpb24gSG9vaylcclxuICAgICAqXHJcbiAgICAgKiAtIEFzIGB1aS12aWV3YCBjb21wb25lbnRzIHBvcCBpbiBhbmQgb3V0IG9mIGV4aXN0ZW5jZSwgdGhleSByZWdpc3RlciB0aGVtc2VsdmVzIHVzaW5nIFtbcmVnaXN0ZXJVSVZpZXddXS5cclxuICAgICAqXHJcbiAgICAgKiAtIFdoZW4gdGhlIFtbc3luY11dIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhlIHJlZ2lzdGVyZWQgYHVpLXZpZXdgKHMpIChbW0FjdGl2ZVVJVmlld11dKVxyXG4gICAgICogYXJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgbWF0Y2hpbmcgW1tWaWV3Q29uZmlnXV0ocylcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHZhciBWaWV3U2VydmljZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVmlld1NlcnZpY2UoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuX3VpVmlld3MgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fdmlld0NvbmZpZ3MgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcmllcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLl9wbHVnaW5hcGkgPSB7XHJcbiAgICAgICAgICAgICAgICBfcm9vdFZpZXdDb250ZXh0OiB0aGlzLl9yb290Vmlld0NvbnRleHQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIF92aWV3Q29uZmlnRmFjdG9yeTogdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcnkuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIF9yZWdpc3RlcmVkVUlWaWV3czogZnVuY3Rpb24gX3JlZ2lzdGVyZWRVSVZpZXdzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fdWlWaWV3cztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBfYWN0aXZlVmlld0NvbmZpZ3M6IGZ1bmN0aW9uIF9hY3RpdmVWaWV3Q29uZmlncygpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3ZpZXdDb25maWdzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuX3Jvb3RWaWV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yb290Q29udGV4dCA9IGNvbnRleHQgfHwgdGhpcy5fcm9vdENvbnRleHQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVmlld1NlcnZpY2UucHJvdG90eXBlLl92aWV3Q29uZmlnRmFjdG9yeSA9IGZ1bmN0aW9uICh2aWV3VHlwZSwgZmFjdG9yeSkge1xyXG4gICAgICAgICAgICB0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzW3ZpZXdUeXBlXSA9IGZhY3Rvcnk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuY3JlYXRlVmlld0NvbmZpZyA9IGZ1bmN0aW9uIChwYXRoLCBkZWNsKSB7XHJcbiAgICAgICAgICAgIHZhciBjZmdGYWN0b3J5ID0gdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1tkZWNsLiR0eXBlXTtcclxuICAgICAgICAgICAgaWYgKCFjZmdGYWN0b3J5KSB0aHJvdyBuZXcgRXJyb3IoXCJWaWV3U2VydmljZTogTm8gdmlldyBjb25maWcgZmFjdG9yeSByZWdpc3RlcmVkIGZvciB0eXBlIFwiICsgZGVjbC4kdHlwZSk7XHJcbiAgICAgICAgICAgIHZhciBjZmdzID0gY2ZnRmFjdG9yeShwYXRoLCBkZWNsKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzQXJyYXkoY2ZncykgPyBjZmdzIDogW2NmZ3NdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVhY3RpdmF0ZXMgYSBWaWV3Q29uZmlnLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBkZWFjdGl2YXRlcyBhIGBWaWV3Q29uZmlnYC5cclxuICAgICAgICAgKiBBZnRlciBjYWxsaW5nIFtbc3luY11dLCBpdCB3aWxsIHVuLXBhaXIgZnJvbSBhbnkgYHVpLXZpZXdgIHdpdGggd2hpY2ggaXQgaXMgY3VycmVudGx5IHBhaXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB2aWV3Q29uZmlnIFRoZSBWaWV3Q29uZmlnIHZpZXcgdG8gZGVyZWdpc3Rlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAodmlld0NvbmZpZykge1xyXG4gICAgICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCI8LSBSZW1vdmluZ1wiLCB2aWV3Q29uZmlnKTtcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLl92aWV3Q29uZmlncywgdmlld0NvbmZpZyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuYWN0aXZhdGVWaWV3Q29uZmlnID0gZnVuY3Rpb24gKHZpZXdDb25maWcpIHtcclxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KFwiLT4gUmVnaXN0ZXJpbmdcIiwgdmlld0NvbmZpZyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdDb25maWdzLnB1c2godmlld0NvbmZpZyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHVpVmlld3NCeUZxbiA9IHRoaXMuX3VpVmlld3MubWFwKGZ1bmN0aW9uICh1aXYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbdWl2LmZxbiwgdWl2XTtcclxuICAgICAgICAgICAgfSkucmVkdWNlKGFwcGx5UGFpcnMsIHt9KTtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgd2VpZ2h0ZWQgZGVwdGggdmFsdWUgZm9yIGEgdWlWaWV3LlxyXG4gICAgICAgICAgICAvLyBUaGUgZGVwdGggaXMgdGhlIG5lc3RpbmcgZGVwdGggb2YgdWktdmlld3MgKGJhc2VkIG9uIEZRTjsgdGltZXMgMTAsMDAwKVxyXG4gICAgICAgICAgICAvLyBwbHVzIHRoZSBkZXB0aCBvZiB0aGUgc3RhdGUgdGhhdCBpcyBwb3B1bGF0aW5nIHRoZSB1aVZpZXdcclxuICAgICAgICAgICAgZnVuY3Rpb24gdWlWaWV3RGVwdGgodWlWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGVEZXB0aCA9IGZ1bmN0aW9uIHN0YXRlRGVwdGgoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0ICYmIGNvbnRleHQucGFyZW50ID8gc3RhdGVEZXB0aChjb250ZXh0LnBhcmVudCkgKyAxIDogMTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdWlWaWV3LmZxbi5zcGxpdChcIi5cIikubGVuZ3RoICogMTAwMDAgKyBzdGF0ZURlcHRoKHVpVmlldy5jcmVhdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgVmlld0NvbmZpZydzIGNvbnRleHQncyBkZXB0aCBpbiB0aGUgY29udGV4dCB0cmVlLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2aWV3Q29uZmlnRGVwdGgoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytjb3VudCAmJiBjb250ZXh0LnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0LnBhcmVudDtcclxuICAgICAgICAgICAgICAgIH1yZXR1cm4gY291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gR2l2ZW4gYSBkZXB0aCBmdW5jdGlvbiwgcmV0dXJucyBhIGNvbXBhcmUgZnVuY3Rpb24gd2hpY2ggY2FuIHJldHVybiBlaXRoZXIgYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcgb3JkZXJcclxuICAgICAgICAgICAgdmFyIGRlcHRoQ29tcGFyZSA9IGN1cnJ5KGZ1bmN0aW9uIChkZXB0aEZuLCBwb3NOZWcsIGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zTmVnICogKGRlcHRoRm4obGVmdCkgLSBkZXB0aEZuKHJpZ2h0KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdDb25maWdQYWlyID0gZnVuY3Rpb24gbWF0Y2hpbmdDb25maWdQYWlyKHVpVmlldykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoaW5nQ29uZmlncyA9IF90aGlzLl92aWV3Q29uZmlncy5maWx0ZXIoVmlld1NlcnZpY2UubWF0Y2hlcyh1aVZpZXdzQnlGcW4sIHVpVmlldykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nQ29uZmlncy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBPSy4gIENoaWxkIHN0YXRlcyBjYW4gdGFyZ2V0IGEgdWktdmlldyB0aGF0IHRoZSBwYXJlbnQgc3RhdGUgYWxzbyB0YXJnZXRzICh0aGUgY2hpbGQgd2lucylcclxuICAgICAgICAgICAgICAgICAgICAvLyBTb3J0IGJ5IGRlcHRoIGFuZCByZXR1cm4gdGhlIG1hdGNoIGZyb20gdGhlIGRlZXBlc3QgY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTXVsdGlwbGUgbWF0Y2hpbmcgdmlldyBjb25maWdzIGZvciAke3VpVmlldy5mcW59YCwgbWF0Y2hpbmdDb25maWdzKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0NvbmZpZ3Muc29ydChkZXB0aENvbXBhcmUodmlld0NvbmZpZ0RlcHRoLCAtMSkpOyAvLyBkZXNjZW5kaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3VpVmlldywgbWF0Y2hpbmdDb25maWdzWzBdXTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZ3VyZVVJVmlldyA9IGZ1bmN0aW9uIGNvbmZpZ3VyZVVJVmlldyhfYSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVpVmlldyA9IF9hWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdDb25maWcgPSBfYVsxXTtcclxuICAgICAgICAgICAgICAgIC8vIElmIGEgcGFyZW50IHVpLXZpZXcgaXMgcmVjb25maWd1cmVkLCBpdCBjb3VsZCBkZXN0cm95IGNoaWxkIHVpLXZpZXdzLlxyXG4gICAgICAgICAgICAgICAgLy8gQmVmb3JlIGNvbmZpZ3VyaW5nIGEgY2hpbGQgdWktdmlldywgbWFrZSBzdXJlIGl0J3Mgc3RpbGwgaW4gdGhlIGFjdGl2ZSB1aVZpZXdzIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl91aVZpZXdzLmluZGV4T2YodWlWaWV3KSAhPT0gLTEpIHVpVmlldy5jb25maWdVcGRhdGVkKHZpZXdDb25maWcpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBTb3J0IHZpZXdzIGJ5IEZRTiBhbmQgc3RhdGUgZGVwdGguIFByb2Nlc3MgdWl2aWV3cyBuZWFyZXN0IHRoZSByb290IGZpcnN0LlxyXG4gICAgICAgICAgICB2YXIgcGFpcnMkJDEgPSB0aGlzLl91aVZpZXdzLnNvcnQoZGVwdGhDb21wYXJlKHVpVmlld0RlcHRoLCAxKSkubWFwKG1hdGNoaW5nQ29uZmlnUGFpcik7XHJcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVmlld1N5bmMocGFpcnMkJDEpO1xyXG4gICAgICAgICAgICBwYWlycyQkMS5mb3JFYWNoKGNvbmZpZ3VyZVVJVmlldyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgYHVpLXZpZXdgIGNvbXBvbmVudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2hlbiBhIGB1aS12aWV3YCBjb21wb25lbnQgaXMgY3JlYXRlZCwgaXQgdXNlcyB0aGlzIG1ldGhvZCB0byByZWdpc3RlciBpdHNlbGYuXHJcbiAgICAgICAgICogQWZ0ZXIgcmVnaXN0cmF0aW9uIHRoZSBbW3N5bmNdXSBtZXRob2QgaXMgdXNlZCB0byBlbnN1cmUgYWxsIGB1aS12aWV3YCBhcmUgY29uZmlndXJlZCB3aXRoIHRoZSBwcm9wZXIgW1tWaWV3Q29uZmlnXV0uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiB0aGUgYHVpLXZpZXdgIGNvbXBvbmVudCB1c2VzIHRoZSBgVmlld0NvbmZpZ2AgdG8gZGV0ZXJtaW5lIHdoYXQgdmlldyBzaG91bGQgYmUgbG9hZGVkIGluc2lkZSB0aGUgYHVpLXZpZXdgLFxyXG4gICAgICAgICAqIGFuZCB3aGF0IHRoZSB2aWV3J3Mgc3RhdGUgY29udGV4dCBpcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IFRoZXJlIGlzIG5vIGNvcnJlc3BvbmRpbmcgYGRlcmVnaXN0ZXJVSVZpZXdgLlxyXG4gICAgICAgICAqICAgICAgIEEgYHVpLXZpZXdgIHNob3VsZCBoYW5nIG9uIHRvIHRoZSByZXR1cm4gdmFsdWUgb2YgYHJlZ2lzdGVyVUlWaWV3YCBhbmQgaW52b2tlIGl0IHRvIGRlcmVnaXN0ZXIgaXRzZWxmLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVpVmlldyBUaGUgbWV0YWRhdGEgZm9yIGEgVUlWaWV3XHJcbiAgICAgICAgICogQHJldHVybiBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiB1c2VkIHdoZW4gdGhlIHZpZXcgaXMgZGVzdHJveWVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5yZWdpc3RlclVJVmlldyA9IGZ1bmN0aW9uICh1aVZpZXcpIHtcclxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KFwiLT4gUmVnaXN0ZXJpbmdcIiwgdWlWaWV3KTtcclxuICAgICAgICAgICAgdmFyIHVpVmlld3MgPSB0aGlzLl91aVZpZXdzO1xyXG4gICAgICAgICAgICB2YXIgZnFuQW5kVHlwZU1hdGNoZXMgPSBmdW5jdGlvbiBmcW5BbmRUeXBlTWF0Y2hlcyh1aXYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1aXYuZnFuID09PSB1aVZpZXcuZnFuICYmIHVpdi4kdHlwZSA9PT0gdWlWaWV3LiR0eXBlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodWlWaWV3cy5maWx0ZXIoZnFuQW5kVHlwZU1hdGNoZXMpLmxlbmd0aCkgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KFwiISEhISBkdXBsaWNhdGUgdWlWaWV3IG5hbWVkOlwiLCB1aVZpZXcpO1xyXG4gICAgICAgICAgICB1aVZpZXdzLnB1c2godWlWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5zeW5jKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdWlWaWV3cy5pbmRleE9mKHVpVmlldyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudChcIlRyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlld1wiLCB1aVZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudChcIjwtIERlcmVnaXN0ZXJpbmdcIiwgdWlWaWV3KTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUZyb20odWlWaWV3cykodWlWaWV3KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZpZXdzIGN1cnJlbnRseSBhdmFpbGFibGUgb24gdGhlIHBhZ2UsIGJ5IGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmF2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VpVmlld3MubWFwKHByb3AoXCJmcW5cIikpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiB2aWV3cyBvbiB0aGUgcGFnZSBjb250YWluaW5nIGxvYWRlZCBjb250ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHByb3AoXCIkY29uZmlnXCIpKS5tYXAocHJvcChcIm5hbWVcIikpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTm9ybWFsaXplcyBhIHZpZXcncyBuYW1lIGZyb20gYSBzdGF0ZS52aWV3cyBjb25maWd1cmF0aW9uIGJsb2NrLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBieSBhIGZyYW1ld29yayBpbXBsZW1lbnRhdGlvbiB0byBjYWxjdWxhdGUgdGhlIHZhbHVlcyBmb3JcclxuICAgICAgICAgKiBbW19WaWV3RGVjbGFyYXRpb24uJHVpVmlld05hbWVdXSBhbmQgW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdDb250ZXh0QW5jaG9yXV0uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB0aGUgY29udGV4dCBvYmplY3QgKHN0YXRlIGRlY2xhcmF0aW9uKSB0aGF0IHRoZSB2aWV3IGJlbG9uZ3MgdG9cclxuICAgICAgICAgKiBAcGFyYW0gcmF3Vmlld05hbWUgdGhlIG5hbWUgb2YgdGhlIHZpZXcsIGFzIGRlY2xhcmVkIGluIHRoZSBbW1N0YXRlRGVjbGFyYXRpb24udmlld3NdXVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgdGhlIG5vcm1hbGl6ZWQgdWlWaWV3TmFtZSBhbmQgdWlWaWV3Q29udGV4dEFuY2hvciB0aGF0IHRoZSB2aWV3IHRhcmdldHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBWaWV3U2VydmljZS5ub3JtYWxpemVVSVZpZXdUYXJnZXQgPSBmdW5jdGlvbiAoY29udGV4dCwgcmF3Vmlld05hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHJhd1ZpZXdOYW1lID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZpZXdOYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSBpbmNvbWluZyB2aWV3IG5hbWUgd2l0aCBhIHJlZ2V4cCB0byBhbGxvdzpcclxuICAgICAgICAgICAgLy8gZXg6IFwidmlldy5uYW1lQGZvby5iYXJcIiAsIFwiXi5eLnZpZXcubmFtZVwiICwgXCJ2aWV3Lm5hbWVAXi5eXCIgLCBcIlwiICxcclxuICAgICAgICAgICAgLy8gXCJAXCIgLCBcIiRkZWZhdWx0QF5cIiAsIFwiISRkZWZhdWx0LiRkZWZhdWx0XCIgLCBcIiFmb28uYmFyXCJcclxuICAgICAgICAgICAgdmFyIHZpZXdBdENvbnRleHQgPSByYXdWaWV3TmFtZS5zcGxpdChcIkBcIik7XHJcbiAgICAgICAgICAgIHZhciB1aVZpZXdOYW1lID0gdmlld0F0Q29udGV4dFswXSB8fCBcIiRkZWZhdWx0XCI7IC8vIGRlZmF1bHQgdG8gdW5uYW1lZCB2aWV3XHJcbiAgICAgICAgICAgIHZhciB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogXCJeXCI7IC8vIGRlZmF1bHQgdG8gcGFyZW50IGNvbnRleHRcclxuICAgICAgICAgICAgLy8gSGFuZGxlIHJlbGF0aXZlIHZpZXctbmFtZSBzdWdhciBzeW50YXguXHJcbiAgICAgICAgICAgIC8vIE1hdGNoZXMgcmF3Vmlld05hbWUgXCJeLl4uXi5mb28uYmFyXCIgaW50byBhcnJheTogW1wiXi5eLl4uZm9vLmJhclwiLCBcIl4uXi5eXCIsIFwiZm9vLmJhclwiXSxcclxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlVmlld05hbWVTdWdhciA9IC9eKFxcXig/OlxcLlxcXikqKVxcLiguKiQpLy5leGVjKHVpVmlld05hbWUpO1xyXG4gICAgICAgICAgICBpZiAocmVsYXRpdmVWaWV3TmFtZVN1Z2FyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbG9iYmVycyBleGlzdGluZyBjb250ZXh0QW5jaG9yIChyYXdWaWV3TmFtZSB2YWxpZGF0aW9uIHdpbGwgZml4IHRoaXMpXHJcbiAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yID0gcmVsYXRpdmVWaWV3TmFtZVN1Z2FyWzFdOyAvLyBzZXQgYW5jaG9yIHRvIFwiXi5eLl5cIlxyXG4gICAgICAgICAgICAgICAgdWlWaWV3TmFtZSA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsyXTsgLy8gc2V0IHZpZXctbmFtZSB0byBcImZvby5iYXJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh1aVZpZXdOYW1lLmNoYXJBdCgwKSA9PT0gJyEnKSB7XHJcbiAgICAgICAgICAgICAgICB1aVZpZXdOYW1lID0gdWlWaWV3TmFtZS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yID0gXCJcIjsgLy8gdGFyZ2V0IGFic29sdXRlbHkgZnJvbSByb290XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaGFuZGxlIHBhcmVudCByZWxhdGl2ZSB0YXJnZXRpbmcgXCJeLl4uXlwiXHJcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZU1hdGNoID0gL14oXFxeKD86XFwuXFxeKSopJC87XHJcbiAgICAgICAgICAgIGlmIChyZWxhdGl2ZU1hdGNoLmV4ZWModWlWaWV3Q29udGV4dEFuY2hvcikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbmNob3IgPSB1aVZpZXdDb250ZXh0QW5jaG9yLnNwbGl0KFwiLlwiKS5yZWR1Y2UoZnVuY3Rpb24gKGFuY2hvciwgeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmNob3IucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgfSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yID0gYW5jaG9yLm5hbWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodWlWaWV3Q29udGV4dEFuY2hvciA9PT0gJy4nKSB7XHJcbiAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yID0gY29udGV4dC5uYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7IHVpVmlld05hbWU6IHVpVmlld05hbWUsIHVpVmlld0NvbnRleHRBbmNob3I6IHVpVmlld0NvbnRleHRBbmNob3IgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdpdmVuIGEgdWktdmlldyBhbmQgYSBWaWV3Q29uZmlnLCBkZXRlcm1pbmVzIGlmIHRoZXkgXCJtYXRjaFwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSB1aS12aWV3IGhhcyBhIGZ1bGx5IHF1YWxpZmllZCBuYW1lIChmcW4pIGFuZCBhIGNvbnRleHQgb2JqZWN0LiAgVGhlIGZxbiBpcyBidWlsdCBmcm9tIGl0cyBvdmVyYWxsIGxvY2F0aW9uIGluXHJcbiAgICAgICAgICogdGhlIERPTSwgZGVzY3JpYmluZyBpdHMgbmVzdGluZyByZWxhdGlvbnNoaXAgdG8gYW55IHBhcmVudCB1aS12aWV3IHRhZ3MgaXQgaXMgbmVzdGVkIGluc2lkZSBvZi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEEgVmlld0NvbmZpZyBoYXMgYSB0YXJnZXQgdWktdmlldyBuYW1lIGFuZCBhIGNvbnRleHQgYW5jaG9yLiAgVGhlIHVpLXZpZXcgbmFtZSBjYW4gYmUgYSBzaW1wbGUgbmFtZSwgb3JcclxuICAgICAgICAgKiBjYW4gYmUgYSBzZWdtZW50ZWQgdWktdmlldyBwYXRoLCBkZXNjcmliaW5nIGEgcG9ydGlvbiBvZiBhIHVpLXZpZXcgZnFuLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSW4gb3JkZXIgZm9yIGEgdWktdmlldyB0byBtYXRjaCBWaWV3Q29uZmlnLCB1aS12aWV3J3MgJHR5cGUgbXVzdCBtYXRjaCB0aGUgVmlld0NvbmZpZydzICR0eXBlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiB0aGUgVmlld0NvbmZpZydzIHRhcmdldCB1aS12aWV3IG5hbWUgaXMgYSBzaW1wbGUgbmFtZSAobm8gZG90cyksIHRoZW4gYSB1aS12aWV3IG1hdGNoZXMgaWY6XHJcbiAgICAgICAgICogLSB0aGUgdWktdmlldydzIG5hbWUgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIHRhcmdldCBuYW1lXHJcbiAgICAgICAgICogLSB0aGUgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2VnbWVudGVkIG5hbWUgKHdpdGggZG90cyksIHRoZW4gYSB1aS12aWV3IG1hdGNoZXMgaWY6XHJcbiAgICAgICAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyB3aGVyZTpcclxuICAgICAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIG5hbWUgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCAoaW5kZXggMCkgb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZVxyXG4gICAgICAgICAqICAgIC0gdGhlIHBhcmVudCB1aS12aWV3J3MgY29udGV4dCBtYXRjaGVzIHRoZSBWaWV3Q29uZmlnJ3MgYW5jaG9yXHJcbiAgICAgICAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyAoaW5kZXggMS4ubikgb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaCB0aGUgdGFpbCBvZiB0aGUgdWktdmlldydzIGZxblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRXhhbXBsZTpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIERPTTpcclxuICAgICAgICAgKiA8dWktdmlldz4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIHJvb3QgY29udGV4dCAobmFtZTogXCJcIikgLS0+XHJcbiAgICAgICAgICogICA8dWktdmlldyBuYW1lPVwiZm9vXCI+ICAgICAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgY29udGV4dCBuYW1lZDogXCJBXCIgICAgICAtLT5cclxuICAgICAgICAgKiAgICAgPHVpLXZpZXc+ICAgICAgICAgICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQS5CXCIgICAgLS0+XHJcbiAgICAgICAgICogICAgICAgPHVpLXZpZXcgbmFtZT1cImJhclwiPiAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgY29udGV4dCBuYW1lZDogXCJBLkIuQ1wiICAtLT5cclxuICAgICAgICAgKiAgICAgICA8L3VpLXZpZXc+XHJcbiAgICAgICAgICogICAgIDwvdWktdmlldz5cclxuICAgICAgICAgKiAgIDwvdWktdmlldz5cclxuICAgICAgICAgKiA8L3VpLXZpZXc+XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiB1aVZpZXdzOiBbXHJcbiAgICAgICAgICogIHsgZnFuOiBcIiRkZWZhdWx0XCIsICAgICAgICAgICAgICAgICAgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiXCIgfSB9LFxyXG4gICAgICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb29cIiwgICAgICAgICAgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkFcIiB9IH0sXHJcbiAgICAgICAgICogIHsgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdFwiLCAgICAgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiQS5CXCIgfSB9XHJcbiAgICAgICAgICogIHsgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiwgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiQS5CLkNcIiB9IH1cclxuICAgICAgICAgKiBdXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGVzZSBmb3VyIHZpZXcgY29uZmlncyBhbGwgbWF0Y2ggdGhlIHVpLXZpZXcgd2l0aCB0aGUgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIjpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC0gVmlld0NvbmZpZzE6IHsgdWlWaWV3TmFtZTogXCJiYXJcIiwgICAgICAgICAgICAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQS5CLkNcIiB9XHJcbiAgICAgICAgICogLSBWaWV3Q29uZmlnMjogeyB1aVZpZXdOYW1lOiBcIiRkZWZhdWx0LmJhclwiLCAgICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBLkJcIiB9XHJcbiAgICAgICAgICogLSBWaWV3Q29uZmlnMzogeyB1aVZpZXdOYW1lOiBcImZvby4kZGVmYXVsdC5iYXJcIiwgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBXCIgfVxyXG4gICAgICAgICAqIC0gVmlld0NvbmZpZzQ6IHsgdWlWaWV3TmFtZTogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIsIHVpVmlld0NvbnRleHRBbmNob3I6IFwiXCIgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVXNpbmcgVmlld0NvbmZpZzMgYXMgYW4gZXhhbXBsZSwgaXQgbWF0Y2hlcyB0aGUgdWktdmlldyB3aXRoIGZxbiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiBiZWNhdXNlOlxyXG4gICAgICAgICAqIC0gVGhlIFZpZXdDb25maWcncyBzZWdtZW50ZWQgdGFyZ2V0IG5hbWUgaXM6IFsgXCJmb29cIiwgXCIkZGVmYXVsdFwiLCBcImJhclwiIF1cclxuICAgICAgICAgKiAtIFRoZXJlIGV4aXN0cyBhIHBhcmVudCB1aS12aWV3ICh3aGljaCBoYXMgZnFuOiBcIiRkZWZhdWx0LmZvb1wiKSB3aGVyZTpcclxuICAgICAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIG5hbWUgXCJmb29cIiBtYXRjaGVzIHRoZSBmaXJzdCBzZWdtZW50IFwiZm9vXCIgb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZVxyXG4gICAgICAgICAqICAgIC0gdGhlIHBhcmVudCB1aS12aWV3J3MgY29udGV4dCBcIkFcIiBtYXRjaGVzIHRoZSBWaWV3Q29uZmlnJ3MgYW5jaG9yIGNvbnRleHQgXCJBXCJcclxuICAgICAgICAgKiAtIEFuZCB0aGUgcmVtYWluaW5nIHNlZ21lbnRzIFsgXCIkZGVmYXVsdFwiLCBcImJhclwiIF0uam9pbihcIi5cIl8gb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaFxyXG4gICAgICAgICAqICAgdGhlIHRhaWwgb2YgdGhlIHVpLXZpZXcncyBmcW4gXCJkZWZhdWx0LmJhclwiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAgICAgKi9cclxuICAgICAgICBWaWV3U2VydmljZS5tYXRjaGVzID0gZnVuY3Rpb24gKHVpVmlld3NCeUZxbiwgdWlWaWV3KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmlld0NvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xyXG4gICAgICAgICAgICAgICAgaWYgKHVpVmlldy4kdHlwZSAhPT0gdmlld0NvbmZpZy52aWV3RGVjbC4kdHlwZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgbmFtZXMgYXBhcnQgZnJvbSBib3RoIHZpZXdDb25maWcgYW5kIHVpVmlldyBpbnRvIHNlZ21lbnRzXHJcbiAgICAgICAgICAgICAgICB2YXIgdmMgPSB2aWV3Q29uZmlnLnZpZXdEZWNsO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZjU2VnbWVudHMgPSB2Yy4kdWlWaWV3TmFtZS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdWl2U2VnbWVudHMgPSB1aVZpZXcuZnFuLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxyXG4gICAgICAgICAgICAgICAgLy8gdmM6IFtcImZvb1wiLCBcImJhclwiXSwgdWl2IGZxbjogW1wiJGRlZmF1bHRcIiwgXCJmb29cIiwgXCJiYXJcIl1cclxuICAgICAgICAgICAgICAgIGlmICghZXF1YWxzKHZjU2VnbWVudHMsIHVpdlNlZ21lbnRzLnNsaWNlKDAgLSB2Y1NlZ21lbnRzLmxlbmd0aCkpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3cgY2hlY2sgaWYgdGhlIGZxbiBlbmRpbmcgYXQgdGhlIGZpcnN0IHNlZ21lbnQgb2YgdGhlIHZpZXdDb25maWcgbWF0Y2hlcyB0aGUgY29udGV4dDpcclxuICAgICAgICAgICAgICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVnT2Zmc2V0ID0gMSAtIHZjU2VnbWVudHMubGVuZ3RoIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHZhciBmcW5Ub0ZpcnN0U2VnbWVudCA9IHVpdlNlZ21lbnRzLnNsaWNlKDAsIG5lZ09mZnNldCkuam9pbihcIi5cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdWlWaWV3Q29udGV4dCA9IHVpVmlld3NCeUZxbltmcW5Ub0ZpcnN0U2VnbWVudF0uY3JlYXRpb25Db250ZXh0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZjLiR1aVZpZXdDb250ZXh0QW5jaG9yID09PSAodWlWaWV3Q29udGV4dCAmJiB1aVZpZXdDb250ZXh0Lm5hbWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFZpZXdTZXJ2aWNlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgY29yZVxyXG4gICAgICovIC8qKiAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBHbG9iYWwgcm91dGVyIHN0YXRlXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyB3aGVyZSB3ZSBob2xkIHRoZSBnbG9iYWwgbXV0YWJsZSBzdGF0ZSBzdWNoIGFzIGN1cnJlbnQgc3RhdGUsIGN1cnJlbnRcclxuICAgICAqIHBhcmFtcywgY3VycmVudCB0cmFuc2l0aW9uLCBldGMuXHJcbiAgICAgKi9cclxuICAgIHZhciBVSVJvdXRlckdsb2JhbHMgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFVJUm91dGVyR2xvYmFscygpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IG5ldyBTdGF0ZVBhcmFtcygpO1xyXG4gICAgICAgICAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQgPSAtMTtcclxuICAgICAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25IaXN0b3J5ID0gbmV3IFF1ZXVlKFtdLCAxKTtcclxuICAgICAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyA9IG5ldyBRdWV1ZShbXSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVJUm91dGVyR2xvYmFscy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uSGlzdG9yeS5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFVJUm91dGVyR2xvYmFscztcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIHVybFxyXG4gICAgICovIC8qKiAqL1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIHZhciBtYWtlU3R1YiA9IGZ1bmN0aW9uIG1ha2VTdHViKGtleXMpIHtcclxuICAgICAgICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2Nba2V5XSA9IG5vdEltcGxlbWVudGVkKGtleSksIGFjYztcclxuICAgICAgICB9LCB7IGRpc3Bvc2U6IG5vb3AkMSB9KTtcclxuICAgIH07XHJcbiAgICAvKiogQGhpZGRlbiAqL3ZhciBsb2NhdGlvblNlcnZpY2VzRm5zID0gW1widXJsXCIsIFwicGF0aFwiLCBcInNlYXJjaFwiLCBcImhhc2hcIiwgXCJvbkNoYW5nZVwiXTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIGxvY2F0aW9uQ29uZmlnRm5zID0gW1wicG9ydFwiLCBcInByb3RvY29sXCIsIFwiaG9zdFwiLCBcImJhc2VIcmVmXCIsIFwiaHRtbDVNb2RlXCIsIFwiaGFzaFByZWZpeFwiXTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIHVtZkZucyA9IFtcInR5cGVcIiwgXCJjYXNlSW5zZW5zaXRpdmVcIiwgXCJzdHJpY3RNb2RlXCIsIFwiZGVmYXVsdFNxdWFzaFBvbGljeVwiXTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIHJ1bGVzRm5zID0gW1wic29ydFwiLCBcIndoZW5cIiwgXCJpbml0aWFsXCIsIFwib3RoZXJ3aXNlXCIsIFwicnVsZXNcIiwgXCJydWxlXCIsIFwicmVtb3ZlUnVsZVwiXTtcclxuICAgIC8qKiBAaGlkZGVuICovdmFyIHN5bmNGbnMgPSBbXCJkZWZlckludGVyY2VwdFwiLCBcImxpc3RlblwiLCBcInN5bmNcIiwgXCJtYXRjaFwiXTtcclxuICAgIC8qKlxyXG4gICAgICogQVBJIGZvciBVUkwgbWFuYWdlbWVudFxyXG4gICAgICovXHJcbiAgICB2YXIgVXJsU2VydmljZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBmdW5jdGlvbiBVcmxTZXJ2aWNlKHJvdXRlciwgbGF0ZUJpbmQpIHtcclxuICAgICAgICAgICAgaWYgKGxhdGVCaW5kID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIGxhdGVCaW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcclxuICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBwcm94eSBmdW5jdGlvbiBjYWxscyBmcm9tIFVybFNlcnZpY2UgdG8gdGhlIExvY2F0aW9uU2VydmljZS9Mb2NhdGlvbkNvbmZpZ1xyXG4gICAgICAgICAgICB2YXIgbG9jYXRpb25TZXJ2aWNlcyA9IGZ1bmN0aW9uIGxvY2F0aW9uU2VydmljZXMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLmxvY2F0aW9uU2VydmljZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMobG9jYXRpb25TZXJ2aWNlcywgdGhpcywgbG9jYXRpb25TZXJ2aWNlcywgbG9jYXRpb25TZXJ2aWNlc0ZucywgbGF0ZUJpbmQpO1xyXG4gICAgICAgICAgICB2YXIgbG9jYXRpb25Db25maWcgPSBmdW5jdGlvbiBsb2NhdGlvbkNvbmZpZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIubG9jYXRpb25Db25maWc7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKGxvY2F0aW9uQ29uZmlnLCB0aGlzLmNvbmZpZywgbG9jYXRpb25Db25maWcsIGxvY2F0aW9uQ29uZmlnRm5zLCBsYXRlQmluZCk7XHJcbiAgICAgICAgICAgIHZhciB1bWYgPSBmdW5jdGlvbiB1bWYoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnVybE1hdGNoZXJGYWN0b3J5O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh1bWYsIHRoaXMuY29uZmlnLCB1bWYsIHVtZkZucyk7XHJcbiAgICAgICAgICAgIHZhciB1cmxSb3V0ZXIgPSBmdW5jdGlvbiB1cmxSb3V0ZXIoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnVybFJvdXRlcjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModXJsUm91dGVyLCB0aGlzLnJ1bGVzLCB1cmxSb3V0ZXIsIHJ1bGVzRm5zKTtcclxuICAgICAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModXJsUm91dGVyLCB0aGlzLCB1cmxSb3V0ZXIsIHN5bmNGbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiAobmV3dXJsLCByZXBsYWNlLCBzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsU2VydmljZS5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFNlcnZpY2UucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFNlcnZpY2UucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudCBVUkwgcGFydHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGN1cnJlbnQgVVJMIGNvbXBvbmVudHMgYXMgYSBbW1VybFBhcnRzXV0gb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgdXJsIHBhcnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsU2VydmljZS5wcm90b3R5cGUucGFydHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHBhdGg6IHRoaXMucGF0aCgpLCBzZWFyY2g6IHRoaXMuc2VhcmNoKCksIGhhc2g6IHRoaXMuaGFzaCgpIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsU2VydmljZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXHJcbiAgICAgICAgVXJsU2VydmljZS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFNlcnZpY2UucHJvdG90eXBlLmRlZmVySW50ZXJjZXB0ID0gZnVuY3Rpb24gKGRlZmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFVybFNlcnZpY2UucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHVybFBhcnRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVXJsU2VydmljZS5sb2NhdGlvblNlcnZpY2VTdHViID0gbWFrZVN0dWIobG9jYXRpb25TZXJ2aWNlc0Zucyk7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBVcmxTZXJ2aWNlLmxvY2F0aW9uQ29uZmlnU3R1YiA9IG1ha2VTdHViKGxvY2F0aW9uQ29uZmlnRm5zKTtcclxuICAgICAgICByZXR1cm4gVXJsU2VydmljZTtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb3JlYXBpXHJcbiAgICAgKiBAbW9kdWxlIGNvcmVcclxuICAgICAqLyAvKiogKi9cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICB2YXIgX3JvdXRlckluc3RhbmNlID0gMDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cclxuICAgICAqXHJcbiAgICAgKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxyXG4gICAgICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXHJcbiAgICAgKlxyXG4gICAgICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cclxuICAgICAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxyXG4gICAgICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXHJcbiAgICAgKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxyXG4gICAgICovXHJcbiAgICB2YXIgVUlSb3V0ZXIgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgYFVJUm91dGVyYCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBsb2NhdGlvblNlcnZpY2UgYSBbW0xvY2F0aW9uU2VydmljZXNdXSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSBsb2NhdGlvbkNvbmZpZyBhIFtbTG9jYXRpb25Db25maWddXSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFVJUm91dGVyKGxvY2F0aW9uU2VydmljZSwgbG9jYXRpb25Db25maWcpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uU2VydmljZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvblNlcnZpY2UgPSBVcmxTZXJ2aWNlLmxvY2F0aW9uU2VydmljZVN0dWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uQ29uZmlnID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uQ29uZmlnID0gVXJsU2VydmljZS5sb2NhdGlvbkNvbmZpZ1N0dWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2NhdGlvblNlcnZpY2UgPSBsb2NhdGlvblNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb25Db25maWcgPSBsb2NhdGlvbkNvbmZpZztcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi90aGlzLiRpZCA9IF9yb3V0ZXJJbnN0YW5jZSsrO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL3RoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcclxuICAgICAgICAgICAgLyoqIFByb3ZpZGVzIHRyYWNlIGluZm9ybWF0aW9uIHRvIHRoZSBjb25zb2xlICovXHJcbiAgICAgICAgICAgIHRoaXMudHJhY2UgPSB0cmFjZTtcclxuICAgICAgICAgICAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cclxuICAgICAgICAgICAgdGhpcy52aWV3U2VydmljZSA9IG5ldyBWaWV3U2VydmljZSgpO1xyXG4gICAgICAgICAgICAvKiogUHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byBUcmFuc2l0aW9ucyAqL1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TZXJ2aWNlID0gbmV3IFRyYW5zaXRpb25TZXJ2aWNlKHRoaXMpO1xyXG4gICAgICAgICAgICAvKiogR2xvYmFsIHJvdXRlciBzdGF0ZSAqL1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbHMgPSBuZXcgVUlSb3V0ZXJHbG9iYWxzKCk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cclxuICAgICAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMudXJsTWF0Y2hlckZhY3RvcnkgPSBuZXcgVXJsTWF0Y2hlckZhY3RvcnkoKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERlcHJlY2F0ZWQgZm9yIHB1YmxpYyB1c2UuIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy51cmxSb3V0ZXIgPSBuZXcgVXJsUm91dGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAvKiogUHJvdmlkZXMgYSByZWdpc3RyeSBmb3Igc3RhdGVzLCBhbmQgcmVsYXRlZCByZWdpc3RyYXRpb24gc2VydmljZXMgKi9cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlZ2lzdHJ5ID0gbmV3IFN0YXRlUmVnaXN0cnkodGhpcyk7XHJcbiAgICAgICAgICAgIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHN0YXRlcyAqL1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlU2VydmljZSA9IG5ldyBTdGF0ZVNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgICAgIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHRoZSBVUkwgKi9cclxuICAgICAgICAgICAgdGhpcy51cmxTZXJ2aWNlID0gbmV3IFVybFNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgICAgIHRoaXMuX3BsdWdpbnMgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy52aWV3U2VydmljZS5fcGx1Z2luYXBpLl9yb290Vmlld0NvbnRleHQodGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFscy4kY3VycmVudCA9IHRoaXMuc3RhdGVSZWdpc3RyeS5yb290KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFscy5jdXJyZW50ID0gdGhpcy5nbG9iYWxzLiRjdXJyZW50LnNlbGY7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLmdsb2JhbHMpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy5zdGF0ZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy5zdGF0ZVJlZ2lzdHJ5KTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMudHJhbnNpdGlvblNlcnZpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy51cmxSb3V0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUobG9jYXRpb25TZXJ2aWNlKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NhYmxlKGxvY2F0aW9uQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIFJlZ2lzdGVycyBhbiBvYmplY3QgdG8gYmUgbm90aWZpZWQgd2hlbiB0aGUgcm91dGVyIGlzIGRpc3Bvc2VkICovXHJcbiAgICAgICAgVUlSb3V0ZXIucHJvdG90eXBlLmRpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZGlzcG9zYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGRpc3Bvc2FibGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlzcG9zZXMgdGhpcyByb3V0ZXIgaW5zdGFuY2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdoZW4gY2FsbGVkLCBjbGVhcnMgcmVzb3VyY2VzIHJldGFpbmVkIGJ5IHRoZSByb3V0ZXIgYnkgY2FsbGluZyBgZGlzcG9zZSh0aGlzKWAgb24gYWxsXHJcbiAgICAgICAgICogcmVnaXN0ZXJlZCBbW2Rpc3Bvc2FibGVdXSBvYmplY3RzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogT3IsIGlmIGEgYGRpc3Bvc2FibGVgIG9iamVjdCBpcyBwcm92aWRlZCwgY2FsbHMgYGRpc3Bvc2UodGhpcylgIG9uIHRoYXQgb2JqZWN0IG9ubHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGlzcG9zYWJsZSAob3B0aW9uYWwpIHRoZSBkaXNwb3NhYmxlIHRvIGRpc3Bvc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBVSVJvdXRlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChkaXNwb3NhYmxlICYmIGlzRnVuY3Rpb24oZGlzcG9zYWJsZS5kaXNwb3NlKSkge1xyXG4gICAgICAgICAgICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgZC5kaXNwb3NlID09PSAnZnVuY3Rpb24nICYmIGQuZGlzcG9zZShfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRnJvbShfdGhpcy5fZGlzcG9zYWJsZXMsIGQpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlZCkge31cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIGEgcGx1Z2luIHRvIFVJLVJvdXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2QgYWRkcyBhIFVJLVJvdXRlciBQbHVnaW4uXHJcbiAgICAgICAgICogQSBwbHVnaW4gY2FuIGVuaGFuY2Ugb3IgY2hhbmdlIFVJLVJvdXRlciBiZWhhdmlvciB1c2luZyBhbnkgcHVibGljIEFQSS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIGltcG9ydCB7IE15Q29vbFBsdWdpbiB9IGZyb20gXCJ1aS1yb3V0ZXItY29vbC1wbHVnaW5cIjtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIHZhciBwbHVnaW4gPSByb3V0ZXIuYWRkUGx1Z2luKE15Q29vbFBsdWdpbik7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMgUGx1Z2luIGF1dGhvcmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSBwbHVnaW4gaXMgc2ltcGx5IGEgY2xhc3MgKG9yIGNvbnN0cnVjdG9yIGZ1bmN0aW9uKSB3aGljaCBhY2NlcHRzIGEgW1tVSVJvdXRlcl1dIGluc3RhbmNlIGFuZCAob3B0aW9uYWxseSkgYW4gb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgcGx1Z2luIGNhbiBpbXBsZW1lbnQgaXRzIGZ1bmN0aW9uYWxpdHkgdXNpbmcgYW55IG9mIHRoZSBwdWJsaWMgQVBJcyBvZiBbW1VJUm91dGVyXV0uXHJcbiAgICAgICAgICogRm9yIGV4YW1wbGUsIGl0IG1heSBjb25maWd1cmUgcm91dGVyIG9wdGlvbnMgb3IgYWRkIGEgVHJhbnNpdGlvbiBIb29rLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlIHBsdWdpbiBjYW4gdGhlbiBiZSBwdWJsaXNoZWQgYXMgYSBzZXBhcmF0ZSBtb2R1bGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiBleHBvcnQgY2xhc3MgTXlBdXRoUGx1Z2luIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4ge1xyXG4gICAgICAgICAqICAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlciwgb3B0aW9uczogYW55KSB7XHJcbiAgICAgICAgICogICAgIHRoaXMubmFtZSA9IFwiTXlBdXRoUGx1Z2luXCI7XHJcbiAgICAgICAgICogICAgIGxldCAkdHJhbnNpdGlvbnMgPSByb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XHJcbiAgICAgICAgICogICAgIGxldCAkc3RhdGUgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogICAgIGxldCBhdXRoQ3JpdGVyaWEgPSB7XHJcbiAgICAgICAgICogICAgICAgdG86IChzdGF0ZSkgPT4gc3RhdGUuZGF0YSAmJiBzdGF0ZS5kYXRhLnJlcXVpcmVzQXV0aFxyXG4gICAgICAgICAqICAgICB9O1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogICAgIGZ1bmN0aW9uIGF1dGhIb29rKHRyYW5zaXRpb246IFRyYW5zaXRpb24pIHtcclxuICAgICAgICAgKiAgICAgICBsZXQgYXV0aFNlcnZpY2UgPSB0cmFuc2l0aW9uLmluamVjdG9yKCkuZ2V0KCdBdXRoU2VydmljZScpO1xyXG4gICAgICAgICAqICAgICAgIGlmICghYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgKiAgICAgICAgIHJldHVybiAkc3RhdGUudGFyZ2V0KCdsb2dpbicpO1xyXG4gICAgICAgICAqICAgICAgIH1cclxuICAgICAgICAgKiAgICAgfVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogICAgICR0cmFuc2l0aW9ucy5vblN0YXJ0KGF1dGhDcml0ZXJpYSwgYXV0aEhvb2spO1xyXG4gICAgICAgICAqICAgfVxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwbHVnaW4gb25lIG9mOlxyXG4gICAgICAgICAqICAgICAgICAtIGEgcGx1Z2luIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgW1tVSVJvdXRlclBsdWdpbl1dXHJcbiAgICAgICAgICogICAgICAgIC0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgYSBbW1VJUm91dGVyUGx1Z2luXV0gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxyXG4gICAgICAgICAqICAgICAgICAtIGEgZmFjdG9yeSBmdW5jdGlvbiB3aGljaCBhY2NlcHRzIGEgW1tVSVJvdXRlcl1dIGluc3RhbmNlIGFuZCByZXR1cm5zIGEgW1tVSVJvdXRlclBsdWdpbl1dIGluc3RhbmNlXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBwbHVnaW4gY2xhc3MvZmFjdG9yeVxyXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSByZWdpc3RlcmVkIHBsdWdpbiBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVJUm91dGVyLnByb3RvdHlwZS5wbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcGx1Z2luSW5zdGFuY2UgPSBuZXcgcGx1Z2luKHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoIXBsdWdpbkluc3RhbmNlLm5hbWUpIHRocm93IG5ldyBFcnJvcihcIlJlcXVpcmVkIHByb3BlcnR5IGBuYW1lYCBtaXNzaW5nIG9uIHBsdWdpbjogXCIgKyBwbHVnaW5JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2gocGx1Z2luSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGx1Z2luc1twbHVnaW5JbnN0YW5jZS5uYW1lXSA9IHBsdWdpbkluc3RhbmNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgVUlSb3V0ZXIucHJvdG90eXBlLmdldFBsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW5OYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwbHVnaW5OYW1lID8gdGhpcy5fcGx1Z2luc1twbHVnaW5OYW1lXSA6IHZhbHVlcyh0aGlzLl9wbHVnaW5zKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBVSVJvdXRlcjtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cclxuICAgIGZ1bmN0aW9uIGFkZENvcmVSZXNvbHZhYmxlcyh0cmFucykge1xyXG4gICAgICAgIHRyYW5zLmFkZFJlc29sdmFibGUoeyB0b2tlbjogVUlSb3V0ZXIsIGRlcHM6IFtdLCByZXNvbHZlRm46IGZ1bmN0aW9uIHJlc29sdmVGbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFucy5yb3V0ZXI7XHJcbiAgICAgICAgICAgIH0sIGRhdGE6IHRyYW5zLnJvdXRlciB9LCBcIlwiKTtcclxuICAgICAgICB0cmFucy5hZGRSZXNvbHZhYmxlKHsgdG9rZW46IFRyYW5zaXRpb24sIGRlcHM6IFtdLCByZXNvbHZlRm46IGZ1bmN0aW9uIHJlc29sdmVGbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFucztcclxuICAgICAgICAgICAgfSwgZGF0YTogdHJhbnMgfSwgXCJcIik7XHJcbiAgICAgICAgdHJhbnMuYWRkUmVzb2x2YWJsZSh7IHRva2VuOiAnJHRyYW5zaXRpb24kJywgZGVwczogW10sIHJlc29sdmVGbjogZnVuY3Rpb24gcmVzb2x2ZUZuKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zO1xyXG4gICAgICAgICAgICB9LCBkYXRhOiB0cmFucyB9LCBcIlwiKTtcclxuICAgICAgICB0cmFucy5hZGRSZXNvbHZhYmxlKHsgdG9rZW46ICckc3RhdGVQYXJhbXMnLCBkZXBzOiBbXSwgcmVzb2x2ZUZuOiBmdW5jdGlvbiByZXNvbHZlRm4oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnMucGFyYW1zKCk7XHJcbiAgICAgICAgICAgIH0sIGRhdGE6IHRyYW5zLnBhcmFtcygpIH0sIFwiXCIpO1xyXG4gICAgICAgIHRyYW5zLmVudGVyaW5nKCkuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgdHJhbnMuYWRkUmVzb2x2YWJsZSh7IHRva2VuOiAnJHN0YXRlJCcsIGRlcHM6IFtdLCByZXNvbHZlRm46IGZ1bmN0aW9uIHJlc29sdmVGbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB9LCBkYXRhOiBzdGF0ZSB9LCBzdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB2YXIgcmVnaXN0ZXJBZGRDb3JlUmVzb2x2YWJsZXMgPSBmdW5jdGlvbiByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgYWRkQ29yZVJlc29sdmFibGVzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgaG9va3MgKi8gLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCByZWRpcmVjdHMgdG8gYSBkaWZmZXJlbnQgc3RhdGUgb3IgcGFyYW1zXHJcbiAgICAgKlxyXG4gICAgICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7IHRvOiAoc3RhdGUpID0+ICEhc3RhdGUucmVkaXJlY3RUbyB9LCByZWRpcmVjdEhvb2spO2BcclxuICAgICAqXHJcbiAgICAgKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXVxyXG4gICAgICovXHJcbiAgICB2YXIgcmVkaXJlY3RUb0hvb2sgPSBmdW5jdGlvbiByZWRpcmVjdFRvSG9vayh0cmFucykge1xyXG4gICAgICAgIHZhciByZWRpcmVjdCA9IHRyYW5zLnRvKCkucmVkaXJlY3RUbztcclxuICAgICAgICBpZiAoIXJlZGlyZWN0KSByZXR1cm47XHJcbiAgICAgICAgdmFyICRzdGF0ZSA9IHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2U7XHJcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0KHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgVGFyZ2V0U3RhdGUpIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChpc1N0cmluZyhyZXN1bHQpKSByZXR1cm4gJHN0YXRlLnRhcmdldChyZXN1bHQsIHRyYW5zLnBhcmFtcygpLCB0cmFucy5vcHRpb25zKCkpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0WydzdGF0ZSddIHx8IHJlc3VsdFsncGFyYW1zJ10pIHJldHVybiAkc3RhdGUudGFyZ2V0KHJlc3VsdFsnc3RhdGUnXSB8fCB0cmFucy50bygpLCByZXN1bHRbJ3BhcmFtcyddIHx8IHRyYW5zLnBhcmFtcygpLCB0cmFucy5vcHRpb25zKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihyZWRpcmVjdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4ocmVkaXJlY3QodHJhbnMpKS50aGVuKGhhbmRsZVJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQocmVkaXJlY3QpO1xyXG4gICAgfTtcclxuICAgIHZhciByZWdpc3RlclJlZGlyZWN0VG9Ib29rID0gZnVuY3Rpb24gcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHsgdG86IGZ1bmN0aW9uIHRvKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISFzdGF0ZS5yZWRpcmVjdFRvO1xyXG4gICAgICAgICAgICB9IH0sIHJlZGlyZWN0VG9Ib29rKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGZhY3Rvcnkgd2hpY2ggY3JlYXRlcyBhbiBvbkVudGVyLCBvbkV4aXQgb3Igb25SZXRhaW4gdHJhbnNpdGlvbiBob29rIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHJldHVybmVkIGZ1bmN0aW9uIGludm9rZXMgdGhlIChmb3IgaW5zdGFuY2UpIHN0YXRlLm9uRW50ZXIgaG9vayB3aGVuIHRoZVxyXG4gICAgICogc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cclxuICAgICAqXHJcbiAgICAgKiBAaGlkZGVuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKGhvb2tOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0cmFuc2l0aW9uLCBzdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgX3N0YXRlID0gc3RhdGUuJCRzdGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgaG9va0ZuID0gX3N0YXRlW2hvb2tOYW1lXTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvb2tGbih0cmFuc2l0aW9uLCBzdGF0ZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIG9uRXhpdFxyXG4gICAgICpcclxuICAgICAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGV4aXRlZCwgdGhlIHN0YXRlJ3MgLm9uRXhpdCBmdW5jdGlvbiBpcyBpbnZva2VkLlxyXG4gICAgICpcclxuICAgICAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uRXhpdCh7IGV4aXRpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkV4aXQgfSwgb25FeGl0SG9vayk7YFxyXG4gICAgICpcclxuICAgICAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRXhpdF1dXHJcbiAgICAgKi9cclxuICAgIHZhciBvbkV4aXRIb29rID0gbWFrZUVudGVyRXhpdFJldGFpbkhvb2soJ29uRXhpdCcpO1xyXG4gICAgdmFyIHJlZ2lzdGVyT25FeGl0SG9vayA9IGZ1bmN0aW9uIHJlZ2lzdGVyT25FeGl0SG9vayh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkV4aXQoeyBleGl0aW5nOiBmdW5jdGlvbiBleGl0aW5nKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISFzdGF0ZS5vbkV4aXQ7XHJcbiAgICAgICAgICAgIH0gfSwgb25FeGl0SG9vayk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSBmb3Igb25SZXRhaW5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHRoZSBzdGF0ZSB3YXMgYWxyZWFkeSBlbnRlcmVkLCBhbmQgaXMgbm90IGJlaW5nIGV4aXRlZCBvciByZS1lbnRlcmVkLCB0aGUgc3RhdGUncyAub25SZXRhaW4gZnVuY3Rpb24gaXMgaW52b2tlZC5cclxuICAgICAqXHJcbiAgICAgKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblJldGFpbih7IHJldGFpbmVkOiAoc3RhdGUpID0+ICEhc3RhdGUub25SZXRhaW4gfSwgb25SZXRhaW5Ib29rKTtgXHJcbiAgICAgKlxyXG4gICAgICogU2VlOiBbW0lIb29rUmVnaXN0cnkub25SZXRhaW5dXVxyXG4gICAgICovXHJcbiAgICB2YXIgb25SZXRhaW5Ib29rID0gbWFrZUVudGVyRXhpdFJldGFpbkhvb2soJ29uUmV0YWluJyk7XHJcbiAgICB2YXIgcmVnaXN0ZXJPblJldGFpbkhvb2sgPSBmdW5jdGlvbiByZWdpc3Rlck9uUmV0YWluSG9vayh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblJldGFpbih7IHJldGFpbmVkOiBmdW5jdGlvbiByZXRhaW5lZChzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhc3RhdGUub25SZXRhaW47XHJcbiAgICAgICAgICAgIH0gfSwgb25SZXRhaW5Ib29rKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvbkVudGVyXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiB0aGUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZCwgdGhlIHN0YXRlJ3MgLm9uRW50ZXIgZnVuY3Rpb24gaXMgaW52b2tlZC5cclxuICAgICAqXHJcbiAgICAgKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkVudGVyIH0sIG9uRW50ZXJIb29rKTtgXHJcbiAgICAgKlxyXG4gICAgICogU2VlOiBbW0lIb29rUmVnaXN0cnkub25FbnRlcl1dXHJcbiAgICAgKi9cclxuICAgIHZhciBvbkVudGVySG9vayA9IG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKCdvbkVudGVyJyk7XHJcbiAgICB2YXIgcmVnaXN0ZXJPbkVudGVySG9vayA9IGZ1bmN0aW9uIHJlZ2lzdGVyT25FbnRlckhvb2sodHJhbnNpdGlvblNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiBmdW5jdGlvbiBlbnRlcmluZyhzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhc3RhdGUub25FbnRlcjtcclxuICAgICAgICAgICAgfSB9LCBvbkVudGVySG9vayk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIGhvb2tzICovXHJcbiAgICAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKlxyXG4gICAgICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgRUFHRVIgUmVzb2x2YWJsZXMgaW4gdGhlIFRvIFBhdGhcclxuICAgICAqXHJcbiAgICAgKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoKTtgXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBhIFRyYW5zaXRpb24gc3RhcnRzLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBFQUdFUiBSZXNvbHZhYmxlcywgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cclxuICAgICAqL1xyXG4gICAgdmFyIGVhZ2VyUmVzb2x2ZVBhdGggPSBmdW5jdGlvbiBlYWdlclJlc29sdmVQYXRoKHRyYW5zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKS5yZXNvbHZlUGF0aChcIkVBR0VSXCIsIHRyYW5zKS50aGVuKG5vb3AkMSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoLCB7IHByaW9yaXR5OiAxMDAwIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgTEFaWSBSZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIChhbmQgYWxsIGl0cyBhbmNlc3RvcnMpIGluIHRoZSBUbyBQYXRoXHJcbiAgICAgKlxyXG4gICAgICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoKSA9PiB0cnVlIH0sIGxhenlSZXNvbHZlU3RhdGUpO2BcclxuICAgICAqXHJcbiAgICAgKiBXaGVuIGEgU3RhdGUgaXMgYmVpbmcgZW50ZXJlZCwgdGhpcyBob29rIHJlc29sdmVzIGFsbCB0aGUgUmVzb2x2YWJsZXMgZm9yIHRoaXMgc3RhdGUsIHdoaWNoIHRoZSB0cmFuc2l0aW9uIHRoZW4gd2FpdHMgZm9yLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dXHJcbiAgICAgKi9cclxuICAgIHZhciBsYXp5UmVzb2x2ZVN0YXRlID0gZnVuY3Rpb24gbGF6eVJlc29sdmVTdGF0ZSh0cmFucywgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHRyYW5zLnRyZWVDaGFuZ2VzKCkudG8pLnN1YkNvbnRleHQoc3RhdGUuJCRzdGF0ZSgpKS5yZXNvbHZlUGF0aChcIkxBWllcIiwgdHJhbnMpLnRoZW4obm9vcCQxKTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlKHRyYW5zaXRpb25TZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogdmFsKHRydWUpIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IDEwMDAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHdhaXRzIGZvciB0aGUgdmlld3MgdG8gbG9hZFxyXG4gICAgICpcclxuICAgICAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtgXHJcbiAgICAgKlxyXG4gICAgICogQWxsb3dzIHRoZSB2aWV3cyB0byBkbyBhc3luYyB3b3JrIGluIFtbVmlld0NvbmZpZy5sb2FkXV0gYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGNvbnRpbnVlcy5cclxuICAgICAqIEluIGFuZ3VsYXIgMSwgdGhpcyBpbmNsdWRlcyBsb2FkaW5nIHRoZSB0ZW1wbGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIHZhciBsb2FkRW50ZXJpbmdWaWV3cyA9IGZ1bmN0aW9uIGxvYWRFbnRlcmluZ1ZpZXdzKHRyYW5zaXRpb24pIHtcclxuICAgICAgICB2YXIgJHEgPSBzZXJ2aWNlcy4kcTtcclxuICAgICAgICB2YXIgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoXCJlbnRlcmluZ1wiKTtcclxuICAgICAgICBpZiAoIWVudGVyaW5nVmlld3MubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgcmV0dXJuICRxLmFsbChlbnRlcmluZ1ZpZXdzLm1hcChmdW5jdGlvbiAodmlldykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEud2hlbih2aWV3LmxvYWQoKSk7XHJcbiAgICAgICAgfSkpLnRoZW4obm9vcCQxKTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyA9IGZ1bmN0aW9uIHJlZ2lzdGVyTG9hZEVudGVyaW5nVmlld3ModHJhbnNpdGlvblNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggYWN0aXZhdGVzIHRoZSBuZXcgdmlld3Mgd2hlbiBhIHRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bC5cclxuICAgICAqXHJcbiAgICAgKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO2BcclxuICAgICAqXHJcbiAgICAgKiBBZnRlciBhIHRyYW5zaXRpb24gaXMgY29tcGxldGUsIHRoaXMgaG9vayBkZWFjdGl2YXRlcyB0aGUgb2xkIHZpZXdzIGZyb20gdGhlIHByZXZpb3VzIHN0YXRlLFxyXG4gICAgICogYW5kIGFjdGl2YXRlcyB0aGUgbmV3IHZpZXdzIGZyb20gdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBbW1ZpZXdTZXJ2aWNlXV1cclxuICAgICAqL1xyXG4gICAgdmFyIGFjdGl2YXRlVmlld3MgPSBmdW5jdGlvbiBhY3RpdmF0ZVZpZXdzKHRyYW5zaXRpb24pIHtcclxuICAgICAgICB2YXIgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoXCJlbnRlcmluZ1wiKTtcclxuICAgICAgICB2YXIgZXhpdGluZ1ZpZXdzID0gdHJhbnNpdGlvbi52aWV3cyhcImV4aXRpbmdcIik7XHJcbiAgICAgICAgaWYgKCFlbnRlcmluZ1ZpZXdzLmxlbmd0aCAmJiAhZXhpdGluZ1ZpZXdzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgIHZhciAkdmlldyA9IHRyYW5zaXRpb24ucm91dGVyLnZpZXdTZXJ2aWNlO1xyXG4gICAgICAgIGV4aXRpbmdWaWV3cy5mb3JFYWNoKGZ1bmN0aW9uICh2Yykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHZpZXcuZGVhY3RpdmF0ZVZpZXdDb25maWcodmMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVudGVyaW5nVmlld3MuZm9yRWFjaChmdW5jdGlvbiAodmMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICR2aWV3LmFjdGl2YXRlVmlld0NvbmZpZyh2Yyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHZpZXcuc3luYygpO1xyXG4gICAgfTtcclxuICAgIHZhciByZWdpc3RlckFjdGl2YXRlVmlld3MgPSBmdW5jdGlvbiByZWdpc3RlckFjdGl2YXRlVmlld3ModHJhbnNpdGlvblNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCBhY3RpdmF0ZVZpZXdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgZ2xvYmFsIFVJLVJvdXRlciBzdGF0ZVxyXG4gICAgICpcclxuICAgICAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB1cGRhdGVHbG9iYWxTdGF0ZSk7YFxyXG4gICAgICpcclxuICAgICAqIEJlZm9yZSBhIFtbVHJhbnNpdGlvbl1dIHN0YXJ0cywgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlIG9mIFwidGhlIGN1cnJlbnQgdHJhbnNpdGlvblwiIChbW0dsb2JhbHMudHJhbnNpdGlvbl1dKS5cclxuICAgICAqIEFmdGVyIGEgc3VjY2Vzc2Z1bCBbW1RyYW5zaXRpb25dXSwgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlcyBvZiBcInRoZSBjdXJyZW50IHN0YXRlXCJcclxuICAgICAqIChbW0dsb2JhbHMuY3VycmVudF1dIGFuZCBbW0dsb2JhbHMuJGN1cnJlbnRdXSkgYW5kIFwidGhlIGN1cnJlbnQgcGFyYW0gdmFsdWVzXCIgKFtbR2xvYmFscy5wYXJhbXNdXSkuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGFsc28gdGhlIGRlcHJlY2F0ZWQgcHJvcGVydGllczpcclxuICAgICAqIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25dXSwgW1tTdGF0ZVNlcnZpY2UuY3VycmVudF1dLCBbW1N0YXRlU2VydmljZS5wYXJhbXNdXVxyXG4gICAgICovXHJcbiAgICB2YXIgdXBkYXRlR2xvYmFsU3RhdGUgPSBmdW5jdGlvbiB1cGRhdGVHbG9iYWxTdGF0ZSh0cmFucykge1xyXG4gICAgICAgIHZhciBnbG9iYWxzID0gdHJhbnMucm91dGVyLmdsb2JhbHM7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb25TdWNjZXNzZnVsID0gZnVuY3Rpb24gdHJhbnNpdGlvblN1Y2Nlc3NmdWwoKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLmVucXVldWUodHJhbnMpO1xyXG4gICAgICAgICAgICBnbG9iYWxzLiRjdXJyZW50ID0gdHJhbnMuJHRvKCk7XHJcbiAgICAgICAgICAgIGdsb2JhbHMuY3VycmVudCA9IGdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcclxuICAgICAgICAgICAgY29weSh0cmFucy5wYXJhbXMoKSwgZ2xvYmFscy5wYXJhbXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGNsZWFyQ3VycmVudFRyYW5zaXRpb24gPSBmdW5jdGlvbiBjbGVhckN1cnJlbnRUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgY2xlYXIgZ2xvYmFscy50cmFuc2l0aW9uIGlmIGEgZGlmZmVyZW50IHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWQgaW4gdGhlIG1lYW50aW1lXHJcbiAgICAgICAgICAgIGlmIChnbG9iYWxzLnRyYW5zaXRpb24gPT09IHRyYW5zKSBnbG9iYWxzLnRyYW5zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJhbnMub25TdWNjZXNzKHt9LCB0cmFuc2l0aW9uU3VjY2Vzc2Z1bCwgeyBwcmlvcml0eTogMTAwMDAgfSk7XHJcbiAgICAgICAgdHJhbnMucHJvbWlzZS50aGVuKGNsZWFyQ3VycmVudFRyYW5zaXRpb24sIGNsZWFyQ3VycmVudFRyYW5zaXRpb24pO1xyXG4gICAgfTtcclxuICAgIHZhciByZWdpc3RlclVwZGF0ZUdsb2JhbFN0YXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggdXBkYXRlcyB0aGUgVVJMIGFmdGVyIGEgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXHJcbiAgICAgKlxyXG4gICAgICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGVVcmwpO2BcclxuICAgICAqL1xyXG4gICAgdmFyIHVwZGF0ZVVybCA9IGZ1bmN0aW9uIHVwZGF0ZVVybCh0cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0cmFuc2l0aW9uLm9wdGlvbnMoKTtcclxuICAgICAgICB2YXIgJHN0YXRlID0gdHJhbnNpdGlvbi5yb3V0ZXIuc3RhdGVTZXJ2aWNlO1xyXG4gICAgICAgIHZhciAkdXJsUm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXIudXJsUm91dGVyO1xyXG4gICAgICAgIC8vIERvbnQgdXBkYXRlIHRoZSB1cmwgaW4gdGhlc2Ugc2l0dWF0aW9uczpcclxuICAgICAgICAvLyBUaGUgdHJhbnNpdGlvbiB3YXMgdHJpZ2dlcmVkIGJ5IGEgVVJMIHN5bmMgKG9wdGlvbnMuc291cmNlID09PSAndXJsJylcclxuICAgICAgICAvLyBUaGUgdXNlciBkb2Vzbid0IHdhbnQgdGhlIHVybCB0byB1cGRhdGUgKG9wdGlvbnMubG9jYXRpb24gPT09IGZhbHNlKVxyXG4gICAgICAgIC8vIFRoZSBkZXN0aW5hdGlvbiBzdGF0ZSwgYW5kIGFsbCBwYXJlbnRzIGhhdmUgbm8gbmF2aWdhYmxlIHVybFxyXG4gICAgICAgIGlmIChvcHRpb25zLnNvdXJjZSAhPT0gJ3VybCcgJiYgb3B0aW9ucy5sb2NhdGlvbiAmJiAkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmxPcHRpb25zID0geyByZXBsYWNlOiBvcHRpb25zLmxvY2F0aW9uID09PSAncmVwbGFjZScgfTtcclxuICAgICAgICAgICAgJHVybFJvdXRlci5wdXNoKCRzdGF0ZS4kY3VycmVudC5uYXZpZ2FibGUudXJsLCAkc3RhdGUucGFyYW1zLCB1cmxPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHVybFJvdXRlci51cGRhdGUodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHJlZ2lzdGVyVXBkYXRlVXJsID0gZnVuY3Rpb24gcmVnaXN0ZXJVcGRhdGVVcmwodHJhbnNpdGlvblNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGVVcmwsIHsgcHJpb3JpdHk6IDk5OTkgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHBlcmZvcm1zIGxhenkgbG9hZGluZ1xyXG4gICAgICpcclxuICAgICAqIFdoZW4gZW50ZXJpbmcgYSBzdGF0ZSBcImFiY1wiIHdoaWNoIGhhcyBhIGBsYXp5TG9hZGAgZnVuY3Rpb24gZGVmaW5lZDpcclxuICAgICAqIC0gSW52b2tlIHRoZSBgbGF6eUxvYWRgIGZ1bmN0aW9uICh1bmxlc3MgaXQgaXMgYWxyZWFkeSBpbiBwcm9jZXNzKVxyXG4gICAgICogICAtIEZsYWcgdGhlIGhvb2sgZnVuY3Rpb24gYXMgXCJpbiBwcm9jZXNzXCJcclxuICAgICAqICAgLSBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIHByb21pc2UgKHRoYXQgcmVzb2x2ZXMgd2hlbiBsYXp5IGxvYWRpbmcgaXMgY29tcGxldGUpXHJcbiAgICAgKiAtIFdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHNldHRsZVxyXG4gICAgICogICAtIElmIHRoZSBwcm9taXNlIHJlc29sdmVzIHRvIGEgW1tMYXp5TG9hZFJlc3VsdF1dLCB0aGVuIHJlZ2lzdGVyIHRob3NlIHN0YXRlc1xyXG4gICAgICogICAtIEZsYWcgdGhlIGhvb2sgZnVuY3Rpb24gYXMgXCJub3QgaW4gcHJvY2Vzc1wiXHJcbiAgICAgKiAtIElmIHRoZSBob29rIHdhcyBzdWNjZXNzZnVsXHJcbiAgICAgKiAgIC0gUmVtb3ZlIHRoZSBgbGF6eUxvYWRgIGZ1bmN0aW9uIGZyb20gdGhlIHN0YXRlIGRlY2xhcmF0aW9uXHJcbiAgICAgKiAtIElmIGFsbCB0aGUgaG9va3Mgd2VyZSBzdWNjZXNzZnVsXHJcbiAgICAgKiAgIC0gUmV0cnkgdGhlIHRyYW5zaXRpb24gKGJ5IHJldHVybmluZyBhIFRhcmdldFN0YXRlKVxyXG4gICAgICpcclxuICAgICAqIGBgYFxyXG4gICAgICogLnN0YXRlKCdhYmMnLCB7XHJcbiAgICAgKiAgIGNvbXBvbmVudDogJ2Zvb0NvbXBvbmVudCcsXHJcbiAgICAgKiAgIGxhenlMb2FkOiAoKSA9PiBTeXN0ZW0uaW1wb3J0KCcuL2Zvb0NvbXBvbmVudCcpXHJcbiAgICAgKiAgIH0pO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dXHJcbiAgICAgKi9cclxuICAgIHZhciBsYXp5TG9hZEhvb2sgPSBmdW5jdGlvbiBsYXp5TG9hZEhvb2sodHJhbnNpdGlvbikge1xyXG4gICAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcclxuICAgICAgICBmdW5jdGlvbiByZXRyeVRyYW5zaXRpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uLm9yaWdpbmFsVHJhbnNpdGlvbigpLm9wdGlvbnMoKS5zb3VyY2UgIT09ICd1cmwnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgbm90IHRyaWdnZXJlZCB2aWEgdXJsIHN5bmNcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBsYXp5IHN0YXRlIHNob3VsZCBiZSBsb2FkZWQgbm93LCBzbyByZS10cnkgdGhlIG9yaWdpbmFsIHRyYW5zaXRpb25cclxuICAgICAgICAgICAgICAgIHZhciBvcmlnID0gdHJhbnNpdGlvbi50YXJnZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5zdGF0ZVNlcnZpY2UudGFyZ2V0KG9yaWcuaWRlbnRpZmllcigpLCBvcmlnLnBhcmFtcygpLCBvcmlnLm9wdGlvbnMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gd2FzIHRyaWdnZXJlZCB2aWEgdXJsIHN5bmNcclxuICAgICAgICAgICAgLy8gUnVuIHRoZSBVUkwgcnVsZXMgYW5kIGZpbmQgdGhlIGJlc3QgbWF0Y2hcclxuICAgICAgICAgICAgdmFyICR1cmwgPSByb3V0ZXIudXJsU2VydmljZTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICR1cmwubWF0Y2goJHVybC5wYXJ0cygpKTtcclxuICAgICAgICAgICAgdmFyIHJ1bGUgPSByZXN1bHQgJiYgcmVzdWx0LnJ1bGU7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBiZXN0IG1hdGNoIGlzIGEgc3RhdGUsIHJlZGlyZWN0IHRoZSB0cmFuc2l0aW9uIChpbnN0ZWFkXHJcbiAgICAgICAgICAgIC8vIG9mIGNhbGxpbmcgc3luYygpIHdoaWNoIHN1cGVyc2VkZXMgdGhlIGN1cnJlbnQgdHJhbnNpdGlvbilcclxuICAgICAgICAgICAgaWYgKHJ1bGUgJiYgcnVsZS50eXBlID09PSBcIlNUQVRFXCIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHJ1bGUuc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gcmVzdWx0Lm1hdGNoO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5zdGF0ZVNlcnZpY2UudGFyZ2V0KHN0YXRlLCBwYXJhbXMsIHRyYW5zaXRpb24ub3B0aW9ucygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBObyBtYXRjaGluZyBzdGF0ZSBmb3VuZCwgc28gbGV0IC5zeW5jKCkgY2hvb3NlIHRoZSBiZXN0IG5vbi1zdGF0ZSBtYXRjaC9vdGhlcndpc2VcclxuICAgICAgICAgICAgcm91dGVyLnVybFNlcnZpY2Uuc3luYygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSB0cmFuc2l0aW9uLmVudGVyaW5nKCkuZmlsdGVyKGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gISFzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XHJcbiAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLmFsbChwcm9taXNlcykudGhlbihyZXRyeVRyYW5zaXRpb24pO1xyXG4gICAgfTtcclxuICAgIHZhciByZWdpc3RlckxhenlMb2FkSG9vayA9IGZ1bmN0aW9uIHJlZ2lzdGVyTGF6eUxvYWRIb29rKHRyYW5zaXRpb25TZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHsgZW50ZXJpbmc6IGZ1bmN0aW9uIGVudGVyaW5nKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISFzdGF0ZS5sYXp5TG9hZDtcclxuICAgICAgICAgICAgfSB9LCBsYXp5TG9hZEhvb2spO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlcyBhIHN0YXRlJ3MgbGF6eSBsb2FkIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRyYW5zaXRpb24gYSBUcmFuc2l0aW9uIGNvbnRleHRcclxuICAgICAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgdG8gbGF6eSBsb2FkXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIHRoZSBsYXp5IGxvYWQgcmVzdWx0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGxhenlMb2FkU3RhdGUodHJhbnNpdGlvbiwgc3RhdGUpIHtcclxuICAgICAgICB2YXIgbGF6eUxvYWRGbiA9IHN0YXRlLiQkc3RhdGUoKS5sYXp5TG9hZDtcclxuICAgICAgICAvLyBTdG9yZS9nZXQgdGhlIGxhenkgbG9hZCBwcm9taXNlIG9uL2Zyb20gdGhlIGhvb2tmbiBzbyBpdCBkb2Vzbid0IGdldCByZS1pbnZva2VkXHJcbiAgICAgICAgdmFyIHByb21pc2UgPSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xyXG4gICAgICAgIGlmICghcHJvbWlzZSkge1xyXG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUubGF6eUxvYWQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGxhenlMb2FkRm5bJ19wcm9taXNlJ107XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXSA9IHNlcnZpY2VzLiRxLndoZW4obGF6eUxvYWRGbih0cmFuc2l0aW9uLCBzdGF0ZSkpLnRoZW4odXBkYXRlU3RhdGVSZWdpc3RyeSkudGhlbihzdWNjZXNzLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBSZWdpc3RlciBhbnkgbGF6eSBsb2FkZWQgc3RhdGUgZGVmaW5pdGlvbnMgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0ZVJlZ2lzdHJ5KHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIEFycmF5LmlzQXJyYXkocmVzdWx0LnN0YXRlcykpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbi5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5yZWdpc3RlcihzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgY2xhc3MgZGVmaW5lcyBhIHR5cGUgb2YgaG9vaywgc3VjaCBhcyBgb25CZWZvcmVgIG9yIGBvbkVudGVyYC5cclxuICAgICAqIFBsdWdpbnMgY2FuIGRlZmluZSBjdXN0b20gaG9vayB0eXBlcywgc3VjaCBhcyBzdGlja3kgc3RhdGVzIGRvZXMgZm9yIGBvbkluYWN0aXZlYC5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJhbGFwaVxyXG4gICAgICovXHJcbiAgICB2YXIgVHJhbnNpdGlvbkV2ZW50VHlwZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVHJhbnNpdGlvbkV2ZW50VHlwZShuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXZlcnNlU29ydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRSZXN1bHRIYW5kbGVyID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIGdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRFcnJvckhhbmRsZXIgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuaG9va1BoYXNlID0gaG9va1BoYXNlO1xyXG4gICAgICAgICAgICB0aGlzLmhvb2tPcmRlciA9IGhvb2tPcmRlcjtcclxuICAgICAgICAgICAgdGhpcy5jcml0ZXJpYU1hdGNoUGF0aCA9IGNyaXRlcmlhTWF0Y2hQYXRoO1xyXG4gICAgICAgICAgICB0aGlzLnJldmVyc2VTb3J0ID0gcmV2ZXJzZVNvcnQ7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzdWx0SGFuZGxlciA9IGdldFJlc3VsdEhhbmRsZXI7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RXJyb3JIYW5kbGVyID0gZ2V0RXJyb3JIYW5kbGVyO1xyXG4gICAgICAgICAgICB0aGlzLnN5bmNocm9ub3VzID0gc3luY2hyb25vdXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBUcmFuc2l0aW9uRXZlbnRUeXBlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgc2tpcHMgYSB0cmFuc2l0aW9uIGlmIGl0IHNob3VsZCBiZSBpZ25vcmVkXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBob29rIGlzIGludm9rZWQgYXQgdGhlIGVuZCBvZiB0aGUgb25CZWZvcmUgcGhhc2UuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlIHRyYW5zaXRpb24gc2hvdWxkIGJlIGlnbm9yZWQgKGJlY2F1c2Ugbm8gcGFyYW1ldGVyIG9yIHN0YXRlcyBjaGFuZ2VkKVxyXG4gICAgICogdGhlbiB0aGUgdHJhbnNpdGlvbiBpcyBpZ25vcmVkIGFuZCBub3QgcHJvY2Vzc2VkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpZ25vcmVkSG9vayh0cmFucykge1xyXG4gICAgICAgIHZhciBpZ25vcmVkUmVhc29uID0gdHJhbnMuX2lnbm9yZWRSZWFzb24oKTtcclxuICAgICAgICBpZiAoIWlnbm9yZWRSZWFzb24pIHJldHVybjtcclxuICAgICAgICB0cmFjZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkKHRyYW5zKTtcclxuICAgICAgICB2YXIgcGVuZGluZyA9IHRyYW5zLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XHJcbiAgICAgICAgLy8gVGhlIHVzZXIgY2xpY2tlZCBhIGxpbmsgZ29pbmcgYmFjayB0byB0aGUgKmN1cnJlbnQgc3RhdGUqICgnQScpXHJcbiAgICAgICAgLy8gSG93ZXZlciwgdGhlcmUgaXMgYWxzbyBhIHBlbmRpbmcgdHJhbnNpdGlvbiBpbiBmbGlnaHQgKHRvICdCJylcclxuICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNpdGlvbiB0byAnQicgYmVjYXVzZSB0aGUgdXNlciBub3cgd2FudHMgdG8gYmUgYmFjayBhdCAnQScuXHJcbiAgICAgICAgaWYgKGlnbm9yZWRSZWFzb24gPT09ICdTYW1lQXNDdXJyZW50JyAmJiBwZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHBlbmRpbmcuYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pZ25vcmVkKCkudG9Qcm9taXNlKCk7XHJcbiAgICB9XHJcbiAgICB2YXIgcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sgPSBmdW5jdGlvbiByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgaWdub3JlZEhvb2ssIHsgcHJpb3JpdHk6IC05OTk5IH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cclxuICAgIC8qKlxyXG4gICAgICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHJlamVjdHMgdGhlIFRyYW5zaXRpb24gaWYgaXQgaXMgaW52YWxpZFxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaG9vayBpcyBpbnZva2VkIGF0IHRoZSBlbmQgb2YgdGhlIG9uQmVmb3JlIHBoYXNlLlxyXG4gICAgICogSWYgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCAoZm9yIGV4YW1wbGUsIHBhcmFtIHZhbHVlcyBkbyBub3QgdmFsaWRhdGUpXHJcbiAgICAgKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIHJlamVjdGVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpbnZhbGlkVHJhbnNpdGlvbkhvb2sodHJhbnMpIHtcclxuICAgICAgICBpZiAoIXRyYW5zLnZhbGlkKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRyYW5zLmVycm9yKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayA9IGZ1bmN0aW9uIHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rKHRyYW5zaXRpb25TZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCBpbnZhbGlkVHJhbnNpdGlvbkhvb2ssIHsgcHJpb3JpdHk6IC0xMDAwMCB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29yZWFwaVxyXG4gICAgICogQG1vZHVsZSB0cmFuc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGVmYXVsdCBbW1RyYW5zaXRpb25dXSBvcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEluY2x1ZGUgdGhpcyBvYmplY3Qgd2hlbiBhcHBseWluZyBjdXN0b20gZGVmYXVsdHM6XHJcbiAgICAgKiBsZXQgcmVsb2FkT3B0cyA9IHsgcmVsb2FkOiB0cnVlLCBub3RpZnk6IHRydWUgfVxyXG4gICAgICogbGV0IG9wdGlvbnMgPSBkZWZhdWx0cyh0aGVpck9wdHMsIGN1c3RvbURlZmF1bHRzLCBkZWZhdWx0T3B0aW9ucyk7XHJcbiAgICAgKi9cclxuICAgIHZhciBkZWZhdWx0VHJhbnNPcHRzID0ge1xyXG4gICAgICAgIGxvY2F0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlbGF0aXZlOiBudWxsLFxyXG4gICAgICAgIGluaGVyaXQ6IGZhbHNlLFxyXG4gICAgICAgIG5vdGlmeTogdHJ1ZSxcclxuICAgICAgICByZWxvYWQ6IGZhbHNlLFxyXG4gICAgICAgIGN1c3RvbToge30sXHJcbiAgICAgICAgY3VycmVudDogZnVuY3Rpb24gY3VycmVudCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzb3VyY2U6IFwidW5rbm93blwiXHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gVHJhbnNpdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogLSBNb3N0IGltcG9ydGFudGx5LCBpdCBhbGxvd3MgZ2xvYmFsIFRyYW5zaXRpb24gSG9va3MgdG8gYmUgcmVnaXN0ZXJlZC5cclxuICAgICAqIC0gSXQgYWxsb3dzIHRoZSBkZWZhdWx0IHRyYW5zaXRpb24gZXJyb3IgaGFuZGxlciB0byBiZSBzZXQuXHJcbiAgICAgKiAtIEl0IGFsc28gaGFzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFtbVHJhbnNpdGlvbl1dIG9iamVjdHMsICh1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0pLlxyXG4gICAgICpcclxuICAgICAqIEF0IGJvb3RzdHJhcCwgW1tVSVJvdXRlcl1dIGNyZWF0ZXMgYSBzaW5nbGUgaW5zdGFuY2UgKHNpbmdsZXRvbikgb2YgdGhpcyBjbGFzcy5cclxuICAgICAqL1xyXG4gICAgdmFyIFRyYW5zaXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zaXRpb25TZXJ2aWNlKF9yb3V0ZXIpIHtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbkNvdW50ID0gMDtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gVGhlIHRyYW5zaXRpb24gaG9vayB0eXBlcywgc3VjaCBhcyBgb25FbnRlcmAsIGBvblN0YXJ0YCwgZXRjICovXHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50VHlwZXMgPSBbXTtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gVGhlIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rcyAqL1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlcmVkSG9va3MgPSB7fTtcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gVGhlICBwYXRocyBvbiBhIGNyaXRlcmlhIG9iamVjdCAqL1xyXG4gICAgICAgICAgICB0aGlzLl9jcml0ZXJpYVBhdGhzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuJHZpZXcgPSBfcm91dGVyLnZpZXdTZXJ2aWNlO1xyXG4gICAgICAgICAgICB0aGlzLl9kZXJlZ2lzdGVySG9va0ZucyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLl9wbHVnaW5hcGkgPSBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwodGhpcyksIHt9LCB2YWwodGhpcyksIFsnX2RlZmluZVBhdGhUeXBlJywgJ19kZWZpbmVFdmVudCcsICdfZ2V0UGF0aFR5cGVzJywgJ19nZXRFdmVudHMnLCAnZ2V0SG9va3MnXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUNvcmVQYXRocygpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZpbmVDb3JlRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyQ29yZVRyYW5zaXRpb25Ib29rcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSwgY2FsbGVkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBkdXJpbmcgdHJhbnNpdGlvbiBjb25zdHJ1Y3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGxvdyBsZXZlbCBob29rIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgcGx1Z2lucy5cclxuICAgICAgICAgKiBUaGlzIGNhbiBiZSBhIHVzZWZ1bCB0aW1lIGZvciBwbHVnaW5zIHRvIGFkZCByZXNvbHZlcyBvciBtdXRhdGUgdGhlIHRyYW5zaXRpb24gYXMgbmVlZGVkLlxyXG4gICAgICAgICAqIFRoZSBTdGlja3kgU3RhdGVzIHBsdWdpbiB1c2VzIHRoaXMgaG9vayB0byBtb2RpZnkgdGhlIHRyZWVjaGFuZ2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIExpZmVjeWNsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYG9uQ3JlYXRlYCBob29rcyBhcmUgaW52b2tlZCAqd2hpbGUgYSB0cmFuc2l0aW9uIGlzIGJlaW5nIGNvbnN0cnVjdGVkKi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyBSZXR1cm4gdmFsdWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICAgICAqIEBwYXJhbSBjcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbnZva2VkLlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSByZWdpc3RyYXRpb24gb3B0aW9uc1xyXG4gICAgICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLm9uQ3JlYXRlID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25CZWZvcmUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vblN0YXJ0ID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25FeGl0ID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25SZXRhaW4gPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkVudGVyID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25GaW5pc2ggPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBkaXNwb3NlXHJcbiAgICAgICAgICogQGludGVybmFsYXBpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcyh0aGlzLl9yZWdpc3RlcmVkSG9va3MpLmZvckVhY2goZnVuY3Rpb24gKGhvb2tzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob29rc0FycmF5LmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rLl9kZXJlZ2lzdGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb20oaG9va3NBcnJheSwgaG9vayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFtbVHJhbnNpdGlvbl1dIG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBpcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBUcmFuc2l0aW9uIG9iamVjdHMuXHJcbiAgICAgICAgICogSXQgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBbW1N0YXRlU2VydmljZV1dIGFuZCBzaG91bGQgZ2VuZXJhbGx5IG5vdCBiZSBjYWxsZWQgYnkgYXBwbGljYXRpb24gY29kZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmcm9tUGF0aCB0aGUgcGF0aCB0byB0aGUgY3VycmVudCBzdGF0ZSAodGhlIGZyb20gc3RhdGUpXHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldFN0YXRlIHRoZSB0YXJnZXQgc3RhdGUgKGRlc3RpbmF0aW9uKVxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgVHJhbnNpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRhcmdldFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihmcm9tUGF0aCwgdGFyZ2V0U3RhdGUsIHRoaXMuX3JvdXRlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZGVmaW5lQ29yZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIFBoYXNlID0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlO1xyXG4gICAgICAgICAgICB2YXIgVEggPSBUcmFuc2l0aW9uSG9vaztcclxuICAgICAgICAgICAgdmFyIHBhdGhzID0gdGhpcy5fY3JpdGVyaWFQYXRocztcclxuICAgICAgICAgICAgdmFyIE5PUk1BTF9TT1JUID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBSRVZFUlNFX1NPUlQgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgQVNZTkNIUk9OT1VTID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBTWU5DSFJPTk9VUyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KFwib25DcmVhdGVcIiwgUGhhc2UuQ1JFQVRFLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILlRIUk9XX0VSUk9SLCBTWU5DSFJPTk9VUyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KFwib25CZWZvcmVcIiwgUGhhc2UuQkVGT1JFLCAwLCBwYXRocy50byk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KFwib25TdGFydFwiLCBQaGFzZS5SVU4sIDAsIHBhdGhzLnRvKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoXCJvbkV4aXRcIiwgUGhhc2UuUlVOLCAxMDAsIHBhdGhzLmV4aXRpbmcsIFJFVkVSU0VfU09SVCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KFwib25SZXRhaW5cIiwgUGhhc2UuUlVOLCAyMDAsIHBhdGhzLnJldGFpbmVkKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoXCJvbkVudGVyXCIsIFBoYXNlLlJVTiwgMzAwLCBwYXRocy5lbnRlcmluZyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KFwib25GaW5pc2hcIiwgUGhhc2UuUlVOLCA0MDAsIHBhdGhzLnRvKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoXCJvblN1Y2Nlc3NcIiwgUGhhc2UuU1VDQ0VTUywgMCwgcGF0aHMudG8sIE5PUk1BTF9TT1JULCBUSC5MT0dfUkVKRUNURURfUkVTVUxULCBUSC5MT0dfRVJST1IsIFNZTkNIUk9OT1VTKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoXCJvbkVycm9yXCIsIFBoYXNlLkVSUk9SLCAwLCBwYXRocy50bywgTk9STUFMX1NPUlQsIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsIFRILkxPR19FUlJPUiwgU1lOQ0hST05PVVMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZUNvcmVQYXRocyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIFNUQVRFID0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFLFxyXG4gICAgICAgICAgICAgICAgVFJBTlNJVElPTiA9IGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZS5UUkFOU0lUSU9OO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZShcInRvXCIsIFRSQU5TSVRJT04pO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZShcImZyb21cIiwgVFJBTlNJVElPTik7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKFwiZXhpdGluZ1wiLCBTVEFURSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKFwicmV0YWluZWRcIiwgU1RBVEUpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZShcImVudGVyaW5nXCIsIFNUQVRFKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXZlcnNlU29ydCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXZlcnNlU29ydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRSZXN1bHRIYW5kbGVyID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIGdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRFcnJvckhhbmRsZXIgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzeW5jaHJvbm91cyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzeW5jaHJvbm91cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBldmVudFR5cGUgPSBuZXcgVHJhbnNpdGlvbkV2ZW50VHlwZShuYW1lLCBob29rUGhhc2UsIGhvb2tPcmRlciwgY3JpdGVyaWFNYXRjaFBhdGgsIHJldmVyc2VTb3J0LCBnZXRSZXN1bHRIYW5kbGVyLCBnZXRFcnJvckhhbmRsZXIsIHN5bmNocm9ub3VzKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRUeXBlcy5wdXNoKGV2ZW50VHlwZSk7XHJcbiAgICAgICAgICAgIG1ha2VFdmVudCh0aGlzLCB0aGlzLCBldmVudFR5cGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXRFdmVudHMgPSBmdW5jdGlvbiAocGhhc2UpIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25Ib29rVHlwZXMgPSBpc0RlZmluZWQocGhhc2UpID8gdGhpcy5fZXZlbnRUeXBlcy5maWx0ZXIoZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlLmhvb2tQaGFzZSA9PT0gcGhhc2U7XHJcbiAgICAgICAgICAgIH0pIDogdGhpcy5fZXZlbnRUeXBlcy5zbGljZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbkhvb2tUeXBlcy5zb3J0KGZ1bmN0aW9uIChsLCByKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY21wQnlQaGFzZSA9IGwuaG9va1BoYXNlIC0gci5ob29rUGhhc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY21wQnlQaGFzZSA9PT0gMCA/IGwuaG9va09yZGVyIC0gci5ob29rT3JkZXIgOiBjbXBCeVBoYXNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgYSBQYXRoIHRvIGJlIHVzZWQgYXMgYSBjcml0ZXJpb24gYWdhaW5zdCBhIFRyZWVDaGFuZ2VzIHBhdGhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEZvciBleGFtcGxlOiB0aGUgYGV4aXRpbmdgIHBhdGggaW4gW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIGEgU1RBVEUgc2NvcGVkIHBhdGguXHJcbiAgICAgICAgICogSXQgd2FzIGRlZmluZWQgYnkgY2FsbGluZyBgZGVmaW5lVHJlZUNoYW5nZXNDcml0ZXJpb24oJ2V4aXRpbmcnLCBUcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFKWBcclxuICAgICAgICAgKiBFYWNoIHN0YXRlIGluIHRoZSBleGl0aW5nIHBhdGggaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBjcml0ZXJpYSBhbmQgcmV0dXJuZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBbm90aGVyIGV4YW1wbGU6IHRoZSBgdG9gIHBhdGggaW4gW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIGEgVFJBTlNJVElPTiBzY29wZWQgcGF0aC5cclxuICAgICAgICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbigndG8nLCBUcmFuc2l0aW9uSG9va1Njb3BlLlRSQU5TSVRJT04pYFxyXG4gICAgICAgICAqIE9ubHkgdGhlIHRhaWwgb2YgdGhlIGB0b2AgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBoaWRkZW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZVBhdGhUeXBlID0gZnVuY3Rpb24gKG5hbWUsIGhvb2tTY29wZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jcml0ZXJpYVBhdGhzW25hbWVdID0geyBuYW1lOiBuYW1lLCBzY29wZTogaG9va1Njb3BlIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogKiBAaGlkZGVuICovXHJcbiAgICAgICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXRQYXRoVHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcml0ZXJpYVBhdGhzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuZ2V0SG9va3MgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZm5zID0gdGhpcy5fZGVyZWdpc3Rlckhvb2tGbnM7XHJcbiAgICAgICAgICAgIGZucy5hZGRDb3JlUmVzb2x2ZXMgPSByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyh0aGlzKTtcclxuICAgICAgICAgICAgZm5zLmlnbm9yZWQgPSByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayh0aGlzKTtcclxuICAgICAgICAgICAgZm5zLmludmFsaWQgPSByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayh0aGlzKTtcclxuICAgICAgICAgICAgLy8gV2lyZSB1cCByZWRpcmVjdFRvIGhvb2tcclxuICAgICAgICAgICAgZm5zLnJlZGlyZWN0VG8gPSByZWdpc3RlclJlZGlyZWN0VG9Ib29rKHRoaXMpO1xyXG4gICAgICAgICAgICAvLyBXaXJlIHVwIG9uRXhpdC9SZXRhaW4vRW50ZXIgc3RhdGUgaG9va3NcclxuICAgICAgICAgICAgZm5zLm9uRXhpdCA9IHJlZ2lzdGVyT25FeGl0SG9vayh0aGlzKTtcclxuICAgICAgICAgICAgZm5zLm9uUmV0YWluID0gcmVnaXN0ZXJPblJldGFpbkhvb2sodGhpcyk7XHJcbiAgICAgICAgICAgIGZucy5vbkVudGVyID0gcmVnaXN0ZXJPbkVudGVySG9vayh0aGlzKTtcclxuICAgICAgICAgICAgLy8gV2lyZSB1cCBSZXNvbHZlIGhvb2tzXHJcbiAgICAgICAgICAgIGZucy5lYWdlclJlc29sdmUgPSByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGgodGhpcyk7XHJcbiAgICAgICAgICAgIGZucy5sYXp5UmVzb2x2ZSA9IHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSh0aGlzKTtcclxuICAgICAgICAgICAgLy8gV2lyZSB1cCB0aGUgVmlldyBtYW5hZ2VtZW50IGhvb2tzXHJcbiAgICAgICAgICAgIGZucy5sb2FkVmlld3MgPSByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzKHRoaXMpO1xyXG4gICAgICAgICAgICBmbnMuYWN0aXZhdGVWaWV3cyA9IHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyh0aGlzKTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlcyBnbG9iYWwgc3RhdGUgYWZ0ZXIgYSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgIGZucy51cGRhdGVHbG9iYWxzID0gcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSh0aGlzKTtcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgZ2xvYmFscy5jdXJyZW50IGlzIHVwZGF0ZWQgYXQgcHJpb3JpdHk6IDEwMDAwXHJcbiAgICAgICAgICAgIGZucy51cGRhdGVVcmwgPSByZWdpc3RlclVwZGF0ZVVybCh0aGlzKTtcclxuICAgICAgICAgICAgLy8gTGF6eSBsb2FkIHN0YXRlIHRyZWVzXHJcbiAgICAgICAgICAgIGZucy5sYXp5TG9hZCA9IHJlZ2lzdGVyTGF6eUxvYWRIb29rKHRoaXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFRyYW5zaXRpb25TZXJ2aWNlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgc3RhdGVcclxuICAgICAqL1xyXG4gICAgLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIHN0YXRlIHJlbGF0ZWQgc2VydmljZSBmdW5jdGlvbnNcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktcm91dGVyIHN0YXRlcy5cclxuICAgICAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgaXMgbG9jYXRlZCBvbiB0aGUgZ2xvYmFsIFtbVUlSb3V0ZXJdXSBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHZhciBTdGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cclxuICAgICAgICBmdW5jdGlvbiBTdGF0ZVNlcnZpY2Uocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgICAgICAvKiogQGludGVybmFsYXBpICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZENhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gJGRlZmF1bHRFcnJvckhhbmRsZXIoJGVycm9yJCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRlcnJvciQgaW5zdGFuY2VvZiBFcnJvciAmJiAkZXJyb3IkLnN0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQuc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkZXJyb3IkIGluc3RhbmNlb2YgUmVqZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZXJyb3IkLmRldGFpbCAmJiAkZXJyb3IkLmRldGFpbC5zdGFjaykgY29uc29sZS5lcnJvcigkZXJyb3IkLmRldGFpbC5zdGFjayk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBnZXR0ZXJzID0gWydjdXJyZW50JywgJyRjdXJyZW50JywgJ3BhcmFtcycsICd0cmFuc2l0aW9uJ107XHJcbiAgICAgICAgICAgIHZhciBib3VuZEZucyA9IE9iamVjdC5rZXlzKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLmZpbHRlcihub3QoaW5BcnJheShnZXR0ZXJzKSkpO1xyXG4gICAgICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSksIHRoaXMsIHZhbCh0aGlzKSwgYm91bmRGbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJ0cmFuc2l0aW9uXCIsIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSBbW1RyYW5zaXRpb25dXSBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MgKG9yIG51bGwpXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLnRyYW5zaXRpb25dXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJwYXJhbXNcIiwge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhlIGxhdGVzdCBzdWNjZXNzZnVsIHN0YXRlIHBhcmFtZXRlcnNcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMucGFyYW1zXV1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMucGFyYW1zO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJjdXJyZW50XCIsIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSBjdXJyZW50IFtbU3RhdGVEZWNsYXJhdGlvbl1dXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLmN1cnJlbnRdXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5jdXJyZW50O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCIkY3VycmVudFwiLCB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGUgY3VycmVudCBbW1N0YXRlT2JqZWN0XV1cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMuJGN1cnJlbnRdXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKG5vb3AkMSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZENhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBmb3Igd2hlbiBbW3RyYW5zaXRpb25Ub11dIGlzIGNhbGxlZCB3aXRoIGFuIGludmFsaWQgc3RhdGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJbnZva2VzIHRoZSBbW29uSW52YWxpZF1dIGNhbGxiYWNrcywgaW4gbmF0dXJhbCBvcmRlci5cclxuICAgICAgICAgKiBFYWNoIGNhbGxiYWNrJ3MgcmV0dXJuIHZhbHVlIGlzIGNoZWNrZWQgaW4gc2VxdWVuY2UgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBUYXJnZXRTdGF0ZS5cclxuICAgICAgICAgKiBUaGUgcmVzdWx0cyBvZiB0aGUgY2FsbGJhY2tzIGFyZSB3cmFwcGVkIGluICRxLndoZW4oKSwgc28gdGhlIGNhbGxiYWNrcyBtYXkgcmV0dXJuIHByb21pc2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSWYgYSBjYWxsYmFjayByZXR1cm5zIGFuIFRhcmdldFN0YXRlLCB0aGVuIGl0IGlzIHVzZWQgYXMgYXJndW1lbnRzIHRvICRzdGF0ZS50cmFuc2l0aW9uVG8oKSBhbmQgdGhlIHJlc3VsdCByZXR1cm5lZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdG9TdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZnJvbVN0YXRlID0gUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBmcm9tUGF0aCk7XHJcbiAgICAgICAgICAgIHZhciBnbG9iYWxzID0gdGhpcy5yb3V0ZXIuZ2xvYmFscztcclxuICAgICAgICAgICAgdmFyIGxhdGVzdFRoaW5nID0gZnVuY3Rpb24gbGF0ZXN0VGhpbmcoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5wZWVrVGFpbCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbGF0ZXN0ID0gbGF0ZXN0VGhpbmcoKTtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrUXVldWUgPSBuZXcgUXVldWUodGhpcy5pbnZhbGlkQ2FsbGJhY2tzLnNsaWNlKCkpO1xyXG4gICAgICAgICAgICB2YXIgaW5qZWN0b3IgPSBuZXcgUmVzb2x2ZUNvbnRleHQoZnJvbVBhdGgpLmluamVjdG9yKCk7XHJcbiAgICAgICAgICAgIHZhciBjaGVja0ZvclJlZGlyZWN0ID0gZnVuY3Rpb24gY2hlY2tGb3JSZWRpcmVjdChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gX3RoaXMudGFyZ2V0KHRhcmdldC5pZGVudGlmaWVyKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC52YWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKHRhcmdldC5lcnJvcigpKS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsYXRlc3RUaGluZygpICE9PSBsYXRlc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQoKS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHRDYWxsYmFjayA9IGNhbGxiYWNrUXVldWUuZGVxdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDYWxsYmFjayA9PT0gdW5kZWZpbmVkKSByZXR1cm4gUmVqZWN0aW9uLmludmFsaWQodG9TdGF0ZS5lcnJvcigpKS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja1Jlc3VsdCA9IHNlcnZpY2VzLiRxLndoZW4obmV4dENhbGxiYWNrKHRvU3RhdGUsIGZyb21TdGF0ZSwgaW5qZWN0b3IpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFja1Jlc3VsdC50aGVuKGNoZWNrRm9yUmVkaXJlY3QpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgfHwgaW52b2tlTmV4dENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW52b2tlTmV4dENhbGxiYWNrKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlcnMgYW4gSW52YWxpZCBTdGF0ZSBoYW5kbGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBbW09uSW52YWxpZENhbGxiYWNrXV0gZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25Ub11dXHJcbiAgICAgICAgICogaGFzIGJlZW4gY2FsbGVkIHdpdGggYW4gaW52YWxpZCBzdGF0ZSByZWZlcmVuY2UgcGFyYW1ldGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogc3RhdGVTZXJ2aWNlLm9uSW52YWxpZChmdW5jdGlvbih0bywgZnJvbSwgaW5qZWN0b3IpIHtcclxuICAgICAgICAgKiAgIGlmICh0by5uYW1lKCkgPT09ICdmb28nKSB7XHJcbiAgICAgICAgICogICAgIGxldCBsYXp5TG9hZGVyID0gaW5qZWN0b3IuZ2V0KCdMYXp5TG9hZFNlcnZpY2UnKTtcclxuICAgICAgICAgKiAgICAgcmV0dXJuIGxhenlMb2FkZXIubG9hZCgnZm9vJylcclxuICAgICAgICAgKiAgICAgICAgIC50aGVuKCgpID0+IHN0YXRlU2VydmljZS50YXJnZXQoJ2ZvbycpKTtcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGludm9rZWQgd2hlbiB0aGUgdG9TdGF0ZSBpcyBpbnZhbGlkXHJcbiAgICAgICAgICogICBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZSAoaW52YWxpZCkgdG9TdGF0ZSwgdGhlIGZyb21TdGF0ZSwgYW5kIGFuIGluamVjdG9yLlxyXG4gICAgICAgICAqICAgVGhlIGZ1bmN0aW9uIG1heSBvcHRpb25hbGx5IHJldHVybiBhIFtbVGFyZ2V0U3RhdGVdXSBvciBhIFByb21pc2UgZm9yIGEgVGFyZ2V0U3RhdGUuXHJcbiAgICAgICAgICogICBJZiBvbmUgaXMgcmV0dXJuZWQsIGl0IGlzIHRyZWF0ZWQgYXMgYSByZWRpcmVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5vbkludmFsaWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3Rlckxpc3RlbmVyKCkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLmludmFsaWRDYWxsYmFja3MpKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVsb2FkcyB0aGUgY3VycmVudCBzdGF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQSBtZXRob2QgdGhhdCBmb3JjZSByZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlLCBvciBhIHBhcnRpYWwgc3RhdGUgaGllcmFyY2h5LlxyXG4gICAgICAgICAqIEFsbCByZXNvbHZlcyBhcmUgcmUtcmVzb2x2ZWQsIGFuZCBjb21wb25lbnRzIHJlaW5zdGFudGlhdGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xyXG4gICAgICAgICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICogICAgICRzdGF0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgKiAgIH1cclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIE5vdGU6IGByZWxvYWQoKWAgaXMganVzdCBhbiBhbGlhcyBmb3I6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqICRzdGF0ZS50cmFuc2l0aW9uVG8oJHN0YXRlLmN1cnJlbnQsICRzdGF0ZS5wYXJhbXMsIHtcclxuICAgICAgICAgKiAgIHJlbG9hZDogdHJ1ZSwgaW5oZXJpdDogZmFsc2VcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByZWxvYWRTdGF0ZSBBIHN0YXRlIG5hbWUgb3IgYSBzdGF0ZSBvYmplY3QuXHJcbiAgICAgICAgICogICAgSWYgcHJlc2VudCwgdGhpcyBzdGF0ZSBhbmQgYWxsIGl0cyBjaGlsZHJlbiB3aWxsIGJlIHJlbG9hZGVkLCBidXQgYW5jZXN0b3JzIHdpbGwgbm90IHJlbG9hZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIC8vYXNzdW1pbmcgYXBwIGFwcGxpY2F0aW9uIGNvbnNpc3RzIG9mIDMgc3RhdGVzOiAnY29udGFjdHMnLCAnY29udGFjdHMuZGV0YWlsJywgJ2NvbnRhY3RzLmRldGFpbC5pdGVtJ1xyXG4gICAgICAgICAqIC8vYW5kIGN1cnJlbnQgc3RhdGUgaXMgJ2NvbnRhY3RzLmRldGFpbC5pdGVtJ1xyXG4gICAgICAgICAqIGxldCBhcHAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcclxuICAgICAgICAgKiAgICRzY29wZS5yZWxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAqICAgICAvL3dpbGwgcmVsb2FkICdjb250YWN0LmRldGFpbCcgYW5kIG5lc3RlZCAnY29udGFjdC5kZXRhaWwuaXRlbScgc3RhdGVzXHJcbiAgICAgICAgICogICAgICRzdGF0ZS5yZWxvYWQoJ2NvbnRhY3QuZGV0YWlsJyk7XHJcbiAgICAgICAgICogICB9XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZiB0aGUgbmV3IHRyYW5zaXRpb24uIFNlZSBbW1N0YXRlU2VydmljZS5nb11dXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5yZWxvYWQgPSBmdW5jdGlvbiAocmVsb2FkU3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblRvKHRoaXMuY3VycmVudCwgdGhpcy5wYXJhbXMsIHtcclxuICAgICAgICAgICAgICAgIHJlbG9hZDogaXNEZWZpbmVkKHJlbG9hZFN0YXRlKSA/IHJlbG9hZFN0YXRlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGluaGVyaXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbm90aWZ5OiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmFuc2l0aW9uIHRvIGEgZGlmZmVyZW50IHN0YXRlIGFuZC9vciBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHRyYW5zaXRpb25pbmcgdG8gYSBuZXcgc3RhdGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBgJHN0YXRlLmdvYCBjYWxscyBgJHN0YXRlLnRyYW5zaXRpb25Ub2AgaW50ZXJuYWxseSBidXQgYXV0b21hdGljYWxseSBzZXRzIG9wdGlvbnMgdG9cclxuICAgICAgICAgKiBgeyBsb2NhdGlvbjogdHJ1ZSwgaW5oZXJpdDogdHJ1ZSwgcmVsYXRpdmU6IHJvdXRlci5nbG9iYWxzLiRjdXJyZW50LCBub3RpZnk6IHRydWUgfWAuXHJcbiAgICAgICAgICogVGhpcyBhbGxvd3MgeW91IHRvIHVzZSBlaXRoZXIgYW4gYWJzb2x1dGUgb3IgcmVsYXRpdmUgYHRvYCBhcmd1bWVudCAoYmVjYXVzZSBvZiBgcmVsYXRpdmU6IHJvdXRlci5nbG9iYWxzLiRjdXJyZW50YCkuXHJcbiAgICAgICAgICogSXQgYWxzbyBhbGxvd3MgeW91IHRvIHNwZWNpZnkgKiBvbmx5IHRoZSBwYXJhbWV0ZXJzIHlvdSdkIGxpa2UgdG8gdXBkYXRlLCB3aGlsZSBsZXR0aW5nIHVuc3BlY2lmaWVkIHBhcmFtZXRlcnNcclxuICAgICAgICAgKiBpbmhlcml0IGZyb20gdGhlIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XHJcbiAgICAgICAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICogICAgICRzdGF0ZS5nbygnY29udGFjdC5kZXRhaWwnKTtcclxuICAgICAgICAgKiAgIH07XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG8gQWJzb2x1dGUgc3RhdGUgbmFtZSwgc3RhdGUgb2JqZWN0LCBvciByZWxhdGl2ZSBzdGF0ZSBwYXRoIChyZWxhdGl2ZSB0byBjdXJyZW50IHN0YXRlKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNvbWUgZXhhbXBsZXM6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtIGAkc3RhdGUuZ28oJ2NvbnRhY3QuZGV0YWlsJylgIC0gd2lsbCBnbyB0byB0aGUgYGNvbnRhY3QuZGV0YWlsYCBzdGF0ZVxyXG4gICAgICAgICAqIC0gYCRzdGF0ZS5nbygnXicpYCAtIHdpbGwgZ28gdG8gdGhlIHBhcmVudCBzdGF0ZVxyXG4gICAgICAgICAqIC0gYCRzdGF0ZS5nbygnXi5zaWJsaW5nJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBgaG9tZS5jaGlsZGAsIHdpbGwgZ28gdG8gdGhlIGBob21lLnNpYmxpbmdgIHN0YXRlXHJcbiAgICAgICAgICogLSBgJHN0YXRlLmdvKCcuY2hpbGQuZ3JhbmRjaGlsZCcpYCAtIGlmIGN1cnJlbnQgc3RhdGUgaXMgaG9tZSwgd2lsbCBnbyB0byB0aGUgYGhvbWUuY2hpbGQuZ3JhbmRjaGlsZGAgc3RhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXMgQSBtYXAgb2YgdGhlIHBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHNlbnQgdG8gdGhlIHN0YXRlLCB3aWxsIHBvcHVsYXRlICRzdGF0ZVBhcmFtcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIG5vdCBzcGVjaWZpZWQgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSBjdXJyZW50IHBhcmFtZXRlciB2YWx1ZXMgKGJlY2F1c2Ugb2YgYGluaGVyaXQ6IHRydWVgKS5cclxuICAgICAgICAgKiAgICBUaGlzIGFsbG93cywgZm9yIGV4YW1wbGUsIGdvaW5nIHRvIGEgc2libGluZyBzdGF0ZSB0aGF0IHNoYXJlcyBwYXJhbWV0ZXJzIGRlZmluZWQgYnkgYSBwYXJlbnQgc3RhdGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBUcmFuc2l0aW9uIG9wdGlvbnNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtwcm9taXNlfSBBIHByb21pc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZiB0aGUgbmV3IHRyYW5zaXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uICh0bywgcGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdXRHb09wdHMgPSB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50LCBpbmhlcml0OiB0cnVlIH07XHJcbiAgICAgICAgICAgIHZhciB0cmFuc09wdHMgPSBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdXRHb09wdHMsIGRlZmF1bHRUcmFuc09wdHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odG8sIHBhcmFtcywgdHJhbnNPcHRzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgW1tUYXJnZXRTdGF0ZV1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGlzIGEgZmFjdG9yeSBtZXRob2QgZm9yIGNyZWF0aW5nIGEgVGFyZ2V0U3RhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgbWF5IGJlIHJldHVybmVkIGZyb20gYSBUcmFuc2l0aW9uIEhvb2sgdG8gcmVkaXJlY3QgYSB0cmFuc2l0aW9uLCBmb3IgZXhhbXBsZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLnRhcmdldCA9IGZ1bmN0aW9uIChpZGVudGlmaWVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIHJlbG9hZGluZywgZmluZCB0aGUgc3RhdGUgb2JqZWN0IHRvIHJlbG9hZCBmcm9tXHJcbiAgICAgICAgICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgIW9wdGlvbnMucmVsb2FkLm5hbWUpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZWxvYWQgc3RhdGUgb2JqZWN0Jyk7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O1xyXG4gICAgICAgICAgICBvcHRpb25zLnJlbG9hZFN0YXRlID0gb3B0aW9ucy5yZWxvYWQgPT09IHRydWUgPyByZWcucm9vdCgpIDogcmVnLm1hdGNoZXIuZmluZChvcHRpb25zLnJlbG9hZCwgb3B0aW9ucy5yZWxhdGl2ZSk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlbG9hZCAmJiAhb3B0aW9ucy5yZWxvYWRTdGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCByZWxvYWQgc3RhdGUgJ1wiICsgKGlzU3RyaW5nKG9wdGlvbnMucmVsb2FkKSA/IG9wdGlvbnMucmVsb2FkIDogb3B0aW9ucy5yZWxvYWQubmFtZSkgKyBcIidcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldEN1cnJlbnRQYXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XHJcbiAgICAgICAgICAgIHZhciBsYXRlc3RTdWNjZXNzID0gZ2xvYmFscy5zdWNjZXNzZnVsVHJhbnNpdGlvbnMucGVla1RhaWwoKTtcclxuICAgICAgICAgICAgdmFyIHJvb3RQYXRoID0gZnVuY3Rpb24gcm9vdFBhdGgoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW25ldyBQYXRoTm9kZShfdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5yb290KCkpXTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGxhdGVzdFN1Y2Nlc3MgPyBsYXRlc3RTdWNjZXNzLnRyZWVDaGFuZ2VzKCkudG8gOiByb290UGF0aCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTG93LWxldmVsIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBbW2dvXV0gbWV0aG9kICh3aGljaCB1c2VzIGB0cmFuc2l0aW9uVG9gIGludGVybmFsbHkpIGlzIHJlY29tbWVuZGVkIGluIG1vc3Qgc2l0dWF0aW9ucy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIGxldCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xyXG4gICAgICAgICAqICAgJHNjb3BlLmNoYW5nZVN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAqICAgICAkc3RhdGUudHJhbnNpdGlvblRvKCdjb250YWN0LmRldGFpbCcpO1xyXG4gICAgICAgICAqICAgfTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0byBTdGF0ZSBuYW1lIG9yIHN0YXRlIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0gdG9QYXJhbXMgQSBtYXAgb2YgdGhlIHBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHNlbnQgdG8gdGhlIHN0YXRlLFxyXG4gICAgICAgICAqICAgICAgd2lsbCBwb3B1bGF0ZSAkc3RhdGVQYXJhbXMuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgVHJhbnNpdGlvbiBvcHRpb25zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZiB0aGUgbmV3IHRyYW5zaXRpb24uIFNlZSBbW2dvXV1cclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLnRyYW5zaXRpb25UbyA9IGZ1bmN0aW9uICh0bywgdG9QYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgaWYgKHRvUGFyYW1zID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHRvUGFyYW1zID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcclxuICAgICAgICAgICAgdmFyIGdsb2JhbHMgPSByb3V0ZXIuZ2xvYmFscztcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRUcmFuc09wdHMpO1xyXG4gICAgICAgICAgICB2YXIgZ2V0Q3VycmVudCA9IGZ1bmN0aW9uIGdldEN1cnJlbnQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2xvYmFscy50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHsgY3VycmVudDogZ2V0Q3VycmVudCB9KTtcclxuICAgICAgICAgICAgdmFyIHJlZiA9IHRoaXMudGFyZ2V0KHRvLCB0b1BhcmFtcywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGF0aCA9IHRoaXMuZ2V0Q3VycmVudFBhdGgoKTtcclxuICAgICAgICAgICAgaWYgKCFyZWYuZXhpc3RzKCkpIHJldHVybiB0aGlzLl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUoY3VycmVudFBhdGgsIHJlZik7XHJcbiAgICAgICAgICAgIGlmICghcmVmLnZhbGlkKCkpIHJldHVybiBzaWxlbnRSZWplY3Rpb24ocmVmLmVycm9yKCkpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogU3BlY2lhbCBoYW5kbGluZyBmb3IgSWdub3JlZCwgQWJvcnRlZCwgYW5kIFJlZGlyZWN0ZWQgdHJhbnNpdGlvbnNcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogVGhlIHNlbWFudGljcyBmb3IgdGhlIHRyYW5zaXRpb24ucnVuKCkgcHJvbWlzZSBhbmQgdGhlIFN0YXRlU2VydmljZS50cmFuc2l0aW9uVG8oKVxyXG4gICAgICAgICAgICAgKiBwcm9taXNlIGRpZmZlci4gRm9yIGluc3RhbmNlLCB0aGUgcnVuKCkgcHJvbWlzZSBtYXkgYmUgcmVqZWN0ZWQgYmVjYXVzZSBpdCB3YXNcclxuICAgICAgICAgICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxyXG4gICAgICAgICAgICAgKiBubyBlcnJvciBvY2N1cnJlZC4gIExpa2V3aXNlLCB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIG1heSBiZSByZWplY3RlZCBiZWNhdXNlIG9mXHJcbiAgICAgICAgICAgICAqIGEgUmVkaXJlY3QsIGJ1dCB0aGUgdHJhbnNpdGlvblRvKCkgcHJvbWlzZSBpcyBjaGFpbmVkIHRvIHRoZSBuZXcgVHJhbnNpdGlvbidzIHByb21pc2UuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgcmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIHJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIodHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlamVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNMYXRlc3QgPSByb3V0ZXIuZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9PT0gdHJhbnNpdGlvbi4kaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBleHBvcnRzLlJlamVjdFR5cGUuSUdOT1JFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnNpZGVyIGlnbm9yZWQgYFRyYW5zaXRpb24ucnVuKClgIGFzIGEgc3VjY2Vzc2Z1bCBgdHJhbnNpdGlvblRvYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4oZ2xvYmFscy5jdXJyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gZXJyb3IuZGV0YWlsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gZXhwb3J0cy5SZWplY3RUeXBlLlNVUEVSU0VERUQgJiYgZXJyb3IucmVkaXJlY3RlZCAmJiBkZXRhaWwgaW5zdGFuY2VvZiBUYXJnZXRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYFRyYW5zaXRpb24ucnVuKClgIHdhcyByZWRpcmVjdGVkLCBhbGxvdyB0aGUgYHRyYW5zaXRpb25UbygpYCBwcm9taXNlIHRvIHJlc29sdmUgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBieSByZXR1cm5pbmcgdGhlIHByb21pc2UgZm9yIHRoZSBuZXcgKHJlZGlyZWN0KSBgVHJhbnNpdGlvbi5ydW4oKWAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3QgPSB0cmFuc2l0aW9uLnJlZGlyZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QucnVuKCkuY2F0Y2gocmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlcihyZWRpcmVjdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBleHBvcnRzLlJlamVjdFR5cGUuQUJPUlRFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBfdGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCByZWYpO1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvblRvUHJvbWlzZSA9IHRyYW5zaXRpb24ucnVuKCkuY2F0Y2gocmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlcih0cmFuc2l0aW9uKSk7XHJcbiAgICAgICAgICAgIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSh0cmFuc2l0aW9uVG9Qcm9taXNlKTsgLy8gaXNzdWUgIzI2NzZcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgcHJvbWlzZSBmb3IgdGhlIHRyYW5zaXRpb24sIHdoaWNoIGFsc28gaGFzIHRoZSB0cmFuc2l0aW9uIG9iamVjdCBvbiBpdC5cclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZCh0cmFuc2l0aW9uVG9Qcm9taXNlLCB7IHRyYW5zaXRpb246IHRyYW5zaXRpb24gfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHN0YXRlICppcyogdGhlIHByb3ZpZGVkIHN0YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTaW1pbGFyIHRvIFtbaW5jbHVkZXNdXSBidXQgb25seSBjaGVja3MgZm9yIHRoZSBmdWxsIHN0YXRlIG5hbWUuXHJcbiAgICAgICAgICogSWYgcGFyYW1zIGlzIHN1cHBsaWVkIHRoZW4gaXQgd2lsbCBiZSB0ZXN0ZWQgZm9yIHN0cmljdCBlcXVhbGl0eSBhZ2FpbnN0IHRoZSBjdXJyZW50XHJcbiAgICAgICAgICogYWN0aXZlIHBhcmFtcyBvYmplY3QsIHNvIGFsbCBwYXJhbXMgbXVzdCBtYXRjaCB3aXRoIG5vbmUgbWlzc2luZyBhbmQgbm8gZXh0cmFzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogJHN0YXRlLiRjdXJyZW50Lm5hbWUgPSAnY29udGFjdHMuZGV0YWlscy5pdGVtJztcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIGFic29sdXRlIG5hbWVcclxuICAgICAgICAgKiAkc3RhdGUuaXMoJ2NvbnRhY3QuZGV0YWlscy5pdGVtJyk7IC8vIHJldHVybnMgdHJ1ZVxyXG4gICAgICAgICAqICRzdGF0ZS5pcyhjb250YWN0RGV0YWlsSXRlbVN0YXRlT2JqZWN0KTsgLy8gcmV0dXJucyB0cnVlXHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyByZWxhdGl2ZSBuYW1lICguIGFuZCBeKSwgdHlwaWNhbGx5IGZyb20gYSB0ZW1wbGF0ZVxyXG4gICAgICAgICAqIC8vIEUuZy4gZnJvbSB0aGUgJ2NvbnRhY3RzLmRldGFpbHMnIHRlbXBsYXRlXHJcbiAgICAgICAgICogYGBgaHRtbFxyXG4gICAgICAgICAqIDxkaXYgbmctY2xhc3M9XCJ7aGlnaGxpZ2h0ZWQ6ICRzdGF0ZS5pcygnLml0ZW0nKX1cIj5JdGVtPC9kaXY+XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgVGhlIHN0YXRlIG5hbWUgKGFic29sdXRlIG9yIHJlbGF0aXZlKSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBjaGVjay5cclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIEEgcGFyYW0gb2JqZWN0LCBlLmcuIGB7c2VjdGlvbklkOiBzZWN0aW9uLmlkfWAsIHRoYXQgeW91J2QgbGlrZVxyXG4gICAgICAgICAqIHRvIHRlc3QgYWdhaW5zdCB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgQW4gb3B0aW9ucyBvYmplY3QuIFRoZSBvcHRpb25zIGFyZTpcclxuICAgICAgICAgKiAgIC0gYHJlbGF0aXZlYDogSWYgYHN0YXRlT3JOYW1lYCBpcyBhIHJlbGF0aXZlIHN0YXRlIG5hbWUgYW5kIGBvcHRpb25zLnJlbGF0aXZlYCBpcyBzZXQsIC5pcyB3aWxsXHJcbiAgICAgICAgICogICAgIHRlc3QgcmVsYXRpdmUgdG8gYG9wdGlvbnMucmVsYXRpdmVgIHN0YXRlIChvciBuYW1lKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIFJldHVybnMgdHJ1ZSBpZiBpdCBpcyB0aGUgc3RhdGUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgcGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50IH0pO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChzdGF0ZU9yTmFtZSwgb3B0aW9ucy5yZWxhdGl2ZSk7XHJcbiAgICAgICAgICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJGN1cnJlbnQgIT09IHN0YXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICghcGFyYW1zKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIHNjaGVtYSA9IHN0YXRlLnBhcmFtZXRlcnMoeyBpbmhlcml0OiB0cnVlLCBtYXRjaGluZ0tleXM6IHBhcmFtcyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFBhcmFtLmVxdWFscyhzY2hlbWEsIFBhcmFtLnZhbHVlcyhzY2hlbWEsIHBhcmFtcyksIHRoaXMucGFyYW1zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmluY2x1ZGVzKiB0aGUgcHJvdmlkZWQgc3RhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEEgbWV0aG9kIHRvIGRldGVybWluZSBpZiB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUgaXMgZXF1YWwgdG8gb3IgaXMgdGhlIGNoaWxkIG9mIHRoZVxyXG4gICAgICAgICAqIHN0YXRlIHN0YXRlTmFtZS4gSWYgYW55IHBhcmFtcyBhcmUgcGFzc2VkIHRoZW4gdGhleSB3aWxsIGJlIHRlc3RlZCBmb3IgYSBtYXRjaCBhcyB3ZWxsLlxyXG4gICAgICAgICAqIE5vdCBhbGwgdGhlIHBhcmFtZXRlcnMgbmVlZCB0byBiZSBwYXNzZWQsIGp1c3QgdGhlIG9uZXMgeW91J2QgbGlrZSB0byB0ZXN0IGZvciBlcXVhbGl0eS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZSB3aGVuIGAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSdgXHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiAvLyBVc2luZyBwYXJ0aWFsIG5hbWVzXHJcbiAgICAgICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHNcIik7IC8vIHJldHVybnMgdHJ1ZVxyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHNcIik7IC8vIHJldHVybnMgdHJ1ZVxyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHMuaXRlbVwiKTsgLy8gcmV0dXJucyB0cnVlXHJcbiAgICAgICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMubGlzdFwiKTsgLy8gcmV0dXJucyBmYWxzZVxyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImFib3V0XCIpOyAvLyByZXR1cm5zIGZhbHNlXHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEdsb2IgRXhhbXBsZXMgd2hlbiBgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbS51cmwnYDpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qLipcIik7IC8vIHJldHVybnMgdHJ1ZVxyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXHJcbiAgICAgICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKiouaXRlbS4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXHJcbiAgICAgICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLml0ZW0udXJsXCIpOyAvLyByZXR1cm5zIHRydWVcclxuICAgICAgICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKi51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxyXG4gICAgICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qXCIpOyAvLyByZXR1cm5zIGZhbHNlXHJcbiAgICAgICAgICogJHN0YXRlLmluY2x1ZGVzKFwiaXRlbS4qKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIEEgcGFydGlhbCBuYW1lLCByZWxhdGl2ZSBuYW1lLCBnbG9iIHBhdHRlcm4sXHJcbiAgICAgICAgICogICBvciBzdGF0ZSBvYmplY3QgdG8gYmUgc2VhcmNoZWQgZm9yIHdpdGhpbiB0aGUgY3VycmVudCBzdGF0ZSBuYW1lLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXMgQSBwYXJhbSBvYmplY3QsIGUuZy4gYHtzZWN0aW9uSWQ6IHNlY3Rpb24uaWR9YCxcclxuICAgICAgICAgKiAgIHRoYXQgeW91J2QgbGlrZSB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XHJcbiAgICAgICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxyXG4gICAgICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGl0IGRvZXMgaW5jbHVkZSB0aGUgc3RhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBwYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XHJcbiAgICAgICAgICAgIHZhciBnbG9iID0gaXNTdHJpbmcoc3RhdGVPck5hbWUpICYmIEdsb2IuZnJvbVN0cmluZyhzdGF0ZU9yTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChnbG9iKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWdsb2IubWF0Y2hlcyh0aGlzLiRjdXJyZW50Lm5hbWUpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZU9yTmFtZSA9IHRoaXMuJGN1cnJlbnQubmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChzdGF0ZU9yTmFtZSwgb3B0aW9ucy5yZWxhdGl2ZSksXHJcbiAgICAgICAgICAgICAgICBpbmNsdWRlID0gdGhpcy4kY3VycmVudC5pbmNsdWRlcztcclxuICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAoIWlzRGVmaW5lZChpbmNsdWRlW3N0YXRlLm5hbWVdKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmFtcykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXJhbS5lcXVhbHMoc2NoZW1hLCBQYXJhbS52YWx1ZXMoc2NoZW1hLCBwYXJhbXMpLCB0aGlzLnBhcmFtcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2VuZXJhdGVzIGEgVVJMIGZvciBhIHN0YXRlIGFuZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSB1cmwgZm9yIHRoZSBnaXZlbiBzdGF0ZSBwb3B1bGF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogZXhwZWN0KCRzdGF0ZS5ocmVmKFwiYWJvdXQucGVyc29uXCIsIHsgcGVyc29uOiBcImJvYlwiIH0pKS50b0VxdWFsKFwiL2Fib3V0L2JvYlwiKTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBnZW5lcmF0ZSBhIHVybCBmcm9tLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgc3RhdGUncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21waWxlZCBzdGF0ZSB1cmxcclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmhyZWYgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdEhyZWZPcHRzID0ge1xyXG4gICAgICAgICAgICAgICAgbG9zc3k6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWJzb2x1dGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRIcmVmT3B0cyk7XHJcbiAgICAgICAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzRGVmaW5lZChzdGF0ZSkpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbmhlcml0KSBwYXJhbXMgPSB0aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcclxuICAgICAgICAgICAgdmFyIG5hdiA9IHN0YXRlICYmIG9wdGlvbnMubG9zc3kgPyBzdGF0ZS5uYXZpZ2FibGUgOiBzdGF0ZTtcclxuICAgICAgICAgICAgaWYgKCFuYXYgfHwgbmF2LnVybCA9PT0gdW5kZWZpbmVkIHx8IG5hdi51cmwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxSb3V0ZXIuaHJlZihuYXYudXJsLCBwYXJhbXMsIHtcclxuICAgICAgICAgICAgICAgIGFic29sdXRlOiBvcHRpb25zLmFic29sdXRlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHMgb3IgZ2V0cyB0aGUgZGVmYXVsdCBbW3RyYW5zaXRpb25Ub11dIGVycm9yIGhhbmRsZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgZXJyb3IgaGFuZGxlciBpcyBjYWxsZWQgd2hlbiBhIFtbVHJhbnNpdGlvbl1dIGlzIHJlamVjdGVkIG9yIHdoZW4gYW55IGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgVHJhbnNpdGlvbi5cclxuICAgICAgICAgKiBUaGlzIGluY2x1ZGVzIGVycm9ycyBjYXVzZWQgYnkgcmVzb2x2ZXMgYW5kIHRyYW5zaXRpb24gaG9va3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOlxyXG4gICAgICAgICAqIFRoaXMgaGFuZGxlciBkb2VzIG5vdCByZWNlaXZlIGNlcnRhaW4gVHJhbnNpdGlvbiByZWplY3Rpb25zLlxyXG4gICAgICAgICAqIFJlZGlyZWN0ZWQgYW5kIElnbm9yZWQgVHJhbnNpdGlvbnMgYXJlIG5vdCBjb25zaWRlcmVkIHRvIGJlIGVycm9ycyBieSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBidWlsdC1pbiBkZWZhdWx0IGVycm9yIGhhbmRsZXIgbG9ncyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBZb3UgY2FuIHByb3ZpZGUgeW91ciBvd24gY3VzdG9tIGhhbmRsZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiBzdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgKiAgIC8vIERvIG5vdCBsb2cgdHJhbnNpdGlvblRvIGVycm9yc1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGhhbmRsZXIgYSBnbG9iYWwgZXJyb3IgaGFuZGxlciBmdW5jdGlvblxyXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGdsb2JhbCBlcnJvciBoYW5kbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5kZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXIgPSBoYW5kbGVyIHx8IHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYmFzZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeTtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiByZWcuZ2V0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZWcuZ2V0KHN0YXRlT3JOYW1lLCBiYXNlIHx8IHRoaXMuJGN1cnJlbnQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTGF6eSBsb2FkcyBhIHN0YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgYSBzdGF0ZSdzIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIHRoZSBzdGF0ZSB0aGF0IHNob3VsZCBiZSBsYXp5IGxvYWRlZFxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHRoZSBvcHRpb25hbCBUcmFuc2l0aW9uIGNvbnRleHQgdG8gdXNlIChpZiB0aGUgbGF6eUxvYWQgZnVuY3Rpb24gcmVxdWlyZXMgYW4gaW5qZWN0b3IsIGV0YylcclxuICAgICAgICAgKiBOb3RlOiBJZiBubyB0cmFuc2l0aW9uIGlzIHByb3ZpZGVkLCBhIG5vb3AgdHJhbnNpdGlvbiBpcyBjcmVhdGVkIHVzaW5nIHRoZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBjdXJyZW50IHN0YXRlLlxyXG4gICAgICAgICAqIFRoaXMgbm9vcCB0cmFuc2l0aW9uIGlzIG5vdCBhY3R1YWxseSBydW4uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gbGF6eSBsb2FkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5sYXp5TG9hZCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgdHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmxhenlMb2FkKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGxhenkgbG9hZCBcIiArIHN0YXRlT3JOYW1lKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYXRoID0gdGhpcy5nZXRDdXJyZW50UGF0aCgpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBjdXJyZW50UGF0aCk7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24gPSB0cmFuc2l0aW9uIHx8IHRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLmNyZWF0ZShjdXJyZW50UGF0aCwgdGFyZ2V0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGxhenlMb2FkU3RhdGUodHJhbnNpdGlvbiwgc3RhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFN0YXRlU2VydmljZTtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICMgVHJhbnNpdGlvbiBzdWJzeXN0ZW1cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1vZHVsZSBjb250YWlucyBBUElzIHJlbGF0ZWQgdG8gYSBUcmFuc2l0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFNlZTpcclxuICAgICAqIC0gW1tUcmFuc2l0aW9uU2VydmljZV1dXHJcbiAgICAgKiAtIFtbVHJhbnNpdGlvbl1dXHJcbiAgICAgKiAtIFtbSG9va0ZuXV0sIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dLCBbW0hvb2tNYXRjaENyaXRlcmlhXV0sIFtbSG9va1Jlc3VsdF1dXHJcbiAgICAgKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBwcmVmZXJyZWRcclxuICAgICAqIEBtb2R1bGUgdHJhbnNpdGlvblxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKiBAbW9kdWxlIHZhbmlsbGFcclxuICAgICAqL1xyXG4gICAgLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIEFuIGFuZ3VsYXIxLWxpa2UgcHJvbWlzZSBhcGlcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxyXG4gICAgICogW2FuZ3VsYXIgMSBwcm9taXNlIGFwaV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpXHJcbiAgICAgKlxyXG4gICAgICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxyXG4gICAgICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBBUEkgcHJvdmlkZXMgbmF0aXZlIEVTNiBwcm9taXNlIHN1cHBvcnQgd3JhcHBlZCBhcyBhICRxLWxpa2UgQVBJLlxyXG4gICAgICogSW50ZXJuYWxseSwgVUktUm91dGVyIHVzZXMgdGhpcyAkcSBvYmplY3QgdG8gcGVyZm9ybSBwcm9taXNlIG9wZXJhdGlvbnMuXHJcbiAgICAgKiBUaGUgYGFuZ3VsYXItdWktcm91dGVyYCAodWktcm91dGVyIGZvciBhbmd1bGFyIDEpIHVzZXMgdGhlICRxIEFQSSBwcm92aWRlZCBieSBhbmd1bGFyLlxyXG4gICAgICpcclxuICAgICAqICRxLWxpa2UgcHJvbWlzZSBhcGlcclxuICAgICAqL1xyXG4gICAgdmFyICRxID0ge1xyXG4gICAgICAgIC8qKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBwcm9taXNlICovXHJcbiAgICAgICAgd2hlbjogZnVuY3Rpb24gd2hlbih2YWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqIE5vcm1hbGl6ZXMgYSB2YWx1ZSBhcyBhIHByb21pc2UgcmVqZWN0aW9uICovXHJcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QodmFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodmFsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiogQHJldHVybnMgYSBkZWZlcnJlZCBvYmplY3QsIHdoaWNoIGhhcyBgcmVzb2x2ZWAgYW5kIGByZWplY3RgIGZ1bmN0aW9ucyAqL1xyXG4gICAgICAgIGRlZmVyOiBmdW5jdGlvbiBkZWZlcigpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0ge307XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKiBMaWtlIFByb21pc2UuYWxsKCksIGJ1dCBhbHNvIHN1cHBvcnRzIG9iamVjdCBrZXkvcHJvbWlzZSBub3RhdGlvbiBsaWtlICRxICovXHJcbiAgICAgICAgYWxsOiBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkocHJvbWlzZXMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc09iamVjdChwcm9taXNlcykpIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgcHJvbWlzZXMgbWFwIHRvIHByb21pc2VzIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBlYWNoIHByb21pc2UgcmVzb2x2ZXMsIG1hcCBpdCB0byBhIHR1cGxlIHsga2V5OiBrZXksIHZhbDogdmFsIH1cclxuICAgICAgICAgICAgICAgIHZhciBjaGFpbiA9IE9iamVjdC5rZXlzKHByb21pc2VzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlc1trZXldLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBrZXk6IGtleSwgdmFsOiB2YWwgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlbiB3YWl0IGZvciBhbGwgcHJvbWlzZXMgdG8gcmVzb2x2ZSwgYW5kIGNvbnZlcnQgdGhlbSBiYWNrIHRvIGFuIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChjaGFpbikudGhlbihmdW5jdGlvbiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdHVwbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW3R1cGxlLmtleV0gPSB0dXBsZS52YWw7cmV0dXJuIGFjYztcclxuICAgICAgICAgICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAqIEBtb2R1bGUgdmFuaWxsYVxyXG4gICAgICovXHJcbiAgICAvKiogKi9cclxuICAgIC8vIGdsb2JhbGx5IGF2YWlsYWJsZSBpbmplY3RhYmxlc1xyXG4gICAgdmFyIGdsb2JhbHMgPSB7fTtcclxuICAgIHZhciBTVFJJUF9DT01NRU5UUyA9IC8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZztcclxuICAgIHZhciBBUkdVTUVOVF9OQU1FUyA9IC8oW15cXHMsXSspL2c7XHJcbiAgICAvKipcclxuICAgICAqIEEgYmFzaWMgYW5ndWxhcjEtbGlrZSBpbmplY3RvciBhcGlcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxyXG4gICAgICogW2FuZ3VsYXIgMSBkZXBlbmRlbmN5IGluamVjdG9yXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYXV0by9zZXJ2aWNlLyRpbmplY3RvcilcclxuICAgICAqXHJcbiAgICAgKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXHJcbiAgICAgKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG9iamVjdCBwcm92aWRlcyBhIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIGEgZ2xvYmFsbHkgc2NvcGVkIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbS5cclxuICAgICAqIEl0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgREkgYXBwcm9hY2hlczpcclxuICAgICAqXHJcbiAgICAgKiAjIyMgRnVuY3Rpb24gcGFyYW1ldGVyIG5hbWVzXHJcbiAgICAgKlxyXG4gICAgICogQSBmdW5jdGlvbidzIGAudG9TdHJpbmcoKWAgaXMgY2FsbGVkLCBhbmQgdGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgcGFyc2VkLlxyXG4gICAgICogVGhpcyBvbmx5IHdvcmtzIHdoZW4gdGhlIHBhcmFtZXRlciBuYW1lcyBhcmVuJ3QgXCJtYW5nbGVkXCIgYnkgYSBtaW5pZmllciBzdWNoIGFzIFVnbGlmeUpTLlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKEZvb1NlcnZpY2UsIEJhclNlcnZpY2UpIHtcclxuICAgICAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWRcclxuICAgICAqIH1cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBGdW5jdGlvbiBhbm5vdGF0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQSBmdW5jdGlvbiBtYXkgYmUgYW5ub3RhdGVkIHdpdGggYW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBuYW1lcyBhcyB0aGUgYCRpbmplY3RgIHByb3BlcnR5LlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBpbmplY3RlZEZ1bmN0aW9uLiRpbmplY3QgPSBbICdGb29TZXJ2aWNlJywgJ0JhclNlcnZpY2UnIF07XHJcbiAgICAgKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKGZzLCBicykge1xyXG4gICAgICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xyXG4gICAgICogfVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEFycmF5IG5vdGF0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQW4gYXJyYXkgcHJvdmlkZXMgdGhlIG5hbWVzIG9mIHRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0IChhcyBzdHJpbmdzKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJywgZnVuY3Rpb24gKGZzLCBicykge1xyXG4gICAgICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xyXG4gICAgICogfV1cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHskSW5qZWN0b3JMaWtlfVxyXG4gICAgICovXHJcbiAgICB2YXIgJGluamVjdG9yID0ge1xyXG4gICAgICAgIC8qKiBHZXRzIGFuIG9iamVjdCBmcm9tIERJIGJhc2VkIG9uIGEgc3RyaW5nIHRva2VuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQobmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsc1tuYW1lXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW4gb2JqZWN0IG5hbWVkIGBuYW1lYCBleGlzdHMgaW4gZ2xvYmFsIERJICovXHJcbiAgICAgICAgaGFzOiBmdW5jdGlvbiBoYXMobmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGluamVjdG9yLmdldChuYW1lKSAhPSBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5qZWN0cyBhIGZ1bmN0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZm4gdGhlIGZ1bmN0aW9uIHRvIGluamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IHRoZSBmdW5jdGlvbidzIGB0aGlzYCBiaW5kaW5nXHJcbiAgICAgICAgICogQHBhcmFtIGxvY2FscyBBbiBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIERJIHRva2VucyBhbmQgdmFsdWVzLCBzdWNoIGFzIGB7IHNvbWVUb2tlbjogeyBmb286IDEgfSB9YFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24gaW52b2tlKGZuLCBjb250ZXh0LCBsb2NhbHMpIHtcclxuICAgICAgICAgICAgdmFyIGFsbCA9IGV4dGVuZCh7fSwgZ2xvYmFscywgbG9jYWxzIHx8IHt9KTtcclxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICRpbmplY3Rvci5hbm5vdGF0ZShmbik7XHJcbiAgICAgICAgICAgIHZhciBlbnN1cmVFeGlzdCA9IGFzc2VydFByZWRpY2F0ZShmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsLmhhc093blByb3BlcnR5KGtleSk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIkRJIGNhbid0IGZpbmQgaW5qZWN0YWJsZTogJ1wiICsga2V5ICsgXCInXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IHBhcmFtcy5maWx0ZXIoZW5zdXJlRXhpc3QpLm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbFt4XTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO2Vsc2UgcmV0dXJuIGZuLnNsaWNlKC0xKVswXS5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBmdW5jdGlvbidzIGRlcGVuZGVuY2llc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQW5hbHl6ZXMgYSBmdW5jdGlvbiAob3IgYXJyYXkpIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIERJIHRva2VucyB0aGF0IHRoZSBmdW5jdGlvbiByZXF1aXJlcy5cclxuICAgICAgICAgKiBAcmV0dXJuIGFuIGFycmF5IG9mIGBzdHJpbmdgc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFubm90YXRlOiBmdW5jdGlvbiBhbm5vdGF0ZShmbikge1xyXG4gICAgICAgICAgICBpZiAoIWlzSW5qZWN0YWJsZShmbikpIHRocm93IG5ldyBFcnJvcihcIk5vdCBhbiBpbmplY3RhYmxlIGZ1bmN0aW9uOiBcIiArIGZuKTtcclxuICAgICAgICAgICAgaWYgKGZuICYmIGZuLiRpbmplY3QpIHJldHVybiBmbi4kaW5qZWN0O1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShmbikpIHJldHVybiBmbi5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHZhciBmblN0ciA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm5TdHIuc2xpY2UoZm5TdHIuaW5kZXhPZignKCcpICsgMSwgZm5TdHIuaW5kZXhPZignKScpKS5tYXRjaChBUkdVTUVOVF9OQU1FUyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgfHwgW107XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICogQG1vZHVsZSB2YW5pbGxhXHJcbiAgICAgKi9cclxuICAgIC8qKiAqL1xyXG4gICAgdmFyIGtleVZhbHNUb09iamVjdFIgPSBmdW5jdGlvbiBrZXlWYWxzVG9PYmplY3RSKGFjY3VtLCBfYSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBfYVswXSxcclxuICAgICAgICAgICAgdmFsID0gX2FbMV07XHJcbiAgICAgICAgaWYgKCFhY2N1bS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIGFjY3VtW2tleV0gPSB2YWw7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGFjY3VtW2tleV0pKSB7XHJcbiAgICAgICAgICAgIGFjY3VtW2tleV0ucHVzaCh2YWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjY3VtW2tleV0gPSBbYWNjdW1ba2V5XSwgdmFsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFjY3VtO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRQYXJhbXMgPSBmdW5jdGlvbiBnZXRQYXJhbXMocXVlcnlTdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLmZpbHRlcihpZGVudGl0eSkubWFwKHNwbGl0RXF1YWwpLnJlZHVjZShrZXlWYWxzVG9PYmplY3RSLCB7fSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGFyc2VVcmwkMSh1cmwpIHtcclxuICAgICAgICB2YXIgb3JFbXB0eVN0cmluZyA9IGZ1bmN0aW9uIG9yRW1wdHlTdHJpbmcoeCkge1xyXG4gICAgICAgICAgICByZXR1cm4geCB8fCBcIlwiO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIF9hID0gc3BsaXRIYXNoKHVybCkubWFwKG9yRW1wdHlTdHJpbmcpLFxyXG4gICAgICAgICAgICBiZWZvcmVoYXNoID0gX2FbMF0sXHJcbiAgICAgICAgICAgIGhhc2ggPSBfYVsxXTtcclxuICAgICAgICB2YXIgX2IgPSBzcGxpdFF1ZXJ5KGJlZm9yZWhhc2gpLm1hcChvckVtcHR5U3RyaW5nKSxcclxuICAgICAgICAgICAgcGF0aCA9IF9iWzBdLFxyXG4gICAgICAgICAgICBzZWFyY2ggPSBfYlsxXTtcclxuICAgICAgICByZXR1cm4geyBwYXRoOiBwYXRoLCBzZWFyY2g6IHNlYXJjaCwgaGFzaDogaGFzaCwgdXJsOiB1cmwgfTtcclxuICAgIH1cclxuICAgIHZhciBidWlsZFVybCA9IGZ1bmN0aW9uIGJ1aWxkVXJsKGxvYykge1xyXG4gICAgICAgIHZhciBwYXRoID0gbG9jLnBhdGgoKTtcclxuICAgICAgICB2YXIgc2VhcmNoT2JqZWN0ID0gbG9jLnNlYXJjaCgpO1xyXG4gICAgICAgIHZhciBoYXNoID0gbG9jLmhhc2goKTtcclxuICAgICAgICB2YXIgc2VhcmNoID0gT2JqZWN0LmtleXMoc2VhcmNoT2JqZWN0KS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBzZWFyY2hPYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgdmFyIHZhbHMgPSBpc0FycmF5KHBhcmFtKSA/IHBhcmFtIDogW3BhcmFtXTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHMubWFwKGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBrZXkgKyBcIj1cIiArIHZhbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkucmVkdWNlKHVubmVzdFIsIFtdKS5qb2luKFwiJlwiKTtcclxuICAgICAgICByZXR1cm4gcGF0aCArIChzZWFyY2ggPyBcIj9cIiArIHNlYXJjaCA6IFwiXCIpICsgKGhhc2ggPyBcIiNcIiArIGhhc2ggOiBcIlwiKTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBsb2NhdGlvblBsdWdpbkZhY3RvcnkobmFtZSwgaXNIdG1sNSwgc2VydmljZUNsYXNzLCBjb25maWd1cmF0aW9uQ2xhc3MpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJvdXRlcikge1xyXG4gICAgICAgICAgICB2YXIgc2VydmljZSA9IHJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSBuZXcgc2VydmljZUNsYXNzKHJvdXRlcik7XHJcbiAgICAgICAgICAgIHZhciBjb25maWd1cmF0aW9uID0gcm91dGVyLmxvY2F0aW9uQ29uZmlnID0gbmV3IGNvbmZpZ3VyYXRpb25DbGFzcyhyb3V0ZXIsIGlzSHRtbDUpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBkaXNwb3NlKHJvdXRlcikge1xyXG4gICAgICAgICAgICAgICAgcm91dGVyLmRpc3Bvc2Uoc2VydmljZSk7XHJcbiAgICAgICAgICAgICAgICByb3V0ZXIuZGlzcG9zZShjb25maWd1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiBuYW1lLCBzZXJ2aWNlOiBzZXJ2aWNlLCBjb25maWd1cmF0aW9uOiBjb25maWd1cmF0aW9uLCBkaXNwb3NlOiBkaXNwb3NlIH07XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICogQG1vZHVsZSB2YW5pbGxhXHJcbiAgICAgKi8gLyoqICovXHJcbiAgICAvKiogQSBiYXNlIGBMb2NhdGlvblNlcnZpY2VzYCAqL1xyXG4gICAgdmFyIEJhc2VMb2NhdGlvblNlcnZpY2VzID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBCYXNlTG9jYXRpb25TZXJ2aWNlcyhyb3V0ZXIsIGZpcmVBZnRlclVwZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmZpcmVBZnRlclVwZGF0ZSA9IGZpcmVBZnRlclVwZGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYihldnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmhhc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VVcmwkMShfdGhpcy5fZ2V0KCkpLmhhc2g7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZVVybCQxKF90aGlzLl9nZXQoKSkucGF0aDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGFyYW1zKHBhcnNlVXJsJDEoX3RoaXMuX2dldCgpKS5zZWFyY2gpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9sb2NhdGlvbiA9IHJvb3QubG9jYXRpb247XHJcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkgPSByb290Lmhpc3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEJhc2VMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiAodXJsLCByZXBsYWNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodXJsKSAmJiB1cmwgIT09IHRoaXMuX2dldCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXQobnVsbCwgbnVsbCwgdXJsLCByZXBsYWNlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpcmVBZnRlclVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2IoeyB1cmw6IHVybCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRVcmwodGhpcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBCYXNlTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2goY2IpO1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUZyb20oX3RoaXMuX2xpc3RlbmVycywgY2IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcbiAgICAgICAgICAgIGRlcmVnQWxsKHRoaXMuX2xpc3RlbmVycyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gQmFzZUxvY2F0aW9uU2VydmljZXM7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgdmFyIF9fZXh0ZW5kcyA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgICAgIGQuX19wcm90b19fID0gYjtcclxuICAgICAgICB9IHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gX18oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0oKTtcclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKiBAbW9kdWxlIHZhbmlsbGFcclxuICAgICAqL1xyXG4gICAgLyoqICovXHJcbiAgICAvKiogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCB1c2VzIHRoZSBicm93c2VyIGhhc2ggXCIjXCIgdG8gZ2V0L3NldCB0aGUgY3VycmVudCBsb2NhdGlvbiAqL1xyXG4gICAgdmFyIEhhc2hMb2NhdGlvblNlcnZpY2UgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyhIYXNoTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIEhhc2hMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgZmFsc2UpIHx8IHRoaXM7XHJcbiAgICAgICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cmltSGFzaFZhbCh0aGlzLl9sb2NhdGlvbi5oYXNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9jYXRpb24uaGFzaCA9IHVybDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIHJvdXRlcik7XHJcbiAgICAgICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBIYXNoTG9jYXRpb25TZXJ2aWNlO1xyXG4gICAgfShCYXNlTG9jYXRpb25TZXJ2aWNlcyk7XHJcblxyXG4gICAgdmFyIF9fZXh0ZW5kcyQxID0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICAgICAgZC5fX3Byb3RvX18gPSBiO1xyXG4gICAgICAgIH0gfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBfXygpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgICAgICB9O1xyXG4gICAgfSgpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAqIEBtb2R1bGUgdmFuaWxsYVxyXG4gICAgICovXHJcbiAgICAvKiogKi9cclxuICAgIC8qKiBBIGBMb2NhdGlvblNlcnZpY2VzYCB0aGF0IGdldHMvc2V0cyB0aGUgY3VycmVudCBsb2NhdGlvbiBmcm9tIGFuIGluLW1lbW9yeSBvYmplY3QgKi9cclxuICAgIHZhciBNZW1vcnlMb2NhdGlvblNlcnZpY2UgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyQxKE1lbW9yeUxvY2F0aW9uU2VydmljZSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBNZW1vcnlMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCByb3V0ZXIsIHRydWUpIHx8IHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE1lbW9yeUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VybDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lbW9yeUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uIChzdGF0ZSwgdGl0bGUsIHVybCwgcmVwbGFjZSkge1xyXG4gICAgICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gTWVtb3J5TG9jYXRpb25TZXJ2aWNlO1xyXG4gICAgfShCYXNlTG9jYXRpb25TZXJ2aWNlcyk7XHJcblxyXG4gICAgdmFyIF9fZXh0ZW5kcyQyID0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICAgICAgZC5fX3Byb3RvX18gPSBiO1xyXG4gICAgICAgIH0gfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBfXygpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgICAgICB9O1xyXG4gICAgfSgpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGBMb2NhdGlvblNlcnZpY2VzYCB0aGF0IGdldHMvc2V0cyB0aGUgY3VycmVudCBsb2NhdGlvbiB1c2luZyB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgYW5kIGBoaXN0b3J5YCBhcGlzXHJcbiAgICAgKlxyXG4gICAgICogVXNlcyBgaGlzdG9yeS5wdXNoU3RhdGVgIGFuZCBgaGlzdG9yeS5yZXBsYWNlU3RhdGVgXHJcbiAgICAgKi9cclxuICAgIHZhciBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIF9fZXh0ZW5kcyQyKFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSwgX3N1cGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgdHJ1ZSkgfHwgdGhpcztcclxuICAgICAgICAgICAgX3RoaXMuX2NvbmZpZyA9IHJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZztcclxuICAgICAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBiYXNlIHByZWZpeCB3aXRob3V0OlxyXG4gICAgICAgICAqIC0gdHJhaWxpbmcgc2xhc2hcclxuICAgICAgICAgKiAtIHRyYWlsaW5nIGZpbGVuYW1lXHJcbiAgICAgICAgICogLSBwcm90b2NvbCBhbmQgaG9zdG5hbWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIDxiYXNlIGhyZWY9Jy9iYXNlL2luZGV4Lmh0bWwnPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXHJcbiAgICAgICAgICogSWYgPGJhc2UgaHJlZj0naHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jhc2UvaW5kZXguaHRtbCc+LCB0aGlzIHJldHVybnMgJy9iYXNlJy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNlZTogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9kZXYvc2VtYW50aWNzLmh0bWwjdGhlLWJhc2UtZWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldEJhc2VQcmVmaXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpcEZpbGUodGhpcy5fY29uZmlnLmJhc2VIcmVmKCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLl9sb2NhdGlvbixcclxuICAgICAgICAgICAgICAgIHBhdGhuYW1lID0gX2EucGF0aG5hbWUsXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gX2EuaGFzaCxcclxuICAgICAgICAgICAgICAgIHNlYXJjaCA9IF9hLnNlYXJjaDtcclxuICAgICAgICAgICAgc2VhcmNoID0gc3BsaXRRdWVyeShzZWFyY2gpWzFdOyAvLyBzdHJpcCA/IGlmIGZvdW5kXHJcbiAgICAgICAgICAgIGhhc2ggPSBzcGxpdEhhc2goaGFzaClbMV07IC8vIHN0cmlwICMgaWYgZm91bmRcclxuICAgICAgICAgICAgdmFyIGJhc2VQcmVmaXggPSB0aGlzLl9nZXRCYXNlUHJlZml4KCk7XHJcbiAgICAgICAgICAgIHZhciBleGFjdE1hdGNoID0gcGF0aG5hbWUgPT09IHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRzV2l0aCA9IHBhdGhuYW1lLnN0YXJ0c1dpdGgoYmFzZVByZWZpeCk7XHJcbiAgICAgICAgICAgIHBhdGhuYW1lID0gZXhhY3RNYXRjaCA/ICcvJyA6IHN0YXJ0c1dpdGggPyBwYXRobmFtZS5zdWJzdHJpbmcoYmFzZVByZWZpeC5sZW5ndGgpIDogcGF0aG5hbWU7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRobmFtZSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyAoaGFzaCA/ICcjJyArIGhhc2ggOiAnJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcclxuICAgICAgICAgICAgdmFyIGZ1bGxVcmwgPSB0aGlzLl9nZXRCYXNlUHJlZml4KCkgKyB1cmw7XHJcbiAgICAgICAgICAgIGlmIChyZXBsYWNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgdGl0bGUsIGZ1bGxVcmwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKHJvdXRlcikge1xyXG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCByb3V0ZXIpO1xyXG4gICAgICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5fbGlzdGVuZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcclxuICAgIH0oQmFzZUxvY2F0aW9uU2VydmljZXMpO1xyXG5cclxuICAgIC8qKiBBIGBMb2NhdGlvbkNvbmZpZ2AgbW9jayB0aGF0IGdldHMvc2V0cyBhbGwgY29uZmlnIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xyXG4gICAgdmFyIE1lbW9yeUxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBNZW1vcnlMb2NhdGlvbkNvbmZpZygpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5fYmFzZUhyZWYgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5fcG9ydCA9IDgwO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm90b2NvbCA9IFwiaHR0cFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9ob3N0ID0gXCJsb2NhbGhvc3RcIjtcclxuICAgICAgICAgICAgdGhpcy5faGFzaFByZWZpeCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMucG9ydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fcG9ydDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5wcm90b2NvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fcHJvdG9jb2w7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5faG9zdDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5iYXNlSHJlZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fYmFzZUhyZWY7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmhhc2hQcmVmaXggPSBmdW5jdGlvbiAobmV3dmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKG5ld3ZhbCkgPyBfdGhpcy5faGFzaFByZWZpeCA9IG5ld3ZhbCA6IF90aGlzLl9oYXNoUHJlZml4O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UgPSBub29wJDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBNZW1vcnlMb2NhdGlvbkNvbmZpZztcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbGFwaVxyXG4gICAgICogQG1vZHVsZSB2YW5pbGxhXHJcbiAgICAgKi9cclxuICAgIC8qKiAqL1xyXG4gICAgLyoqIEEgYExvY2F0aW9uQ29uZmlnYCB0aGF0IGRlbGVnYXRlcyB0byB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgb2JqZWN0ICovXHJcbiAgICB2YXIgQnJvd3NlckxvY2F0aW9uQ29uZmlnID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBCcm93c2VyTG9jYXRpb25Db25maWcocm91dGVyLCBfaXNIdG1sNSkge1xyXG4gICAgICAgICAgICBpZiAoX2lzSHRtbDUgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgX2lzSHRtbDUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pc0h0bWw1ID0gX2lzSHRtbDU7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VIcmVmID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLl9oYXNoUHJlZml4ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5wb3J0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24ucG9ydCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihsb2NhdGlvbi5wb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm90b2NvbCgpID09PSAnaHR0cHMnID8gNDQzIDogODA7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLnByb3RvY29sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgvOi9nLCAnJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLmhvc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ob3N0bmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNIdG1sNTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaGFzaFByZWZpeCA9IGZ1bmN0aW9uIChuZXdwcmVmaXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChuZXdwcmVmaXgpID8gdGhpcy5faGFzaFByZWZpeCA9IG5ld3ByZWZpeCA6IHRoaXMuX2hhc2hQcmVmaXg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5iYXNlSHJlZiA9IGZ1bmN0aW9uIChocmVmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQoaHJlZikgPyB0aGlzLl9iYXNlSHJlZiA9IGhyZWYgOiBpc0RlZmluZWQodGhpcy5fYmFzZUhyZWYpID8gdGhpcy5fYmFzZUhyZWYgOiB0aGlzLmFwcGx5RG9jdW1lbnRCYXNlSHJlZigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5hcHBseURvY3VtZW50QmFzZUhyZWYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXNlVGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJiYXNlXCIpWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYmFzZUhyZWYgPSBiYXNlVGFnID8gYmFzZVRhZy5ocmVmLnN1YnN0cihsb2NhdGlvbi5vcmlnaW4ubGVuZ3RoKSA6IFwiXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICByZXR1cm4gQnJvd3NlckxvY2F0aW9uQ29uZmlnO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsYXBpXHJcbiAgICAgKiBAbW9kdWxlIHZhbmlsbGFcclxuICAgICAqL1xyXG4gICAgLyoqICovXHJcbiAgICBmdW5jdGlvbiBzZXJ2aWNlc1BsdWdpbihyb3V0ZXIpIHtcclxuICAgICAgICBzZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XHJcbiAgICAgICAgc2VydmljZXMuJHEgPSAkcTtcclxuICAgICAgICByZXR1cm4geyBuYW1lOiBcInZhbmlsbGEuc2VydmljZXNcIiwgJHE6ICRxLCAkaW5qZWN0b3I6ICRpbmplY3RvciwgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9IH07XHJcbiAgICB9XHJcbiAgICAvKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHVzZXMgdGhlIGJyb3dzZXIgaGFzaCB0byBnZXQvc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uICovXHJcbiAgICB2YXIgaGFzaExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLmhhc2hCYW5nTG9jYXRpb24nLCBmYWxzZSwgSGFzaExvY2F0aW9uU2VydmljZSwgQnJvd3NlckxvY2F0aW9uQ29uZmlnKTtcclxuICAgIC8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gdXNpbmcgdGhlIGJyb3dzZXIncyBgbG9jYXRpb25gIGFuZCBgaGlzdG9yeWAgYXBpcyAqL1xyXG4gICAgdmFyIHB1c2hTdGF0ZUxvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KFwidmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvblwiLCB0cnVlLCBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UsIEJyb3dzZXJMb2NhdGlvbkNvbmZpZyk7XHJcbiAgICAvKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xyXG4gICAgdmFyIG1lbW9yeUxvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KFwidmFuaWxsYS5tZW1vcnlMb2NhdGlvblwiLCBmYWxzZSwgTWVtb3J5TG9jYXRpb25TZXJ2aWNlLCBNZW1vcnlMb2NhdGlvbkNvbmZpZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxhcGlcclxuICAgICAqIEBtb2R1bGUgdmFuaWxsYVxyXG4gICAgICovXHJcbiAgICAvKiogKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcclxuICAgICAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBwcmVmZXJyZWRcclxuICAgICAqIEBtb2R1bGUgY29yZVxyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xyXG4gICAgdmFyIFVJUm91dGVyUGx1Z2luQmFzZSA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVUlSb3V0ZXJQbHVnaW5CYXNlKCkge31cclxuICAgICAgICBVSVJvdXRlclBsdWdpbkJhc2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7fTtcclxuICAgICAgICByZXR1cm4gVUlSb3V0ZXJQbHVnaW5CYXNlO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvcmVhcGlcclxuICAgICAqIEBtb2R1bGUgY29tbW9uXHJcbiAgICAgKi8gLyoqICovXHJcblxyXG4gICAgdmFyIGluZGV4JDEgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICByb290OiByb290LFxyXG4gICAgICAgIGZyb21Kc29uOiBmcm9tSnNvbixcclxuICAgICAgICB0b0pzb246IHRvSnNvbixcclxuICAgICAgICBmb3JFYWNoOiBmb3JFYWNoLFxyXG4gICAgICAgIGV4dGVuZDogZXh0ZW5kLFxyXG4gICAgICAgIGVxdWFsczogZXF1YWxzLFxyXG4gICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSxcclxuICAgICAgICBub29wOiBub29wJDEsXHJcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnM6IGNyZWF0ZVByb3h5RnVuY3Rpb25zLFxyXG4gICAgICAgIGluaGVyaXQ6IGluaGVyaXQsXHJcbiAgICAgICAgaW5BcnJheTogaW5BcnJheSxcclxuICAgICAgICBfaW5BcnJheTogX2luQXJyYXksXHJcbiAgICAgICAgcmVtb3ZlRnJvbTogcmVtb3ZlRnJvbSxcclxuICAgICAgICBfcmVtb3ZlRnJvbTogX3JlbW92ZUZyb20sXHJcbiAgICAgICAgcHVzaFRvOiBwdXNoVG8sXHJcbiAgICAgICAgX3B1c2hUbzogX3B1c2hUbyxcclxuICAgICAgICBkZXJlZ0FsbDogZGVyZWdBbGwsXHJcbiAgICAgICAgZGVmYXVsdHM6IGRlZmF1bHRzLFxyXG4gICAgICAgIG1lcmdlUjogbWVyZ2VSLFxyXG4gICAgICAgIGFuY2VzdG9yczogYW5jZXN0b3JzLFxyXG4gICAgICAgIHBpY2s6IHBpY2ssXHJcbiAgICAgICAgb21pdDogb21pdCxcclxuICAgICAgICBwbHVjazogcGx1Y2ssXHJcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXHJcbiAgICAgICAgZmluZDogZmluZCxcclxuICAgICAgICBtYXBPYmo6IG1hcE9iaixcclxuICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcclxuICAgICAgICBhbGxUcnVlUjogYWxsVHJ1ZVIsXHJcbiAgICAgICAgYW55VHJ1ZVI6IGFueVRydWVSLFxyXG4gICAgICAgIHVubmVzdFI6IHVubmVzdFIsXHJcbiAgICAgICAgZmxhdHRlblI6IGZsYXR0ZW5SLFxyXG4gICAgICAgIHB1c2hSOiBwdXNoUixcclxuICAgICAgICB1bmlxUjogdW5pcVIsXHJcbiAgICAgICAgdW5uZXN0OiB1bm5lc3QsXHJcbiAgICAgICAgZmxhdHRlbjogZmxhdHRlbixcclxuICAgICAgICBhc3NlcnRQcmVkaWNhdGU6IGFzc2VydFByZWRpY2F0ZSxcclxuICAgICAgICBhc3NlcnRNYXA6IGFzc2VydE1hcCxcclxuICAgICAgICBhc3NlcnRGbjogYXNzZXJ0Rm4sXHJcbiAgICAgICAgcGFpcnM6IHBhaXJzLFxyXG4gICAgICAgIGFycmF5VHVwbGVzOiBhcnJheVR1cGxlcyxcclxuICAgICAgICBhcHBseVBhaXJzOiBhcHBseVBhaXJzLFxyXG4gICAgICAgIHRhaWw6IHRhaWwsXHJcbiAgICAgICAgY29weTogY29weSxcclxuICAgICAgICBfZXh0ZW5kOiBfZXh0ZW5kLFxyXG4gICAgICAgIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZTogc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlLFxyXG4gICAgICAgIHNpbGVudFJlamVjdGlvbjogc2lsZW50UmVqZWN0aW9uLFxyXG4gICAgICAgIG5vdEltcGxlbWVudGVkOiBub3RJbXBsZW1lbnRlZCxcclxuICAgICAgICBzZXJ2aWNlczogc2VydmljZXMsXHJcbiAgICAgICAgR2xvYjogR2xvYixcclxuICAgICAgICBjdXJyeTogY3VycnksXHJcbiAgICAgICAgY29tcG9zZTogY29tcG9zZSxcclxuICAgICAgICBwaXBlOiBwaXBlLFxyXG4gICAgICAgIHByb3A6IHByb3AsXHJcbiAgICAgICAgcHJvcEVxOiBwcm9wRXEsXHJcbiAgICAgICAgcGFyc2U6IHBhcnNlLFxyXG4gICAgICAgIG5vdDogbm90LFxyXG4gICAgICAgIGFuZDogYW5kLFxyXG4gICAgICAgIG9yOiBvcixcclxuICAgICAgICBhbGw6IGFsbCxcclxuICAgICAgICBhbnk6IGFueSxcclxuICAgICAgICBpczogaXMsXHJcbiAgICAgICAgZXE6IGVxLFxyXG4gICAgICAgIHZhbDogdmFsLFxyXG4gICAgICAgIGludm9rZTogaW52b2tlLFxyXG4gICAgICAgIHBhdHRlcm46IHBhdHRlcm4sXHJcbiAgICAgICAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxyXG4gICAgICAgIGlzRGVmaW5lZDogaXNEZWZpbmVkLFxyXG4gICAgICAgIGlzTnVsbDogaXNOdWxsLFxyXG4gICAgICAgIGlzTnVsbE9yVW5kZWZpbmVkOiBpc051bGxPclVuZGVmaW5lZCxcclxuICAgICAgICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxyXG4gICAgICAgIGlzTnVtYmVyOiBpc051bWJlcixcclxuICAgICAgICBpc1N0cmluZzogaXNTdHJpbmcsXHJcbiAgICAgICAgaXNPYmplY3Q6IGlzT2JqZWN0LFxyXG4gICAgICAgIGlzQXJyYXk6IGlzQXJyYXksXHJcbiAgICAgICAgaXNEYXRlOiBpc0RhdGUsXHJcbiAgICAgICAgaXNSZWdFeHA6IGlzUmVnRXhwLFxyXG4gICAgICAgIGlzU3RhdGU6IGlzU3RhdGUsXHJcbiAgICAgICAgaXNJbmplY3RhYmxlOiBpc0luamVjdGFibGUsXHJcbiAgICAgICAgaXNQcm9taXNlOiBpc1Byb21pc2UsXHJcbiAgICAgICAgUXVldWU6IFF1ZXVlLFxyXG4gICAgICAgIG1heExlbmd0aDogbWF4TGVuZ3RoLFxyXG4gICAgICAgIHBhZFN0cmluZzogcGFkU3RyaW5nLFxyXG4gICAgICAgIGtlYm9iU3RyaW5nOiBrZWJvYlN0cmluZyxcclxuICAgICAgICBmdW5jdGlvblRvU3RyaW5nOiBmdW5jdGlvblRvU3RyaW5nLFxyXG4gICAgICAgIGZuVG9TdHJpbmc6IGZuVG9TdHJpbmcsXHJcbiAgICAgICAgc3RyaW5naWZ5OiBzdHJpbmdpZnksXHJcbiAgICAgICAgYmVmb3JlQWZ0ZXJTdWJzdHI6IGJlZm9yZUFmdGVyU3Vic3RyLFxyXG4gICAgICAgIGhvc3RSZWdleDogaG9zdFJlZ2V4LFxyXG4gICAgICAgIHN0cmlwRmlsZTogc3RyaXBGaWxlLFxyXG4gICAgICAgIHNwbGl0SGFzaDogc3BsaXRIYXNoLFxyXG4gICAgICAgIHNwbGl0UXVlcnk6IHNwbGl0UXVlcnksXHJcbiAgICAgICAgc3BsaXRFcXVhbDogc3BsaXRFcXVhbCxcclxuICAgICAgICB0cmltSGFzaFZhbDogdHJpbUhhc2hWYWwsXHJcbiAgICAgICAgc3BsaXRPbkRlbGltOiBzcGxpdE9uRGVsaW0sXHJcbiAgICAgICAgam9pbk5laWdoYm9yc1I6IGpvaW5OZWlnaGJvcnNSLFxyXG4gICAgICAgIGdldCBDYXRlZ29yeSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuQ2F0ZWdvcnk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBUcmFjZTogVHJhY2UsXHJcbiAgICAgICAgdHJhY2U6IHRyYWNlLFxyXG4gICAgICAgIGdldCBEZWZUeXBlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5EZWZUeXBlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgUGFyYW06IFBhcmFtLFxyXG4gICAgICAgIFBhcmFtVHlwZXM6IFBhcmFtVHlwZXMsXHJcbiAgICAgICAgU3RhdGVQYXJhbXM6IFN0YXRlUGFyYW1zLFxyXG4gICAgICAgIFBhcmFtVHlwZTogUGFyYW1UeXBlLFxyXG4gICAgICAgIFBhdGhOb2RlOiBQYXRoTm9kZSxcclxuICAgICAgICBQYXRoVXRpbHM6IFBhdGhVdGlscyxcclxuICAgICAgICByZXNvbHZlUG9saWNpZXM6IHJlc29sdmVQb2xpY2llcyxcclxuICAgICAgICBkZWZhdWx0UmVzb2x2ZVBvbGljeTogZGVmYXVsdFJlc29sdmVQb2xpY3ksXHJcbiAgICAgICAgUmVzb2x2YWJsZTogUmVzb2x2YWJsZSxcclxuICAgICAgICBOQVRJVkVfSU5KRUNUT1JfVE9LRU46IE5BVElWRV9JTkpFQ1RPUl9UT0tFTixcclxuICAgICAgICBSZXNvbHZlQ29udGV4dDogUmVzb2x2ZUNvbnRleHQsXHJcbiAgICAgICAgcmVzb2x2YWJsZXNCdWlsZGVyOiByZXNvbHZhYmxlc0J1aWxkZXIsXHJcbiAgICAgICAgU3RhdGVCdWlsZGVyOiBTdGF0ZUJ1aWxkZXIsXHJcbiAgICAgICAgU3RhdGVPYmplY3Q6IFN0YXRlT2JqZWN0LFxyXG4gICAgICAgIFN0YXRlTWF0Y2hlcjogU3RhdGVNYXRjaGVyLFxyXG4gICAgICAgIFN0YXRlUXVldWVNYW5hZ2VyOiBTdGF0ZVF1ZXVlTWFuYWdlcixcclxuICAgICAgICBTdGF0ZVJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LFxyXG4gICAgICAgIFN0YXRlU2VydmljZTogU3RhdGVTZXJ2aWNlLFxyXG4gICAgICAgIFRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSxcclxuICAgICAgICBnZXQgVHJhbnNpdGlvbkhvb2tQaGFzZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBUcmFuc2l0aW9uSG9va1Njb3BlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1Njb3BlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgSG9va0J1aWxkZXI6IEhvb2tCdWlsZGVyLFxyXG4gICAgICAgIG1hdGNoU3RhdGU6IG1hdGNoU3RhdGUsXHJcbiAgICAgICAgUmVnaXN0ZXJlZEhvb2s6IFJlZ2lzdGVyZWRIb29rLFxyXG4gICAgICAgIG1ha2VFdmVudDogbWFrZUV2ZW50LFxyXG4gICAgICAgIGdldCBSZWplY3RUeXBlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5SZWplY3RUeXBlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgUmVqZWN0aW9uOiBSZWplY3Rpb24sXHJcbiAgICAgICAgVHJhbnNpdGlvbjogVHJhbnNpdGlvbixcclxuICAgICAgICBUcmFuc2l0aW9uSG9vazogVHJhbnNpdGlvbkhvb2ssXHJcbiAgICAgICAgVHJhbnNpdGlvbkV2ZW50VHlwZTogVHJhbnNpdGlvbkV2ZW50VHlwZSxcclxuICAgICAgICBkZWZhdWx0VHJhbnNPcHRzOiBkZWZhdWx0VHJhbnNPcHRzLFxyXG4gICAgICAgIFRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSxcclxuICAgICAgICBVcmxNYXRjaGVyOiBVcmxNYXRjaGVyLFxyXG4gICAgICAgIFVybE1hdGNoZXJGYWN0b3J5OiBVcmxNYXRjaGVyRmFjdG9yeSxcclxuICAgICAgICBVcmxSb3V0ZXI6IFVybFJvdXRlcixcclxuICAgICAgICBVcmxSdWxlRmFjdG9yeTogVXJsUnVsZUZhY3RvcnksXHJcbiAgICAgICAgQmFzZVVybFJ1bGU6IEJhc2VVcmxSdWxlLFxyXG4gICAgICAgIFVybFNlcnZpY2U6IFVybFNlcnZpY2UsXHJcbiAgICAgICAgVmlld1NlcnZpY2U6IFZpZXdTZXJ2aWNlLFxyXG4gICAgICAgIFVJUm91dGVyR2xvYmFsczogVUlSb3V0ZXJHbG9iYWxzLFxyXG4gICAgICAgIFVJUm91dGVyOiBVSVJvdXRlcixcclxuICAgICAgICAkcTogJHEsXHJcbiAgICAgICAgJGluamVjdG9yOiAkaW5qZWN0b3IsXHJcbiAgICAgICAgQmFzZUxvY2F0aW9uU2VydmljZXM6IEJhc2VMb2NhdGlvblNlcnZpY2VzLFxyXG4gICAgICAgIEhhc2hMb2NhdGlvblNlcnZpY2U6IEhhc2hMb2NhdGlvblNlcnZpY2UsXHJcbiAgICAgICAgTWVtb3J5TG9jYXRpb25TZXJ2aWNlOiBNZW1vcnlMb2NhdGlvblNlcnZpY2UsXHJcbiAgICAgICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlOiBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UsXHJcbiAgICAgICAgTWVtb3J5TG9jYXRpb25Db25maWc6IE1lbW9yeUxvY2F0aW9uQ29uZmlnLFxyXG4gICAgICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZzogQnJvd3NlckxvY2F0aW9uQ29uZmlnLFxyXG4gICAgICAgIGtleVZhbHNUb09iamVjdFI6IGtleVZhbHNUb09iamVjdFIsXHJcbiAgICAgICAgZ2V0UGFyYW1zOiBnZXRQYXJhbXMsXHJcbiAgICAgICAgcGFyc2VVcmw6IHBhcnNlVXJsJDEsXHJcbiAgICAgICAgYnVpbGRVcmw6IGJ1aWxkVXJsLFxyXG4gICAgICAgIGxvY2F0aW9uUGx1Z2luRmFjdG9yeTogbG9jYXRpb25QbHVnaW5GYWN0b3J5LFxyXG4gICAgICAgIHNlcnZpY2VzUGx1Z2luOiBzZXJ2aWNlc1BsdWdpbixcclxuICAgICAgICBoYXNoTG9jYXRpb25QbHVnaW46IGhhc2hMb2NhdGlvblBsdWdpbixcclxuICAgICAgICBwdXNoU3RhdGVMb2NhdGlvblBsdWdpbjogcHVzaFN0YXRlTG9jYXRpb25QbHVnaW4sXHJcbiAgICAgICAgbWVtb3J5TG9jYXRpb25QbHVnaW46IG1lbW9yeUxvY2F0aW9uUGx1Z2luLFxyXG4gICAgICAgIFVJUm91dGVyUGx1Z2luQmFzZTogVUlSb3V0ZXJQbHVnaW5CYXNlXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSgpIHtcclxuICAgICAgICB2YXIgdGVtcGxhdGVGYWN0b3J5ID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIHZpZXcpIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVGYWN0b3J5ID0gdGVtcGxhdGVGYWN0b3J5IHx8IHNlcnZpY2VzLiRpbmplY3Rvci5nZXQoXCIkdGVtcGxhdGVGYWN0b3J5XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gW25ldyBOZzFWaWV3Q29uZmlnKHBhdGgsIHZpZXcsIHRlbXBsYXRlRmFjdG9yeSldO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICB2YXIgaGFzQW55S2V5ID0gZnVuY3Rpb24gaGFzQW55S2V5KGtleXMsIG9iaikge1xyXG4gICAgICAgIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjYyB8fCBpc0RlZmluZWQob2JqW2tleV0pO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIGFuZ3VsYXIxIGB2aWV3c2AuXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxyXG4gICAgICogaGFuZGxlcyB0aGUgYHZpZXdzYCBwcm9wZXJ0eSB3aXRoIGxvZ2ljIHNwZWNpZmljIHRvIEB1aXJvdXRlci9hbmd1bGFyanMgKG5nMSkuXHJcbiAgICAgKlxyXG4gICAgICogSWYgbm8gYHZpZXdzOiB7fWAgcHJvcGVydHkgZXhpc3RzIG9uIHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhlbiBpdCBjcmVhdGVzIHRoZSBgdmlld3NgIG9iamVjdFxyXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHN0YXRlLWxldmVsIGNvbmZpZ3VyYXRpb24gdG8gYSB2aWV3IG5hbWVkIGAkZGVmYXVsdGAuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG5nMVZpZXdzQnVpbGRlcihzdGF0ZSkge1xyXG4gICAgICAgIC8vIERvIG5vdCBwcm9jZXNzIHJvb3Qgc3RhdGVcclxuICAgICAgICBpZiAoIXN0YXRlLnBhcmVudCkgcmV0dXJuIHt9O1xyXG4gICAgICAgIHZhciB0cGxLZXlzID0gWyd0ZW1wbGF0ZVByb3ZpZGVyJywgJ3RlbXBsYXRlVXJsJywgJ3RlbXBsYXRlJywgJ25vdGlmeScsICdhc3luYyddLFxyXG4gICAgICAgICAgICBjdHJsS2V5cyA9IFsnY29udHJvbGxlcicsICdjb250cm9sbGVyUHJvdmlkZXInLCAnY29udHJvbGxlckFzJywgJ3Jlc29sdmVBcyddLFxyXG4gICAgICAgICAgICBjb21wS2V5cyA9IFsnY29tcG9uZW50JywgJ2JpbmRpbmdzJywgJ2NvbXBvbmVudFByb3ZpZGVyJ10sXHJcbiAgICAgICAgICAgIG5vbkNvbXBLZXlzID0gdHBsS2V5cy5jb25jYXQoY3RybEtleXMpLFxyXG4gICAgICAgICAgICBhbGxWaWV3S2V5cyA9IGNvbXBLZXlzLmNvbmNhdChub25Db21wS2V5cyk7XHJcbiAgICAgICAgLy8gRG8gbm90IGFsbG93IGEgc3RhdGUgdG8gaGF2ZSBib3RoIHN0YXRlLWxldmVsIHByb3BzIGFuZCBhbHNvIGEgYHZpZXdzOiB7fWAgcHJvcGVydHkuXHJcbiAgICAgICAgLy8gQSBzdGF0ZSB3aXRob3V0IGEgYHZpZXdzOiB7fWAgcHJvcGVydHkgY2FuIGRlY2xhcmUgcHJvcGVydGllcyBmb3IgdGhlIGAkZGVmYXVsdGAgdmlldyBhcyBwcm9wZXJ0aWVzIG9mIHRoZSBzdGF0ZS5cclxuICAgICAgICAvLyBIb3dldmVyLCB0aGUgYCRkZWZhdWx0YCBhcHByb2FjaCBzaG91bGQgbm90IGJlIG1peGVkIHdpdGggYSBzZXBhcmF0ZSBgdmlld3M6IGAgYmxvY2suXHJcbiAgICAgICAgaWYgKGlzRGVmaW5lZChzdGF0ZS52aWV3cykgJiYgaGFzQW55S2V5KGFsbFZpZXdLZXlzLCBzdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJyBoYXMgYSAndmlld3MnIG9iamVjdC4gXCIgKyBcIkl0IGNhbm5vdCBhbHNvIGhhdmUgXFxcInZpZXcgcHJvcGVydGllc1xcXCIgYXQgdGhlIHN0YXRlIGxldmVsLiAgXCIgKyBcIk1vdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGludG8gYSB2aWV3IChpbiB0aGUgJ3ZpZXdzJyBvYmplY3QpOiBcIiArIChcIiBcIiArIGFsbFZpZXdLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKHN0YXRlW2tleV0pO1xyXG4gICAgICAgICAgICB9KS5qb2luKFwiLCBcIikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZpZXdzID0ge30sXHJcbiAgICAgICAgICAgIHZpZXdzT2JqZWN0ID0gc3RhdGUudmlld3MgfHwgeyBcIiRkZWZhdWx0XCI6IHBpY2soc3RhdGUsIGFsbFZpZXdLZXlzKSB9O1xyXG4gICAgICAgIGZvckVhY2godmlld3NPYmplY3QsIGZ1bmN0aW9uIChjb25maWcsIG5hbWUpIHtcclxuICAgICAgICAgICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgXCJcIjogeyB0ZW1wbGF0ZS4uLiB9IH1cclxuICAgICAgICAgICAgbmFtZSA9IG5hbWUgfHwgXCIkZGVmYXVsdFwiO1xyXG4gICAgICAgICAgICAvLyBBY2NvdW50IGZvciB2aWV3czogeyBoZWFkZXI6IFwiaGVhZGVyQ29tcG9uZW50XCIgfVxyXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoY29uZmlnKSkgY29uZmlnID0geyBjb21wb25lbnQ6IGNvbmZpZyB9O1xyXG4gICAgICAgICAgICAvLyBNYWtlIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBjb25maWcgb2JqZWN0XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IGV4dGVuZCh7fSwgY29uZmlnKTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IGEgdmlldyB0byBtaXggcHJvcHMgZm9yIGNvbXBvbmVudC1zdHlsZSB2aWV3IHdpdGggcHJvcHMgZm9yIHRlbXBsYXRlL2NvbnRyb2xsZXItc3R5bGUgdmlld1xyXG4gICAgICAgICAgICBpZiAoaGFzQW55S2V5KGNvbXBLZXlzLCBjb25maWcpICYmIGhhc0FueUtleShub25Db21wS2V5cywgY29uZmlnKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbWJpbmU6IFwiICsgY29tcEtleXMuam9pbihcInxcIikgKyBcIiB3aXRoOiBcIiArIG5vbkNvbXBLZXlzLmpvaW4oXCJ8XCIpICsgXCIgaW4gc3RhdGV2aWV3OiAnXCIgKyBuYW1lICsgXCJAXCIgKyBzdGF0ZS5uYW1lICsgXCInXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbmZpZy5yZXNvbHZlQXMgPSBjb25maWcucmVzb2x2ZUFzIHx8ICckcmVzb2x2ZSc7XHJcbiAgICAgICAgICAgIGNvbmZpZy4kdHlwZSA9IFwibmcxXCI7XHJcbiAgICAgICAgICAgIGNvbmZpZy4kY29udGV4dCA9IHN0YXRlO1xyXG4gICAgICAgICAgICBjb25maWcuJG5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICB2YXIgbm9ybWFsaXplZCA9IFZpZXdTZXJ2aWNlLm5vcm1hbGl6ZVVJVmlld1RhcmdldChjb25maWcuJGNvbnRleHQsIGNvbmZpZy4kbmFtZSk7XHJcbiAgICAgICAgICAgIGNvbmZpZy4kdWlWaWV3TmFtZSA9IG5vcm1hbGl6ZWQudWlWaWV3TmFtZTtcclxuICAgICAgICAgICAgY29uZmlnLiR1aVZpZXdDb250ZXh0QW5jaG9yID0gbm9ybWFsaXplZC51aVZpZXdDb250ZXh0QW5jaG9yO1xyXG4gICAgICAgICAgICB2aWV3c1tuYW1lXSA9IGNvbmZpZztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmlld3M7XHJcbiAgICB9XHJcbiAgICB2YXIgaWQkMSA9IDA7XHJcbiAgICB2YXIgTmcxVmlld0NvbmZpZyA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gTmcxVmlld0NvbmZpZyhwYXRoLCB2aWV3RGVjbCwgZmFjdG9yeSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdEZWNsID0gdmlld0RlY2w7XHJcbiAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XHJcbiAgICAgICAgICAgIHRoaXMuJGlkID0gaWQkMSsrO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKHVpVmlldywgY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbXBvbmVudCA/IF90aGlzLmZhY3RvcnkubWFrZUNvbXBvbmVudFRlbXBsYXRlKHVpVmlldywgY29udGV4dCwgX3RoaXMuY29tcG9uZW50LCBfdGhpcy52aWV3RGVjbC5iaW5kaW5ncykgOiBfdGhpcy50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTmcxVmlld0NvbmZpZy5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyICRxID0gc2VydmljZXMuJHE7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMucGF0aCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhdGgucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRlbmQoYWNjLCBub2RlLnBhcmFtVmFsdWVzKTtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHEud2hlbih0aGlzLmZhY3RvcnkuZnJvbUNvbmZpZyh0aGlzLnZpZXdEZWNsLCBwYXJhbXMsIGNvbnRleHQpKSxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICRxLndoZW4odGhpcy5nZXRDb250cm9sbGVyKGNvbnRleHQpKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCJMb2FkZWRcIiwgX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29udHJvbGxlciA9IHJlc3VsdHMuY29udHJvbGxlcjtcclxuICAgICAgICAgICAgICAgIGV4dGVuZChfdGhpcywgcmVzdWx0cy50ZW1wbGF0ZSk7IC8vIEVpdGhlciB7IHRlbXBsYXRlOiBcInRwbFwiIH0gb3IgeyBjb21wb25lbnQ6IFwiY21wTmFtZVwiIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBjb250cm9sbGVyIGZvciBhIHZpZXcgY29uZmlndXJhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbnxQcm9taXNlLjxGdW5jdGlvbj59IFJldHVybnMgYSBjb250cm9sbGVyLCBvciBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgTmcxVmlld0NvbmZpZy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMudmlld0RlY2wuY29udHJvbGxlclByb3ZpZGVyO1xyXG4gICAgICAgICAgICBpZiAoIWlzSW5qZWN0YWJsZShwcm92aWRlcikpIHJldHVybiB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgIHZhciBkZXBzID0gc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IFJlc29sdmFibGUoXCJcIiwgcHJvdmlkZXJGbiwgZGVwcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBOZzFWaWV3Q29uZmlnO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIHZpZXcgKi9cclxuICAgIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXJ2aWNlIHdoaWNoIG1hbmFnZXMgbG9hZGluZyBvZiB0ZW1wbGF0ZXMgZnJvbSBhIFZpZXdDb25maWcuXHJcbiAgICAgKi9cclxuICAgIHZhciBUZW1wbGF0ZUZhY3RvcnkgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFRlbXBsYXRlRmFjdG9yeSgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgLyoqIEBoaWRkZW4gKi90aGlzLl91c2VIdHRwID0gbmcudmVyc2lvbi5taW5vciA8IDM7XHJcbiAgICAgICAgICAgIC8qKiBAaGlkZGVuICovdGhpcy4kZ2V0ID0gWyckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsICckaW5qZWN0b3InLCBmdW5jdGlvbiAoJGh0dHAsICR0ZW1wbGF0ZUNhY2hlLCAkaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiR0ZW1wbGF0ZVJlcXVlc3QgPSAkaW5qZWN0b3IuaGFzICYmICRpbmplY3Rvci5oYXMoJyR0ZW1wbGF0ZVJlcXVlc3QnKSAmJiAkaW5qZWN0b3IuZ2V0KCckdGVtcGxhdGVSZXF1ZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy4kaHR0cCA9ICRodHRwO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS51c2VIdHRwU2VydmljZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl91c2VIdHRwID0gdmFsdWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZyb20gYSBjb25maWd1cmF0aW9uIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBjb25maWcgQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHdoaWNoIHRvIGxvYWQgYSB0ZW1wbGF0ZS5cclxuICAgICAgICAgKiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIHNlYXJjaCBpbiB0aGUgc3BlY2lmaWVkIG9yZGVyLCBhbmQgdGhlIGZpcnN0IG9uZVxyXG4gICAgICAgICAqIHRoYXQgaXMgZGVmaW5lZCBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgdGVtcGxhdGU6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zICBQYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIHRlbXBsYXRlIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSByZXNvbHZlIGNvbnRleHQgYXNzb2NpYXRlZCB3aXRoIHRoZSB0ZW1wbGF0ZSdzIHZpZXdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9ICBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlIGZvclxyXG4gICAgICAgICAqIHRoYXQgc3RyaW5nLG9yIGBudWxsYCBpZiBubyB0ZW1wbGF0ZSBpcyBjb25maWd1cmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbUNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcsIHBhcmFtcywgY29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdFRlbXBsYXRlID0gXCI8dWktdmlldz48L3VpLXZpZXc+XCI7XHJcbiAgICAgICAgICAgIHZhciBhc1RlbXBsYXRlID0gZnVuY3Rpb24gYXNUZW1wbGF0ZShyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHJlc3VsdCkudGhlbihmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGVtcGxhdGU6IHN0ciB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBhc0NvbXBvbmVudCA9IGZ1bmN0aW9uIGFzQ29tcG9uZW50KHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4ocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjb21wb25lbnQ6IHN0ciB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlKSA/IGFzVGVtcGxhdGUodGhpcy5mcm9tU3RyaW5nKGNvbmZpZy50ZW1wbGF0ZSwgcGFyYW1zKSkgOiBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlVXJsKSA/IGFzVGVtcGxhdGUodGhpcy5mcm9tVXJsKGNvbmZpZy50ZW1wbGF0ZVVybCwgcGFyYW1zKSkgOiBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlUHJvdmlkZXIpID8gYXNUZW1wbGF0ZSh0aGlzLmZyb21Qcm92aWRlcihjb25maWcudGVtcGxhdGVQcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSkgOiBpc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudCkgPyBhc0NvbXBvbmVudChjb25maWcuY29tcG9uZW50KSA6IGlzRGVmaW5lZChjb25maWcuY29tcG9uZW50UHJvdmlkZXIpID8gYXNDb21wb25lbnQodGhpcy5mcm9tQ29tcG9uZW50UHJvdmlkZXIoY29uZmlnLmNvbXBvbmVudFByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpKSA6IGFzVGVtcGxhdGUoZGVmYXVsdFRlbXBsYXRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0ZW1wbGF0ZSBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yIHRoYXRcclxuICAgICAgICAgKiBzdHJpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBwYXJhbXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24odGVtcGxhdGUpID8gdGVtcGxhdGUocGFyYW1zKSA6IHRlbXBsYXRlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExvYWRzIGEgdGVtcGxhdGUgZnJvbSB0aGUgYSBVUkwgdmlhIGAkaHR0cGAgYW5kIGAkdGVtcGxhdGVDYWNoZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gdXJsIHVybCBvZiB0aGUgdGVtcGxhdGUgdG8gbG9hZCwgb3IgYSBmdW5jdGlvblxyXG4gICAgICAgICAqIHRoYXQgcmV0dXJucyBhIHVybC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdXJsIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ3xQcm9taXNlLjxzdHJpbmc+fSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlXHJcbiAgICAgICAgICogZm9yIHRoYXQgc3RyaW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUuZnJvbVVybCA9IGZ1bmN0aW9uICh1cmwsIHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih1cmwpKSB1cmwgPSB1cmwocGFyYW1zKTtcclxuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3VzZUh0dHApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRodHRwLmdldCh1cmwsIHsgY2FjaGU6IHRoaXMuJHRlbXBsYXRlQ2FjaGUsIGhlYWRlcnM6IHsgQWNjZXB0OiAndGV4dC9odG1sJyB9IH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kdGVtcGxhdGVSZXF1ZXN0KHVybCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfFByb21pc2UuPHN0cmluZz59IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2VcclxuICAgICAgICAgKiBmb3IgdGhhdCBzdHJpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tUHJvdmlkZXIgPSBmdW5jdGlvbiAocHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgZGVwcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlckZuID0gaXNBcnJheShwcm92aWRlcikgPyB0YWlsKHByb3ZpZGVyKSA6IHByb3ZpZGVyO1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x2YWJsZSA9IG5ldyBSZXNvbHZhYmxlKFwiXCIsIHByb3ZpZGVyRm4sIGRlcHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGNvbXBvbmVudCdzIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21Db21wb25lbnRQcm92aWRlciA9IGZ1bmN0aW9uIChwcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBkZXBzID0gc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IFJlc29sdmFibGUoXCJcIiwgcHJvdmlkZXJGbiwgZGVwcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIGNvbXBvbmVudCdzIG5hbWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgaW1wbGVtZW50cyByb3V0ZS10by1jb21wb25lbnQuXHJcbiAgICAgICAgICogSXQgd29ya3MgYnkgcmV0cmlldmluZyB0aGUgY29tcG9uZW50IChkaXJlY3RpdmUpIG1ldGFkYXRhIGZyb20gdGhlIGluamVjdG9yLlxyXG4gICAgICAgICAqIEl0IGFuYWx5c2VzIHRoZSBjb21wb25lbnQncyBiaW5kaW5ncywgdGhlbiBjb25zdHJ1Y3RzIGEgdGVtcGxhdGUgdGhhdCBpbnN0YW50aWF0ZXMgdGhlIGNvbXBvbmVudC5cclxuICAgICAgICAgKiBUaGUgdGVtcGxhdGUgd2lyZXMgaW5wdXQgYW5kIG91dHB1dCBiaW5kaW5ncyB0byByZXNvbHZlcyBvciBmcm9tIHRoZSBwYXJlbnQgY29tcG9uZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVpVmlldyB7b2JqZWN0fSBUaGUgcGFyZW50IHVpLXZpZXcgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzKVxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBSZXNvbHZlQ29udGV4dCAoZm9yIGJpbmRpbmcgb3V0cHV0cyB0byBjYWxsYmFja3MgcmV0dXJuZWQgZnJvbSByZXNvbHZlcylcclxuICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50IHtzdHJpbmd9IENvbXBvbmVudCdzIG5hbWUgaW4gY2FtZWwgY2FzZS5cclxuICAgICAgICAgKiBAcGFyYW0gYmluZGluZ3MgQW4gb2JqZWN0IGRlZmluaW5nIHRoZSBjb21wb25lbnQncyBiaW5kaW5nczoge2ZvbzogJzwnfVxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRlbXBsYXRlIGFzIGEgc3RyaW5nOiBcIjxjb21wb25lbnQtbmFtZSBpbnB1dDE9Jzo6JHJlc29sdmUuZm9vJz48L2NvbXBvbmVudC1uYW1lPlwiLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUubWFrZUNvbXBvbmVudFRlbXBsYXRlID0gZnVuY3Rpb24gKHVpVmlldywgY29udGV4dCwgY29tcG9uZW50LCBiaW5kaW5ncykge1xyXG4gICAgICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzIHx8IHt9O1xyXG4gICAgICAgICAgICAvLyBCaW5kIG9uY2UgcHJlZml4XHJcbiAgICAgICAgICAgIHZhciBwcmVmaXggPSBuZy52ZXJzaW9uLm1pbm9yID49IDMgPyBcIjo6XCIgOiBcIlwiO1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIGtlYm9iIG5hbWUuIEFkZCB4LSBwcmVmaXggaWYgdGhlIHN0cmluZyBzdGFydHMgd2l0aCBgeC1gIG9yIGBkYXRhLWBcclxuICAgICAgICAgICAgdmFyIGtlYm9iID0gZnVuY3Rpb24ga2Vib2IoY2FtZWxDYXNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2Vib2JlZCA9IGtlYm9iU3RyaW5nKGNhbWVsQ2FzZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKC9eKHh8ZGF0YSktLy5leGVjKGtlYm9iZWQpID8gXCJ4LVwiICsga2Vib2JlZCA6IGtlYm9iZWRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVUcGwgPSBmdW5jdGlvbiBhdHRyaWJ1dGVUcGwoaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaW5wdXQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gaW5wdXQudHlwZTtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGtlYm9iKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVpLXZpZXcgaGFzIGFuIGF0dHJpYnV0ZSB3aGljaCBtYXRjaGVzIGEgYmluZGluZyBvbiB0aGUgcm91dGVkIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBwYXNzIHRoYXQgYXR0cmlidXRlIHRocm91Z2ggdG8gdGhlIHJvdXRlZCBjb21wb25lbnQgdGVtcGxhdGUuXHJcbiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgdWktdmlldyB3aXJlZCBtYXBwaW5ncyB0byByZXNvbHZlIGRhdGEsIHVubGVzcyB0aGUgcmVzb2x2ZSB3YXMgZXhwbGljaXRseSBib3VuZCB1c2luZyBgYmluZGluZ3M6YFxyXG4gICAgICAgICAgICAgICAgaWYgKHVpVmlldy5hdHRyKGF0dHJOYW1lKSAmJiAhYmluZGluZ3NbbmFtZV0pIHJldHVybiBhdHRyTmFtZSArIFwiPSdcIiArIHVpVmlldy5hdHRyKGF0dHJOYW1lKSArIFwiJ1wiO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVOYW1lID0gYmluZGluZ3NbbmFtZV0gfHwgbmFtZTtcclxuICAgICAgICAgICAgICAgIC8vIFByZS1ldmFsdWF0ZSB0aGUgZXhwcmVzc2lvbiBmb3IgXCJAXCIgYmluZGluZ3MgYnkgZW5jbG9zaW5nIGluIHt7IH19XHJcbiAgICAgICAgICAgICAgICAvLyBzb21lLWF0dHI9XCJ7eyA6OiRyZXNvbHZlLnNvbWVSZXNvbHZlTmFtZSB9fVwiXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0AnKSByZXR1cm4gYXR0ck5hbWUgKyBcIj0ne3tcIiArIHByZWZpeCArIFwiJHJlc29sdmUuXCIgKyByZXNvbHZlTmFtZSArIFwifX0nXCI7XHJcbiAgICAgICAgICAgICAgICAvLyBXaXJlIFwiJlwiIGNhbGxiYWNrcyB0byByZXNvbHZlcyB0aGF0IHJldHVybiBhIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVzb2x2ZSAoc2hvdWxkIGJlIGEgZnVuY3Rpb24pIGFuZCBhbm5vdGF0ZSBpdCB0byBnZXQgaXRzIGFyZ3VtZW50cy5cclxuICAgICAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cIiRyZXNvbHZlLnNvbWVSZXNvbHZlUmVzdWx0TmFtZShmb28sIGJhcilcIlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICcmJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSBjb250ZXh0LmdldFJlc29sdmFibGUocmVzb2x2ZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHJlcyAmJiByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGZuICYmIHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShmbikgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3VudCBmb3IgYXJyYXkgc3R5bGUgaW5qZWN0aW9uLCBpLmUuLCBbJ2ZvbycsIGZ1bmN0aW9uKGZvbykge31dXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5SWR4U3RyID0gaXNBcnJheShmbikgPyBcIltcIiArIChmbi5sZW5ndGggLSAxKSArIFwiXVwiIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9JyRyZXNvbHZlLlwiICsgcmVzb2x2ZU5hbWUgKyBhcnJheUlkeFN0ciArIFwiKFwiICsgYXJncy5qb2luKFwiLFwiKSArIFwiKSdcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cIjo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lXCJcclxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZSArIFwiPSdcIiArIHByZWZpeCArIFwiJHJlc29sdmUuXCIgKyByZXNvbHZlTmFtZSArIFwiJ1wiO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgYXR0cnMgPSBnZXRDb21wb25lbnRCaW5kaW5ncyhjb21wb25lbnQpLm1hcChhdHRyaWJ1dGVUcGwpLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgICAgICB2YXIga2Vib2JOYW1lID0ga2Vib2IoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIFwiPFwiICsga2Vib2JOYW1lICsgXCIgXCIgKyBhdHRycyArIFwiPjwvXCIgKyBrZWJvYk5hbWUgKyBcIj5cIjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gVGVtcGxhdGVGYWN0b3J5O1xyXG4gICAgfSgpO1xyXG4gICAgLy8gR2V0cyBhbGwgdGhlIGRpcmVjdGl2ZShzKScgaW5wdXRzICgnQCcsICc9JywgYW5kICc8JykgYW5kIG91dHB1dHMgKCcmJylcclxuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudEJpbmRpbmdzKG5hbWUpIHtcclxuICAgICAgICB2YXIgY21wRGVmcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5nZXQobmFtZSArIFwiRGlyZWN0aXZlXCIpOyAvLyBjb3VsZCBiZSBtdWx0aXBsZVxyXG4gICAgICAgIGlmICghY21wRGVmcyB8fCAhY21wRGVmcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBmaW5kIGNvbXBvbmVudCBuYW1lZCAnXCIgKyBuYW1lICsgXCInXCIpO1xyXG4gICAgICAgIHJldHVybiBjbXBEZWZzLm1hcChnZXRCaW5kaW5ncykucmVkdWNlKHVubmVzdFIsIFtdKTtcclxuICAgIH1cclxuICAgIC8vIEdpdmVuIGEgZGlyZWN0aXZlIGRlZmluaXRpb24sIGZpbmQgaXRzIG9iamVjdCBpbnB1dCBhdHRyaWJ1dGVzXHJcbiAgICAvLyBVc2UgZGlmZmVyZW50IHByb3BlcnRpZXMsIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBkaXJlY3RpdmUgKGNvbXBvbmVudCwgYmluZFRvQ29udHJvbGxlciwgbm9ybWFsKVxyXG4gICAgdmFyIGdldEJpbmRpbmdzID0gZnVuY3Rpb24gZ2V0QmluZGluZ3MoZGVmKSB7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGRlZi5iaW5kVG9Db250cm9sbGVyKSkgcmV0dXJuIHNjb3BlQmluZGluZ3MoZGVmLmJpbmRUb0NvbnRyb2xsZXIpO1xyXG4gICAgICAgIHJldHVybiBzY29wZUJpbmRpbmdzKGRlZi5zY29wZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gZm9yIG5nIDEuMiBzdHlsZSwgcHJvY2VzcyB0aGUgc2NvcGU6IHsgaW5wdXQ6IFwiPWZvb1wiIH1cclxuICAgIC8vIGZvciBuZyAxLjMgdGhyb3VnaCBuZyAxLjUsIHByb2Nlc3MgdGhlIGNvbXBvbmVudCdzIGJpbmRUb0NvbnRyb2xsZXI6IHsgaW5wdXQ6IFwiPWZvb1wiIH0gb2JqZWN0XHJcbiAgICB2YXIgc2NvcGVCaW5kaW5ncyA9IGZ1bmN0aW9uIHNjb3BlQmluZGluZ3MoYmluZGluZ3NPYmopIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYmluZGluZ3NPYmogfHwge30pLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBba2V5LCAvXihbPTxAJl0pWz9dPyguKikvLmV4ZWMoYmluZGluZ3NPYmpba2V5XSldO1xyXG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAodHVwbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZCh0dXBsZSkgJiYgaXNBcnJheSh0dXBsZVsxXSk7XHJcbiAgICAgICAgfSkubWFwKGZ1bmN0aW9uICh0dXBsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiB0dXBsZVsxXVsyXSB8fCB0dXBsZVswXSwgdHlwZTogdHVwbGVbMV1bMV0gfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgQW5ndWxhciAxIGBTdGF0ZVByb3ZpZGVyYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBgJHN0YXRlUHJvdmlkZXJgIHdvcmtzIHNpbWlsYXIgdG8gQW5ndWxhcidzIHYxIHJvdXRlciwgYnV0IGl0IGZvY3VzZXMgcHVyZWx5XHJcbiAgICAgKiBvbiBzdGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBBIHN0YXRlIGNvcnJlc3BvbmRzIHRvIGEgXCJwbGFjZVwiIGluIHRoZSBhcHBsaWNhdGlvbiBpbiB0ZXJtcyBvZiB0aGUgb3ZlcmFsbCBVSSBhbmRcclxuICAgICAqIG5hdmlnYXRpb24uIEEgc3RhdGUgZGVzY3JpYmVzICh2aWEgdGhlIGNvbnRyb2xsZXIgLyB0ZW1wbGF0ZSAvIHZpZXcgcHJvcGVydGllcykgd2hhdFxyXG4gICAgICogdGhlIFVJIGxvb2tzIGxpa2UgYW5kIGRvZXMgYXQgdGhhdCBwbGFjZS5cclxuICAgICAqXHJcbiAgICAgKiBTdGF0ZXMgb2Z0ZW4gaGF2ZSB0aGluZ3MgaW4gY29tbW9uLCBhbmQgdGhlIHByaW1hcnkgd2F5IG9mIGZhY3RvcmluZyBvdXQgdGhlc2VcclxuICAgICAqIGNvbW1vbmFsaXRpZXMgaW4gdGhpcyBtb2RlbCBpcyB2aWEgdGhlIHN0YXRlIGhpZXJhcmNoeSwgaS5lLiBwYXJlbnQvY2hpbGQgc3RhdGVzIGFrYVxyXG4gICAgICogbmVzdGVkIHN0YXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCBwcm92aWRlcyBpbnRlcmZhY2VzIHRvIGRlY2xhcmUgdGhlc2Ugc3RhdGVzIGZvciB5b3VyIGFwcC5cclxuICAgICAqL1xyXG4gICAgdmFyIFN0YXRlUHJvdmlkZXIgPSAvKiogQGNsYXNzICovZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFN0YXRlUHJvdmlkZXIoc3RhdGVSZWdpc3RyeSwgc3RhdGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZWdpc3RyeSA9IHN0YXRlUmVnaXN0cnk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVTZXJ2aWNlID0gc3RhdGVTZXJ2aWNlO1xyXG4gICAgICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoU3RhdGVQcm92aWRlci5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWNvcmF0ZXMgc3RhdGVzIHdoZW4gdGhleSBhcmUgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQWxsb3dzIHlvdSB0byBleHRlbmQgKGNhcmVmdWxseSkgb3Igb3ZlcnJpZGUgKGF0IHlvdXIgb3duIHBlcmlsKSB0aGVcclxuICAgICAgICAgKiBgc3RhdGVCdWlsZGVyYCBvYmplY3QgdXNlZCBpbnRlcm5hbGx5IGJ5IFtbU3RhdGVSZWdpc3RyeV1dLlxyXG4gICAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gYWRkIGN1c3RvbSBmdW5jdGlvbmFsaXR5IHRvIHVpLXJvdXRlcixcclxuICAgICAgICAgKiBmb3IgZXhhbXBsZSBpbmZlcnJpbmcgdGVtcGxhdGVVcmwgYmFzZWQgb24gdGhlIHN0YXRlIG5hbWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaGVuIHBhc3Npbmcgb25seSBhIG5hbWUsIGl0IHJldHVybnMgdGhlIGN1cnJlbnQgKG9yaWdpbmFsIG9yIGRlY29yYXRlZCkgYnVpbGRlclxyXG4gICAgICAgICAqIGZ1bmN0aW9uIHRoYXQgbWF0Y2hlcyBgbmFtZWAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgYnVpbGRlciBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgZGVjb3JhdGVkIGFyZSBsaXN0ZWQgYmVsb3cuIFRob3VnaCBub3QgYWxsXHJcbiAgICAgICAgICogbmVjZXNzYXJpbHkgaGF2ZSBhIGdvb2QgdXNlIGNhc2UgZm9yIGRlY29yYXRpb24sIHRoYXQgaXMgdXAgdG8geW91IHRvIGRlY2lkZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEluIGFkZGl0aW9uLCB1c2VycyBjYW4gYXR0YWNoIGN1c3RvbSBkZWNvcmF0b3JzLCB3aGljaCB3aWxsIGdlbmVyYXRlIG5ld1xyXG4gICAgICAgICAqIHByb3BlcnRpZXMgd2l0aGluIHRoZSBzdGF0ZSdzIGludGVybmFsIGRlZmluaXRpb24uIFRoZXJlIGlzIGN1cnJlbnRseSBubyBjbGVhclxyXG4gICAgICAgICAqIHVzZS1jYXNlIGZvciB0aGlzIGJleW9uZCBhY2Nlc3NpbmcgaW50ZXJuYWwgc3RhdGVzIChpLmUuICRzdGF0ZS4kY3VycmVudCksXHJcbiAgICAgICAgICogaG93ZXZlciwgZXhwZWN0IHRoaXMgdG8gYmVjb21lIGluY3JlYXNpbmdseSByZWxldmFudCBhcyB3ZSBpbnRyb2R1Y2UgYWRkaXRpb25hbFxyXG4gICAgICAgICAqIG1ldGEtcHJvZ3JhbW1pbmcgZmVhdHVyZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAqKldhcm5pbmcqKjogRGVjb3JhdG9ycyBzaG91bGQgbm90IGJlIGludGVyZGVwZW5kZW50IGJlY2F1c2UgdGhlIG9yZGVyIG9mXHJcbiAgICAgICAgICogZXhlY3V0aW9uIG9mIHRoZSBidWlsZGVyIGZ1bmN0aW9ucyBpbiBub24tZGV0ZXJtaW5pc3RpYy4gQnVpbGRlciBmdW5jdGlvbnNcclxuICAgICAgICAgKiBzaG91bGQgb25seSBiZSBkZXBlbmRlbnQgb24gdGhlIHN0YXRlIGRlZmluaXRpb24gb2JqZWN0IGFuZCBzdXBlciBmdW5jdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRXhpc3RpbmcgYnVpbGRlciBmdW5jdGlvbnMgYW5kIGN1cnJlbnQgcmV0dXJuIHZhbHVlczpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC0gKipwYXJlbnQqKiBge29iamVjdH1gIC0gcmV0dXJucyB0aGUgcGFyZW50IHN0YXRlIG9iamVjdC5cclxuICAgICAgICAgKiAtICoqZGF0YSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHN0YXRlIGRhdGEsIGluY2x1ZGluZyBhbnkgaW5oZXJpdGVkIGRhdGEgdGhhdCBpcyBub3RcclxuICAgICAgICAgKiAgIG92ZXJyaWRkZW4gYnkgb3duIHZhbHVlcyAoaWYgYW55KS5cclxuICAgICAgICAgKiAtICoqdXJsKiogYHtvYmplY3R9YCAtIHJldHVybnMgYSB7QGxpbmsgdWkucm91dGVyLnV0aWwudHlwZTpVcmxNYXRjaGVyIFVybE1hdGNoZXJ9XHJcbiAgICAgICAgICogICBvciBgbnVsbGAuXHJcbiAgICAgICAgICogLSAqKm5hdmlnYWJsZSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGFrYSBpc1xyXG4gICAgICAgICAqICAgbmF2aWdhYmxlKS5cclxuICAgICAgICAgKiAtICoqcGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgcGFyYW1zIHRoYXQgYXJlIGVuc3VyZWQgdG9cclxuICAgICAgICAgKiAgIGJlIGEgc3VwZXItc2V0IG9mIHBhcmVudCdzIHBhcmFtcy5cclxuICAgICAgICAgKiAtICoqdmlld3MqKiBge29iamVjdH1gIC0gcmV0dXJucyBhIHZpZXdzIG9iamVjdCB3aGVyZSBlYWNoIGtleSBpcyBhbiBhYnNvbHV0ZSB2aWV3XHJcbiAgICAgICAgICogICBuYW1lIChpLmUuIFwidmlld05hbWVAc3RhdGVOYW1lXCIpIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBjb25maWcgb2JqZWN0XHJcbiAgICAgICAgICogICAodGVtcGxhdGUsIGNvbnRyb2xsZXIpIGZvciB0aGUgdmlldy4gRXZlbiB3aGVuIHlvdSBkb24ndCB1c2UgdGhlIHZpZXdzIG9iamVjdFxyXG4gICAgICAgICAqICAgZXhwbGljaXRseSBvbiBhIHN0YXRlIGNvbmZpZywgb25lIGlzIHN0aWxsIGNyZWF0ZWQgZm9yIHlvdSBpbnRlcm5hbGx5LlxyXG4gICAgICAgICAqICAgU28gYnkgZGVjb3JhdGluZyB0aGlzIGJ1aWxkZXIgZnVuY3Rpb24geW91IGhhdmUgYWNjZXNzIHRvIGRlY29yYXRpbmcgdGVtcGxhdGVcclxuICAgICAgICAgKiAgIGFuZCBjb250cm9sbGVyIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICogLSAqKm93blBhcmFtcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIGFycmF5IG9mIHBhcmFtcyB0aGF0IGJlbG9uZyB0byB0aGUgc3RhdGUsXHJcbiAgICAgICAgICogICBub3QgaW5jbHVkaW5nIGFueSBwYXJhbXMgZGVmaW5lZCBieSBhbmNlc3RvciBzdGF0ZXMuXHJcbiAgICAgICAgICogLSAqKnBhdGgqKiBge3N0cmluZ31gIC0gcmV0dXJucyB0aGUgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlLlxyXG4gICAgICAgICAqICAgTmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxyXG4gICAgICAgICAqIC0gKippbmNsdWRlcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIGV2ZXJ5IHN0YXRlIHRoYXRcclxuICAgICAgICAgKiAgIHdvdWxkIHBhc3MgYSBgJHN0YXRlLmluY2x1ZGVzKClgIHRlc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogT3ZlcnJpZGUgdGhlIGludGVybmFsICd2aWV3cycgYnVpbGRlciB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc3RhdGVcclxuICAgICAgICAgKiBkZWZpbml0aW9uLCBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGludGVybmFsIGZ1bmN0aW9uIGJlaW5nIG92ZXJyaWRkZW46XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiAkc3RhdGVQcm92aWRlci5kZWNvcmF0b3IoJ3ZpZXdzJywgZnVuY3Rpb24gKHN0YXRlLCBwYXJlbnQpIHtcclxuICAgICAgICAgKiAgIGxldCByZXN1bHQgPSB7fSxcclxuICAgICAgICAgKiAgICAgICB2aWV3cyA9IHBhcmVudChzdGF0ZSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAgIGFuZ3VsYXIuZm9yRWFjaCh2aWV3cywgZnVuY3Rpb24gKGNvbmZpZywgbmFtZSkge1xyXG4gICAgICAgICAqICAgICBsZXQgYXV0b05hbWUgPSAoc3RhdGUubmFtZSArICcuJyArIG5hbWUpLnJlcGxhY2UoJy4nLCAnLycpO1xyXG4gICAgICAgICAqICAgICBjb25maWcudGVtcGxhdGVVcmwgPSBjb25maWcudGVtcGxhdGVVcmwgfHwgJy9wYXJ0aWFscy8nICsgYXV0b05hbWUgKyAnLmh0bWwnO1xyXG4gICAgICAgICAqICAgICByZXN1bHRbbmFtZV0gPSBjb25maWc7XHJcbiAgICAgICAgICogICB9KTtcclxuICAgICAgICAgKiAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcclxuICAgICAgICAgKiAgIHZpZXdzOiB7XHJcbiAgICAgICAgICogICAgICdjb250YWN0Lmxpc3QnOiB7IGNvbnRyb2xsZXI6ICdMaXN0Q29udHJvbGxlcicgfSxcclxuICAgICAgICAgKiAgICAgJ2NvbnRhY3QuaXRlbSc6IHsgY29udHJvbGxlcjogJ0l0ZW1Db250cm9sbGVyJyB9XHJcbiAgICAgICAgICogICB9XHJcbiAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogLy8gQXV0by1wb3B1bGF0ZXMgbGlzdCBhbmQgaXRlbSB2aWV3cyB3aXRoIC9wYXJ0aWFscy9ob21lL2NvbnRhY3QvbGlzdC5odG1sLFxyXG4gICAgICAgICAqIC8vIGFuZCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2l0ZW0uaHRtbCwgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAqICRzdGF0ZS5nbygnaG9tZScpO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb24gdG8gZGVjb3JhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZ1bmMgQSBmdW5jdGlvbiB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciBkZWNvcmF0aW5nIHRoZSBvcmlnaW5hbFxyXG4gICAgICAgICAqIGJ1aWxkZXIgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0d28gcGFyYW1ldGVyczpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgLSBge29iamVjdH1gIC0gc3RhdGUgLSBUaGUgc3RhdGUgY29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKiAgIC0gYHtvYmplY3R9YCAtIHN1cGVyIC0gVGhlIG9yaWdpbmFsIGJ1aWxkZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICRzdGF0ZVByb3ZpZGVyIC0gJHN0YXRlUHJvdmlkZXIgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBTdGF0ZVByb3ZpZGVyLnByb3RvdHlwZS5kZWNvcmF0b3IgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihuYW1lLCBmdW5jKSB8fCB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPSBuYW1lO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVnaXN0cnkucmVnaXN0ZXIoZGVmaW5pdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGFuIGludmFsaWQgc3RhdGUgaGFuZGxlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dIGZvciBuZzEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUub25JbnZhbGlkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlU2VydmljZS5vbkludmFsaWQoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIFN0YXRlUHJvdmlkZXI7XHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGlzIGEgW1tTdGF0ZUJ1aWxkZXIuYnVpbGRlcl1dIGZ1bmN0aW9uIGZvciBhbmd1bGFyMSBgb25FbnRlcmAsIGBvbkV4aXRgLFxyXG4gICAgICogYG9uUmV0YWluYCBjYWxsYmFjayBob29rcyBvbiBhIFtbTmcxU3RhdGVEZWNsYXJhdGlvbl1dLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gdGhlIFtbU3RhdGVCdWlsZGVyXV0gYnVpbGRzIGEgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBmcm9tIGEgcmF3IFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGlzIGJ1aWxkZXJcclxuICAgICAqIGVuc3VyZXMgdGhhdCB0aG9zZSBob29rcyBhcmUgaW5qZWN0YWJsZSBmb3IgQHVpcm91dGVyL2FuZ3VsYXJqcyAobmcxKS5cclxuICAgICAqL1xyXG4gICAgdmFyIGdldFN0YXRlSG9va0J1aWxkZXIgPSBmdW5jdGlvbiBnZXRTdGF0ZUhvb2tCdWlsZGVyKGhvb2tOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlSG9va0J1aWxkZXIoc3RhdGUsIHBhcmVudEZuKSB7XHJcbiAgICAgICAgICAgIHZhciBob29rID0gc3RhdGVbaG9va05hbWVdO1xyXG4gICAgICAgICAgICB2YXIgcGF0aG5hbWUgPSBob29rTmFtZSA9PT0gJ29uRXhpdCcgPyAnZnJvbScgOiAndG8nO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWNvcmF0ZWROZzFIb29rKHRyYW5zLCBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmVDb250ZXh0ID0gbmV3IFJlc29sdmVDb250ZXh0KHRyYW5zLnRyZWVDaGFuZ2VzKHBhdGhuYW1lKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gZXh0ZW5kKGdldExvY2FscyhyZXNvbHZlQ29udGV4dCksIHsgJHN0YXRlJDogc3RhdGUsICR0cmFuc2l0aW9uJDogdHJhbnMgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJGluamVjdG9yLmludm9rZShob29rLCB0aGlzLCBsb2NhbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBob29rID8gZGVjb3JhdGVkTmcxSG9vayA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEltcGxlbWVudHMgVUktUm91dGVyIExvY2F0aW9uU2VydmljZXMgYW5kIExvY2F0aW9uQ29uZmlnIHVzaW5nIEFuZ3VsYXIgMSdzICRsb2NhdGlvbiBzZXJ2aWNlXHJcbiAgICAgKi9cclxuICAgIHZhciBOZzFMb2NhdGlvblNlcnZpY2VzID0gLyoqIEBjbGFzcyAqL2Z1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBOZzFMb2NhdGlvblNlcnZpY2VzKCRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIC8vIC5vbkNoYW5nZSgpIHJlZ2lzdHJ5XHJcbiAgICAgICAgICAgIHRoaXMuX3VybExpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLiRsb2NhdGlvblByb3ZpZGVyID0gJGxvY2F0aW9uUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIHZhciBfbHAgPSB2YWwoJGxvY2F0aW9uUHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfbHAsIHRoaXMsIF9scCwgWydoYXNoUHJlZml4J10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5fdXJsTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUZyb20oX3RoaXMuX3VybExpc3RlbmVycykoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaHRtbDVNb2RlID0gdGhpcy4kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoKTtcclxuICAgICAgICAgICAgaHRtbDVNb2RlID0gaXNPYmplY3QoaHRtbDVNb2RlKSA/IGh0bWw1TW9kZS5lbmFibGVkIDogaHRtbDVNb2RlO1xyXG4gICAgICAgICAgICByZXR1cm4gaHRtbDVNb2RlICYmIHRoaXMuJHNuaWZmZXIuaGlzdG9yeTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5nMUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLnVybCA9IGZ1bmN0aW9uIChuZXdVcmwsIHJlcGxhY2UsIHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV3VXJsKSB0aGlzLiRsb2NhdGlvbi51cmwobmV3VXJsKTtcclxuICAgICAgICAgICAgaWYgKHJlcGxhY2UpIHRoaXMuJGxvY2F0aW9uLnJlcGxhY2UoKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlKSB0aGlzLiRsb2NhdGlvbi5zdGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRsb2NhdGlvbi51cmwoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE5nMUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLl9ydW50aW1lU2VydmljZXMgPSBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24gPSAkbG9jYXRpb247XHJcbiAgICAgICAgICAgIHRoaXMuJHNuaWZmZXIgPSAkc25pZmZlcjtcclxuICAgICAgICAgICAgLy8gQmluZCAkbG9jYXRpb25DaGFuZ2VTdWNjZXNzIHRvIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBpbiBMb2NhdGlvblNlcnZpY2Uub25DaGFuZ2VcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fdXJsTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGV2dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBfbG9jID0gdmFsKCRsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBfYnJvd3NlciA9IHZhbCgkYnJvd3Nlcik7XHJcbiAgICAgICAgICAgIC8vIEJpbmQgdGhlc2UgTG9jYXRpb25TZXJ2aWNlIGZ1bmN0aW9ucyB0byAkbG9jYXRpb25cclxuICAgICAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgW1wicmVwbGFjZVwiLCBcInBhdGhcIiwgXCJzZWFyY2hcIiwgXCJoYXNoXCJdKTtcclxuICAgICAgICAgICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXHJcbiAgICAgICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKF9sb2MsIHRoaXMsIF9sb2MsIFsncG9ydCcsICdwcm90b2NvbCcsICdob3N0J10pO1xyXG4gICAgICAgICAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uQ29uZmlnIGZ1bmN0aW9ucyB0byAkYnJvd3NlclxyXG4gICAgICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfYnJvd3NlciwgdGhpcywgX2Jyb3dzZXIsIFsnYmFzZUhyZWYnXSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcHBseXMgbmcxLXNwZWNpZmljIHBhdGggcGFyYW1ldGVyIGVuY29kaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgQW5ndWxhciAxIGAkbG9jYXRpb25gIHNlcnZpY2UgaXMgYSBiaXQgd2VpcmQuXHJcbiAgICAgICAgICogSXQgZG9lc24ndCBhbGxvdyBzbGFzaGVzIHRvIGJlIGVuY29kZWQvZGVjb2RlZCBiaS1kaXJlY3Rpb25hbGx5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogU2VlIHRoZSB3cml0ZXVwIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlci9pc3N1ZXMvMjU5OFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBjb2RlIHBhdGNoZXMgdGhlIGBwYXRoYCBwYXJhbWV0ZXIgdHlwZSBzbyBpdCBlbmNvZGVkL2RlY29kZXMgc2xhc2hlcyBhcyB+MkZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBOZzFMb2NhdGlvblNlcnZpY2VzLm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoVHlwZSA9IHJvdXRlci51cmxNYXRjaGVyRmFjdG9yeS50eXBlKCdwYXRoJyk7XHJcbiAgICAgICAgICAgIHBhdGhUeXBlLmVuY29kZSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWwgIT0gbnVsbCA/IHZhbC50b1N0cmluZygpLnJlcGxhY2UoLyh+fFxcLykvZywgZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAnfic6ICd+ficsICcvJzogJ34yRicgfVttXTtcclxuICAgICAgICAgICAgICAgIH0pIDogdmFsO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwYXRoVHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsICE9IG51bGwgPyB2YWwudG9TdHJpbmcoKS5yZXBsYWNlKC8ofn58fjJGKS9nLCBmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7ICd+fic6ICd+JywgJ34yRic6ICcvJyB9W21dO1xyXG4gICAgICAgICAgICAgICAgfSkgOiB2YWw7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gTmcxTG9jYXRpb25TZXJ2aWNlcztcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKiogQG1vZHVsZSB1cmwgKi8gLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIE1hbmFnZXMgcnVsZXMgZm9yIGNsaWVudC1zaWRlIFVSTFxyXG4gICAgICpcclxuICAgICAqICMjIyBEZXByZWNhdGlvbiB3YXJuaW5nOlxyXG4gICAgICogVGhpcyBjbGFzcyBpcyBub3cgY29uc2lkZXJlZCB0byBiZSBhbiBpbnRlcm5hbCBBUElcclxuICAgICAqIFVzZSB0aGUgW1tVcmxTZXJ2aWNlXV0gaW5zdGVhZC5cclxuICAgICAqIEZvciBjb25maWd1cmluZyBVUkwgcnVsZXMsIHVzZSB0aGUgW1tVcmxSdWxlc0FwaV1dIHdoaWNoIGNhbiBiZSBmb3VuZCBhcyBbW1VybFNlcnZpY2UucnVsZXNdXS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNsYXNzIG1hbmFnZXMgdGhlIHJvdXRlciBydWxlcyBmb3Igd2hhdCB0byBkbyB3aGVuIHRoZSBVUkwgY2hhbmdlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHByb3ZpZGVyIHJlbWFpbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG4gICAgICpcclxuICAgICAqIEBkZXByZWNhdGVkXHJcbiAgICAgKi9cclxuICAgIHZhciBVcmxSb3V0ZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBmdW5jdGlvbiBVcmxSb3V0ZXJQcm92aWRlcihyb3V0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgICAgICB0aGlzLl91cmxSb3V0ZXIgPSByb3V0ZXIudXJsUm91dGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsUm91dGVyID0gdGhpcy5fdXJsUm91dGVyO1xyXG4gICAgICAgICAgICB1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoIXVybFJvdXRlci5pbnRlcmNlcHREZWZlcnJlZCkgdXJsUm91dGVyLmxpc3RlbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsUm91dGVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgdXJsIGhhbmRsZXIgZnVuY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBsb3cgbGV2ZWwgdXJsIGhhbmRsZXIgKGEgYHJ1bGVgKS5cclxuICAgICAgICAgKiBBIHJ1bGUgZGV0ZWN0cyBzcGVjaWZpYyBVUkwgcGF0dGVybnMgYW5kIHJldHVybnMgYSByZWRpcmVjdCwgb3IgcGVyZm9ybXMgc29tZSBhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiBhIHJ1bGUgcmV0dXJucyBhIHN0cmluZywgdGhlIFVSTCBpcyByZXBsYWNlZCB3aXRoIHRoZSBzdHJpbmcsIGFuZCBhbGwgcnVsZXMgYXJlIGZpcmVkIGFnYWluLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAgKiAgIC8vIEhlcmUncyBhbiBleGFtcGxlIG9mIGhvdyB5b3UgbWlnaHQgYWxsb3cgY2FzZSBpbnNlbnNpdGl2ZSB1cmxzXHJcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcclxuICAgICAgICAgKiAgICAgdmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpLFxyXG4gICAgICAgICAqICAgICAgICAgbm9ybWFsaXplZCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgICBpZiAocGF0aCAhPT0gbm9ybWFsaXplZCkge1xyXG4gICAgICAgICAqICAgICAgIHJldHVybiBub3JtYWxpemVkO1xyXG4gICAgICAgICAqICAgICB9XHJcbiAgICAgICAgICogICB9KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBydWxlRm5cclxuICAgICAgICAgKiBIYW5kbGVyIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYCRpbmplY3RvcmAgYW5kIGAkbG9jYXRpb25gIHNlcnZpY2VzIGFzIGFyZ3VtZW50cy5cclxuICAgICAgICAgKiBZb3UgY2FuIHVzZSB0aGVtIHRvIGRldGVjdCBhIHVybCBhbmQgcmV0dXJuIGEgZGlmZmVyZW50IHVybCBhcyBhIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4gW1tVcmxSb3V0ZXJQcm92aWRlcl1dIChgdGhpc2ApXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgVXJsUm91dGVyUHJvdmlkZXIucHJvdG90eXBlLnJ1bGUgPSBmdW5jdGlvbiAocnVsZUZuKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICghaXNGdW5jdGlvbihydWxlRm4pKSB0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBmdW5jdGlvbiBtYXRjaCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydWxlRm4oc2VydmljZXMuJGluamVjdG9yLCBfdGhpcy5fcm91dGVyLmxvY2F0aW9uU2VydmljZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBydWxlID0gbmV3IEJhc2VVcmxSdWxlKG1hdGNoLCBpZGVudGl0eSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybFJvdXRlci5ydWxlKHJ1bGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWZpbmVzIHRoZSBwYXRoIG9yIGJlaGF2aW9yIHRvIHVzZSB3aGVuIG5vIHVybCBjYW4gYmUgbWF0Y2hlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAgICAgKiBgYGBqc1xyXG4gICAgICAgICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXIucm91dGVyJ10pO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgICogICAvLyBpZiB0aGUgcGF0aCBkb2Vzbid0IG1hdGNoIGFueSBvZiB0aGUgdXJscyB5b3UgY29uZmlndXJlZFxyXG4gICAgICAgICAqICAgLy8gb3RoZXJ3aXNlIHdpbGwgdGFrZSBjYXJlIG9mIHJvdXRpbmcgdGhlIHVzZXIgdG8gdGhlXHJcbiAgICAgICAgICogICAvLyBzcGVjaWZpZWQgdXJsXHJcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvaW5kZXgnKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgLy8gRXhhbXBsZSBvZiB1c2luZyBmdW5jdGlvbiBydWxlIGFzIHBhcmFtXHJcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xyXG4gICAgICAgICAqICAgICByZXR1cm4gJy9hL3ZhbGlkL3VybCc7XHJcbiAgICAgICAgICogICB9KTtcclxuICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBydWxlXHJcbiAgICAgICAgICogVGhlIHVybCBwYXRoIHlvdSB3YW50IHRvIHJlZGlyZWN0IHRvIG9yIGEgZnVuY3Rpb24gcnVsZSB0aGF0IHJldHVybnMgdGhlIHVybCBwYXRoIG9yIHBlcmZvcm1zIGEgYCRzdGF0ZS5nbygpYC5cclxuICAgICAgICAgKiBUaGUgZnVuY3Rpb24gdmVyc2lvbiBpcyBwYXNzZWQgdHdvIHBhcmFtczogYCRpbmplY3RvcmAgYW5kIGAkbG9jYXRpb25gIHNlcnZpY2VzLCBhbmQgc2hvdWxkIHJldHVybiBhIHVybCBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IGAkdXJsUm91dGVyUHJvdmlkZXJgIC0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUub3RoZXJ3aXNlID0gZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHVybFJvdXRlciA9IHRoaXMuX3VybFJvdXRlcjtcclxuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHJ1bGUpKSB7XHJcbiAgICAgICAgICAgICAgICB1cmxSb3V0ZXIub3RoZXJ3aXNlKHJ1bGUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocnVsZSkpIHtcclxuICAgICAgICAgICAgICAgIHVybFJvdXRlci5vdGhlcndpc2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydWxlKHNlcnZpY2VzLiRpbmplY3RvciwgX3RoaXMuX3JvdXRlci5sb2NhdGlvblNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIHN0cmluZyBvciBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlcnMgYSBoYW5kbGVyIGZvciBhIGdpdmVuIHVybCBtYXRjaGluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIHRoZSBoYW5kbGVyIGlzIGEgc3RyaW5nLCBpdCBpc1xyXG4gICAgICAgICAqIHRyZWF0ZWQgYXMgYSByZWRpcmVjdCwgYW5kIGlzIGludGVycG9sYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHN5bnRheCBvZiBtYXRjaFxyXG4gICAgICAgICAqIChpLmUuIGxpa2UgYFN0cmluZy5yZXBsYWNlKClgIGZvciBgUmVnRXhwYCwgb3IgbGlrZSBhIGBVcmxNYXRjaGVyYCBwYXR0ZXJuIG90aGVyd2lzZSkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBJZiB0aGUgaGFuZGxlciBpcyBhIGZ1bmN0aW9uLCBpdCBpcyBpbmplY3RhYmxlLlxyXG4gICAgICAgICAqIEl0IGdldHMgaW52b2tlZCBpZiBgJGxvY2F0aW9uYCBtYXRjaGVzLlxyXG4gICAgICAgICAqIFlvdSBoYXZlIHRoZSBvcHRpb24gb2YgaW5qZWN0IHRoZSBtYXRjaCBvYmplY3QgYXMgYCRtYXRjaGAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgaGFuZGxlciBjYW4gcmV0dXJuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtICoqZmFsc3kqKiB0byBpbmRpY2F0ZSB0aGF0IHRoZSBydWxlIGRpZG4ndCBtYXRjaCBhZnRlciBhbGwsIHRoZW4gYCR1cmxSb3V0ZXJgXHJcbiAgICAgICAgICogICB3aWxsIGNvbnRpbnVlIHRyeWluZyB0byBmaW5kIGFub3RoZXIgb25lIHRoYXQgbWF0Y2hlcy5cclxuICAgICAgICAgKiAtICoqc3RyaW5nKiogd2hpY2ggaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0IGFuZCBwYXNzZWQgdG8gYCRsb2NhdGlvbi51cmwoKWBcclxuICAgICAgICAgKiAtICoqdm9pZCoqIG9yIGFueSAqKnRydXRoeSoqIHZhbHVlIHRlbGxzIGAkdXJsUm91dGVyYCB0aGF0IHRoZSB1cmwgd2FzIGhhbmRsZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgICAgICogYGBganNcclxuICAgICAgICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyLnJvdXRlciddKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJHN0YXRlLnVybCwgZnVuY3Rpb24gKCRtYXRjaCwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICogICAgIGlmICgkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlICE9PSBzdGF0ZSB8fFxyXG4gICAgICAgICAqICAgICAgICAgIWVxdWFsRm9yS2V5cygkbWF0Y2gsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICAqICAgICAgJHN0YXRlLnRyYW5zaXRpb25UbyhzdGF0ZSwgJG1hdGNoLCBmYWxzZSk7XHJcbiAgICAgICAgICogICAgIH1cclxuICAgICAgICAgKiAgIH0pO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHdoYXQgQSBwYXR0ZXJuIHN0cmluZyB0byBtYXRjaCwgY29tcGlsZWQgYXMgYSBbW1VybE1hdGNoZXJdXS5cclxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgcGF0aCAob3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCkgdGhhdCB5b3Ugd2FudCB0byByZWRpcmVjdCB5b3VyIHVzZXIgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIHJ1bGVDYWxsYmFjayBbb3B0aW9uYWxdIEEgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyB0aGUgYHJ1bGVgIHJlZ2lzdGVyZWQgd2l0aCBbW1VybE1hdGNoZXIucnVsZV1dXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBOb3RlOiB0aGUgaGFuZGxlciBtYXkgYWxzbyBpbnZva2UgYXJiaXRyYXJ5IGNvZGUsIHN1Y2ggYXMgYCRzdGF0ZS5nbygpYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS53aGVuID0gZnVuY3Rpb24gKHdoYXQsIGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcikgfHwgaXNGdW5jdGlvbihoYW5kbGVyKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IFVybFJvdXRlclByb3ZpZGVyLmluamVjdGFibGVIYW5kbGVyKHRoaXMuX3JvdXRlciwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdXJsUm91dGVyLndoZW4od2hhdCwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLmluamVjdGFibGVIYW5kbGVyID0gZnVuY3Rpb24gKHJvdXRlciwgaGFuZGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJGluamVjdG9yLmludm9rZShoYW5kbGVyLCBudWxsLCB7ICRtYXRjaDogbWF0Y2gsICRzdGF0ZVBhcmFtczogcm91dGVyLmdsb2JhbHMucGFyYW1zIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlzYWJsZXMgbW9uaXRvcmluZyBvZiB0aGUgVVJMLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQ2FsbCB0aGlzIG1ldGhvZCBiZWZvcmUgVUktUm91dGVyIGhhcyBib290c3RyYXBwZWQuXHJcbiAgICAgICAgICogSXQgd2lsbCBzdG9wIFVJLVJvdXRlciBmcm9tIHBlcmZvcm1pbmcgdGhlIGluaXRpYWwgdXJsIHN5bmMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgdG8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBpbml0aWFsaXphdGlvbiBiZWZvcmUgdGhlIHJvdXRlciBzdGFydHMuXHJcbiAgICAgICAgICogT25jZSB0aGUgaW5pdGlhbGl6YXRpb24gaXMgY29tcGxldGUsIGNhbGwgW1tsaXN0ZW5dXSB0byB0ZWxsIFVJLVJvdXRlciB0byBzdGFydCB3YXRjaGluZyBhbmQgc3luY2hyb25pemluZyB0aGUgVVJMLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICAgICAqIGBgYGpzXHJcbiAgICAgICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAqICAgLy8gUHJldmVudCAkdXJsUm91dGVyIGZyb20gYXV0b21hdGljYWxseSBpbnRlcmNlcHRpbmcgVVJMIGNoYW5nZXM7XHJcbiAgICAgICAgICogICAkdXJsUm91dGVyUHJvdmlkZXIuZGVmZXJJbnRlcmNlcHQoKTtcclxuICAgICAgICAgKiB9KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYXBwLnJ1bihmdW5jdGlvbiAoTXlTZXJ2aWNlLCAkdXJsUm91dGVyLCAkaHR0cCkge1xyXG4gICAgICAgICAqICAgJGh0dHAuZ2V0KFwiL3N0dWZmXCIpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xyXG4gICAgICAgICAqICAgICBNeVNlcnZpY2UuZG9TdHVmZihyZXNwLmRhdGEpO1xyXG4gICAgICAgICAqICAgICAkdXJsUm91dGVyLmxpc3RlbigpO1xyXG4gICAgICAgICAqICAgICAkdXJsUm91dGVyLnN5bmMoKTtcclxuICAgICAgICAgKiAgIH0pO1xyXG4gICAgICAgICAqIH0pO1xyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlZmVyIEluZGljYXRlcyB3aGV0aGVyIHRvIGRlZmVyIGxvY2F0aW9uIGNoYW5nZSBpbnRlcmNlcHRpb24uXHJcbiAgICAgICAgICogICAgICAgIFBhc3Npbmcgbm8gcGFyYW1ldGVyIGlzIGVxdWl2YWxlbnQgdG8gYHRydWVgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdCA9IGZ1bmN0aW9uIChkZWZlcikge1xyXG4gICAgICAgICAgICB0aGlzLl91cmxSb3V0ZXIuZGVmZXJJbnRlcmNlcHQoZGVmZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBVcmxSb3V0ZXJQcm92aWRlcjtcclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICMgQW5ndWxhciAxIHR5cGVzXHJcbiAgICAgKlxyXG4gICAgICogVUktUm91dGVyIGNvcmUgcHJvdmlkZXMgdmFyaW91cyBUeXBlc2NyaXB0IHR5cGVzIHdoaWNoIHlvdSBjYW4gdXNlIGZvciBjb2RlIGNvbXBsZXRpb24gYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcywgZXRjLlxyXG4gICAgICogVGhlIGN1c3RvbWl6YXRpb25zIHRvIHRoZSBjb3JlIHR5cGVzIGZvciBBbmd1bGFyIFVJLVJvdXRlciBhcmUgZG9jdW1lbnRlZCBoZXJlLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBvcHRpb25hbCBbWyRyZXNvbHZlXV0gc2VydmljZSBpcyBhbHNvIGRvY3VtZW50ZWQgaGVyZS5cclxuICAgICAqXHJcbiAgICAgKiBAbW9kdWxlIG5nMVxyXG4gICAgICogQHByZWZlcnJlZFxyXG4gICAgICovXHJcbiAgICAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIG5nLm1vZHVsZShcInVpLnJvdXRlci5hbmd1bGFyMVwiLCBbXSk7XHJcbiAgICB2YXIgbW9kX2luaXQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5pbml0JywgW10pO1xyXG4gICAgdmFyIG1vZF91dGlsID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIudXRpbCcsIFsnbmcnLCAndWkucm91dGVyLmluaXQnXSk7XHJcbiAgICB2YXIgbW9kX3J0ciA9IG5nLm1vZHVsZSgndWkucm91dGVyLnJvdXRlcicsIFsndWkucm91dGVyLnV0aWwnXSk7XHJcbiAgICB2YXIgbW9kX3N0YXRlID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnLCBbJ3VpLnJvdXRlci5yb3V0ZXInLCAndWkucm91dGVyLnV0aWwnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xyXG4gICAgdmFyIG1vZF9tYWluID0gbmcubW9kdWxlKCd1aS5yb3V0ZXInLCBbJ3VpLnJvdXRlci5pbml0JywgJ3VpLnJvdXRlci5zdGF0ZScsICd1aS5yb3V0ZXIuYW5ndWxhcjEnXSk7XHJcbiAgICB2YXIgbW9kX2NtcHQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5jb21wYXQnLCBbJ3VpLnJvdXRlciddKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxyXG4gICAgdmFyIHJvdXRlciA9IG51bGw7XHJcbiAgICAkdWlSb3V0ZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInXTtcclxuICAgIC8qKiBUaGlzIGFuZ3VsYXIgMSBwcm92aWRlciBpbnN0YW50aWF0ZXMgYSBSb3V0ZXIgYW5kIGV4cG9zZXMgaXRzIHNlcnZpY2VzIHZpYSB0aGUgYW5ndWxhciBpbmplY3RvciAqL1xyXG4gICAgZnVuY3Rpb24gJHVpUm91dGVyKCRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBSb3V0ZXIgd2hlbiB0aGUgJHVpUm91dGVyUHJvdmlkZXIgaXMgaW5pdGlhbGl6ZWRcclxuICAgICAgICByb3V0ZXIgPSB0aGlzLnJvdXRlciA9IG5ldyBVSVJvdXRlcigpO1xyXG4gICAgICAgIHJvdXRlci5zdGF0ZVByb3ZpZGVyID0gbmV3IFN0YXRlUHJvdmlkZXIocm91dGVyLnN0YXRlUmVnaXN0cnksIHJvdXRlci5zdGF0ZVNlcnZpY2UpO1xyXG4gICAgICAgIC8vIEFwcGx5IG5nMSBzcGVjaWZpYyBTdGF0ZUJ1aWxkZXIgY29kZSBmb3IgYHZpZXdzYCwgYHJlc29sdmVgLCBhbmQgYG9uRXhpdC9SZXRhaW4vRW50ZXJgIHByb3BlcnRpZXNcclxuICAgICAgICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoXCJ2aWV3c1wiLCBuZzFWaWV3c0J1aWxkZXIpO1xyXG4gICAgICAgIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihcIm9uRXhpdFwiLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKFwib25FeGl0XCIpKTtcclxuICAgICAgICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoXCJvblJldGFpblwiLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKFwib25SZXRhaW5cIikpO1xyXG4gICAgICAgIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihcIm9uRW50ZXJcIiwgZ2V0U3RhdGVIb29rQnVpbGRlcihcIm9uRW50ZXJcIikpO1xyXG4gICAgICAgIHJvdXRlci52aWV3U2VydmljZS5fcGx1Z2luYXBpLl92aWV3Q29uZmlnRmFjdG9yeSgnbmcxJywgZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkoKSk7XHJcbiAgICAgICAgdmFyIG5nMUxvY2F0aW9uU2VydmljZSA9IHJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSByb3V0ZXIubG9jYXRpb25Db25maWcgPSBuZXcgTmcxTG9jYXRpb25TZXJ2aWNlcygkbG9jYXRpb25Qcm92aWRlcik7XHJcbiAgICAgICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlKHJvdXRlcik7XHJcbiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdDogYWxzbyBleHBvc2Ugcm91dGVyIGluc3RhbmNlIGFzICR1aVJvdXRlclByb3ZpZGVyLnJvdXRlclxyXG4gICAgICAgIHJvdXRlclsncm91dGVyJ10gPSByb3V0ZXI7XHJcbiAgICAgICAgcm91dGVyWyckZ2V0J10gPSAkZ2V0O1xyXG4gICAgICAgICRnZXQuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRicm93c2VyJywgJyRzbmlmZmVyJywgJyRyb290U2NvcGUnLCAnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnXTtcclxuICAgICAgICBmdW5jdGlvbiAkZ2V0KCRsb2NhdGlvbiwgJGJyb3dzZXIsICRzbmlmZmVyLCAkcm9vdFNjb3BlLCAkaHR0cCwgJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAgICAgbmcxTG9jYXRpb25TZXJ2aWNlLl9ydW50aW1lU2VydmljZXMoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkc25pZmZlciwgJGJyb3dzZXIpO1xyXG4gICAgICAgICAgICBkZWxldGUgcm91dGVyWydyb3V0ZXInXTtcclxuICAgICAgICAgICAgZGVsZXRlIHJvdXRlclsnJGdldCddO1xyXG4gICAgICAgICAgICByZXR1cm4gcm91dGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcm91dGVyO1xyXG4gICAgfVxyXG4gICAgdmFyIGdldFByb3ZpZGVyRm9yID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJGb3Ioc2VydmljZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gWyckdWlSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uICgkdXJwKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gJHVycC5yb3V0ZXJbc2VydmljZU5hbWVdO1xyXG4gICAgICAgICAgICBzZXJ2aWNlW1wiJGdldFwiXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgICAgICB9XTtcclxuICAgIH07XHJcbiAgICAvLyBUaGlzIGVmZmVjdGl2ZWx5IGNhbGxzICRnZXQoKSBvbiBgJHVpUm91dGVyUHJvdmlkZXJgIHRvIHRyaWdnZXIgaW5pdCAod2hlbiBuZyBlbnRlcnMgcnVudGltZSlcclxuICAgIHJ1bkJsb2NrLiRpbmplY3QgPSBbJyRpbmplY3RvcicsICckcScsICckdWlSb3V0ZXInXTtcclxuICAgIGZ1bmN0aW9uIHJ1bkJsb2NrKCRpbmplY3RvciwgJHEsICR1aVJvdXRlcikge1xyXG4gICAgICAgIHNlcnZpY2VzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcclxuICAgICAgICBzZXJ2aWNlcy4kcSA9ICRxO1xyXG4gICAgICAgIC8vIFRoZSAkaW5qZWN0b3IgaXMgbm93IGF2YWlsYWJsZS5cclxuICAgICAgICAvLyBGaW5kIGFueSByZXNvbHZhYmxlcyB0aGF0IGhhZCBkZXBlbmRlbmN5IGFubm90YXRpb24gZGVmZXJyZWRcclxuICAgICAgICAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5nZXQoKS5tYXAoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHguJCRzdGF0ZSgpLnJlc29sdmFibGVzO1xyXG4gICAgICAgIH0pLnJlZHVjZSh1bm5lc3RSLCBbXSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4LmRlcHMgPT09IFwiZGVmZXJyZWRcIjtcclxuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmRlcHMgPSAkaW5qZWN0b3IuYW5ub3RhdGUocmVzb2x2YWJsZS5yZXNvbHZlRm4sICRpbmplY3Rvci5zdHJpY3REaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxyXG4gICAgdmFyIGdldFVybFJvdXRlclByb3ZpZGVyID0gZnVuY3Rpb24gZ2V0VXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpIHtcclxuICAgICAgICByZXR1cm4gdWlSb3V0ZXIudXJsUm91dGVyUHJvdmlkZXIgPSBuZXcgVXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpO1xyXG4gICAgfTtcclxuICAgIC8vICRzdGF0ZSBzZXJ2aWNlIGFuZCAkc3RhdGVQcm92aWRlclxyXG4gICAgLy8gJHVybFJvdXRlciBzZXJ2aWNlIGFuZCAkdXJsUm91dGVyUHJvdmlkZXJcclxuICAgIHZhciBnZXRTdGF0ZVByb3ZpZGVyID0gZnVuY3Rpb24gZ2V0U3RhdGVQcm92aWRlcigpIHtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kKHJvdXRlci5zdGF0ZVByb3ZpZGVyLCB7ICRnZXQ6IGZ1bmN0aW9uICRnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZTtcclxuICAgICAgICAgICAgfSB9KTtcclxuICAgIH07XHJcbiAgICB3YXRjaERpZ2VzdHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xyXG4gICAgZnVuY3Rpb24gd2F0Y2hEaWdlc3RzKCRyb290U2NvcGUpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRyYWNlLmFwcHJveGltYXRlRGlnZXN0cysrO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbW9kX2luaXQucHJvdmlkZXIoXCIkdWlSb3V0ZXJcIiwgJHVpUm91dGVyKTtcclxuICAgIG1vZF9ydHIucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0VXJsUm91dGVyUHJvdmlkZXJdKTtcclxuICAgIG1vZF91dGlsLnByb3ZpZGVyKCckdXJsU2VydmljZScsIGdldFByb3ZpZGVyRm9yKCd1cmxTZXJ2aWNlJykpO1xyXG4gICAgbW9kX3V0aWwucHJvdmlkZXIoJyR1cmxNYXRjaGVyRmFjdG9yeScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJvdXRlci51cmxNYXRjaGVyRmFjdG9yeTtcclxuICAgIH1dKTtcclxuICAgIG1vZF91dGlsLnByb3ZpZGVyKCckdGVtcGxhdGVGYWN0b3J5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGVtcGxhdGVGYWN0b3J5KCk7XHJcbiAgICB9KTtcclxuICAgIG1vZF9zdGF0ZS5wcm92aWRlcignJHN0YXRlUmVnaXN0cnknLCBnZXRQcm92aWRlckZvcignc3RhdGVSZWdpc3RyeScpKTtcclxuICAgIG1vZF9zdGF0ZS5wcm92aWRlcignJHVpUm91dGVyR2xvYmFscycsIGdldFByb3ZpZGVyRm9yKCdnbG9iYWxzJykpO1xyXG4gICAgbW9kX3N0YXRlLnByb3ZpZGVyKCckdHJhbnNpdGlvbnMnLCBnZXRQcm92aWRlckZvcigndHJhbnNpdGlvblNlcnZpY2UnKSk7XHJcbiAgICBtb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBnZXRTdGF0ZVByb3ZpZGVyXSk7XHJcbiAgICBtb2Rfc3RhdGUuZmFjdG9yeSgnJHN0YXRlUGFyYW1zJywgWyckdWlSb3V0ZXInLCBmdW5jdGlvbiAoJHVpUm91dGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICR1aVJvdXRlci5nbG9iYWxzLnBhcmFtcztcclxuICAgIH1dKTtcclxuICAgIG1vZF9tYWluLmZhY3RvcnkoJyR2aWV3JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiByb3V0ZXIudmlld1NlcnZpY2U7XHJcbiAgICB9KTtcclxuICAgIG1vZF9tYWluLnNlcnZpY2UoXCIkdHJhY2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cmFjZTtcclxuICAgIH0pO1xyXG4gICAgbW9kX21haW4ucnVuKHdhdGNoRGlnZXN0cyk7XHJcbiAgICBtb2RfdXRpbC5ydW4oWyckdXJsTWF0Y2hlckZhY3RvcnknLCBmdW5jdGlvbiAoJHVybE1hdGNoZXJGYWN0b3J5KSB7fV0pO1xyXG4gICAgbW9kX3N0YXRlLnJ1bihbJyRzdGF0ZScsIGZ1bmN0aW9uICgkc3RhdGUpIHt9XSk7XHJcbiAgICBtb2RfcnRyLnJ1bihbJyR1cmxSb3V0ZXInLCBmdW5jdGlvbiAoJHVybFJvdXRlcikge31dKTtcclxuICAgIG1vZF9pbml0LnJ1bihydW5CbG9jayk7XHJcbiAgICAvKiogQGhpZGRlbiBUT0RPOiBmaW5kIGEgcGxhY2UgdG8gbW92ZSB0aGlzICovXHJcbiAgICB2YXIgZ2V0TG9jYWxzID0gZnVuY3Rpb24gZ2V0TG9jYWxzKGN0eCkge1xyXG4gICAgICAgIHZhciB0b2tlbnMgPSBjdHguZ2V0VG9rZW5zKCkuZmlsdGVyKGlzU3RyaW5nKTtcclxuICAgICAgICB2YXIgdHVwbGVzID0gdG9rZW5zLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHZhYmxlID0gY3R4LmdldFJlc29sdmFibGUoa2V5KTtcclxuICAgICAgICAgICAgdmFyIHdhaXRQb2xpY3kgPSBjdHguZ2V0UG9saWN5KHJlc29sdmFibGUpLmFzeW5jO1xyXG4gICAgICAgICAgICByZXR1cm4gW2tleSwgd2FpdFBvbGljeSA9PT0gJ05PV0FJVCcgPyByZXNvbHZhYmxlLnByb21pc2UgOiByZXNvbHZhYmxlLmRhdGFdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0dXBsZXMucmVkdWNlKGFwcGx5UGFpcnMsIHt9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAjIEFuZ3VsYXIgMSBpbmplY3RhYmxlIHNlcnZpY2VzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyBhIGxpc3Qgb2YgdGhlIG9iamVjdHMgd2hpY2ggY2FuIGJlIGluamVjdGVkIHVzaW5nIGFuZ3VsYXIncyBpbmplY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBUaGVyZSBhcmUgdGhyZWUgZGlmZmVyZW50IGtpbmQgb2YgaW5qZWN0YWJsZSBvYmplY3RzOlxyXG4gICAgICpcclxuICAgICAqICMjICoqUHJvdmlkZXIqKiBvYmplY3RzXHJcbiAgICAgKiAjIyMjIGluamVjdGFibGUgaW50byBhIGAuY29uZmlnKClgIGJsb2NrIGR1cmluZyBjb25maWd0aW1lXHJcbiAgICAgKlxyXG4gICAgICogLSBbWyR1aVJvdXRlclByb3ZpZGVyXV06IFRoZSBVSS1Sb3V0ZXIgaW5zdGFuY2VcclxuICAgICAqIC0gW1skc3RhdGVQcm92aWRlcl1dOiBTdGF0ZSByZWdpc3RyYXRpb25cclxuICAgICAqIC0gW1skdHJhbnNpdGlvbnNQcm92aWRlcl1dOiBUcmFuc2l0aW9uIGhvb2tzXHJcbiAgICAgKiAtIFtbJHVybFNlcnZpY2VQcm92aWRlcl1dOiBBbGwgVVJMIHJlbGF0ZWQgcHVibGljIEFQSXNcclxuICAgICAqXHJcbiAgICAgKiAtIFtbJHVpVmlld1Njcm9sbFByb3ZpZGVyXV06IERpc2FibGUgdWktcm91dGVyIHZpZXcgc2Nyb2xsaW5nXHJcbiAgICAgKiAtIFtbJHVybFJvdXRlclByb3ZpZGVyXV06IChkZXByZWNhdGVkKSBVcmwgbWF0Y2hpbmcgcnVsZXNcclxuICAgICAqIC0gW1skdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcl1dOiAoZGVwcmVjYXRlZCkgVXJsIHBhcnNpbmcgY29uZmlnXHJcbiAgICAgKlxyXG4gICAgICogIyMgKipTZXJ2aWNlKiogb2JqZWN0c1xyXG4gICAgICogIyMjIyBpbmplY3RhYmxlIGdsb2JhbGx5IGR1cmluZyBydW50aW1lXHJcbiAgICAgKlxyXG4gICAgICogLSBbWyR1aVJvdXRlcl1dOiBUaGUgVUktUm91dGVyIGluc3RhbmNlXHJcbiAgICAgKiAtIFtbJHRyYWNlXV06IEVuYWJsZSB0cmFuc2l0aW9uIHRyYWNlL2RlYnVnXHJcbiAgICAgKiAtIFtbJHRyYW5zaXRpb25zXV06IFRyYW5zaXRpb24gaG9va3NcclxuICAgICAqIC0gW1skc3RhdGVdXTogSW1wZXJhdGl2ZSBzdGF0ZSByZWxhdGVkIEFQSXNcclxuICAgICAqIC0gW1skc3RhdGVSZWdpc3RyeV1dOiBTdGF0ZSByZWdpc3RyYXRpb25cclxuICAgICAqIC0gW1skdXJsU2VydmljZV1dOiBBbGwgVVJMIHJlbGF0ZWQgcHVibGljIEFQSXNcclxuICAgICAqIC0gW1skdWlSb3V0ZXJHbG9iYWxzXV06IEdsb2JhbCB2YXJpYWJsZXNcclxuICAgICAqIC0gW1skdWlWaWV3U2Nyb2xsXV06IFNjcm9sbCBhbiBlbGVtZW50IGludG8gdmlld1xyXG4gICAgICpcclxuICAgICAqIC0gW1skc3RhdGVQYXJhbXNdXTogKGRlcHJlY2F0ZWQpIEdsb2JhbCBzdGF0ZSBwYXJhbSB2YWx1ZXNcclxuICAgICAqIC0gW1skdXJsUm91dGVyXV06IChkZXByZWNhdGVkKSBVUkwgc3luY2hyb25pemF0aW9uXHJcbiAgICAgKiAtIFtbJHVybE1hdGNoZXJGYWN0b3J5XV06IChkZXByZWNhdGVkKSBVUkwgcGFyc2luZyBjb25maWdcclxuICAgICAqXHJcbiAgICAgKiAjIyAqKlBlci1UcmFuc2l0aW9uKiogb2JqZWN0c1xyXG4gICAgICpcclxuICAgICAqIC0gVGhlc2Uga2luZCBvZiBvYmplY3RzIGFyZSBpbmplY3RhYmxlIGludG86XHJcbiAgICAgKiAgIC0gUmVzb2x2ZXMgKFtbTmcxU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0pLFxyXG4gICAgICogICAtIFRyYW5zaXRpb24gSG9va3MgKFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dLCBldGMpLFxyXG4gICAgICogICAtIFJvdXRlZCBDb250cm9sbGVycyAoW1tOZzFWaWV3RGVjbGFyYXRpb24uY29udHJvbGxlcl1dKVxyXG4gICAgICpcclxuICAgICAqICMjIyMgRGlmZmVyZW50IGluc3RhbmNlcyBhcmUgaW5qZWN0ZWQgYmFzZWQgb24gdGhlIFtbVHJhbnNpdGlvbl1dXHJcbiAgICAgKlxyXG4gICAgICogLSBbWyR0cmFuc2l0aW9uJF1dOiBUaGUgY3VycmVudCBUcmFuc2l0aW9uIG9iamVjdFxyXG4gICAgICogLSBbWyRzdGF0ZVBhcmFtc11dOiBTdGF0ZSBwYXJhbSB2YWx1ZXMgZm9yIHBlbmRpbmcgVHJhbnNpdGlvbiAoZGVwcmVjYXRlZClcclxuICAgICAqIC0gQW55IHJlc29sdmUgZGF0YSBkZWZpbmVkIHVzaW5nIFtbTmcxU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cclxuICAgICAqXHJcbiAgICAgKiBAbmcxYXBpXHJcbiAgICAgKiBAcHJlZmVycmVkXHJcbiAgICAgKiBAbW9kdWxlIGluamVjdGFibGVzXHJcbiAgICAgKi8gLyoqICovXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjdXJyZW50IChvciBwZW5kaW5nKSBTdGF0ZSBQYXJhbWV0ZXJzXHJcbiAgICAgKlxyXG4gICAgICogQW4gaW5qZWN0YWJsZSBnbG9iYWwgKipTZXJ2aWNlIE9iamVjdCoqIHdoaWNoIGhvbGRzIHRoZSBzdGF0ZSBwYXJhbWV0ZXJzIGZvciB0aGUgbGF0ZXN0ICoqU1VDQ0VTU0ZVTCoqIHRyYW5zaXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHZhbHVlcyBhcmUgbm90IHVwZGF0ZWQgdW50aWwgKmFmdGVyKiBhIGBUcmFuc2l0aW9uYCBzdWNjZXNzZnVsbHkgY29tcGxldGVzLlxyXG4gICAgICpcclxuICAgICAqICoqQWxzbzoqKiBhbiBpbmplY3RhYmxlICoqUGVyLVRyYW5zaXRpb24gT2JqZWN0Kiogb2JqZWN0IHdoaWNoIGhvbGRzIHRoZSBwZW5kaW5nIHN0YXRlIHBhcmFtZXRlcnMgZm9yIHRoZSBwZW5kaW5nIGBUcmFuc2l0aW9uYCBjdXJyZW50bHkgcnVubmluZy5cclxuICAgICAqXHJcbiAgICAgKiAjIyMgRGVwcmVjYXRpb24gd2FybmluZzpcclxuICAgICAqXHJcbiAgICAgKiBUaGUgdmFsdWUgaW5qZWN0ZWQgZm9yIGAkc3RhdGVQYXJhbXNgIGlzIGRpZmZlcmVudCBkZXBlbmRpbmcgb24gd2hlcmUgaXQgaXMgaW5qZWN0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogLSBXaGVuIGluamVjdGVkIGludG8gYW4gYW5ndWxhciBzZXJ2aWNlLCB0aGUgb2JqZWN0IGluamVjdGVkIGlzIHRoZSBnbG9iYWwgKipTZXJ2aWNlIE9iamVjdCoqIHdpdGggdGhlIHBhcmFtZXRlciB2YWx1ZXMgZm9yIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBgVHJhbnNpdGlvbmAuXHJcbiAgICAgKiAtIFdoZW4gaW5qZWN0ZWQgaW50byB0cmFuc2l0aW9uIGhvb2tzLCByZXNvbHZlcywgb3IgdmlldyBjb250cm9sbGVycywgdGhlIG9iamVjdCBpcyB0aGUgKipQZXItVHJhbnNpdGlvbiBPYmplY3QqKiB3aXRoIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGZvciB0aGUgcnVubmluZyBgVHJhbnNpdGlvbmAuXHJcbiAgICAgKlxyXG4gICAgICogQmVjYXVzZSBvZiB0aGVzZSBjb25mdXNpbmcgZGV0YWlscywgdGhpcyBzZXJ2aWNlIGlzIGRlcHJlY2F0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEluc3RlYWQgb2YgdXNpbmcgdGhlIGdsb2JhbCBgJHN0YXRlUGFyYW1zYCBzZXJ2aWNlIG9iamVjdCxcclxuICAgICAqIGluamVjdCBbWyR1aVJvdXRlckdsb2JhbHNdXSBhbmQgdXNlIFtbVUlSb3V0ZXJHbG9iYWxzLnBhcmFtc11dXHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIE15U2VydmljZS4kaW5qZWN0ID0gWyckdWlSb3V0ZXJHbG9iYWxzJ107XHJcbiAgICAgKiBmdW5jdGlvbiBNeVNlcnZpY2UoJHVpUm91dGVyR2xvYmFscykge1xyXG4gICAgICogICByZXR1cm4ge1xyXG4gICAgICogICAgIHBhcmFtVmFsdWVzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgKiAgICAgICByZXR1cm4gJHVpUm91dGVyR2xvYmFscy5wYXJhbXM7XHJcbiAgICAgKiAgICAgfVxyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyMgSW5zdGVhZCBvZiB1c2luZyB0aGUgcGVyLXRyYW5zaXRpb24gYCRzdGF0ZVBhcmFtc2Agb2JqZWN0LFxyXG4gICAgICogaW5qZWN0IHRoZSBjdXJyZW50IGBUcmFuc2l0aW9uYCAoYXMgW1skdHJhbnNpdGlvbiRdXSkgYW5kIHVzZSBbW1RyYW5zaXRpb24ucGFyYW1zXV1cclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogTXlDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0cmFuc2l0aW9uJCddO1xyXG4gICAgICogZnVuY3Rpb24gTXlDb250cm9sbGVyKCR0cmFuc2l0aW9uJCkge1xyXG4gICAgICogICB2YXIgdXNlcm5hbWUgPSAkdHJhbnNpdGlvbiQucGFyYW1zKCkudXNlcm5hbWU7XHJcbiAgICAgKiAgIC8vIC4uIGRvIHNvbWV0aGluZyB3aXRoIHVzZXJuYW1lXHJcbiAgICAgKiB9XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAtLS1cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG9iamVjdCBjYW4gYmUgaW5qZWN0ZWQgaW50byBvdGhlciBzZXJ2aWNlcy5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIERlcHJlY2F0ZWQgRXhhbXBsZTpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBTb21lU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckc3RhdGVQYXJhbXMnXTtcclxuICAgICAqIGZ1bmN0aW9uIFNvbWVTZXJ2aWNlKCRodHRwLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAqICAgcmV0dXJuIHtcclxuICAgICAqICAgICBnZXRVc2VyOiBmdW5jdGlvbigpIHtcclxuICAgICAqICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArICRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XHJcbiAgICAgKiAgICAgfVxyXG4gICAgICogICB9XHJcbiAgICAgKiB9O1xyXG4gICAgICogYW5ndWxhci5zZXJ2aWNlKCdTb21lU2VydmljZScsIFNvbWVTZXJ2aWNlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICogQGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIyBBbmd1bGFyIDEgRGlyZWN0aXZlc1xyXG4gICAgICpcclxuICAgICAqIFRoZXNlIGFyZSB0aGUgZGlyZWN0aXZlcyBpbmNsdWRlZCBpbiBVSS1Sb3V0ZXIgZm9yIEFuZ3VsYXIgMS5cclxuICAgICAqIFRoZXNlIGRpcmVjdGl2ZXMgYXJlIHVzZWQgaW4gdGVtcGxhdGVzIHRvIGNyZWF0ZSB2aWV3cG9ydHMgYW5kIGxpbmsvbmF2aWdhdGUgdG8gc3RhdGVzLlxyXG4gICAgICpcclxuICAgICAqIEBuZzFhcGlcclxuICAgICAqIEBwcmVmZXJyZWRcclxuICAgICAqIEBtb2R1bGUgZGlyZWN0aXZlc1xyXG4gICAgICovIC8qKiBmb3IgdHlwZWRvYyAqL1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIGZ1bmN0aW9uIHBhcnNlU3RhdGVSZWYocmVmKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtc09ubHkgPSByZWYubWF0Y2goL15cXHMqKHtbXn1dKn0pXFxzKiQvKSxcclxuICAgICAgICAgICAgcGFyc2VkO1xyXG4gICAgICAgIGlmIChwYXJhbXNPbmx5KSByZWYgPSAnKCcgKyBwYXJhbXNPbmx5WzFdICsgJyknO1xyXG4gICAgICAgIHBhcnNlZCA9IHJlZi5yZXBsYWNlKC9cXG4vZywgXCIgXCIpLm1hdGNoKC9eXFxzKihbXihdKj8pXFxzKihcXCgoLiopXFwpKT9cXHMqJC8pO1xyXG4gICAgICAgIGlmICghcGFyc2VkIHx8IHBhcnNlZC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGUgcmVmICdcIiArIHJlZiArIFwiJ1wiKTtcclxuICAgICAgICByZXR1cm4geyBzdGF0ZTogcGFyc2VkWzFdIHx8IG51bGwsIHBhcmFtRXhwcjogcGFyc2VkWzNdIHx8IG51bGwgfTtcclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBmdW5jdGlvbiBzdGF0ZUNvbnRleHQoZWwpIHtcclxuICAgICAgICB2YXIgJHVpVmlldyA9IGVsLnBhcmVudCgpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtcclxuICAgICAgICB2YXIgcGF0aCA9IHBhcnNlKCckY2ZnLnBhdGgnKSgkdWlWaWV3KTtcclxuICAgICAgICByZXR1cm4gcGF0aCA/IHRhaWwocGF0aCkuc3RhdGUubmFtZSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzZWREZWYoJHN0YXRlLCAkZWxlbWVudCwgZGVmKSB7XHJcbiAgICAgICAgdmFyIHVpU3RhdGUgPSBkZWYudWlTdGF0ZSB8fCAkc3RhdGUuY3VycmVudC5uYW1lO1xyXG4gICAgICAgIHZhciB1aVN0YXRlT3B0cyA9IGV4dGVuZChkZWZhdWx0T3B0cygkZWxlbWVudCwgJHN0YXRlKSwgZGVmLnVpU3RhdGVPcHRzIHx8IHt9KTtcclxuICAgICAgICB2YXIgaHJlZiA9ICRzdGF0ZS5ocmVmKHVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0cyk7XHJcbiAgICAgICAgcmV0dXJuIHsgdWlTdGF0ZTogdWlTdGF0ZSwgdWlTdGF0ZVBhcmFtczogZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzOiB1aVN0YXRlT3B0cywgaHJlZjogaHJlZiB9O1xyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIGZ1bmN0aW9uIGdldFR5cGVJbmZvKGVsKSB7XHJcbiAgICAgICAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxyXG4gICAgICAgIHZhciBpc1N2ZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nO1xyXG4gICAgICAgIHZhciBpc0Zvcm0gPSBlbFswXS5ub2RlTmFtZSA9PT0gXCJGT1JNXCI7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXR0cjogaXNGb3JtID8gXCJhY3Rpb25cIiA6IGlzU3ZnID8gJ3hsaW5rOmhyZWYnIDogJ2hyZWYnLFxyXG4gICAgICAgICAgICBpc0FuY2hvcjogZWwucHJvcChcInRhZ05hbWVcIikudG9VcHBlckNhc2UoKSA9PT0gXCJBXCIsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZTogIWlzRm9ybVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gY2xpY2tIb29rKGVsLCAkc3RhdGUsICR0aW1lb3V0LCB0eXBlLCBnZXREZWYpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGUud2hpY2ggfHwgZS5idXR0b24sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBnZXREZWYoKTtcclxuICAgICAgICAgICAgaWYgKCEoYnV0dG9uID4gMSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkgfHwgZWwuYXR0cigndGFyZ2V0JykpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIQUNLOiBUaGlzIGlzIHRvIGFsbG93IG5nLWNsaWNrcyB0byBiZSBwcm9jZXNzZWQgYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGlzIGluaXRpYXRlZDpcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbyh0YXJnZXQudWlTdGF0ZSwgdGFyZ2V0LnVpU3RhdGVQYXJhbXMsIHRhcmdldC51aVN0YXRlT3B0cyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0ZSBoYXMgbm8gVVJMLCBpZ25vcmUgb25lIHByZXZlbnREZWZhdWx0IGZyb20gdGhlIDxhPiBkaXJlY3RpdmUuXHJcbiAgICAgICAgICAgICAgICB2YXIgaWdub3JlUHJldmVudERlZmF1bHRDb3VudCA9IHR5cGUuaXNBbmNob3IgJiYgIXRhcmdldC5ocmVmID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50LS0gPD0gMCkgJHRpbWVvdXQuY2FuY2VsKHRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gZGVmYXVsdE9wdHMoZWwsICRzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlbGF0aXZlOiBzdGF0ZUNvbnRleHQoZWwpIHx8ICRzdGF0ZS4kY3VycmVudCxcclxuICAgICAgICAgICAgaW5oZXJpdDogdHJ1ZSxcclxuICAgICAgICAgICAgc291cmNlOiBcInNyZWZcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCB1aVN0YXRlT3B0cykge1xyXG4gICAgICAgIHZhciBldmVudHM7XHJcbiAgICAgICAgaWYgKHVpU3RhdGVPcHRzKSB7XHJcbiAgICAgICAgICAgIGV2ZW50cyA9IHVpU3RhdGVPcHRzLmV2ZW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc0FycmF5KGV2ZW50cykpIHtcclxuICAgICAgICAgICAgZXZlbnRzID0gWydjbGljayddO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb24gPSBlbGVtZW50Lm9uID8gJ29uJyA6ICdiaW5kJztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGV2ZW50c18xID0gZXZlbnRzOyBfaSA8IGV2ZW50c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IGV2ZW50c18xW19pXTtcclxuICAgICAgICAgICAgZWxlbWVudFtvbl0oZXZlbnRfMSwgaG9va0ZuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG9mZiA9IGVsZW1lbnQub2ZmID8gJ29mZicgOiAndW5iaW5kJztcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBldmVudHNfMiA9IGV2ZW50czsgX2kgPCBldmVudHNfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudF8yID0gZXZlbnRzXzJbX2ldO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudFtvZmZdKGV2ZW50XzIsIGhvb2tGbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogYHVpLXNyZWZgOiBBIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXHJcbiAgICAgKlxyXG4gICAgICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxyXG4gICAgICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqICMjIyBMaW5rZWQgU3RhdGVcclxuICAgICAqIFRoZSBhdHRyaWJ1dGUgdmFsdWUgb2YgdGhlIGB1aS1zcmVmYCBpcyB0aGUgbmFtZSBvZiB0aGUgc3RhdGUgdG8gbGluayB0by5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBUaGlzIHdpbGwgYWN0aXZhdGUgdGhlIGBob21lYCBzdGF0ZSB3aGVuIHRoZSBsaW5rIGlzIGNsaWNrZWQuXHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8YSB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAjIyMgUmVsYXRpdmUgTGlua3NcclxuICAgICAqIFlvdSBjYW4gYWxzbyB1c2UgcmVsYXRpdmUgc3RhdGUgcGF0aHMgd2l0aGluIGB1aS1zcmVmYCwganVzdCBsaWtlIGEgcmVsYXRpdmUgcGF0aCBwYXNzZWQgdG8gYCRzdGF0ZS5nbygpYCAoW1tTdGF0ZVNlcnZpY2UuZ29dXSkuXHJcbiAgICAgKiBZb3UganVzdCBuZWVkIHRvIGJlIGF3YXJlIHRoYXQgdGhlIHBhdGggaXMgcmVsYXRpdmUgdG8gdGhlIHN0YXRlIHRoYXQgKmNyZWF0ZWQqIHRoZSBsaW5rLlxyXG4gICAgICogVGhpcyBhbGxvd3MgYSBzdGF0ZSB0byBjcmVhdGUgYSByZWxhdGl2ZSBgdWktc3JlZmAgd2hpY2ggYWx3YXlzIHRhcmdldHMgdGhlIHNhbWUgZGVzdGluYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogQm90aCB0aGVzZSBsaW5rcyBhcmUgcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBzdGF0ZSwgZXZlbiB3aGVuIGEgY2hpbGQgc3RhdGUgaXMgY3VycmVudGx5IGFjdGl2ZS5cclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxhIHVpLXNyZWY9XCIuY2hpbGQxXCI+Y2hpbGQgMSBzdGF0ZTwvYT5cclxuICAgICAqIDxhIHVpLXNyZWY9XCIuY2hpbGQyXCI+Y2hpbGQgMiBzdGF0ZTwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoaXMgbGluayBhY3RpdmF0ZXMgdGhlIHBhcmVudCBzdGF0ZS5cclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxhIHVpLXNyZWY9XCJeXCI+UmV0dXJuPC9hPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIGhyZWZzXHJcbiAgICAgKiBJZiB0aGUgbGlua2VkIHN0YXRlIGhhcyBhIFVSTCwgdGhlIGRpcmVjdGl2ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgYW5kXHJcbiAgICAgKiB1cGRhdGUgdGhlIGBocmVmYCBhdHRyaWJ1dGUgKHVzaW5nIHRoZSBbW1N0YXRlU2VydmljZS5ocmVmXV0gIG1ldGhvZCkuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogQXNzdW1pbmcgdGhlIGB1c2Vyc2Agc3RhdGUgaGFzIGEgdXJsIG9mIGAvdXNlcnMvYFxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGEgdWktc3JlZj1cInVzZXJzXCIgaHJlZj1cIi91c2Vycy9cIj5Vc2VyczwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBQYXJhbWV0ZXIgVmFsdWVzXHJcbiAgICAgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSwgYSBgdWktc3JlZmAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxyXG4gICAgICogUGFyYW0gdmFsdWVzIGNhbiBiZSBwcm92aWRlZCBpbiB0aGUgYHVpLXNyZWZgIHZhbHVlIGFmdGVyIHRoZSBzdGF0ZSBuYW1lLCBlbmNsb3NlZCBieSBwYXJlbnRoZXNlcy5cclxuICAgICAqIFRoZSBjb250ZW50IGluc2lkZSB0aGUgcGFyZW50aGVzZXMgaXMgYW4gZXhwcmVzc2lvbiwgZXZhbHVhdGVkIHRvIHRoZSBwYXJhbWV0ZXIgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIFRoaXMgZXhhbXBsZSByZW5kZXJzIGEgbGlzdCBvZiBsaW5rcyB0byB1c2Vycy5cclxuICAgICAqIFRoZSBzdGF0ZSdzIGB1c2VySWRgIHBhcmFtZXRlciB2YWx1ZSBjb21lcyBmcm9tIGVhY2ggdXNlcidzIGB1c2VyLmlkYCBwcm9wZXJ0eS5cclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxsaSBuZy1yZXBlYXQ9XCJ1c2VyIGluIHVzZXJzXCI+XHJcbiAgICAgKiAgIDxhIHVpLXNyZWY9XCJ1c2Vycy5kZXRhaWwoeyB1c2VySWQ6IHVzZXIuaWQgfSlcIj57eyB1c2VyLmRpc3BsYXlOYW1lIH19PC9hPlxyXG4gICAgICogPC9saT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIE5vdGU6XHJcbiAgICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBleHByZXNzaW9uIGlzIGAkd2F0Y2hgZWQgZm9yIHVwZGF0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xyXG4gICAgICogWW91IGNhbiBzcGVjaWZ5IFtbVHJhbnNpdGlvbk9wdGlvbnNdXSB0byBwYXNzIHRvIFtbU3RhdGVTZXJ2aWNlLmdvXV0gYnkgdXNpbmcgdGhlIGB1aS1zcmVmLW9wdHNgIGF0dHJpYnV0ZS5cclxuICAgICAqIE9wdGlvbnMgYXJlIHJlc3RyaWN0ZWQgdG8gYGxvY2F0aW9uYCwgYGluaGVyaXRgLCBhbmQgYHJlbG9hZGAuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGEgdWktc3JlZj1cImhvbWVcIiB1aS1zcmVmLW9wdHM9XCJ7IHJlbG9hZDogdHJ1ZSB9XCI+SG9tZTwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBPdGhlciBET00gRXZlbnRzXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcclxuICAgICAqIHByb3ZpZGluZyBhbiBgZXZlbnRzYCBhcnJheSBpbiB0aGUgYHVpLXNyZWYtb3B0c2AgYXR0cmlidXRlLlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxpbnB1dCB0eXBlPVwidGV4dFwiIHVpLXNyZWY9XCJjb250YWN0c1wiIHVpLXNyZWYtb3B0cz1cInsgZXZlbnRzOiBbJ2NoYW5nZScsICdibHVyJ10gfVwiPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEhpZ2hsaWdodGluZyB0aGUgYWN0aXZlIGxpbmtcclxuICAgICAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxyXG4gICAgICpcclxuICAgICAqICMjIyBFeGFtcGxlc1xyXG4gICAgICogSWYgeW91IGhhdmUgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8YSB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XHJcbiAgICAgKiA8YSB1aS1zcmVmPVwiYWJvdXRcIj5BYm91dDwvYT5cclxuICAgICAqIDxhIHVpLXNyZWY9XCJ7cGFnZTogMn1cIj5OZXh0IHBhZ2U8L2E+XHJcbiAgICAgKlxyXG4gICAgICogPHVsPlxyXG4gICAgICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XHJcbiAgICAgKiAgICAgICAgIDxhIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPnt7IGNvbnRhY3QubmFtZSB9fTwvYT5cclxuICAgICAqICAgICA8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZW4gKGFzc3VtaW5nIHRoZSBjdXJyZW50IHN0YXRlIGlzIGBjb250YWN0c2ApIHRoZSByZW5kZXJlZCBodG1sIGluY2x1ZGluZyBocmVmcyB3b3VsZCBiZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8YSBocmVmPVwiIy9ob21lXCIgdWktc3JlZj1cImhvbWVcIj5Ib21lPC9hPlxyXG4gICAgICogPGEgaHJlZj1cIiMvYWJvdXRcIiB1aS1zcmVmPVwiYWJvdXRcIj5BYm91dDwvYT5cclxuICAgICAqIDxhIGhyZWY9XCIjL2NvbnRhY3RzP3BhZ2U9MlwiIHVpLXNyZWY9XCJ7cGFnZTogMn1cIj5OZXh0IHBhZ2U8L2E+XHJcbiAgICAgKlxyXG4gICAgICogPHVsPlxyXG4gICAgICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XHJcbiAgICAgKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzFcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5Kb2U8L2E+XHJcbiAgICAgKiAgICAgPC9saT5cclxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxyXG4gICAgICogICAgICAgICA8YSBocmVmPVwiIy9jb250YWN0cy8yXCIgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+QWxpY2U8L2E+XHJcbiAgICAgKiAgICAgPC9saT5cclxuICAgICAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxyXG4gICAgICogICAgICAgICA8YSBocmVmPVwiIy9jb250YWN0cy8zXCIgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+Qm9iPC9hPlxyXG4gICAgICogICAgIDwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICpcclxuICAgICAqIDxhIGhyZWY9XCIjL2hvbWVcIiB1aS1zcmVmPVwiaG9tZVwiIHVpLXNyZWYtb3B0cz1cIntyZWxvYWQ6IHRydWV9XCI+SG9tZTwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBOb3Rlc1xyXG4gICAgICpcclxuICAgICAqIC0gWW91IGNhbiB1c2UgYHVpLXNyZWZgIHRvIGNoYW5nZSAqKm9ubHkgdGhlIHBhcmFtZXRlciB2YWx1ZXMqKiBieSBvbWl0dGluZyB0aGUgc3RhdGUgbmFtZSBhbmQgcGFyZW50aGVzZXMuXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGEgdWktc3JlZj1cInsgbGFuZzogJ2VuJyB9XCI+RW5nbGlzaDwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIC0gQSBtaWRkbGUtY2xpY2ssIHJpZ2h0LWNsaWNrLCBvciBjdHJsLWNsaWNrIGlzIGhhbmRsZWQgKG5hdGl2ZWx5KSBieSB0aGUgYnJvd3NlciB0byBvcGVuIHRoZSBocmVmIGluIGEgbmV3IHdpbmRvdywgZm9yIGV4YW1wbGUuXHJcbiAgICAgKlxyXG4gICAgICogLSBVbmxpa2UgdGhlIHBhcmFtZXRlciB2YWx1ZXMgZXhwcmVzc2lvbiwgdGhlIHN0YXRlIG5hbWUgaXMgbm90IGAkd2F0Y2hgZWQgKGZvciBwZXJmb3JtYW5jZSByZWFzb25zKS5cclxuICAgICAqIElmIHlvdSBuZWVkIHRvIGR5bmFtaWNhbGx5IHVwZGF0ZSB0aGUgc3RhdGUgYmVpbmcgbGlua2VkIHRvLCB1c2UgdGhlIGZ1bGx5IGR5bmFtaWMgW1t1aVN0YXRlXV0gZGlyZWN0aXZlLlxyXG4gICAgICovXHJcbiAgICB2YXIgdWlTcmVmO1xyXG4gICAgdWlTcmVmID0gWyckdWlSb3V0ZXInLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAkU3RhdGVSZWZEaXJlY3RpdmUoJHVpUm91dGVyLCAkdGltZW91dCkge1xyXG4gICAgICAgIHZhciAkc3RhdGUgPSAkdWlSb3V0ZXIuc3RhdGVTZXJ2aWNlO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgdWlTcmVmQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IHVpU3JlZkFjdGl2ZVsxXSB8fCB1aVNyZWZBY3RpdmVbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgdW5saW5rSW5mb0ZuID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRm47XHJcbiAgICAgICAgICAgICAgICB2YXIgcmF3RGVmID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2V0RGVmID0gZnVuY3Rpb24gZ2V0RGVmKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciByZWYgPSBwYXJzZVN0YXRlUmVmKGF0dHJzLnVpU3JlZik7XHJcbiAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZSA9IHJlZi5zdGF0ZTtcclxuICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlT3B0cyA9IGF0dHJzLnVpU3JlZk9wdHMgPyBzY29wZS4kZXZhbChhdHRycy51aVNyZWZPcHRzKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSBnZXREZWYoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKSB1bmxpbmtJbmZvRm4oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbCkgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZWYucGFyYW1FeHByKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKHJlZi5wYXJhbUV4cHIsIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF3RGVmLnVpU3RhdGVQYXJhbXMgPSBleHRlbmQoe30sIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlUGFyYW1zID0gZXh0ZW5kKHt9LCBzY29wZS4kZXZhbChyZWYucGFyYW1FeHByKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlKSk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgJHVpUm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBob29rRm4gPSBjbGlja0hvb2soZWxlbWVudCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKTtcclxuICAgICAgICAgICAgICAgIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgcmF3RGVmLnVpU3RhdGVPcHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XTtcclxuICAgIC8qKlxyXG4gICAgICogYHVpLXN0YXRlYDogQSBmdWxseSBkeW5hbWljIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXHJcbiAgICAgKlxyXG4gICAgICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxyXG4gICAgICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqICoqVGhpcyBkaXJlY3RpdmUgaXMgdmVyeSBzaW1pbGFyIHRvIFtbdWlTcmVmXV0sIGJ1dCBpdCBgJG9ic2VydmVgcyBhbmQgYCR3YXRjaGBlcy9ldmFsdWF0ZXMgYWxsIGl0cyBpbnB1dHMuKipcclxuICAgICAqXHJcbiAgICAgKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXHJcbiAgICAgKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIExpbmtlZCBTdGF0ZVxyXG4gICAgICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiBgdWktc3RhdGVgIGlzIGFuIGV4cHJlc3Npb24gd2hpY2ggaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxyXG4gICAgICogKipUaGlzIGlzIGluIGNvbnRyYXN0IHdpdGggYHVpLXNyZWZgLCB3aGljaCB0YWtlcyBhIHN0YXRlIG5hbWUgYXMgYSBzdHJpbmcgbGl0ZXJhbC4qKlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIENyZWF0ZSBhIGxpc3Qgb2YgbGlua3MuXHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxyXG4gICAgICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIj57eyBsaW5rLmRpc3BsYXlOYW1lIH19PC9hPlxyXG4gICAgICogPC9saT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBSZWxhdGl2ZSBMaW5rc1xyXG4gICAgICogSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgcmVsYXRpdmUgcGF0aCwgaXQgaXMgcHJvY2Vzc2VkIGxpa2UgW1t1aVNyZWZdXS5cclxuICAgICAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXHJcbiAgICAgKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSByZWxhdGl2ZSBgdWktc3RhdGVgIHdoaWNoIGFsd2F5cyB0YXJnZXRzIHRoZSBzYW1lIGRlc3RpbmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqICMjIyBocmVmc1xyXG4gICAgICogSWYgdGhlIGxpbmtlZCBzdGF0ZSBoYXMgYSBVUkwsIHRoZSBkaXJlY3RpdmUgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGFuZFxyXG4gICAgICogdXBkYXRlIHRoZSBgaHJlZmAgYXR0cmlidXRlICh1c2luZyB0aGUgW1tTdGF0ZVNlcnZpY2UuaHJlZl1dICBtZXRob2QpLlxyXG4gICAgICpcclxuICAgICAqICMjIyBQYXJhbWV0ZXIgVmFsdWVzXHJcbiAgICAgKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSBleHByZXNzaW9uLCBhIGB1aS1zdGF0ZWAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxyXG4gICAgICogUGFyYW0gdmFsdWVzIHNob3VsZCBiZSBwcm92aWRlZCB1c2luZyB0aGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlLlxyXG4gICAgICogVGhlIGB1aS1zdGF0ZS1wYXJhbXNgIGF0dHJpYnV0ZSB2YWx1ZSBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgYW4gZXhwcmVzc2lvbi5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBUaGlzIGV4YW1wbGUgcmVuZGVycyBhIGxpc3Qgb2YgbGlua3Mgd2l0aCBwYXJhbSB2YWx1ZXMuXHJcbiAgICAgKiBUaGUgc3RhdGUncyBgdXNlcklkYCBwYXJhbWV0ZXIgdmFsdWUgY29tZXMgZnJvbSBlYWNoIHVzZXIncyBgdXNlci5pZGAgcHJvcGVydHkuXHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxyXG4gICAgICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIiB1aS1zdGF0ZS1wYXJhbXM9XCJsaW5rLnBhcmFtc1wiPnt7IGxpbmsuZGlzcGxheU5hbWUgfX08L2E+XHJcbiAgICAgKiA8L2xpPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xyXG4gICAgICogWW91IGNhbiBzcGVjaWZ5IFtbVHJhbnNpdGlvbk9wdGlvbnNdXSB0byBwYXNzIHRvIFtbU3RhdGVTZXJ2aWNlLmdvXV0gYnkgdXNpbmcgdGhlIGB1aS1zdGF0ZS1vcHRzYCBhdHRyaWJ1dGUuXHJcbiAgICAgKiBPcHRpb25zIGFyZSByZXN0cmljdGVkIHRvIGBsb2NhdGlvbmAsIGBpbmhlcml0YCwgYW5kIGByZWxvYWRgLlxyXG4gICAgICogVGhlIHZhbHVlIG9mIHRoZSBgdWktc3RhdGUtb3B0c2AgaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24uXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGEgdWktc3RhdGU9XCJyZXR1cm50by5zdGF0ZVwiIHVpLXN0YXRlLW9wdHM9XCJ7IHJlbG9hZDogdHJ1ZSB9XCI+SG9tZTwvYT5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBPdGhlciBET00gRXZlbnRzXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcclxuICAgICAqIHByb3ZpZGluZyBhbiBgZXZlbnRzYCBhcnJheSBpbiB0aGUgYHVpLXN0YXRlLW9wdHNgIGF0dHJpYnV0ZS5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zdGF0ZT1cImNvbnRhY3RzXCIgdWktc3RhdGUtb3B0cz1cInsgZXZlbnRzOiBbJ2NoYW5nZScsICdibHVyJ10gfVwiPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEhpZ2hsaWdodGluZyB0aGUgYWN0aXZlIGxpbmtcclxuICAgICAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxyXG4gICAgICpcclxuICAgICAqICMjIyBOb3Rlc1xyXG4gICAgICpcclxuICAgICAqIC0gWW91IGNhbiB1c2UgYHVpLXBhcmFtc2AgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBzdXBwbHlpbmcgb25seSBgdWktc3RhdGUtcGFyYW1zYC5cclxuICAgICAqICAgSG93ZXZlciwgaXQgbWlnaHQgYmUgc2ltcGxlciB0byB1c2UgW1t1aVNyZWZdXSBwYXJhbWV0ZXItb25seSBsaW5rcy5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGEgdWktc3RhdGU9XCJcIiB1aS1zdGF0ZS1wYXJhbXM9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciB1aVN0YXRlO1xyXG4gICAgdWlTdGF0ZSA9IFsnJHVpUm91dGVyJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gJFN0YXRlUmVmRHluYW1pY0RpcmVjdGl2ZSgkdWlSb3V0ZXIsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgdmFyICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogWyc/XnVpU3JlZkFjdGl2ZScsICc/XnVpU3JlZkFjdGl2ZUVxJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB1aVNyZWZBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0VHlwZUluZm8oZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlID0gdWlTcmVmQWN0aXZlWzFdIHx8IHVpU3JlZkFjdGl2ZVswXTtcclxuICAgICAgICAgICAgICAgIHZhciB1bmxpbmtJbmZvRm4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvb2tGbjtcclxuICAgICAgICAgICAgICAgIHZhciByYXdEZWYgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBnZXREZWYgPSBmdW5jdGlvbiBnZXREZWYoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NlZERlZigkc3RhdGUsIGVsZW1lbnQsIHJhd0RlZik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGlucHV0QXR0cnMgPSBbJ3VpU3RhdGUnLCAndWlTdGF0ZVBhcmFtcycsICd1aVN0YXRlT3B0cyddO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdhdGNoRGVyZWdGbnMgPSBpbnB1dEF0dHJzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY1thdHRyXSA9IG5vb3AkMSwgYWNjO1xyXG4gICAgICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSBnZXREZWYoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKSB1bmxpbmtJbmZvRm4oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbCkgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlucHV0QXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICByYXdEZWZbZmllbGRdID0gYXR0cnNbZmllbGRdID8gc2NvcGUuJGV2YWwoYXR0cnNbZmllbGRdKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoZmllbGQsIGZ1bmN0aW9uIChleHByKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoRGVyZWdGbnNbZmllbGRdKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoRGVyZWdGbnNbZmllbGRdID0gc2NvcGUuJHdhdGNoKGV4cHIsIGZ1bmN0aW9uIChuZXd2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZltmaWVsZF0gPSBuZXd2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCh1cGRhdGUpKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcclxuICAgICAgICAgICAgICAgIGlmICghdHlwZS5jbGlja2FibGUpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGhvb2tGbiA9IGNsaWNrSG9vayhlbGVtZW50LCAkc3RhdGUsICR0aW1lb3V0LCB0eXBlLCBnZXREZWYpO1xyXG4gICAgICAgICAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dO1xyXG4gICAgLyoqXHJcbiAgICAgKiBgdWktc3JlZi1hY3RpdmVgIGFuZCBgdWktc3JlZi1hY3RpdmUtZXFgOiBBIGRpcmVjdGl2ZSB0aGF0IGFkZHMgYSBDU1MgY2xhc3Mgd2hlbiBhIGB1aS1zcmVmYCBpcyBhY3RpdmVcclxuICAgICAqXHJcbiAgICAgKiBBIGRpcmVjdGl2ZSB3b3JraW5nIGFsb25nc2lkZSBbW3VpU3JlZl1dIGFuZCBbW3VpU3RhdGVdXSB0byBhZGQgY2xhc3NlcyB0byBhbiBlbGVtZW50IHdoZW4gdGhlXHJcbiAgICAgKiByZWxhdGVkIGRpcmVjdGl2ZSdzIHN0YXRlIGlzIGFjdGl2ZSAoYW5kIHJlbW92ZSB0aGVtIHdoZW4gaXQgaXMgaW5hY3RpdmUpLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcmltYXJ5IHVzZS1jYXNlIGlzIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsgaW4gbmF2aWdhdGlvbiBtZW51cyxcclxuICAgICAqIGRpc3Rpbmd1aXNoaW5nIGl0IGZyb20gdGhlIGluYWN0aXZlIG1lbnUgaXRlbXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIExpbmtpbmcgdG8gYSBgdWktc3JlZmAgb3IgYHVpLXN0YXRlYFxyXG4gICAgICogYHVpLXNyZWYtYWN0aXZlYCBjYW4gbGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIGB1aS1zcmVmYC9gdWktc3RhdGVgLCBvciBpdCBjYW4gYmUgb24gYSBwYXJlbnQgZWxlbWVudC5cclxuICAgICAqIElmIGEgYHVpLXNyZWYtYWN0aXZlYCBpcyBhIHBhcmVudCB0byBtb3JlIHRoYW4gb25lIGB1aS1zcmVmYC9gdWktc3RhdGVgLCBpdCB3aWxsIGFwcGx5IHRoZSBDU1MgY2xhc3Mgd2hlbiAqKmFueSBvZiB0aGUgbGlua3MgYXJlIGFjdGl2ZSoqLlxyXG4gICAgICpcclxuICAgICAqICMjIyBNYXRjaGluZ1xyXG4gICAgICpcclxuICAgICAqIFRoZSBgdWktc3JlZi1hY3RpdmVgIGRpcmVjdGl2ZSBhcHBsaWVzIHRoZSBDU1MgY2xhc3Mgd2hlbiB0aGUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAncyB0YXJnZXQgc3RhdGUgKipvciBhbnkgY2hpbGQgc3RhdGUgaXMgYWN0aXZlKiouXHJcbiAgICAgKiBUaGlzIGlzIGEgXCJmdXp6eSBtYXRjaFwiIHdoaWNoIHVzZXMgW1tTdGF0ZVNlcnZpY2UuaW5jbHVkZXNdXS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYHVpLXNyZWYtYWN0aXZlLWVxYCBkaXJlY3RpdmUgYXBwbGllcyB0aGUgQ1NTIGNsYXNzIHdoZW4gdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgJ3MgdGFyZ2V0IHN0YXRlIGlzIGRpcmVjdGx5IGFjdGl2ZSAobm90IHdoZW4gY2hpbGQgc3RhdGVzIGFyZSBhY3RpdmUpLlxyXG4gICAgICogVGhpcyBpcyBhbiBcImV4YWN0IG1hdGNoXCIgd2hpY2ggdXNlcyBbW1N0YXRlU2VydmljZS5pc11dLlxyXG4gICAgICpcclxuICAgICAqICMjIyBQYXJhbWV0ZXIgdmFsdWVzXHJcbiAgICAgKiBJZiB0aGUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAgaW5jbHVkZXMgcGFyYW1ldGVyIHZhbHVlcywgdGhlIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyBtdXN0IG1hdGNoIHRoZSBsaW5rJ3MgdmFsdWVzIGZvciB0aGUgbGluayB0byBiZSBoaWdobGlnaHRlZC5cclxuICAgICAqIFRoaXMgYWxsb3dzIGEgbGlzdCBvZiBsaW5rcyB0byB0aGUgc2FtZSBzdGF0ZSB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXJzIHRvIGJlIHJlbmRlcmVkLCBhbmQgdGhlIGNvcnJlY3Qgb25lIGhpZ2hsaWdodGVkLlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxsaSBuZy1yZXBlYXQ9XCJ1c2VyIGluIHVzZXJzXCIgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIj5cclxuICAgICAqICAgPGEgdWktc3JlZj1cInVzZXIuZGV0YWlscyh7IHVzZXJJZDogdXNlci5pZCB9KVwiPnt7IHVzZXIubGFzdE5hbWUgfX08L2E+XHJcbiAgICAgKiA8L2xpPlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIEV4YW1wbGVzXHJcbiAgICAgKlxyXG4gICAgICogR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZTpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDx1bD5cclxuICAgICAqICAgPGxpIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgY2xhc3M9XCJpdGVtXCI+XHJcbiAgICAgKiAgICAgPGEgaHJlZiB1aS1zcmVmPVwiYXBwLnVzZXIoe3VzZXI6ICdiaWxib2JhZ2dpbnMnfSlcIj5AYmlsYm9iYWdnaW5zPC9hPlxyXG4gICAgICogICA8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFdoZW4gdGhlIGFwcCBzdGF0ZSBpcyBgYXBwLnVzZXJgIChvciBhbnkgY2hpbGQgc3RhdGUpLFxyXG4gICAgICogYW5kIGNvbnRhaW5zIHRoZSBzdGF0ZSBwYXJhbWV0ZXIgXCJ1c2VyXCIgd2l0aCB2YWx1ZSBcImJpbGJvYmFnZ2luc1wiLFxyXG4gICAgICogdGhlIHJlc3VsdGluZyBIVE1MIHdpbGwgYXBwZWFyIGFzIChub3RlIHRoZSAnYWN0aXZlJyBjbGFzcyk6XHJcbiAgICAgKlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPHVsPlxyXG4gICAgICogICA8bGkgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiBjbGFzcz1cIml0ZW0gYWN0aXZlXCI+XHJcbiAgICAgKiAgICAgPGEgdWktc3JlZj1cImFwcC51c2VyKHt1c2VyOiAnYmlsYm9iYWdnaW5zJ30pXCIgaHJlZj1cIi91c2Vycy9iaWxib2JhZ2dpbnNcIj5AYmlsYm9iYWdnaW5zPC9hPlxyXG4gICAgICogICA8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqICMjIyBHbG9iIG1vZGVcclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBwb3NzaWJsZSB0byBwYXNzIGB1aS1zcmVmLWFjdGl2ZWAgYW4gZXhwcmVzc2lvbiB0aGF0IGV2YWx1YXRlcyB0byBhbiBvYmplY3QuXHJcbiAgICAgKiBUaGUgb2JqZWN0cyBrZXlzIHJlcHJlc2VudCBhY3RpdmUgY2xhc3MgbmFtZXMgYW5kIHZhbHVlcyByZXByZXNlbnQgdGhlIHJlc3BlY3RpdmUgc3RhdGUgbmFtZXMvZ2xvYnMuXHJcbiAgICAgKiBgdWktc3JlZi1hY3RpdmVgIHdpbGwgbWF0Y2ggaWYgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlICoqaW5jbHVkZXMqKiBhbnkgb2ZcclxuICAgICAqIHRoZSBzcGVjaWZpZWQgc3RhdGUgbmFtZXMvZ2xvYnMsIGV2ZW4gdGhlIGFic3RyYWN0IG9uZXMuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSwgd2l0aCBcImFkbWluXCIgYmVpbmcgYW4gYWJzdHJhY3Qgc3RhdGU6XHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8ZGl2IHVpLXNyZWYtYWN0aXZlPVwieydhY3RpdmUnOiAnYWRtaW4uKionfVwiPlxyXG4gICAgICogICA8YSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIHVpLXNyZWY9XCJhZG1pbi5yb2xlc1wiPlJvbGVzPC9hPlxyXG4gICAgICogPC9kaXY+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHRoZSBjdXJyZW50IHN0YXRlIGlzIFwiYWRtaW4ucm9sZXNcIiB0aGUgXCJhY3RpdmVcIiBjbGFzcyB3aWxsIGJlIGFwcGxpZWQgdG8gYm90aCB0aGUgPGRpdj4gYW5kIDxhPiBlbGVtZW50cy5cclxuICAgICAqIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgdGhlIHN0YXRlIG5hbWVzL2dsb2JzIHBhc3NlZCB0byBgdWktc3JlZi1hY3RpdmVgIG92ZXJyaWRlIGFueSBzdGF0ZSBwcm92aWRlZCBieSBhIGxpbmtlZCBgdWktc3JlZmAuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIE5vdGVzOlxyXG4gICAgICpcclxuICAgICAqIC0gVGhlIGNsYXNzIG5hbWUgaXMgaW50ZXJwb2xhdGVkICoqb25jZSoqIGR1cmluZyB0aGUgZGlyZWN0aXZlcyBsaW5rIHRpbWUgKGFueSBmdXJ0aGVyIGNoYW5nZXMgdG8gdGhlXHJcbiAgICAgKiBpbnRlcnBvbGF0ZWQgdmFsdWUgYXJlIGlnbm9yZWQpLlxyXG4gICAgICpcclxuICAgICAqIC0gTXVsdGlwbGUgY2xhc3NlcyBtYXkgYmUgc3BlY2lmaWVkIGluIGEgc3BhY2Utc2VwYXJhdGVkIGZvcm1hdDogYHVpLXNyZWYtYWN0aXZlPSdjbGFzczEgY2xhc3MyIGNsYXNzMydgXHJcbiAgICAgKi9cclxuICAgIHZhciB1aVNyZWZBY3RpdmU7XHJcbiAgICB1aVNyZWZBY3RpdmUgPSBbJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJGludGVycG9sYXRlJywgJyR1aVJvdXRlcicsIGZ1bmN0aW9uICRTdGF0ZVJlZkFjdGl2ZURpcmVjdGl2ZSgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGludGVycG9sYXRlLCAkdWlSb3V0ZXIpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogXCJBXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsIGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZXMgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFcUNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHVpU3JlZkFjdGl2ZTtcclxuICAgICAgICAgICAgICAgIC8vIFRoZXJlIHByb2JhYmx5IGlzbid0IG11Y2ggcG9pbnQgaW4gJG9ic2VydmluZyB0aGlzXHJcbiAgICAgICAgICAgICAgICAvLyB1aVNyZWZBY3RpdmUgYW5kIHVpU3JlZkFjdGl2ZUVxIHNoYXJlIHRoZSBzYW1lIGRpcmVjdGl2ZSBvYmplY3Qgd2l0aCBzb21lXHJcbiAgICAgICAgICAgICAgICAvLyBzbGlnaHQgZGlmZmVyZW5jZSBpbiBsb2dpYyByb3V0aW5nXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVFcUNsYXNzID0gJGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmVFcSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVpU3JlZkFjdGl2ZSA9ICRzY29wZS4kZXZhbCgkYXR0cnMudWlTcmVmQWN0aXZlKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLiB1aVNyZWZBY3RpdmUgaXMgbm90IGEgdmFsaWQgZXhwcmVzc2lvbi5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gdXNpbmcgJGludGVycG9sYXRlIGJlbG93XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1aVNyZWZBY3RpdmUgPSB1aVNyZWZBY3RpdmUgfHwgJGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHVpU3JlZkFjdGl2ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHVpU3JlZkFjdGl2ZSwgZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBhY3RpdmVDbGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoc3RhdGVPck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmID0gcGFyc2VTdGF0ZVJlZihzdGF0ZU9yTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGF0ZShyZWYuc3RhdGUsICRzY29wZS4kZXZhbChyZWYucGFyYW1FeHByKSwgYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBBbGxvdyB1aVNyZWYgdG8gY29tbXVuaWNhdGUgd2l0aCB1aVNyZWZBY3RpdmVbRXF1YWxzXVxyXG4gICAgICAgICAgICAgICAgdGhpcy4kJGFkZFN0YXRlSW5mbyA9IGZ1bmN0aW9uIChuZXdTdGF0ZSwgbmV3UGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgYWxyZWFkeSBnb3QgYW4gZXhwbGljaXQgc3RhdGUgcHJvdmlkZWQgYnkgdWktc3JlZi1hY3RpdmUsIHNvIHdlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hhZG93IHRoZSBvbmUgdGhhdCBjb21lcyBmcm9tIHVpLXNyZWZcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3QodWlTcmVmQWN0aXZlKSAmJiBzdGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyID0gYWRkU3RhdGUobmV3U3RhdGUsIG5ld1BhcmFtcywgdWlTcmVmQWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVyZWdpc3RlcjtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBZnRlclRyYW5zaXRpb24odHJhbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFucy5wcm9taXNlLnRoZW4odXBkYXRlLCBub29wJDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIHVwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsICR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCB1cGRhdGVBZnRlclRyYW5zaXRpb24pKTtcclxuICAgICAgICAgICAgICAgIGlmICgkdWlSb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJUcmFuc2l0aW9uKCR1aVJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkU3RhdGUoc3RhdGVOYW1lLCBzdGF0ZVBhcmFtcywgYWN0aXZlQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSAkc3RhdGUuZ2V0KHN0YXRlTmFtZSwgc3RhdGVDb250ZXh0KCRlbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlIHx8IHsgbmFtZTogc3RhdGVOYW1lIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogc3RhdGVQYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiBhY3RpdmVDbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLnB1c2goc3RhdGVJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlU3RhdGUoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb20oc3RhdGVzKShzdGF0ZUluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcm91dGUgc3RhdGVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXRDbGFzc2VzID0gZnVuY3Rpb24gc3BsaXRDbGFzc2VzKHN0cikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnNwbGl0KC9cXHMvKS5maWx0ZXIoaWRlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdldENsYXNzZXMgPSBmdW5jdGlvbiBnZXRDbGFzc2VzKHN0YXRlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVMaXN0Lm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguYWN0aXZlQ2xhc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm1hcChzcGxpdENsYXNzZXMpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxsQ2xhc3NlcyA9IGdldENsYXNzZXMoc3RhdGVzKS5jb25jYXQoc3BsaXRDbGFzc2VzKGFjdGl2ZUVxQ2xhc3MpKS5yZWR1Y2UodW5pcVIsIFtdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZnV6enlDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc3RhdGUuaW5jbHVkZXMoeC5zdGF0ZS5uYW1lLCB4LnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleGFjdGx5TWF0Y2hlc0FueSA9ICEhc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlLmlzKHguc3RhdGUubmFtZSwgeC5wYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhhY3RDbGFzc2VzID0gZXhhY3RseU1hdGNoZXNBbnkgPyBzcGxpdENsYXNzZXMoYWN0aXZlRXFDbGFzcykgOiBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWRkQ2xhc3NlcyA9IGZ1enp5Q2xhc3Nlcy5jb25jYXQoZXhhY3RDbGFzc2VzKS5yZWR1Y2UodW5pcVIsIFtdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uIChjbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpbkFycmF5KGFkZENsYXNzZXMsIGNscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50LnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1dXHJcbiAgICAgICAgfTtcclxuICAgIH1dO1xyXG4gICAgbmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5kaXJlY3RpdmUoJ3VpU3JlZicsIHVpU3JlZikuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCB1aVNyZWZBY3RpdmUpLmRpcmVjdGl2ZSgndWlTcmVmQWN0aXZlRXEnLCB1aVNyZWZBY3RpdmUpLmRpcmVjdGl2ZSgndWlTdGF0ZScsIHVpU3RhdGUpO1xyXG5cclxuICAgIC8qKiBAbW9kdWxlIG5nMSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKlxyXG4gICAgICogYGlzU3RhdGVgIEZpbHRlcjogdHJ1dGh5IGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHRoZSBwYXJhbWV0ZXJcclxuICAgICAqXHJcbiAgICAgKiBUcmFuc2xhdGVzIHRvIFtbU3RhdGVTZXJ2aWNlLmlzXV0gYCRzdGF0ZS5pcyhcInN0YXRlTmFtZVwiKWAuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGRpdiBuZy1pZj1cIidzdGF0ZU5hbWUnIHwgaXNTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaXMgJ3N0YXRlTmFtZSc8L2Rpdj5cclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICAkSXNTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcclxuICAgIGZ1bmN0aW9uICRJc1N0YXRlRmlsdGVyKCRzdGF0ZSkge1xyXG4gICAgICAgIHZhciBpc0ZpbHRlciA9IGZ1bmN0aW9uIGlzRmlsdGVyKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS5pcyhzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlzRmlsdGVyLiRzdGF0ZWZ1bCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGlzRmlsdGVyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBgaW5jbHVkZWRCeVN0YXRlYCBGaWx0ZXI6IHRydXRoeSBpZiB0aGUgY3VycmVudCBzdGF0ZSBpbmNsdWRlcyB0aGUgcGFyYW1ldGVyXHJcbiAgICAgKlxyXG4gICAgICogVHJhbnNsYXRlcyB0byBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dYCAkc3RhdGUuaXMoXCJmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lXCIpYC5cclxuICAgICAqXHJcbiAgICAgKiAjIyMjIEV4YW1wbGU6XHJcbiAgICAgKiBgYGBodG1sXHJcbiAgICAgKiA8ZGl2IG5nLWlmPVwiJ2Z1bGxPclBhcnRpYWxTdGF0ZU5hbWUnIHwgaW5jbHVkZWRCeVN0YXRlXCI+c2hvdyBpZiBzdGF0ZSBpbmNsdWRlcyAnZnVsbE9yUGFydGlhbFN0YXRlTmFtZSc8L2Rpdj5cclxuICAgICAqIGBgYFxyXG4gICAgICovXHJcbiAgICAkSW5jbHVkZWRCeVN0YXRlRmlsdGVyLiRpbmplY3QgPSBbJyRzdGF0ZSddO1xyXG4gICAgZnVuY3Rpb24gJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcigkc3RhdGUpIHtcclxuICAgICAgICB2YXIgaW5jbHVkZXNGaWx0ZXIgPSBmdW5jdGlvbiBpbmNsdWRlc0ZpbHRlcihzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkc3RhdGUuaW5jbHVkZXMoc3RhdGUsIHBhcmFtcywgb3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbmNsdWRlc0ZpbHRlci4kc3RhdGVmdWwgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBpbmNsdWRlc0ZpbHRlcjtcclxuICAgIH1cclxuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZmlsdGVyKCdpc1N0YXRlJywgJElzU3RhdGVGaWx0ZXIpLmZpbHRlcignaW5jbHVkZWRCeVN0YXRlJywgJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcik7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmcxYXBpXHJcbiAgICAgKiBAbW9kdWxlIGRpcmVjdGl2ZXNcclxuICAgICAqLyAvKiogZm9yIHR5cGVkb2MgKi9cclxuICAgIC8qKlxyXG4gICAgICogYHVpLXZpZXdgOiBBIHZpZXdwb3J0IGRpcmVjdGl2ZSB3aGljaCBpcyBmaWxsZWQgaW4gYnkgYSB2aWV3IGZyb20gdGhlIGFjdGl2ZSBzdGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiAjIyMgQXR0cmlidXRlc1xyXG4gICAgICpcclxuICAgICAqIC0gYG5hbWVgOiAoT3B0aW9uYWwpIEEgdmlldyBuYW1lLlxyXG4gICAgICogICBUaGUgbmFtZSBzaG91bGQgYmUgdW5pcXVlIGFtb25nc3QgdGhlIG90aGVyIHZpZXdzIGluIHRoZSBzYW1lIHN0YXRlLlxyXG4gICAgICogICBZb3UgY2FuIGhhdmUgdmlld3Mgb2YgdGhlIHNhbWUgbmFtZSB0aGF0IGxpdmUgaW4gZGlmZmVyZW50IHN0YXRlcy5cclxuICAgICAqICAgVGhlIHVpLXZpZXcgY2FuIGJlIHRhcmdldGVkIGluIGEgVmlldyB1c2luZyB0aGUgbmFtZSAoW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxyXG4gICAgICpcclxuICAgICAqIC0gYGF1dG9zY3JvbGxgOiBhbiBleHByZXNzaW9uLiBXaGVuIGl0IGV2YWx1YXRlcyB0byB0cnVlLCB0aGUgYHVpLXZpZXdgIHdpbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IHdoZW4gaXQgaXMgYWN0aXZhdGVkLlxyXG4gICAgICogICBVc2VzIFtbJHVpVmlld1Njcm9sbF1dIHRvIGRvIHRoZSBzY3JvbGxpbmcuXHJcbiAgICAgKlxyXG4gICAgICogLSBgb25sb2FkYDogRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuZXZlciB0aGUgdmlldyB1cGRhdGVzLlxyXG4gICAgICpcclxuICAgICAqICMjIyMgRXhhbXBsZTpcclxuICAgICAqIEEgdmlldyBjYW4gYmUgdW5uYW1lZCBvciBuYW1lZC5cclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDwhLS0gVW5uYW1lZCAtLT5cclxuICAgICAqIDxkaXYgdWktdmlldz48L2Rpdj5cclxuICAgICAqXHJcbiAgICAgKiA8IS0tIE5hbWVkIC0tPlxyXG4gICAgICogPGRpdiB1aS12aWV3PVwidmlld05hbWVcIj48L2Rpdj5cclxuICAgICAqXHJcbiAgICAgKiA8IS0tIE5hbWVkIChkaWZmZXJlbnQgc3R5bGUpIC0tPlxyXG4gICAgICogPHVpLXZpZXcgbmFtZT1cInZpZXdOYW1lXCI+PC91aS12aWV3PlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBvbmx5IGhhdmUgb25lIHVubmFtZWQgdmlldyB3aXRoaW4gYW55IHRlbXBsYXRlIChvciByb290IGh0bWwpLiBJZiB5b3UgYXJlIG9ubHkgdXNpbmcgYVxyXG4gICAgICogc2luZ2xlIHZpZXcgYW5kIGl0IGlzIHVubmFtZWQgdGhlbiB5b3UgY2FuIHBvcHVsYXRlIGl0IGxpa2Ugc286XHJcbiAgICAgKlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPGRpdiB1aS12aWV3PjwvZGl2PlxyXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAqICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcclxuICAgICAqIH0pXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBUaGUgYWJvdmUgaXMgYSBjb252ZW5pZW50IHNob3J0Y3V0IGVxdWl2YWxlbnQgdG8gc3BlY2lmeWluZyB5b3VyIHZpZXcgZXhwbGljaXRseSB3aXRoIHRoZVxyXG4gICAgICogW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0gY29uZmlnIHByb3BlcnR5LCBieSBuYW1lLCBpbiB0aGlzIGNhc2UgYW4gZW1wdHkgbmFtZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAqICAgdmlld3M6IHtcclxuICAgICAqICAgICBcIlwiOiB7XHJcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxyXG4gICAgICogICAgIH1cclxuICAgICAqICAgfVxyXG4gICAgICogfSlcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEJ1dCB0eXBpY2FsbHkgeW91J2xsIG9ubHkgdXNlIHRoZSB2aWV3cyBwcm9wZXJ0eSBpZiB5b3UgbmFtZSB5b3VyIHZpZXcgb3IgaGF2ZSBtb3JlIHRoYW4gb25lIHZpZXdcclxuICAgICAqIGluIHRoZSBzYW1lIHRlbXBsYXRlLiBUaGVyZSdzIG5vdCByZWFsbHkgYSBjb21wZWxsaW5nIHJlYXNvbiB0byBuYW1lIGEgdmlldyBpZiBpdHMgdGhlIG9ubHkgb25lLFxyXG4gICAgICogYnV0IHlvdSBjb3VsZCBpZiB5b3Ugd2FudGVkLCBsaWtlIHNvOlxyXG4gICAgICpcclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxkaXYgdWktdmlldz1cIm1haW5cIj48L2Rpdj5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWVcIiwge1xyXG4gICAgICogICB2aWV3czoge1xyXG4gICAgICogICAgIFwibWFpblwiOiB7XHJcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxyXG4gICAgICogICAgIH1cclxuICAgICAqICAgfVxyXG4gICAgICogfSlcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFJlYWxseSB0aG91Z2gsIHlvdSdsbCB1c2Ugdmlld3MgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzOlxyXG4gICAgICpcclxuICAgICAqIGBgYGh0bWxcclxuICAgICAqIDxkaXYgdWktdmlldz48L2Rpdj5cclxuICAgICAqIDxkaXYgdWktdmlldz1cImNoYXJ0XCI+PC9kaXY+XHJcbiAgICAgKiA8ZGl2IHVpLXZpZXc9XCJkYXRhXCI+PC9kaXY+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAqICAgdmlld3M6IHtcclxuICAgICAqICAgICBcIlwiOiB7XHJcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxyXG4gICAgICogICAgIH0sXHJcbiAgICAgKiAgICAgXCJjaGFydFwiOiB7XHJcbiAgICAgKiAgICAgICB0ZW1wbGF0ZTogXCI8Y2hhcnRfdGhpbmcvPlwiXHJcbiAgICAgKiAgICAgfSxcclxuICAgICAqICAgICBcImRhdGFcIjoge1xyXG4gICAgICogICAgICAgdGVtcGxhdGU6IFwiPGRhdGFfdGhpbmcvPlwiXHJcbiAgICAgKiAgICAgfVxyXG4gICAgICogICB9XHJcbiAgICAgKiB9KVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlcyBmb3IgYGF1dG9zY3JvbGxgOlxyXG4gICAgICogYGBgaHRtbFxyXG4gICAgICogPCEtLSBJZiBhdXRvc2Nyb2xsIHByZXNlbnQgd2l0aCBubyBleHByZXNzaW9uLFxyXG4gICAgICogICAgICB0aGVuIHNjcm9sbCB1aS12aWV3IGludG8gdmlldyAtLT5cclxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGwvPlxyXG4gICAgICpcclxuICAgICAqIDwhLS0gSWYgYXV0b3Njcm9sbCBwcmVzZW50IHdpdGggdmFsaWQgZXhwcmVzc2lvbixcclxuICAgICAqICAgICAgdGhlbiBzY3JvbGwgdWktdmlldyBpbnRvIHZpZXcgaWYgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZSAtLT5cclxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J3RydWUnLz5cclxuICAgICAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J2ZhbHNlJy8+XHJcbiAgICAgKiA8dWktdmlldyBhdXRvc2Nyb2xsPSdzY29wZVZhcmlhYmxlJy8+XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBSZXNvbHZlIGRhdGE6XHJcbiAgICAgKlxyXG4gICAgICogVGhlIHJlc29sdmVkIGRhdGEgZnJvbSB0aGUgc3RhdGUncyBgcmVzb2x2ZWAgYmxvY2sgaXMgcGxhY2VkIG9uIHRoZSBzY29wZSBhcyBgJHJlc29sdmVgICh0aGlzXHJcbiAgICAgKiBjYW4gYmUgY3VzdG9taXplZCB1c2luZyBbW05nMVZpZXdEZWNsYXJhdGlvbi5yZXNvbHZlQXNdXSkuICBUaGlzIGNhbiBiZSB0aGVuIGFjY2Vzc2VkIGZyb20gdGhlIHRlbXBsYXRlLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB3aGVuIGBjb250cm9sbGVyQXNgIGlzIGJlaW5nIHVzZWQsIGAkcmVzb2x2ZWAgaXMgc2V0IG9uIHRoZSBjb250cm9sbGVyIGluc3RhbmNlICphZnRlciogdGhlXHJcbiAgICAgKiBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZC4gIFRoZSBgJG9uSW5pdCgpYCBob29rIGNhbiBiZSB1c2VkIHRvIHBlcmZvcm0gaW5pdGlhbGl6YXRpb24gY29kZSB3aGljaFxyXG4gICAgICogZGVwZW5kcyBvbiBgJHJlc29sdmVgIGRhdGEuXHJcbiAgICAgKlxyXG4gICAgICogIyMjIyBFeGFtcGxlOlxyXG4gICAgICogYGBganNcclxuICAgICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xyXG4gICAgICogICB0ZW1wbGF0ZTogJzxteS1jb21wb25lbnQgdXNlcj1cIiRyZXNvbHZlLnVzZXJcIj48L215LWNvbXBvbmVudD4nLFxyXG4gICAgICogICByZXNvbHZlOiB7XHJcbiAgICAgKiAgICAgdXNlcjogZnVuY3Rpb24oVXNlclNlcnZpY2UpIHsgcmV0dXJuIFVzZXJTZXJ2aWNlLmZldGNoVXNlcigpOyB9XHJcbiAgICAgKiAgIH1cclxuICAgICAqIH0pO1xyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHZhciB1aVZpZXc7XHJcbiAgICB1aVZpZXcgPSBbJyR2aWV3JywgJyRhbmltYXRlJywgJyR1aVZpZXdTY3JvbGwnLCAnJGludGVycG9sYXRlJywgJyRxJywgZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmUoJHZpZXcsICRhbmltYXRlLCAkdWlWaWV3U2Nyb2xsLCAkaW50ZXJwb2xhdGUsICRxKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlbnRlcjogZnVuY3Rpb24gZW50ZXIoZWxlbWVudCwgdGFyZ2V0LCBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZy52ZXJzaW9uLm1pbm9yID4gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihlbGVtZW50LCBudWxsLCB0YXJnZXQpLnRoZW4oY2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIG51bGwsIHRhcmdldCwgY2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24gbGVhdmUoZWxlbWVudCwgY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmcudmVyc2lvbi5taW5vciA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCkudGhlbihjYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCwgY2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gY29uZmlnc0VxdWFsKGNvbmZpZzEsIGNvbmZpZzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZzEgPT09IGNvbmZpZzI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByb290RGF0YSA9IHtcclxuICAgICAgICAgICAgJGNmZzogeyB2aWV3RGVjbDogeyAkY29udGV4dDogJHZpZXcuX3BsdWdpbmFwaS5fcm9vdFZpZXdDb250ZXh0KCkgfSB9LFxyXG4gICAgICAgICAgICAkdWlWaWV3OiB7fVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IHtcclxuICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUNBJyxcclxuICAgICAgICAgICAgdGVybWluYWw6IHRydWUsXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiA0MDAsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcclxuICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCAkdHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgJGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzRWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWRFeHAgPSBhdHRyc1snb25sb2FkJ10gfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyc1snYXV0b3Njcm9sbCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IGdldFJlbmRlcmVyKGF0dHJzLCBzY29wZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdDb25maWcgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRlZCA9ICRlbGVtZW50LmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKSB8fCByb290RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICRpbnRlcnBvbGF0ZShhdHRyc1sndWlWaWV3J10gfHwgYXR0cnNbJ25hbWUnXSB8fCAnJykoc2NvcGUpIHx8ICckZGVmYXVsdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVVJVmlldyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHR5cGU6ICduZzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZGlyZWN0aXZlLmNvdW50KyssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZxbjogaW5oZXJpdGVkLiR1aVZpZXcuZnFuID8gaW5oZXJpdGVkLiR1aVZpZXcuZnFuICsgXCIuXCIgKyBuYW1lIDogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdVcGRhdGVkOiBjb25maWdVcGRhdGVkQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBjcmVhdGlvbkNvbnRleHQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbVBhcmVudFRhZ0NvbmZpZyA9IHBhcnNlKCckY2ZnLnZpZXdEZWNsLiRjb250ZXh0JykoaW5oZXJpdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IDx1aS12aWV3IG5hbWU9XCJmb29cIj48dWktdmlldyBuYW1lPVwiYmFyXCI+PC91aS12aWV3PjwvdWktdmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzMzNTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tUGFyZW50VGFnID0gcGFyc2UoJyR1aVZpZXcuY3JlYXRpb25Db250ZXh0JykoaW5oZXJpdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50VGFnQ29uZmlnIHx8IGZyb21QYXJlbnRUYWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoXCJMaW5raW5nXCIsIGFjdGl2ZVVJVmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlnVXBkYXRlZENhbGxiYWNrKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnICYmICEoY29uZmlnIGluc3RhbmNlb2YgTmcxVmlld0NvbmZpZykpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3NFcXVhbCh2aWV3Q29uZmlnLCBjb25maWcpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZChhY3RpdmVVSVZpZXcsIGNvbmZpZyAmJiBjb25maWcudmlld0RlY2wgJiYgY29uZmlnLnZpZXdEZWNsLiRjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldyhjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckdWlWaWV3JywgeyAkdWlWaWV3OiBhY3RpdmVVSVZpZXcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVucmVnaXN0ZXIgPSAkdmlldy5yZWdpc3RlclVJVmlldyhhY3RpdmVVSVZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudChcIkRlc3Ryb3lpbmcvVW5yZWdpc3RlcmluZ1wiLCBhY3RpdmVVSVZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xlYW51cExhc3RWaWV3KCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudChcIlJlbW92aW5nIChwcmV2aW91cykgZWxcIiwgcHJldmlvdXNFbC5kYXRhKCckdWlWaWV3JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoXCJEZXN0cm95aW5nIHNjb3BlXCIsIGFjdGl2ZVVJVmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF92aWV3RGF0YV8xID0gY3VycmVudEVsLmRhdGEoJyR1aVZpZXdBbmltJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KFwiQW5pbWF0ZSBvdXRcIiwgX3ZpZXdEYXRhXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIubGVhdmUoY3VycmVudEVsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZXdEYXRhXzEuJCRhbmltTGVhdmUucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0VsID0gY3VycmVudEVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVWaWV3KGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2NvcGUgPSBzY29wZS4kbmV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltRW50ZXIgPSAkcS5kZWZlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbUxlYXZlID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR1aVZpZXdEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNmZzogY29uZmlnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVpVmlldzogYWN0aXZlVUlWaWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkdWlWaWV3QW5pbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhbmltRW50ZXI6IGFuaW1FbnRlci5wcm9taXNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1MZWF2ZTogYW5pbUxlYXZlLnByb21pc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJGFuaW1MZWF2ZTogYW5pbUxlYXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAbmdkb2MgZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50T2YgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudFR5cGUgZW1pdHMgb24gdWktdmlldyBkaXJlY3RpdmUgc2NvcGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEZpcmVkIG9uY2UgdGhlIHZpZXcgKipiZWdpbnMgbG9hZGluZyoqLCAqYmVmb3JlKiB0aGUgRE9NIGlzIHJlbmRlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgRXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmlld05hbWUgTmFtZSBvZiB0aGUgdmlldy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Njb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkaW5nJywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWQgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24gKGNsb25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5kYXRhKCckdWlWaWV3QW5pbScsICR1aVZpZXdBbmltKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmRhdGEoJyR1aVZpZXcnLCAkdWlWaWV3RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5lbnRlcihjbG9uZSwgJGVsZW1lbnQsIGZ1bmN0aW9uIG9uVUlWaWV3RW50ZXIoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbUVudGVyLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNjb3BlKSBjdXJyZW50U2NvcGUuJGVtaXQoJyR2aWV3Q29udGVudEFuaW1hdGlvbkVuZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKSAmJiAhYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdWlWaWV3U2Nyb2xsKGNsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXBMYXN0VmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gY2xvbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBuZXdTY29wZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAbmFtZSB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXcjJHZpZXdDb250ZW50TG9hZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnRUeXBlIGVtaXRzIG9uIHVpLXZpZXcgZGlyZWN0aXZlIHNjb3BlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBGaXJlZCBvbmNlIHRoZSB2aWV3IGlzICoqbG9hZGVkKiosICphZnRlciogdGhlIERPTSBpcyByZW5kZXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGVkJywgY29uZmlnIHx8IHZpZXdDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGV2YWwob25sb2FkRXhwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xyXG4gICAgfV07XHJcbiAgICAkVmlld0RpcmVjdGl2ZUZpbGwuJGluamVjdCA9IFsnJGNvbXBpbGUnLCAnJGNvbnRyb2xsZXInLCAnJHRyYW5zaXRpb25zJywgJyR2aWV3JywgJyRxJywgJyR0aW1lb3V0J107XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmVGaWxsKCRjb21waWxlLCAkY29udHJvbGxlciwgJHRyYW5zaXRpb25zLCAkdmlldywgJHEsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgdmFyIGdldENvbnRyb2xsZXJBcyA9IHBhcnNlKCd2aWV3RGVjbC5jb250cm9sbGVyQXMnKTtcclxuICAgICAgICB2YXIgZ2V0UmVzb2x2ZUFzID0gcGFyc2UoJ3ZpZXdEZWNsLnJlc29sdmVBcycpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUNBJyxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IC00MDAsXHJcbiAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUodEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbml0aWFsID0gdEVsZW1lbnQuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgdEVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsICRlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKCckdWlWaWV3Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50Lmh0bWwoaW5pdGlhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2ZnID0gZGF0YS4kY2ZnIHx8IHsgdmlld0RlY2w6IHt9LCBnZXRUZW1wbGF0ZTogbmdfZnJvbV9pbXBvcnQubm9vcCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlQ3R4ID0gY2ZnLnBhdGggJiYgbmV3IFJlc29sdmVDb250ZXh0KGNmZy5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5odG1sKGNmZy5nZXRUZW1wbGF0ZSgkZWxlbWVudCwgcmVzb2x2ZUN0eCkgfHwgaW5pdGlhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdGaWxsKGRhdGEuJHVpVmlldywgJGVsZW1lbnQuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGluayA9ICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gY2ZnLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJBcyA9IGdldENvbnRyb2xsZXJBcyhjZmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHZlQXMgPSBnZXRSZXNvbHZlQXMoY2ZnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxzID0gcmVzb2x2ZUN0eCAmJiBnZXRMb2NhbHMocmVzb2x2ZUN0eCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVbcmVzb2x2ZUFzXSA9IGxvY2FscztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlID0gJGNvbnRyb2xsZXIoY29udHJvbGxlciwgZXh0ZW5kKHt9LCBsb2NhbHMsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJBcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXSA9IGNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW2NvbnRyb2xsZXJBc11bcmVzb2x2ZUFzXSA9IGxvY2FscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBVc2UgJHZpZXcgc2VydmljZSBhcyBhIGNlbnRyYWwgcG9pbnQgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudC1sZXZlbCBob29rc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVuLCB3aGVuIGEgY29tcG9uZW50IGlzIGNyZWF0ZWQsIHRlbGwgdGhlICR2aWV3IHNlcnZpY2UsIHNvIGl0IGNhbiBpbnZva2UgaG9va3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHZpZXcuY29tcG9uZW50TG9hZGVkKGNvbnRyb2xsZXJJbnN0YW5jZSwgeyAkc2NvcGU6IHNjb3BlLCAkZWxlbWVudDogJGVsZW1lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjb3BlLiRvbignJGRlc3Ryb3knLCAoKSA9PiAkdmlldy5jb21wb25lbnRVbmxvYWRlZChjb250cm9sbGVySW5zdGFuY2UsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGNvbnRyb2xsZXJJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBjb21wb25lbnQgdG8gYXBwZWFyIGluIHRoZSBET01cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoY2ZnLnZpZXdEZWNsLmNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNtcF8xID0gY2ZnLnZpZXdEZWNsLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtlYm9iTmFtZSA9IGtlYm9iU3RyaW5nKGNtcF8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ1JlZ2V4cF8xID0gbmV3IFJlZ0V4cChcIl4oeC18ZGF0YS0pP1wiICsga2Vib2JOYW1lICsgXCIkXCIsIFwiaVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldENvbXBvbmVudENvbnRyb2xsZXIgPSBmdW5jdGlvbiBnZXRDb21wb25lbnRDb250cm9sbGVyKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZUVsID0gW10uc2xpY2UuY2FsbCgkZWxlbWVudFswXS5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbCAmJiBlbC50YWdOYW1lICYmIHRhZ1JlZ2V4cF8xLmV4ZWMoZWwudGFnTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXJlY3RpdmVFbCAmJiBuZy5lbGVtZW50KGRpcmVjdGl2ZUVsKS5kYXRhKFwiJFwiICsgY21wXzEgKyBcIkNvbnRyb2xsZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXJlZ2lzdGVyV2F0Y2hfMSA9IHNjb3BlLiR3YXRjaChnZXRDb21wb25lbnRDb250cm9sbGVyLCBmdW5jdGlvbiAoY3RybEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN0cmxJbnN0YW5jZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGN0cmxJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyV2F0Y2hfMSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGluayhzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICB2YXIgaGFzQ29tcG9uZW50SW1wbCA9IHR5cGVvZiBuZy5tb2R1bGUoJ3VpLnJvdXRlcicpWydjb21wb25lbnQnXSA9PT0gJ2Z1bmN0aW9uJztcclxuICAgIC8qKiBAaGlkZGVuIGluY3JlbWVudGluZyBpZCAqL1xyXG4gICAgdmFyIF91aUNhbkV4aXRJZCA9IDA7XHJcbiAgICAvKiogQGhpZGRlbiBUT0RPOiBtb3ZlIHRoZXNlIGNhbGxiYWNrcyB0byAkdmlldyBhbmQvb3IgYC9ob29rcy9jb21wb25lbnRzLnRzYCBvciBzb21ldGhpbmcgKi9cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcygkcSwgJHRyYW5zaXRpb25zLCBjb250cm9sbGVySW5zdGFuY2UsICRzY29wZSwgY2ZnKSB7XHJcbiAgICAgICAgLy8gQ2FsbCAkb25Jbml0KCkgQVNBUFxyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KSAmJiAhKGNmZy52aWV3RGVjbC5jb21wb25lbnQgJiYgaGFzQ29tcG9uZW50SW1wbCkpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkluaXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IHRhaWwoY2ZnLnBhdGgpLnN0YXRlLnNlbGY7XHJcbiAgICAgICAgdmFyIGhvb2tPcHRpb25zID0geyBiaW5kOiBjb250cm9sbGVySW5zdGFuY2UgfTtcclxuICAgICAgICAvLyBBZGQgY29tcG9uZW50LWxldmVsIGhvb2sgZm9yIG9uUGFyYW1zQ2hhbmdlXHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLnVpT25QYXJhbXNDaGFuZ2VkKSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x2ZUNvbnRleHQgPSBuZXcgUmVzb2x2ZUNvbnRleHQoY2ZnLnBhdGgpO1xyXG4gICAgICAgICAgICB2YXIgdmlld0NyZWF0aW9uVHJhbnNfMSA9IHJlc29sdmVDb250ZXh0LmdldFJlc29sdmFibGUoJyR0cmFuc2l0aW9uJCcpLmRhdGE7XHJcbiAgICAgICAgICAgIC8vIEZpcmUgY2FsbGJhY2sgb24gYW55IHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxyXG4gICAgICAgICAgICB2YXIgcGFyYW1zVXBkYXRlZCA9IGZ1bmN0aW9uIHBhcmFtc1VwZGF0ZWQoJHRyYW5zaXRpb24kKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgaXMgdGhlIHNhbWUgYXMgdGhlIHZpZXcgd2FzIGNyZWF0ZWQgd2l0aGluLlxyXG4gICAgICAgICAgICAgICAgLy8gRXhpdCBlYXJseSBpZiB0aGUgJHRyYW5zaXRpb24kIHdpbGwgZXhpdCB0aGUgc3RhdGUgdGhlIHZpZXcgaXMgZm9yLlxyXG4gICAgICAgICAgICAgICAgaWYgKCR0cmFuc2l0aW9uJCA9PT0gdmlld0NyZWF0aW9uVHJhbnNfMSB8fCAkdHJhbnNpdGlvbiQuZXhpdGluZygpLmluZGV4T2Yodmlld1N0YXRlKSAhPT0gLTEpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZhciB0b1BhcmFtcyA9ICR0cmFuc2l0aW9uJC5wYXJhbXMoXCJ0b1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBmcm9tUGFyYW1zID0gJHRyYW5zaXRpb24kLnBhcmFtcyhcImZyb21cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9TY2hlbWEgPSAkdHJhbnNpdGlvbiQudHJlZUNoYW5nZXMoKS50by5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTtcclxuICAgICAgICAgICAgICAgIH0pLnJlZHVjZSh1bm5lc3RSLCBbXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVNjaGVtYSA9ICR0cmFuc2l0aW9uJC50cmVlQ2hhbmdlcygpLmZyb20ubWFwKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUucGFyYW1TY2hlbWE7XHJcbiAgICAgICAgICAgICAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xyXG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG8gcGFyYW1zIHRoYXQgaGF2ZSBkaWZmZXJlbnQgdmFsdWVzIHRoYW4gdGhlIGZyb20gcGFyYW1zXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZFRvUGFyYW1zID0gdG9TY2hlbWEuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBmcm9tU2NoZW1hLmluZGV4T2YocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHggPT09IC0xIHx8ICFmcm9tU2NoZW1hW2lkeF0udHlwZS5lcXVhbHModG9QYXJhbXNbcGFyYW0uaWRdLCBmcm9tUGFyYW1zW3BhcmFtLmlkXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgdHJpZ2dlciBjYWxsYmFjayBpZiBhIHRvIHBhcmFtIGhhcyBjaGFuZ2VkIG9yIGlzIG5ld1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWRUb1BhcmFtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZEtleXNfMSA9IGNoYW5nZWRUb1BhcmFtcy5tYXAoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIHRoZSBwYXJhbXMgdG8gb25seSBjaGFuZ2VkL25ldyB0byBwYXJhbXMuICBgJHRyYW5zaXRpb24kLnBhcmFtcygpYCBtYXkgYmUgdXNlZCB0byBnZXQgYWxsIHBhcmFtcy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWVzID0gZmlsdGVyKHRvUGFyYW1zLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWRLZXlzXzEuaW5kZXhPZihrZXkpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UudWlPblBhcmFtc0NoYW5nZWQobmV3VmFsdWVzLCAkdHJhbnNpdGlvbiQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIHBhcmFtc1VwZGF0ZWQsIGhvb2tPcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCBjb21wb25lbnQtbGV2ZWwgaG9vayBmb3IgdWlDYW5FeGl0XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLnVpQ2FuRXhpdCkpIHtcclxuICAgICAgICAgICAgdmFyIGlkXzEgPSBfdWlDYW5FeGl0SWQrKztcclxuICAgICAgICAgICAgdmFyIGNhY2hlUHJvcF8xID0gJ191aUNhbkV4aXRJZHMnO1xyXG4gICAgICAgICAgICAvLyBSZXR1cm5zIHRydWUgaWYgYSByZWRpcmVjdCB0cmFuc2l0aW9uIGFscmVhZHkgYW5zd2VyZWQgdHJ1dGh5XHJcbiAgICAgICAgICAgIHZhciBwcmV2VHJ1dGh5QW5zd2VyXzEgPSBmdW5jdGlvbiBwcmV2VHJ1dGh5QW5zd2VyXzEodHJhbnMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRyYW5zICYmICh0cmFuc1tjYWNoZVByb3BfMV0gJiYgdHJhbnNbY2FjaGVQcm9wXzFdW2lkXzFdID09PSB0cnVlIHx8IHByZXZUcnV0aHlBbnN3ZXJfMSh0cmFucy5yZWRpcmVjdGVkRnJvbSgpKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIElmIGEgdXNlciBhbnN3ZXJlZCB5ZXMsIGJ1dCB0aGUgdHJhbnNpdGlvbiB3YXMgbGF0ZXIgcmVkaXJlY3RlZCwgZG9uJ3QgYWxzbyBhc2sgZm9yIHRoZSBuZXcgcmVkaXJlY3QgdHJhbnNpdGlvblxyXG4gICAgICAgICAgICB2YXIgd3JhcHBlZEhvb2sgPSBmdW5jdGlvbiB3cmFwcGVkSG9vayh0cmFucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaWRzID0gdHJhbnNbY2FjaGVQcm9wXzFdID0gdHJhbnNbY2FjaGVQcm9wXzFdIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmV2VHJ1dGh5QW5zd2VyXzEodHJhbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRxLndoZW4oY29udHJvbGxlckluc3RhbmNlLnVpQ2FuRXhpdCh0cmFucykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHNbaWRfMV0gPSB2YWwgIT09IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBjcml0ZXJpYSA9IHsgZXhpdGluZzogdmlld1N0YXRlLm5hbWUgfTtcclxuICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdHJhbnNpdGlvbnMub25CZWZvcmUoY3JpdGVyaWEsIHdyYXBwZWRIb29rLCBob29rT3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCB1aVZpZXcpO1xyXG4gICAgbmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5kaXJlY3RpdmUoJ3VpVmlldycsICRWaWV3RGlyZWN0aXZlRmlsbCk7XHJcblxyXG4gICAgLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIGZ1bmN0aW9uICRWaWV3U2Nyb2xsUHJvdmlkZXIoKSB7XHJcbiAgICAgICAgdmFyIHVzZUFuY2hvclNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudXNlQW5jaG9yU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1c2VBbmNob3JTY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy4kZ2V0ID0gWyckYW5jaG9yU2Nyb2xsJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRhbmNob3JTY3JvbGwsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VBbmNob3JTY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkYW5jaG9yU2Nyb2xsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoJGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnRbMF0uc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgICAgICAgICAgIH0sIDAsIGZhbHNlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XTtcclxuICAgIH1cclxuICAgIG5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCAkVmlld1Njcm9sbFByb3ZpZGVyKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1haW4gZW50cnkgcG9pbnQgZm9yIGFuZ3VsYXIgMS54IGJ1aWxkXHJcbiAgICAgKiBAbW9kdWxlIG5nMVxyXG4gICAgICovIC8qKiAqL1xyXG4gICAgdmFyIGluZGV4ID0gXCJ1aS5yb3V0ZXJcIjtcclxuXHJcbiAgICBleHBvcnRzWydkZWZhdWx0J10gPSBpbmRleDtcclxuICAgIGV4cG9ydHMuY29yZSA9IGluZGV4JDE7XHJcbiAgICBleHBvcnRzLndhdGNoRGlnZXN0cyA9IHdhdGNoRGlnZXN0cztcclxuICAgIGV4cG9ydHMuZ2V0TG9jYWxzID0gZ2V0TG9jYWxzO1xyXG4gICAgZXhwb3J0cy5nZXROZzFWaWV3Q29uZmlnRmFjdG9yeSA9IGdldE5nMVZpZXdDb25maWdGYWN0b3J5O1xyXG4gICAgZXhwb3J0cy5uZzFWaWV3c0J1aWxkZXIgPSBuZzFWaWV3c0J1aWxkZXI7XHJcbiAgICBleHBvcnRzLk5nMVZpZXdDb25maWcgPSBOZzFWaWV3Q29uZmlnO1xyXG4gICAgZXhwb3J0cy5TdGF0ZVByb3ZpZGVyID0gU3RhdGVQcm92aWRlcjtcclxuICAgIGV4cG9ydHMuVXJsUm91dGVyUHJvdmlkZXIgPSBVcmxSb3V0ZXJQcm92aWRlcjtcclxuICAgIGV4cG9ydHMucm9vdCA9IHJvb3Q7XHJcbiAgICBleHBvcnRzLmZyb21Kc29uID0gZnJvbUpzb247XHJcbiAgICBleHBvcnRzLnRvSnNvbiA9IHRvSnNvbjtcclxuICAgIGV4cG9ydHMuZm9yRWFjaCA9IGZvckVhY2g7XHJcbiAgICBleHBvcnRzLmV4dGVuZCA9IGV4dGVuZDtcclxuICAgIGV4cG9ydHMuZXF1YWxzID0gZXF1YWxzO1xyXG4gICAgZXhwb3J0cy5pZGVudGl0eSA9IGlkZW50aXR5O1xyXG4gICAgZXhwb3J0cy5ub29wID0gbm9vcCQxO1xyXG4gICAgZXhwb3J0cy5jcmVhdGVQcm94eUZ1bmN0aW9ucyA9IGNyZWF0ZVByb3h5RnVuY3Rpb25zO1xyXG4gICAgZXhwb3J0cy5pbmhlcml0ID0gaW5oZXJpdDtcclxuICAgIGV4cG9ydHMuaW5BcnJheSA9IGluQXJyYXk7XHJcbiAgICBleHBvcnRzLl9pbkFycmF5ID0gX2luQXJyYXk7XHJcbiAgICBleHBvcnRzLnJlbW92ZUZyb20gPSByZW1vdmVGcm9tO1xyXG4gICAgZXhwb3J0cy5fcmVtb3ZlRnJvbSA9IF9yZW1vdmVGcm9tO1xyXG4gICAgZXhwb3J0cy5wdXNoVG8gPSBwdXNoVG87XHJcbiAgICBleHBvcnRzLl9wdXNoVG8gPSBfcHVzaFRvO1xyXG4gICAgZXhwb3J0cy5kZXJlZ0FsbCA9IGRlcmVnQWxsO1xyXG4gICAgZXhwb3J0cy5kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG4gICAgZXhwb3J0cy5tZXJnZVIgPSBtZXJnZVI7XHJcbiAgICBleHBvcnRzLmFuY2VzdG9ycyA9IGFuY2VzdG9ycztcclxuICAgIGV4cG9ydHMucGljayA9IHBpY2s7XHJcbiAgICBleHBvcnRzLm9taXQgPSBvbWl0O1xyXG4gICAgZXhwb3J0cy5wbHVjayA9IHBsdWNrO1xyXG4gICAgZXhwb3J0cy5maWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICBleHBvcnRzLmZpbmQgPSBmaW5kO1xyXG4gICAgZXhwb3J0cy5tYXBPYmogPSBtYXBPYmo7XHJcbiAgICBleHBvcnRzLm1hcCA9IG1hcDtcclxuICAgIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xyXG4gICAgZXhwb3J0cy5hbGxUcnVlUiA9IGFsbFRydWVSO1xyXG4gICAgZXhwb3J0cy5hbnlUcnVlUiA9IGFueVRydWVSO1xyXG4gICAgZXhwb3J0cy51bm5lc3RSID0gdW5uZXN0UjtcclxuICAgIGV4cG9ydHMuZmxhdHRlblIgPSBmbGF0dGVuUjtcclxuICAgIGV4cG9ydHMucHVzaFIgPSBwdXNoUjtcclxuICAgIGV4cG9ydHMudW5pcVIgPSB1bmlxUjtcclxuICAgIGV4cG9ydHMudW5uZXN0ID0gdW5uZXN0O1xyXG4gICAgZXhwb3J0cy5mbGF0dGVuID0gZmxhdHRlbjtcclxuICAgIGV4cG9ydHMuYXNzZXJ0UHJlZGljYXRlID0gYXNzZXJ0UHJlZGljYXRlO1xyXG4gICAgZXhwb3J0cy5hc3NlcnRNYXAgPSBhc3NlcnRNYXA7XHJcbiAgICBleHBvcnRzLmFzc2VydEZuID0gYXNzZXJ0Rm47XHJcbiAgICBleHBvcnRzLnBhaXJzID0gcGFpcnM7XHJcbiAgICBleHBvcnRzLmFycmF5VHVwbGVzID0gYXJyYXlUdXBsZXM7XHJcbiAgICBleHBvcnRzLmFwcGx5UGFpcnMgPSBhcHBseVBhaXJzO1xyXG4gICAgZXhwb3J0cy50YWlsID0gdGFpbDtcclxuICAgIGV4cG9ydHMuY29weSA9IGNvcHk7XHJcbiAgICBleHBvcnRzLl9leHRlbmQgPSBfZXh0ZW5kO1xyXG4gICAgZXhwb3J0cy5zaWxlbmNlVW5jYXVnaHRJblByb21pc2UgPSBzaWxlbmNlVW5jYXVnaHRJblByb21pc2U7XHJcbiAgICBleHBvcnRzLnNpbGVudFJlamVjdGlvbiA9IHNpbGVudFJlamVjdGlvbjtcclxuICAgIGV4cG9ydHMubm90SW1wbGVtZW50ZWQgPSBub3RJbXBsZW1lbnRlZDtcclxuICAgIGV4cG9ydHMuc2VydmljZXMgPSBzZXJ2aWNlcztcclxuICAgIGV4cG9ydHMuR2xvYiA9IEdsb2I7XHJcbiAgICBleHBvcnRzLmN1cnJ5ID0gY3Vycnk7XHJcbiAgICBleHBvcnRzLmNvbXBvc2UgPSBjb21wb3NlO1xyXG4gICAgZXhwb3J0cy5waXBlID0gcGlwZTtcclxuICAgIGV4cG9ydHMucHJvcCA9IHByb3A7XHJcbiAgICBleHBvcnRzLnByb3BFcSA9IHByb3BFcTtcclxuICAgIGV4cG9ydHMucGFyc2UgPSBwYXJzZTtcclxuICAgIGV4cG9ydHMubm90ID0gbm90O1xyXG4gICAgZXhwb3J0cy5hbmQgPSBhbmQ7XHJcbiAgICBleHBvcnRzLm9yID0gb3I7XHJcbiAgICBleHBvcnRzLmFsbCA9IGFsbDtcclxuICAgIGV4cG9ydHMuYW55ID0gYW55O1xyXG4gICAgZXhwb3J0cy5pcyA9IGlzO1xyXG4gICAgZXhwb3J0cy5lcSA9IGVxO1xyXG4gICAgZXhwb3J0cy52YWwgPSB2YWw7XHJcbiAgICBleHBvcnRzLmludm9rZSA9IGludm9rZTtcclxuICAgIGV4cG9ydHMucGF0dGVybiA9IHBhdHRlcm47XHJcbiAgICBleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XHJcbiAgICBleHBvcnRzLmlzRGVmaW5lZCA9IGlzRGVmaW5lZDtcclxuICAgIGV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xyXG4gICAgZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xyXG4gICAgZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcclxuICAgIGV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcclxuICAgIGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcclxuICAgIGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcclxuICAgIGV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XHJcbiAgICBleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcclxuICAgIGV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcclxuICAgIGV4cG9ydHMuaXNTdGF0ZSA9IGlzU3RhdGU7XHJcbiAgICBleHBvcnRzLmlzSW5qZWN0YWJsZSA9IGlzSW5qZWN0YWJsZTtcclxuICAgIGV4cG9ydHMuaXNQcm9taXNlID0gaXNQcm9taXNlO1xyXG4gICAgZXhwb3J0cy5RdWV1ZSA9IFF1ZXVlO1xyXG4gICAgZXhwb3J0cy5tYXhMZW5ndGggPSBtYXhMZW5ndGg7XHJcbiAgICBleHBvcnRzLnBhZFN0cmluZyA9IHBhZFN0cmluZztcclxuICAgIGV4cG9ydHMua2Vib2JTdHJpbmcgPSBrZWJvYlN0cmluZztcclxuICAgIGV4cG9ydHMuZnVuY3Rpb25Ub1N0cmluZyA9IGZ1bmN0aW9uVG9TdHJpbmc7XHJcbiAgICBleHBvcnRzLmZuVG9TdHJpbmcgPSBmblRvU3RyaW5nO1xyXG4gICAgZXhwb3J0cy5zdHJpbmdpZnkgPSBzdHJpbmdpZnk7XHJcbiAgICBleHBvcnRzLmJlZm9yZUFmdGVyU3Vic3RyID0gYmVmb3JlQWZ0ZXJTdWJzdHI7XHJcbiAgICBleHBvcnRzLmhvc3RSZWdleCA9IGhvc3RSZWdleDtcclxuICAgIGV4cG9ydHMuc3RyaXBGaWxlID0gc3RyaXBGaWxlO1xyXG4gICAgZXhwb3J0cy5zcGxpdEhhc2ggPSBzcGxpdEhhc2g7XHJcbiAgICBleHBvcnRzLnNwbGl0UXVlcnkgPSBzcGxpdFF1ZXJ5O1xyXG4gICAgZXhwb3J0cy5zcGxpdEVxdWFsID0gc3BsaXRFcXVhbDtcclxuICAgIGV4cG9ydHMudHJpbUhhc2hWYWwgPSB0cmltSGFzaFZhbDtcclxuICAgIGV4cG9ydHMuc3BsaXRPbkRlbGltID0gc3BsaXRPbkRlbGltO1xyXG4gICAgZXhwb3J0cy5qb2luTmVpZ2hib3JzUiA9IGpvaW5OZWlnaGJvcnNSO1xyXG4gICAgZXhwb3J0cy5UcmFjZSA9IFRyYWNlO1xyXG4gICAgZXhwb3J0cy50cmFjZSA9IHRyYWNlO1xyXG4gICAgZXhwb3J0cy5QYXJhbSA9IFBhcmFtO1xyXG4gICAgZXhwb3J0cy5QYXJhbVR5cGVzID0gUGFyYW1UeXBlcztcclxuICAgIGV4cG9ydHMuU3RhdGVQYXJhbXMgPSBTdGF0ZVBhcmFtcztcclxuICAgIGV4cG9ydHMuUGFyYW1UeXBlID0gUGFyYW1UeXBlO1xyXG4gICAgZXhwb3J0cy5QYXRoTm9kZSA9IFBhdGhOb2RlO1xyXG4gICAgZXhwb3J0cy5QYXRoVXRpbHMgPSBQYXRoVXRpbHM7XHJcbiAgICBleHBvcnRzLnJlc29sdmVQb2xpY2llcyA9IHJlc29sdmVQb2xpY2llcztcclxuICAgIGV4cG9ydHMuZGVmYXVsdFJlc29sdmVQb2xpY3kgPSBkZWZhdWx0UmVzb2x2ZVBvbGljeTtcclxuICAgIGV4cG9ydHMuUmVzb2x2YWJsZSA9IFJlc29sdmFibGU7XHJcbiAgICBleHBvcnRzLk5BVElWRV9JTkpFQ1RPUl9UT0tFTiA9IE5BVElWRV9JTkpFQ1RPUl9UT0tFTjtcclxuICAgIGV4cG9ydHMuUmVzb2x2ZUNvbnRleHQgPSBSZXNvbHZlQ29udGV4dDtcclxuICAgIGV4cG9ydHMucmVzb2x2YWJsZXNCdWlsZGVyID0gcmVzb2x2YWJsZXNCdWlsZGVyO1xyXG4gICAgZXhwb3J0cy5TdGF0ZUJ1aWxkZXIgPSBTdGF0ZUJ1aWxkZXI7XHJcbiAgICBleHBvcnRzLlN0YXRlT2JqZWN0ID0gU3RhdGVPYmplY3Q7XHJcbiAgICBleHBvcnRzLlN0YXRlTWF0Y2hlciA9IFN0YXRlTWF0Y2hlcjtcclxuICAgIGV4cG9ydHMuU3RhdGVRdWV1ZU1hbmFnZXIgPSBTdGF0ZVF1ZXVlTWFuYWdlcjtcclxuICAgIGV4cG9ydHMuU3RhdGVSZWdpc3RyeSA9IFN0YXRlUmVnaXN0cnk7XHJcbiAgICBleHBvcnRzLlN0YXRlU2VydmljZSA9IFN0YXRlU2VydmljZTtcclxuICAgIGV4cG9ydHMuVGFyZ2V0U3RhdGUgPSBUYXJnZXRTdGF0ZTtcclxuICAgIGV4cG9ydHMuSG9va0J1aWxkZXIgPSBIb29rQnVpbGRlcjtcclxuICAgIGV4cG9ydHMubWF0Y2hTdGF0ZSA9IG1hdGNoU3RhdGU7XHJcbiAgICBleHBvcnRzLlJlZ2lzdGVyZWRIb29rID0gUmVnaXN0ZXJlZEhvb2s7XHJcbiAgICBleHBvcnRzLm1ha2VFdmVudCA9IG1ha2VFdmVudDtcclxuICAgIGV4cG9ydHMuUmVqZWN0aW9uID0gUmVqZWN0aW9uO1xyXG4gICAgZXhwb3J0cy5UcmFuc2l0aW9uID0gVHJhbnNpdGlvbjtcclxuICAgIGV4cG9ydHMuVHJhbnNpdGlvbkhvb2sgPSBUcmFuc2l0aW9uSG9vaztcclxuICAgIGV4cG9ydHMuVHJhbnNpdGlvbkV2ZW50VHlwZSA9IFRyYW5zaXRpb25FdmVudFR5cGU7XHJcbiAgICBleHBvcnRzLmRlZmF1bHRUcmFuc09wdHMgPSBkZWZhdWx0VHJhbnNPcHRzO1xyXG4gICAgZXhwb3J0cy5UcmFuc2l0aW9uU2VydmljZSA9IFRyYW5zaXRpb25TZXJ2aWNlO1xyXG4gICAgZXhwb3J0cy5VcmxNYXRjaGVyID0gVXJsTWF0Y2hlcjtcclxuICAgIGV4cG9ydHMuVXJsTWF0Y2hlckZhY3RvcnkgPSBVcmxNYXRjaGVyRmFjdG9yeTtcclxuICAgIGV4cG9ydHMuVXJsUm91dGVyID0gVXJsUm91dGVyO1xyXG4gICAgZXhwb3J0cy5VcmxSdWxlRmFjdG9yeSA9IFVybFJ1bGVGYWN0b3J5O1xyXG4gICAgZXhwb3J0cy5CYXNlVXJsUnVsZSA9IEJhc2VVcmxSdWxlO1xyXG4gICAgZXhwb3J0cy5VcmxTZXJ2aWNlID0gVXJsU2VydmljZTtcclxuICAgIGV4cG9ydHMuVmlld1NlcnZpY2UgPSBWaWV3U2VydmljZTtcclxuICAgIGV4cG9ydHMuVUlSb3V0ZXJHbG9iYWxzID0gVUlSb3V0ZXJHbG9iYWxzO1xyXG4gICAgZXhwb3J0cy5VSVJvdXRlciA9IFVJUm91dGVyO1xyXG4gICAgZXhwb3J0cy4kcSA9ICRxO1xyXG4gICAgZXhwb3J0cy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XHJcbiAgICBleHBvcnRzLkJhc2VMb2NhdGlvblNlcnZpY2VzID0gQmFzZUxvY2F0aW9uU2VydmljZXM7XHJcbiAgICBleHBvcnRzLkhhc2hMb2NhdGlvblNlcnZpY2UgPSBIYXNoTG9jYXRpb25TZXJ2aWNlO1xyXG4gICAgZXhwb3J0cy5NZW1vcnlMb2NhdGlvblNlcnZpY2UgPSBNZW1vcnlMb2NhdGlvblNlcnZpY2U7XHJcbiAgICBleHBvcnRzLlB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSA9IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcclxuICAgIGV4cG9ydHMuTWVtb3J5TG9jYXRpb25Db25maWcgPSBNZW1vcnlMb2NhdGlvbkNvbmZpZztcclxuICAgIGV4cG9ydHMuQnJvd3NlckxvY2F0aW9uQ29uZmlnID0gQnJvd3NlckxvY2F0aW9uQ29uZmlnO1xyXG4gICAgZXhwb3J0cy5rZXlWYWxzVG9PYmplY3RSID0ga2V5VmFsc1RvT2JqZWN0UjtcclxuICAgIGV4cG9ydHMuZ2V0UGFyYW1zID0gZ2V0UGFyYW1zO1xyXG4gICAgZXhwb3J0cy5wYXJzZVVybCA9IHBhcnNlVXJsJDE7XHJcbiAgICBleHBvcnRzLmJ1aWxkVXJsID0gYnVpbGRVcmw7XHJcbiAgICBleHBvcnRzLmxvY2F0aW9uUGx1Z2luRmFjdG9yeSA9IGxvY2F0aW9uUGx1Z2luRmFjdG9yeTtcclxuICAgIGV4cG9ydHMuc2VydmljZXNQbHVnaW4gPSBzZXJ2aWNlc1BsdWdpbjtcclxuICAgIGV4cG9ydHMuaGFzaExvY2F0aW9uUGx1Z2luID0gaGFzaExvY2F0aW9uUGx1Z2luO1xyXG4gICAgZXhwb3J0cy5wdXNoU3RhdGVMb2NhdGlvblBsdWdpbiA9IHB1c2hTdGF0ZUxvY2F0aW9uUGx1Z2luO1xyXG4gICAgZXhwb3J0cy5tZW1vcnlMb2NhdGlvblBsdWdpbiA9IG1lbW9yeUxvY2F0aW9uUGx1Z2luO1xyXG4gICAgZXhwb3J0cy5VSVJvdXRlclBsdWdpbkJhc2UgPSBVSVJvdXRlclBsdWdpbkJhc2U7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItdWktcm91dGVyLmpzLm1hcCJdfQ==
